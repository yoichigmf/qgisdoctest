<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6.2. Lesson: Vector Analysis &mdash; QGIS Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/qgis_docs.css?v=5415a924" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/training_manual/vector_analysis/basic_analysis.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="6.3. Lesson: Network Analysis" href="network_analysis.html" />
    <link rel="prev" title="6.1. Lesson: Reprojecting and Transforming Data" href="reproject_transform.html" />
  <meta name="description" content="QGIS 3.34 documentation: 6.2. Lesson: Vector Analysis">
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   

          
          
          <a href="../../index.html" class="icon icon-home">
            QGIS Documentation
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.34
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">For Users</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user_manual/index.html">QGIS Desktop User Guide/Manual (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Server Guide/Manual (QGIS 3.34)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Training Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../foreword/index.html">1. Course Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic_map/index.html">2. Module: Creating and Exploring a Basic Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector_classification/index.html">3. Module: Classifying Vector Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../map_composer/index.html">4. Module: Laying out the Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create_vector_data/index.html">5. Module: Creating Vector Data</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">6. Module: Vector Analysis</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="reproject_transform.html">6.1. Lesson: Reprojecting and Transforming Data</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">6.2. Lesson: Vector Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-gis-process">6.2.1. <abbr title="Basic level">★☆☆</abbr> The GIS Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-problem">6.2.2. <abbr title="Basic level">★☆☆</abbr> The Problem</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-data">6.2.3. <abbr title="Basic level">★☆☆</abbr> The Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#follow-along-start-a-project-and-get-the-data">6.2.4. <abbr title="Basic level">★☆☆</abbr> Follow Along: Start a Project and get the Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#try-yourself-convert-layers-crs">6.2.5. <abbr title="Basic level">★☆☆</abbr> Try Yourself: Convert Layers’ CRS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#follow-along-analyzing-the-problem-distances-from-schools-and-roads">6.2.6. <abbr title="Basic level">★☆☆</abbr> Follow Along: Analyzing the Problem: Distances From Schools and Roads</a></li>
<li class="toctree-l4"><a class="reference internal" href="#try-yourself-distance-from-schools">6.2.7. <abbr title="Basic level">★☆☆</abbr> Try Yourself: Distance from schools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#follow-along-overlapping-areas">6.2.8. <abbr title="Basic level">★☆☆</abbr> Follow Along: Overlapping Areas</a></li>
<li class="toctree-l4"><a class="reference internal" href="#follow-along-extract-the-buildings">6.2.9. <abbr title="Basic level">★☆☆</abbr> Follow Along: Extract the Buildings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#try-yourself-further-filter-our-buildings">6.2.10. <abbr title="Moderate level">★★☆</abbr> Try Yourself: Further Filter our Buildings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#follow-along-select-buildings-of-the-right-size">6.2.11. <abbr title="Basic level">★☆☆</abbr> Follow Along: Select Buildings of the Right Size</a></li>
<li class="toctree-l4"><a class="reference internal" href="#try-yourself">6.2.12. <abbr title="Basic level">★☆☆</abbr> Try Yourself:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#in-conclusion">6.2.13. In Conclusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-s-next">6.2.14. What’s Next?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="network_analysis.html">6.3. Lesson: Network Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="spatial_statistics.html">6.4. Lesson: Spatial Statistics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rasters/index.html">7. Module: Rasters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../complete_analysis/index.html">8. Module: Completing the Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qgis_plugins/index.html">9. Module: Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../online_resources/index.html">10. Module: Online Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qgis_server/index.html">11. Module: QGIS Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grass/index.html">12. Module: GRASS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assessment/index.html">13. Module: Assessment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../forestry/index.html">14. Module: Forestry Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database_concepts/index.html">15. Module: Database Concepts with PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spatial_databases/index.html">16. Module: Spatial Database Concepts with PostGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing/index.html">17. The QGIS processing guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../databases/index.html">18. Module: Using Spatial Databases in QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/contribute.html">19. Appendix: Contributing To This Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/preparing_data.html">20. Preparing Exercise Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">A Gentle Introduction to GIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Writers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">Documentation Guidelines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyqgis_developer_cookbook/index.html">PyQGIS Cookbook (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">Developers Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">QGIS Training Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">6. </span>Module: Vector Analysis</a></li>
      <li class="breadcrumb-item active"><span class="section-number">6.2. </span>Lesson: Vector Analysis</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/training_manual/vector_analysis/basic_analysis.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="reproject_transform.html" class="btn btn-neutral float-left" title="6.1. Lesson: Reprojecting and Transforming Data" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="network_analysis.html" class="btn btn-neutral float-right" title="6.3. Lesson: Network Analysis" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div></div></blockquote>
<section id="lesson-vector-analysis">
<h1><span class="section-number">6.2. </span>Lesson: Vector Analysis<a class="headerlink" href="#lesson-vector-analysis" title="Link to this heading"></a></h1>
<p>Vector data can also be analyzed to reveal how different features
interact with each other in space.
There are many different analysis-related functions, so we won’t go
through them all. Rather, we will pose a question and try to solve it
using the tools that QGIS provides.</p>
<p><strong>The goal for this lesson:</strong> To ask a question and solve it using
analysis tools.</p>
<section id="the-gis-process">
<h2><span class="section-number">6.2.1. </span><abbr title="Basic level">★☆☆</abbr> The GIS Process<a class="headerlink" href="#the-gis-process" title="Link to this heading"></a></h2>
<p>Before we start, it would be useful to give a brief overview of a
process that can be used to solve a problem.
The way to go about it is:</p>
<ol class="arabic simple">
<li><p>State the Problem</p></li>
<li><p>Get the Data</p></li>
<li><p>Analyze the Problem</p></li>
<li><p>Present the Results</p></li>
</ol>
</section>
<section id="the-problem">
<h2><span class="section-number">6.2.2. </span><abbr title="Basic level">★☆☆</abbr> The Problem<a class="headerlink" href="#the-problem" title="Link to this heading"></a></h2>
<p>Let’s start off the process by deciding on a problem to solve.
For example, you are an estate agent and you are looking for a
residential property in Swellendam for clients who have the
following criteria:</p>
<ol class="arabic simple">
<li><p>It needs to be in Swellendam</p></li>
<li><p>It must be within reasonable driving distance of a school (say 1km)</p></li>
<li><p>It must be more than 100m squared in size</p></li>
<li><p>Closer than 50m to a main road</p></li>
<li><p>Closer than 500m to a restaurant</p></li>
</ol>
</section>
<section id="the-data">
<h2><span class="section-number">6.2.3. </span><abbr title="Basic level">★☆☆</abbr> The Data<a class="headerlink" href="#the-data" title="Link to this heading"></a></h2>
<p>To answer these questions, we are going to need the following data:</p>
<ol class="arabic simple">
<li><p>The residential properties (buildings) in the area</p></li>
<li><p>The roads in and around the town</p></li>
<li><p>The location of schools and restaurants</p></li>
<li><p>The size of buildings</p></li>
</ol>
<p>These data are available through OSM, and you should find that the
dataset you have been using throughout this manual also can be used
for this lesson.</p>
<p>If you want to download data from another area, jump to the
<a class="reference internal" href="../appendix/preparing_data.html#tm-preparing-data"><span class="std std-ref">Introduction Chapter</span></a> to read how to do it.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although OSM downloads have consistent data fields, the
coverage and detail does vary.
If you find that your chosen region does not contain information
on restaurants, for example, you may need to chose a different
region.</p>
</div>
</section>
<section id="follow-along-start-a-project-and-get-the-data">
<h2><span class="section-number">6.2.4. </span><abbr title="Basic level">★☆☆</abbr> Follow Along: Start a Project and get the Data<a class="headerlink" href="#follow-along-start-a-project-and-get-the-data" title="Link to this heading"></a></h2>
<p>We first need to load the data to work with.</p>
<ol class="arabic">
<li><p>Start a new QGIS project</p></li>
<li><p>If you want, you can add a background map. Open the
<span class="guilabel">Browser</span> and load the <span class="guilabel">OSM</span> background map
from the <span class="guilabel">XYZ Tiles</span> menu.</p>
<figure class="align-center">
<img alt="../../../_images/osm_swellendam.png" src="../../../_images/osm_swellendam.png" />
</figure>
</li>
<li><p>In the <code class="file docutils literal notranslate"><span class="pre">training_data.gpkg</span></code> Geopackage database, you will
find most the datasets we will use in this chapter:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">buildings</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">roads</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">restaurants</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">schools</span></code></p></li>
</ol>
<p>Load them, and also <code class="file docutils literal notranslate"><span class="pre">landuse.sqlite</span></code>.</p>
</li>
<li><p>Zoom to the layer extent to see Swellendam, South Africa</p>
<p>Before proceeding we will filter the <span class="guilabel">roads</span> layer,
in order to have only some specific road types to work with.</p>
<p>Some roads in OSM datasets are listed as <code class="docutils literal notranslate"><span class="pre">unclassified</span></code>,
<code class="docutils literal notranslate"><span class="pre">tracks</span></code>, <code class="docutils literal notranslate"><span class="pre">path</span></code> and <code class="docutils literal notranslate"><span class="pre">footway</span></code>.
We want to exclude these from our dataset and focus on the other road types,
more suitable for this exercise.</p>
<p>Moreover, OSM data might not be updated everywhere,
and we will also exclude <code class="docutils literal notranslate"><span class="pre">NULL</span></code> values.</p>
</li>
<li><p>Right click on the <code class="docutils literal notranslate"><span class="pre">roads</span></code> layer and choose <span class="guilabel">Filter…</span>.</p></li>
<li><p>In the dialog that pops up we filter these features with the following expression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;highway&quot;</span> <span class="n">NOT</span> <span class="n">IN</span> <span class="p">(</span><span class="s1">&#39;footway&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;unclassified&#39;</span><span class="p">,</span> <span class="s1">&#39;track&#39;</span><span class="p">)</span> <span class="n">AND</span> <span class="s2">&quot;highway&quot;</span> <span class="n">IS</span> <span class="n">NOT</span> <span class="n">NULL</span>
</pre></div>
</div>
<p>The concatenation of the two operators <code class="docutils literal notranslate"><span class="pre">NOT</span></code> and <code class="docutils literal notranslate"><span class="pre">IN</span></code> excludes
all the features that have these attribute values in the <code class="docutils literal notranslate"><span class="pre">highway</span></code> field.</p>
<p><code class="docutils literal notranslate"><span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code> combined with the <code class="docutils literal notranslate"><span class="pre">AND</span></code> operator excludes roads with
no value in the <code class="docutils literal notranslate"><span class="pre">highway</span></code> field.</p>
<p>Note the <a class="reference internal" href="../../../_images/mIndicatorFilter.png"><img alt="indicatorFilter" src="../../../_images/mIndicatorFilter.png" style="width: 1.5em;" /></a> icon next to the <span class="guilabel">roads</span> layer.
It helps you remember that this layer has a filter activated,
so some features may not be available in the project.</p>
</li>
</ol>
<p>The map with all the data should look like the following one:</p>
<figure class="align-center">
<img alt="../../../_images/osm_swellendam_2.png" src="../../../_images/osm_swellendam_2.png" />
</figure>
</section>
<section id="try-yourself-convert-layers-crs">
<h2><span class="section-number">6.2.5. </span><abbr title="Basic level">★☆☆</abbr> Try Yourself: Convert Layers’ CRS<a class="headerlink" href="#try-yourself-convert-layers-crs" title="Link to this heading"></a></h2>
<p>Because we are going to be measuring distances within our layers, we need to
change the layers’ CRS. To do this, we need to select each layer in turn,
save the layer to a new one with our new projection, then import that new
layer into our map.</p>
<p>You have many different options, e.g. you can export each layer as an
ESRI Shapefile format dataset, you can append the layers to an
existing GeoPackage file, or you can create another GeoPackage file
and fill it with the new reprojected layers.
We will show the last option, so the <code class="file docutils literal notranslate"><span class="pre">training_data.gpkg</span></code> will
remain clean.
Feel free to choose the best workflow for yourself.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this example, we are using the <em>WGS 84 / UTM zone 34S</em>
CRS, but you should use a UTM CRS which is more appropriate for
your region.</p>
</div>
<ol class="arabic">
<li><p>Right click the <span class="guilabel">roads</span> layer in the <span class="guilabel">Layers</span>
panel</p></li>
<li><p>Click <span class="guilabel">Export –&gt; Save Features As…</span></p></li>
<li><p>In the <span class="guilabel">Save Vector Layer As</span> dialog choose
<span class="guilabel">GeoPackage</span> as <span class="guilabel">Format</span></p></li>
<li><p>Click on <span class="guilabel">…</span> for the <span class="guilabel">File name</span>, and name
the new GeoPackage <code class="docutils literal notranslate"><span class="pre">vector_analysis</span></code></p></li>
<li><p>Change the <span class="guilabel">Layer name</span> to <code class="docutils literal notranslate"><span class="pre">roads_34S</span></code></p></li>
<li><p>Change the <span class="guilabel">CRS</span> to <em>WGS 84 / UTM zone 34S</em></p></li>
<li><p>Click on <span class="guilabel">OK</span>:</p>
<figure class="align-center">
<img alt="../../../_images/save_roads_34S.png" src="../../../_images/save_roads_34S.png" />
</figure>
<p>This will create the new GeoPackage database and add the <code class="docutils literal notranslate"><span class="pre">roads_34S</span></code> layer.</p>
</li>
<li><p>Repeat this process for each layer, creating a new layer in the
<code class="file docutils literal notranslate"><span class="pre">vector_analysis.gpkg</span></code> GeoPackage file with <code class="docutils literal notranslate"><span class="pre">_34S</span></code> appended to the original name.</p>
<p>On macOS, press the <span class="guilabel">Replace</span> button in the dialog that pops up
to allow QGIS to overwrite the existing GeoPackage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you choose to save a layer to an existing GeoPackage,
QGIS will <strong>add</strong> that layer next to the existing layers in the GeoPackage,
if no layer of the same name already exists.</p>
</div>
</li>
<li><p>Remove each of the old layers from the project</p></li>
<li><p>Once you have completed the process for all the layers, right click
on any layer and click <span class="guilabel">Zoom to layer extent</span> to focus
the map to the area of interest.</p></li>
</ol>
<p>Now that we have converted OSM data to a UTM projection, we can begin
our calculations.</p>
</section>
<section id="follow-along-analyzing-the-problem-distances-from-schools-and-roads">
<h2><span class="section-number">6.2.6. </span><abbr title="Basic level">★☆☆</abbr> Follow Along: Analyzing the Problem: Distances From Schools and Roads<a class="headerlink" href="#follow-along-analyzing-the-problem-distances-from-schools-and-roads" title="Link to this heading"></a></h2>
<p>QGIS allows you to calculate distances between any vector object.</p>
<ol class="arabic">
<li><p>Make sure that only the <code class="docutils literal notranslate"><span class="pre">roads_34S</span></code> and <code class="docutils literal notranslate"><span class="pre">buildings_34S</span></code> layers
are visible (to simplify the map while you’re working)</p></li>
<li><p>Click on the <span class="menuselection">Processing ► Toolbox</span> to open the
analytical <em>core</em> of QGIS.
Basically, <strong>all</strong> algorithms (for vector <strong>and</strong> raster analysis)
are available in this toolbox.</p></li>
<li><p>We start by calculating the area around the <code class="docutils literal notranslate"><span class="pre">roads_34S</span></code> by using
the <span class="guilabel">Buffer</span> algorithm. You can find it in the
<span class="menuselection">Vector Geometry</span> group.</p>
<figure class="align-center">
<img alt="../../../_images/processing_buffer_1.png" src="../../../_images/processing_buffer_1.png" />
</figure>
<p>Or you can type <code class="docutils literal notranslate"><span class="pre">buffer</span></code> in the search menu in the upper part of
the toolbox:</p>
<figure class="align-center">
<img alt="../../../_images/processing_buffer_2.png" src="../../../_images/processing_buffer_2.png" />
</figure>
</li>
<li><p>Double click on it to open the algorithm dialog</p></li>
<li><p>Select <code class="docutils literal notranslate"><span class="pre">roads_34S</span></code> as <span class="guilabel">Input layer</span>, set
<span class="guilabel">Distance</span> to 50 and use the default values for the rest
of the parameters.</p>
<figure class="align-center">
<img alt="../../../_images/vector_buffer_setup.png" src="../../../_images/vector_buffer_setup.png" />
</figure>
</li>
<li><p>The default <span class="guilabel">Distance</span> is in meters because our input
dataset is in a Projected Coordinate System that uses meter as its
basic measurement unit.
You can use the combo box to choose other projected units like
kilometers, yards, etc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are trying to make a buffer on a layer with a
Geographical Coordinate System, Processing will warn you and
suggest to reproject the layer to a metric Coordinate System.</p>
</div>
</li>
<li><p>By default, <em>Processing</em> creates temporary layers and adds them to
the <span class="guilabel">Layers</span> panel.
You can also append the result to the GeoPackage database by:</p>
<ol class="arabic simple">
<li><p>Clicking on the <span class="guilabel">…</span> button and choose
<span class="guilabel">Save to GeoPackage…</span></p></li>
<li><p>Naming the new layer <code class="docutils literal notranslate"><span class="pre">roads_buffer_50m</span></code></p></li>
<li><p>Saving it in the <code class="file docutils literal notranslate"><span class="pre">vector_analysis.gpkg</span></code> file</p></li>
</ol>
<figure class="align-center">
<img alt="../../../_images/buffer_saving.png" src="../../../_images/buffer_saving.png" />
</figure>
</li>
<li><p>Click on <span class="guilabel">Run</span>, and then close the <span class="guilabel">Buffer</span>
dialog</p>
<p>Now your map will look something like this:</p>
<figure class="align-center">
<img alt="../../../_images/roads_buffer_result.png" src="../../../_images/roads_buffer_result.png" />
</figure>
</li>
</ol>
<p>If your new layer is at the top of the <span class="guilabel">Layers</span> list, it
will probably obscure much of your map, but this gives you all the
areas in your region which are within 50m of a road.</p>
<p>Notice that there are distinct areas within your buffer, which
correspond to each individual road. To get rid of this problem:</p>
<ol class="arabic">
<li><p>Uncheck the <span class="guilabel">roads_buffer_50m</span> layer and re-create the
buffer with <span class="guilabel">Dissolve results</span> enabled.</p>
<figure class="align-center">
<img alt="../../../_images/dissolve_buffer_setup.png" src="../../../_images/dissolve_buffer_setup.png" />
</figure>
</li>
<li><p>Save the output as <span class="guilabel">roads_buffer_50m_dissolved</span></p></li>
<li><p>Click <span class="guilabel">Run</span> and close the <span class="guilabel">Buffer</span> dialog</p></li>
</ol>
<p>Once you have added the layer to the <span class="guilabel">Layers</span> panel, it
will look like this:</p>
<figure class="align-center">
<img alt="../../../_images/dissolve_buffer_results.png" src="../../../_images/dissolve_buffer_results.png" />
</figure>
<p>Now there are no unnecessary subdivisions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>Short Help</em> on the right side of the dialog explains
how the algorithm works.
If you need more information, just click on the <span class="guilabel">Help</span>
button in the bottom part to open a more detailed guide of the
algorithm.</p>
</div>
</section>
<section id="try-yourself-distance-from-schools">
<span id="backlink-vector-analysis-basic-1"></span><h2><span class="section-number">6.2.7. </span><abbr title="Basic level">★☆☆</abbr> Try Yourself: Distance from schools<a class="headerlink" href="#try-yourself-distance-from-schools" title="Link to this heading"></a></h2>
<p>Use the same approach as above and create a buffer for your schools.</p>
<p>It shall be <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">km</span></code> in radius.
Save the new layer in the <code class="file docutils literal notranslate"><span class="pre">vector_analysis.gpkg</span></code> file as <code class="docutils literal notranslate"><span class="pre">schools_buffer_1km_dissolved</span></code>.</p>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<ul>
<li><p>Your buffer dialog should look like this:</p>
<figure class="align-center">
<img alt="../../../_images/schools_buffer_setup.png" src="../../../_images/schools_buffer_setup.png" />
</figure>
</li>
</ul>
<p>The <span class="guilabel">Buffer distance</span> is <span class="guilabel">1</span> kilometer.</p>
<ul>
<li><p>The <span class="guilabel">Segments to approximate</span> value is set to <span class="guilabel">20</span>.
This is optional, but it’s recommended, because it makes the output buffers
look smoother. Compare this:</p>
<figure class="align-center">
<img alt="../../../_images/schools_buffer_5.png" src="../../../_images/schools_buffer_5.png" />
</figure>
<p>To this:</p>
<figure class="align-center">
<img alt="../../../_images/schools_buffer_6.png" src="../../../_images/schools_buffer_6.png" />
</figure>
</li>
</ul>
<p>The first image shows the buffer with the <span class="guilabel">Segments to approximate</span>
value set to <span class="guilabel">5</span> and the second shows the value set to <span class="guilabel">20</span>.
In our example, the difference is subtle, but you can see that the buffer’s edges
are smoother with the higher value.</p>
</div>
</section>
<section id="follow-along-overlapping-areas">
<h2><span class="section-number">6.2.8. </span><abbr title="Basic level">★☆☆</abbr> Follow Along: Overlapping Areas<a class="headerlink" href="#follow-along-overlapping-areas" title="Link to this heading"></a></h2>
<p>Now we have identified areas where the road is less than 50 meters
away and areas where there is a school within 1 km (direct line, not
by road).
But obviously, we only want the areas where both of these criteria
are satisfied.
To do that, we will need to use the <span class="guilabel">Intersect</span> tool.
You can find it in <span class="menuselection">Vector Overlay</span> group in the
<span class="guilabel">Processing Toolbox</span>.</p>
<ol class="arabic">
<li><p>Use the two buffer layers as <span class="guilabel">Input layer</span> and
<span class="guilabel">Overlay layer</span>, choose <code class="file docutils literal notranslate"><span class="pre">vector_analysis.gpkg</span></code>
GeoPackage in <span class="guilabel">Intersection</span> with <span class="guilabel">Layer name</span>
<code class="docutils literal notranslate"><span class="pre">road_school_buffers_intersect</span></code>.
Leave the rest as suggested (default).</p>
<figure class="align-center">
<img alt="../../../_images/school_roads_intersect.png" src="../../../_images/school_roads_intersect.png" />
</figure>
</li>
<li><p>Click <span class="guilabel">Run</span>.</p>
<p>In the image below, the blue areas are where both of the distance
criteria are satisfied.</p>
<figure class="align-center">
<img alt="../../../_images/intersect_result.png" src="../../../_images/intersect_result.png" />
</figure>
</li>
<li><p>You may remove the two buffer layers and only keep the one that
shows where they overlap, since that’s what we really wanted to
know in the first place:</p>
<figure class="align-center">
<img alt="../../../_images/final_intersect_result.png" src="../../../_images/final_intersect_result.png" />
</figure>
</li>
</ol>
</section>
<section id="follow-along-extract-the-buildings">
<span id="select-by-location"></span><h2><span class="section-number">6.2.9. </span><abbr title="Basic level">★☆☆</abbr> Follow Along: Extract the Buildings<a class="headerlink" href="#follow-along-extract-the-buildings" title="Link to this heading"></a></h2>
<p>Now you’ve got the area that the buildings must overlap.
Next, you want to extract the buildings in that area.</p>
<ol class="arabic">
<li><p>Look for the menu entry
<span class="menuselection">Vector Selection ► Extract by location</span>
within the <em>Processing Toolbox</em></p></li>
<li><p>Select <code class="docutils literal notranslate"><span class="pre">buildings_34S</span></code> in <span class="guilabel">Extract features from</span>.
Check <span class="guilabel">intersect</span> in
<span class="guilabel">Where the features (geometric predicate)</span>,
select the buffer intersection layer in
<span class="guilabel">By comparing to the features from</span>.
Save to the <code class="file docutils literal notranslate"><span class="pre">vector_analysis.gpkg</span></code>, and name the layer
<code class="docutils literal notranslate"><span class="pre">well_located_houses</span></code>.</p>
<figure class="align-center">
<img alt="../../../_images/location_select_dialog.png" src="../../../_images/location_select_dialog.png" />
</figure>
</li>
<li><p>Click <span class="guilabel">Run</span> and close the dialog</p></li>
<li><p>You will probably find that not much seems to have changed.
If so, move the <span class="guilabel">well_located_houses</span> layer to the top
of the layers list, then zoom in.</p>
<figure class="align-center">
<img alt="../../../_images/select_zoom_result.png" src="../../../_images/select_zoom_result.png" />
</figure>
<p>The red buildings are those which match our criteria, while the
buildings in green are those which do not.</p>
</li>
<li><p>Now you have two separated layers and can remove <code class="docutils literal notranslate"><span class="pre">buildings_34S</span></code>
from the layer list.</p></li>
</ol>
</section>
<section id="try-yourself-further-filter-our-buildings">
<h2><span class="section-number">6.2.10. </span><abbr title="Moderate level">★★☆</abbr> Try Yourself: Further Filter our Buildings<a class="headerlink" href="#try-yourself-further-filter-our-buildings" title="Link to this heading"></a></h2>
<p>We now have a layer which shows us all the buildings within 1km of a
school and within 50m of a road.
We now need to reduce that selection to only show buildings which are
within 500m of a restaurant.</p>
<p>Using the processes described above, create a new layer called
<span class="guilabel">houses_restaurants_500m</span> which further filters your
<span class="guilabel">well_located_houses</span> layer to show only those which are
within 500m of a restaurant.</p>
<div class="dropdown admonition">
<p class="admonition-title">Answer</p>
<p>To create the new <span class="guilabel">houses_restaurants_500m</span> layer, we go through a two step
process:</p>
<ol class="arabic">
<li><p>First, create a buffer of 500m around the restaurants and add the layer to
the map:</p>
<figure class="align-center">
<img alt="../../../_images/restaurants_buffer.png" src="../../../_images/restaurants_buffer.png" />
</figure>
<figure class="align-center">
<img alt="../../../_images/restaurants_buffer_result.png" src="../../../_images/restaurants_buffer_result.png" />
</figure>
</li>
<li><p>Next, extract buildings within that buffer area:</p>
<figure class="align-center">
<img alt="../../../_images/select_within_restaurants.png" src="../../../_images/select_within_restaurants.png" />
</figure>
</li>
</ol>
<p>Your map should now show only those buildings which are within 50m of a road,
1km of a school and 500m of a restaurant:</p>
<figure class="align-center">
<img alt="../../../_images/restaurant_buffer_result.png" src="../../../_images/restaurant_buffer_result.png" />
</figure>
</div>
</section>
<section id="follow-along-select-buildings-of-the-right-size">
<h2><span class="section-number">6.2.11. </span><abbr title="Basic level">★☆☆</abbr> Follow Along: Select Buildings of the Right Size<a class="headerlink" href="#follow-along-select-buildings-of-the-right-size" title="Link to this heading"></a></h2>
<p>To see which buildings are of the correct size (more than 100 square
meters), we need to calculate their size.</p>
<ol class="arabic">
<li><p>Select the <span class="guilabel">houses_restaurants_500m</span> layer and open the
<em>Field Calculator</em> by clicking on the <a class="reference internal" href="../../../_images/mActionCalculateField.png"><img alt="calculateField" src="../../../_images/mActionCalculateField.png" style="width: 1.5em;" /></a>
<sup>Open Field Calculator</sup> button in the main toolbar or in
the attribute table window</p></li>
<li><p>Select <span class="guilabel">Create a new field</span>, set the
<span class="guilabel">Output field name</span> to <code class="docutils literal notranslate"><span class="pre">AREA</span></code>, choose
<span class="guilabel">Decimal number (real)</span> as
<span class="guilabel">Output field type</span>, and choose <code class="docutils literal notranslate"><span class="pre">$area</span></code> from the
<span class="menuselection">Geometry</span> group.</p>
<figure class="align-center">
<img alt="../../../_images/buildings_area_calculator.png" src="../../../_images/buildings_area_calculator.png" />
</figure>
<p>The new field <code class="docutils literal notranslate"><span class="pre">AREA</span></code> will contain the area of each building in
square meters.</p>
</li>
<li><p>Click <span class="guilabel">OK</span>.
The <code class="docutils literal notranslate"><span class="pre">AREA</span></code> field has been added at the end of the attribute
table.</p></li>
<li><p>Click the <a class="reference internal" href="../../../_images/mActionToggleEditing.png"><img alt="toggleEditing" src="../../../_images/mActionToggleEditing.png" style="width: 1.5em;" /></a> <sup>Toggle Editing</sup> button to finish
editing, and save your edits when prompted.</p></li>
<li><p>In the <span class="menuselection">Source</span> tab of the layer properties, set
the <span class="guilabel">Provider Feature Filter</span> to <code class="docutils literal notranslate"><span class="pre">&quot;AREA</span> <span class="pre">&gt;=</span> <span class="pre">100</span></code>.</p>
<figure class="align-center">
<img alt="../../../_images/buildings_area_query.png" src="../../../_images/buildings_area_query.png" />
</figure>
</li>
<li><p>Click <span class="guilabel">OK</span>.</p></li>
</ol>
<p>Your map should now only show you those buildings which match our
starting criteria and which are more than 100 square meters in size.</p>
</section>
<section id="try-yourself">
<h2><span class="section-number">6.2.12. </span><abbr title="Basic level">★☆☆</abbr> Try Yourself:<a class="headerlink" href="#try-yourself" title="Link to this heading"></a></h2>
<p>Save your solution as a new layer, using the approach you learned
above for doing so.
The file should be saved within the same GeoPackage database, with
the name <code class="docutils literal notranslate"><span class="pre">solution</span></code>.</p>
</section>
<section id="in-conclusion">
<h2><span class="section-number">6.2.13. </span>In Conclusion<a class="headerlink" href="#in-conclusion" title="Link to this heading"></a></h2>
<p>Using the GIS problem solving approach together with QGIS vector
analysis tools, you were able to solve a problem with multiple
criteria quickly and easily.</p>
</section>
<section id="what-s-next">
<h2><span class="section-number">6.2.14. </span>What’s Next?<a class="headerlink" href="#what-s-next" title="Link to this heading"></a></h2>
<p>In the next lesson, we will look at how to calculate the shortest
distance along roads from one point to another.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="reproject_transform.html" class="btn btn-neutral float-left" title="6.1. Lesson: Reprojecting and Transforming Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="network_analysis.html" class="btn btn-neutral float-right" title="6.3. Lesson: Network Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">Last updated on 2024 May 30, 01:27 +0900.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages:
Expected French translation link for https://docs.qgis.org/3.28/en/docs/user_manual/print_composer/overview_composer.html
would return https://app.transifex.com/qgis/qgis-documentation/translate/#fr/aa6d8bc653526d38b295ca94bf8eee5e
with the md5 value of "github#qgis/QGIS-Documentation#release_3.28#locale/en/LC_MESSAGES/docs/user_manual/print_composer/overview_composer.po"-->
<!--Make sure that mismatching language codes between Transifex and Sphinx are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: 3.34
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/training_manual/vector_analysis/basic_analysis.html">en</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/cs/docs/training_manual/vector_analysis/basic_analysis.html">cs</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/de/docs/training_manual/vector_analysis/basic_analysis.html">de</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/es/docs/training_manual/vector_analysis/basic_analysis.html">es</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/fr/docs/training_manual/vector_analysis/basic_analysis.html">fr</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/hu/docs/training_manual/vector_analysis/basic_analysis.html">hu</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/it/docs/training_manual/vector_analysis/basic_analysis.html">it</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/training_manual/vector_analysis/basic_analysis.html">ja</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ko/docs/training_manual/vector_analysis/basic_analysis.html">ko</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/lt/docs/training_manual/vector_analysis/basic_analysis.html">lt</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/nl/docs/training_manual/vector_analysis/basic_analysis.html">nl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_BR/docs/training_manual/vector_analysis/basic_analysis.html">pt_BR</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_PT/docs/training_manual/vector_analysis/basic_analysis.html">pt_PT</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ro/docs/training_manual/vector_analysis/basic_analysis.html">ro</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ru/docs/training_manual/vector_analysis/basic_analysis.html">ru</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zh-Hans/docs/training_manual/vector_analysis/basic_analysis.html">zh-Hans</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/en/docs/training_manual/vector_analysis/basic_analysis.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/en/docs/training_manual/vector_analysis/basic_analysis.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/training_manual/vector_analysis/basic_analysis.html">3.34</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.28/en/docs/training_manual/vector_analysis/basic_analysis.html">3.28</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.22/en/docs/training_manual/vector_analysis/basic_analysis.html">3.22</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/en/docs/training_manual/vector_analysis/basic_analysis.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/en/docs/training_manual/vector_analysis/basic_analysis.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/en/docs/training_manual/vector_analysis/basic_analysis.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/en/docs/training_manual/vector_analysis/basic_analysis.html">2.18</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/training_manual/vector_analysis/basic_analysis.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://app.transifex.com/qgis/qgis-documentation/translate/#en/87feff9104653162845a7192e7717b59" target="_blank" rel="noopener noreferrer">Translate Page</a>
          </dd>
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/en" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/3.34" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/3.34" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/release-3_34" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>