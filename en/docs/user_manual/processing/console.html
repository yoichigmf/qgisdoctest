<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>27.7. Using processing algorithms from the console &mdash; QGIS Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/qgis_docs.css?v=5415a924" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/user_manual/processing/console.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="27.8. Using processing from the command line" href="standalone.html" />
    <link rel="prev" title="27.6. The batch processing interface" href="batch.html" />
  <meta name="description" content="QGIS 3.34 documentation: 27.7. Using processing algorithms from the console">
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   

          
          
          <a href="../../index.html" class="icon icon-home">
            QGIS Documentation
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.34
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">For Users</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">QGIS Desktop User Guide/Manual (QGIS 3.34)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../preamble/preamble.html">1. Preamble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/foreword.html">2. Foreword</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/conventions.html">3. Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/features.html">4. Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/getting_started.html">5. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/project_files.html">6. Working with Project Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_gui.html">7. QGIS GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/browser.html">8. The Browser panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_configuration.html">9. QGIS Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_projections/working_with_projections.html">10. Working with Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../map_views/index.html">11. Visualizing Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/general_tools.html">12. General Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expressions/index.html">13. Level up with Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style_library/index.html">14. The Style Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../managing_data_source/index.html">15. Managing Data Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector/index.html">16. Working with Vector Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_raster/index.html">17. Working with Raster Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_mesh/mesh.html">18. Working with Mesh Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector_tiles/vector_tiles.html">19. Working with Vector Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_point_clouds/point_clouds.html">20. Working with Point Clouds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_3d_tiles/3d_tiles.html">21. Working with 3D Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../print_composer/index.html">22. Laying out the maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_ogc/ogc_client_support.html">23. Working with OGC / ISO protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_gps/index.html">24. Working with GPS Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth_system/index.html">25. Authentication System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grass_integration/grass_integration.html">26. GRASS GIS Integration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">27. QGIS processing framework</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">27.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">27.2. Configuring the Processing Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="toolbox.html">27.3. The Toolbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="history.html">27.4. The history manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="modeler.html">27.5. The model designer</a></li>
<li class="toctree-l3"><a class="reference internal" href="batch.html">27.6. The batch processing interface</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">27.7. Using processing algorithms from the console</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#calling-algorithms-from-the-python-console">27.7.1. Calling algorithms from the Python console</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-scripts-and-running-them-from-the-toolbox">27.7.2. Creating scripts and running them from the toolbox</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pre-and-post-execution-script-hooks">27.7.3. Pre- and post-execution script hooks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="standalone.html">27.8. Using processing from the command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts.html">27.9. Writing new Processing algorithms as Python scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters.html">27.10. Input and output types for Processing Algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="3rdParty.html">27.11. Configuring external applications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../processing_algs/index.html">28. Processing providers and algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">29. Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/help_and_support.html">30. Help and Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/contributors.html">31. Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/index.html">32. Appendices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../literature_web/literature_and_web_references.html">33. Literature and Web References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Server Guide/Manual (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_manual/index.html">Training Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">A Gentle Introduction to GIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Writers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">Documentation Guidelines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyqgis_developer_cookbook/index.html">PyQGIS Cookbook (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">Developers Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">QGIS User Guide</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">27. </span>QGIS processing framework</a></li>
      <li class="breadcrumb-item active"><span class="section-number">27.7. </span>Using processing algorithms from the console</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/user_manual/processing/console.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="batch.html" class="btn btn-neutral float-left" title="27.6. The batch processing interface" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="standalone.html" class="btn btn-neutral float-right" title="27.8. Using processing from the command line" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div></div></blockquote>
<section id="using-processing-algorithms-from-the-console">
<span id="processing-console"></span><h1><span class="section-number">27.7. </span>Using processing algorithms from the console<a class="headerlink" href="#using-processing-algorithms-from-the-console" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#calling-algorithms-from-the-python-console" id="id1">Calling algorithms from the Python console</a></p></li>
<li><p><a class="reference internal" href="#creating-scripts-and-running-them-from-the-toolbox" id="id2">Creating scripts and running them from the toolbox</a></p>
<ul>
<li><p><a class="reference internal" href="#feedback" id="id3">Feedback</a></p></li>
<li><p><a class="reference internal" href="#handling-errors" id="id4">Handling errors</a></p></li>
<li><p><a class="reference internal" href="#documenting-your-scripts" id="id5">Documenting your scripts</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pre-and-post-execution-script-hooks" id="id6">Pre- and post-execution script hooks</a></p></li>
</ul>
</nav>
<p>The console allows advanced users to increase their productivity and
perform complex operations that cannot be performed using any of the
other GUI elements of the processing framework. Models involving
several algorithms can be defined using the command-line interface,
and additional operations such as loops and conditional sentences can
be added to create more flexible and powerful workflows.</p>
<p>There is not a processing console in QGIS, but all processing commands
are available instead from the QGIS built-in <a class="reference internal" href="../plugins/python_console.html#console"><span class="std std-ref">Python console</span></a>.  That means that you can incorporate those commands into
your console work and connect processing algorithms to all the other
features (including methods from the QGIS API) available from there.</p>
<p>The code that you can execute from the Python console, even if it does
not call any specific processing method, can be converted into a new
algorithm that you can later call from the toolbox, the graphical
modeler or any other component, just like you do with any other
algorithm. In fact, some algorithms that you can find in the toolbox
are simple scripts.</p>
<p>In this section, we will see how to use processing algorithms from the
QGIS Python console, and also how to write algorithms using Python.</p>
<section id="calling-algorithms-from-the-python-console">
<h2><a class="toc-backref" href="#id1" role="doc-backlink"><span class="section-number">27.7.1. </span>Calling algorithms from the Python console</a><a class="headerlink" href="#calling-algorithms-from-the-python-console" title="Link to this heading"></a></h2>
<p>The first thing you have to do is to import the processing functions
with the following line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qgis</span> <span class="kn">import</span> <span class="n">processing</span>
</pre></div>
</div>
<p>Now, there is basically just one (interesting) thing you can do with
that from the console: execute an algorithm. That is done using the
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.run" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> method, which
takes the name of the algorithm to execute
as its first parameter, and then a variable number of additional
parameters depending on the requirements of the algorithm. So the
first thing you need to know is the name of the algorithm to
execute. That is not the name you see in the toolbox, but rather a
unique command–line name. To find the right name for your algorithm,
you can use the <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingRegistry.html#qgis.core.QgsProcessingRegistry" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">processingRegistry</span></code></a>.
Type the following line in your console:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">alg</span> <span class="ow">in</span> <span class="n">QgsApplication</span><span class="o">.</span><span class="n">processingRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">algorithms</span><span class="p">():</span>
<span class="go">        print(alg.id(), &quot;-&gt;&quot;, alg.displayName())</span>
</pre></div>
</div>
<p>You will see something like this (with some extra dashes added to
improve readability).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span><span class="n">d</span><span class="p">:</span><span class="n">tessellate</span> <span class="o">--------------&gt;</span> <span class="n">Tessellate</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">aspect</span> <span class="o">----------------&gt;</span> <span class="n">Aspect</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">assignprojection</span> <span class="o">------&gt;</span> <span class="n">Assign</span> <span class="n">projection</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">buffervectors</span> <span class="o">---------&gt;</span> <span class="n">Buffer</span> <span class="n">vectors</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">buildvirtualraster</span> <span class="o">----&gt;</span> <span class="n">Build</span> <span class="n">Virtual</span> <span class="n">Raster</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">cliprasterbyextent</span> <span class="o">----&gt;</span> <span class="n">Clip</span> <span class="n">raster</span> <span class="n">by</span> <span class="n">extent</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">cliprasterbymasklayer</span> <span class="o">-&gt;</span> <span class="n">Clip</span> <span class="n">raster</span> <span class="n">by</span> <span class="n">mask</span> <span class="n">layer</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">clipvectorbyextent</span> <span class="o">----&gt;</span> <span class="n">Clip</span> <span class="n">vector</span> <span class="n">by</span> <span class="n">extent</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">clipvectorbypolygon</span> <span class="o">---&gt;</span> <span class="n">Clip</span> <span class="n">vector</span> <span class="n">by</span> <span class="n">mask</span> <span class="n">layer</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">colorrelief</span> <span class="o">-----------&gt;</span> <span class="n">Color</span> <span class="n">relief</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">contour</span> <span class="o">---------------&gt;</span> <span class="n">Contour</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">convertformat</span> <span class="o">---------&gt;</span> <span class="n">Convert</span> <span class="nb">format</span>
<span class="n">gdal</span><span class="p">:</span><span class="n">dissolve</span> <span class="o">--------------&gt;</span> <span class="n">Dissolve</span>
<span class="o">...</span>
</pre></div>
</div>
<p>That’s a list of all the available algorithm IDs, sorted by provider
name and algorithm name, along with their corresponding names.</p>
<p>Once you know the command-line name of the algorithm, the next thing
to do is to determine the right syntax to execute it. That means
knowing which parameters are needed when calling the <code class="docutils literal notranslate"><span class="pre">run()</span></code> method.</p>
<p>There is a method to describe an algorithm in detail, which can be
used to get a list of the parameters that an algorithm requires and
the outputs that it will generate. To get this information, you can
use the <code class="docutils literal notranslate"><span class="pre">algorithmHelp(id_of_the_algorithm)</span></code> method. Use the ID of
the algorithm, not the full descriptive name.</p>
<p>Calling the method with <code class="docutils literal notranslate"><span class="pre">native:buffer</span></code> as parameter
(<code class="docutils literal notranslate"><span class="pre">qgis:buffer</span></code> is an alias for <code class="docutils literal notranslate"><span class="pre">native:buffer</span></code> and will also
work), you get the following description:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processing</span><span class="o">.</span><span class="n">algorithmHelp</span><span class="p">(</span><span class="s2">&quot;native:buffer&quot;</span><span class="p">)</span>
<span class="go">Buffer (native:buffer)</span>

<span class="go">This algorithm computes a buffer area for all the features in an</span>
<span class="go">input layer, using a fixed or dynamic distance.</span>

<span class="go">The segments parameter controls the number of line segments to</span>
<span class="go">use to approximate a quarter circle when creating rounded</span>
<span class="go">offsets.</span>

<span class="go">The end cap style parameter controls how line endings are handled</span>
<span class="go">in the buffer.</span>

<span class="go">The join style parameter specifies whether round, miter or</span>
<span class="go">beveled joins should be used when offsetting corners in a line.</span>

<span class="go">The miter limit parameter is only applicable for miter join</span>
<span class="go">styles, and controls the maximum distance from the offset curve</span>
<span class="go">to use when creating a mitered join.</span>


<span class="go">----------------</span>
<span class="go">Input parameters</span>
<span class="go">----------------</span>

<span class="go">INPUT: Input layer</span>

<span class="go">   Parameter type: QgsProcessingParameterFeatureSource</span>

<span class="go">   Accepted data types:</span>
<span class="go">           - str: layer ID</span>
<span class="go">           - str: layer name</span>
<span class="go">           - str: layer source</span>
<span class="go">           - QgsProcessingFeatureSourceDefinition</span>
<span class="go">           - QgsProperty</span>
<span class="go">           - QgsVectorLayer</span>

<span class="go">DISTANCE: Distance</span>

<span class="go">   Parameter type: QgsProcessingParameterDistance</span>

<span class="go">   Accepted data types:</span>
<span class="go">           - int</span>
<span class="go">           - float</span>
<span class="go">           - QgsProperty</span>

<span class="go">SEGMENTS: Segments</span>

<span class="go">   Parameter type: QgsProcessingParameterNumber</span>

<span class="go">   Accepted data types:</span>
<span class="go">           - int</span>
<span class="go">           - float</span>
<span class="go">           - QgsProperty</span>

<span class="go">END_CAP_STYLE: End cap style</span>

<span class="go">   Parameter type: QgsProcessingParameterEnum</span>

<span class="go">   Available values:</span>
<span class="go">           - 0: Round</span>
<span class="go">           - 1: Flat</span>
<span class="go">           - 2: Square</span>

<span class="go">   Accepted data types:</span>
<span class="go">           - int</span>
<span class="go">           - str: as string representation of int, e.g. &#39;1&#39;</span>
<span class="go">           - QgsProperty</span>

<span class="go">JOIN_STYLE: Join style</span>

<span class="go">   Parameter type: QgsProcessingParameterEnum</span>

<span class="go">   Available values:</span>
<span class="go">           - 0: Round</span>
<span class="go">           - 1: Miter</span>
<span class="go">           - 2: Bevel</span>

<span class="go">   Accepted data types:</span>
<span class="go">           - int</span>
<span class="go">           - str: as string representation of int, e.g. &#39;1&#39;</span>
<span class="go">           - QgsProperty</span>

<span class="go">MITER_LIMIT: Miter limit</span>

<span class="go">   Parameter type: QgsProcessingParameterNumber</span>

<span class="go">   Accepted data types:</span>
<span class="go">           - int</span>
<span class="go">           - float</span>
<span class="go">           - QgsProperty</span>

<span class="go">DISSOLVE: Dissolve result</span>

<span class="go">   Parameter type: QgsProcessingParameterBoolean</span>

<span class="go">   Accepted data types:</span>
<span class="go">           - bool</span>
<span class="go">           - int</span>
<span class="go">           - str</span>
<span class="go">           - QgsProperty</span>

<span class="go">OUTPUT: Buffered</span>

<span class="go">   Parameter type: QgsProcessingParameterFeatureSink</span>

<span class="go">   Accepted data types:</span>
<span class="go">           - str: destination vector file, e.g. &#39;d:/test.shp&#39;</span>
<span class="go">           - str: &#39;memory:&#39; to store result in temporary memory layer</span>
<span class="go">           - str: using vector provider ID prefix and destination URI,</span>
<span class="go">                  e.g. &#39;postgres:...&#39; to store result in PostGIS table</span>
<span class="go">           - QgsProcessingOutputLayerDefinition</span>
<span class="go">           - QgsProperty</span>

<span class="go">----------------</span>
<span class="go">Outputs</span>
<span class="go">----------------</span>

<span class="go">OUTPUT:  &lt;QgsProcessingOutputVectorLayer&gt;</span>
<span class="go">   Buffered</span>
</pre></div>
</div>
<p>Now you have everything you need to run any algorithm. As we have
already mentioned, algorithms can be run using: <code class="docutils literal notranslate"><span class="pre">run()</span></code>.
Its syntax is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processing</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">name_of_the_algorithm</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<p>Where parameters is a dictionary of parameters that depend on the
algorithm you want to run, and is exactly the list that the
<code class="docutils literal notranslate"><span class="pre">algorithmHelp()</span></code> method gives you.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">processing</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;native:buffer&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/lines.shp&#39;</span><span class="p">,</span>
<span class="linenos">2</span>               <span class="s1">&#39;DISTANCE&#39;</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
<span class="linenos">3</span>               <span class="s1">&#39;SEGMENTS&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos">4</span>               <span class="s1">&#39;DISSOLVE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="linenos">5</span>               <span class="s1">&#39;END_CAP_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">6</span>               <span class="s1">&#39;JOIN_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">7</span>               <span class="s1">&#39;MITER_LIMIT&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos">8</span>               <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/buffers.shp&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>If a parameter is optional and you do not want to use it, then don’t
include it in the dictionary.</p>
<p>If a parameter is not specified, the default value will be used.</p>
<p>Depending on the type of parameter, values are introduced differently. The next
list gives a quick review of how to introduce values for each type of input parameter:</p>
<ul>
<li><p>Raster Layer, Vector Layer or Table. Simply use a string with the name that
identifies the data object to use (the name it has in the QGIS Table of
Contents) or a filename (if the corresponding layer is not opened, it will be
opened but not added to the map canvas). If you have an instance of a QGIS
object representing the layer, you can also pass it as parameter.</p></li>
<li><p>Enumeration. If an algorithm has an enumeration parameter, the value of that
parameter should be entered using an integer value. To know the available
options, you can use the <code class="docutils literal notranslate"><span class="pre">algorithmHelp()</span></code> command, as above.
For instance, the <code class="docutils literal notranslate"><span class="pre">native:buffer</span></code> algorithm has an enumeration called JOIN_STYLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JOIN_STYLE</span><span class="p">:</span> <span class="n">Join</span> <span class="n">style</span>

   <span class="n">Parameter</span> <span class="nb">type</span><span class="p">:</span> <span class="n">QgsProcessingParameterEnum</span>

   <span class="n">Available</span> <span class="n">values</span><span class="p">:</span>
           <span class="o">-</span> <span class="mi">0</span><span class="p">:</span> <span class="n">Round</span>
           <span class="o">-</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Miter</span>
           <span class="o">-</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Bevel</span>

   <span class="n">Accepted</span> <span class="n">data</span> <span class="n">types</span><span class="p">:</span>
           <span class="o">-</span> <span class="nb">int</span>
           <span class="o">-</span> <span class="nb">str</span><span class="p">:</span> <span class="k">as</span> <span class="n">string</span> <span class="n">representation</span> <span class="n">of</span> <span class="nb">int</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="s1">&#39;1&#39;</span>
           <span class="o">-</span> <span class="n">QgsProperty</span>
</pre></div>
</div>
<p>In this case, the parameter has three options.
Notice that ordering is zero-based.</p>
</li>
<li><p>Boolean.  Use <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p>Multiple input. The value is a string with input descriptors separated by
semicolons (<code class="docutils literal notranslate"><span class="pre">;</span></code>). As in the case of single layers or tables, each input
descriptor can be the data object name, or its file path.</p></li>
<li><p>Table Field from XXX. Use a string with the name of the field to use. This
parameter is case-sensitive.</p></li>
<li><p>Fixed Table. Type the list of all table values separated by commas (<code class="docutils literal notranslate"><span class="pre">,</span></code>) and
enclosed between quotes (<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>). Values start on the upper row and go from left
to right. You can also use a 2-D array of values representing the table.</p></li>
<li><p>CRS. Enter the EPSG code number of the desired CRS.</p></li>
<li><p>Extent. You must use a string with <code class="docutils literal notranslate"><span class="pre">xmin</span></code>, <code class="docutils literal notranslate"><span class="pre">xmax</span></code>, <code class="docutils literal notranslate"><span class="pre">ymin</span></code> and <code class="docutils literal notranslate"><span class="pre">ymax</span></code>
values separated by commas (<code class="docutils literal notranslate"><span class="pre">,</span></code>).</p></li>
</ul>
<p>Boolean, file, string and numerical parameters do not need any additional
explanations.</p>
<p>Input parameters such as strings, booleans, or numerical values have default values.
The default value is used if the corresponding parameter entry is missing.</p>
<p>For output data objects, type the file path to be used to save it, just as it is
done from the toolbox. If the output object is not specified, the result is
saved to a temporary file (or skipped if it is an optional output).
The extension of the file determines the file format. If you enter a
file extension not supported by the algorithm, the default
file format for that output type will be used, and its corresponding extension
appended to the given file path.</p>
<p>Unlike when an algorithm is executed from the toolbox, outputs are not
added to the map canvas if you execute that same algorithm from the
Python console using the <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.run" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> method.
That method returns a dictionary with one or more output names
(the ones shown in the algorithm description) as keys
and the file paths of those outputs as values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">myresult</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;native:buffer&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/lines.shp&#39;</span><span class="p">,</span>
<span class="linenos"> 2</span>               <span class="s1">&#39;DISTANCE&#39;</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
<span class="linenos"> 3</span>               <span class="s1">&#39;SEGMENTS&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos"> 4</span>               <span class="s1">&#39;DISSOLVE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="linenos"> 5</span>               <span class="s1">&#39;END_CAP_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 6</span>               <span class="s1">&#39;JOIN_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 7</span>               <span class="s1">&#39;MITER_LIMIT&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos"> 8</span>               <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/buffers.shp&#39;</span><span class="p">})</span>
<span class="linenos"> 9</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">myresult</span><span class="p">[</span><span class="s1">&#39;OUTPUT&#39;</span><span class="p">]</span>
<span class="linenos">10</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">buffers</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
<p>You can then load the output in the project as any common layer:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">buffered_layer</span> <span class="o">=</span> <span class="n">myresult</span><span class="p">[</span><span class="s1">&#39;OUTPUT&#39;</span><span class="p">]</span>
<span class="linenos">2</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">buffered_layer</span><span class="p">)</span>
</pre></div>
</div>
<p>To immediately load the processing outputs in the project,
you can use the <code class="docutils literal notranslate"><span class="pre">runAndLoadResults()</span></code> method instead of <code class="docutils literal notranslate"><span class="pre">run()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">processing</span><span class="o">.</span><span class="n">runAndLoadResults</span><span class="p">(</span><span class="s2">&quot;native:buffer&quot;</span><span class="p">,</span> <span class="p">{</span><span class="n">parameters</span><span class="p">:</span><span class="n">values</span><span class="p">})</span>
</pre></div>
</div>
<p>If you want to open an algorithm dialog from the console you can use the
<code class="docutils literal notranslate"><span class="pre">createAlgorithmDialog</span></code> method. The only mandatory parameter is the algorithm
name, but you can also define the dictionary of parameters so that the dialog
will be filled automatically:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">my_dialog</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">createAlgorithmDialog</span><span class="p">(</span><span class="s2">&quot;native:buffer&quot;</span><span class="p">,</span> <span class="p">{</span>
<span class="linenos"> 2</span>               <span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/lines.shp&#39;</span><span class="p">,</span>
<span class="linenos"> 3</span>               <span class="s1">&#39;DISTANCE&#39;</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
<span class="linenos"> 4</span>               <span class="s1">&#39;SEGMENTS&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos"> 5</span>               <span class="s1">&#39;DISSOLVE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="linenos"> 6</span>               <span class="s1">&#39;END_CAP_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 7</span>               <span class="s1">&#39;JOIN_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 8</span>               <span class="s1">&#39;MITER_LIMIT&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos"> 9</span>               <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/buffers.shp&#39;</span><span class="p">})</span>
<span class="linenos">10</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">my_dialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">execAlgorithmDialog</span></code> method opens the dialog immediately:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">processing</span><span class="o">.</span><span class="n">execAlgorithmDialog</span><span class="p">(</span><span class="s2">&quot;native:buffer&quot;</span><span class="p">,</span> <span class="p">{</span>
<span class="linenos">2</span>               <span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/lines.shp&#39;</span><span class="p">,</span>
<span class="linenos">3</span>               <span class="s1">&#39;DISTANCE&#39;</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
<span class="linenos">4</span>               <span class="s1">&#39;SEGMENTS&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos">5</span>               <span class="s1">&#39;DISSOLVE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="linenos">6</span>               <span class="s1">&#39;END_CAP_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">7</span>               <span class="s1">&#39;JOIN_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">8</span>               <span class="s1">&#39;MITER_LIMIT&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos">9</span>               <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;/data/buffers.shp&#39;</span><span class="p">})</span>
</pre></div>
</div>
</section>
<section id="creating-scripts-and-running-them-from-the-toolbox">
<h2><a class="toc-backref" href="#id2" role="doc-backlink"><span class="section-number">27.7.2. </span>Creating scripts and running them from the toolbox</a><a class="headerlink" href="#creating-scripts-and-running-them-from-the-toolbox" title="Link to this heading"></a></h2>
<p>You can create your own algorithms by writing Python code.
Processing scripts extend
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingAlgorithm</span></code></a>, so you
need to add some extra lines of code to implement mandatory functions.
You can find <span class="guilabel">Create new script</span> (clean sheet) and
<span class="guilabel">Create New Script from Template</span> (template that includes
code for mandatory functions of
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingAlgorithm</span></code></a>) under
the <span class="guilabel">Scripts</span> dropdown menu on the top of the Processing toolbox.
The Processing Script Editor will open, and that’s where you should type
your code.
Saving the script from there in the <code class="file docutils literal notranslate"><span class="pre">scripts</span></code> folder (the default folder
when you open the save file dialog) with a <code class="file docutils literal notranslate"><span class="pre">.py</span></code> extension should
create the corresponding algorithm.</p>
<p>The name of the algorithm (the one you will see in the toolbox) is defined
within the code.</p>
<p>Let’s have a look at the following code, which defines a Processing
algorithm that performs a buffer operation with a user defined buffer
distance on a vector layer that is specified by the user, after first
smoothing the layer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="p">(</span><span class="n">QgsProcessingAlgorithm</span><span class="p">,</span>
<span class="linenos"> 2</span>       <span class="n">QgsProcessingParameterNumber</span><span class="p">,</span>
<span class="linenos"> 3</span>       <span class="n">QgsProcessingParameterFeatureSource</span><span class="p">,</span>
<span class="linenos"> 4</span>       <span class="n">QgsProcessingParameterFeatureSink</span><span class="p">)</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kn">from</span> <span class="nn">qgis</span> <span class="kn">import</span> <span class="n">processing</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k">class</span> <span class="nc">algTest</span><span class="p">(</span><span class="n">QgsProcessingAlgorithm</span><span class="p">):</span>
<span class="linenos"> 9</span>    <span class="n">INPUT_BUFFERDIST</span> <span class="o">=</span> <span class="s1">&#39;BUFFERDIST&#39;</span>
<span class="linenos">10</span>    <span class="n">OUTPUT_BUFFER</span> <span class="o">=</span> <span class="s1">&#39;OUTPUT_BUFFER&#39;</span>
<span class="linenos">11</span>    <span class="n">INPUT_VECTOR</span> <span class="o">=</span> <span class="s1">&#39;INPUT_VECTOR&#39;</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">14</span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="linenos">15</span>
<span class="linenos">16</span>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">17</span>        <span class="k">return</span> <span class="s2">&quot;algTest&quot;</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="k">def</span> <span class="nf">displayName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">20</span>        <span class="k">return</span> <span class="s2">&quot;algTest script&quot;</span>
<span class="linenos">21</span>
<span class="linenos">22</span>    <span class="k">def</span> <span class="nf">createInstance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">23</span>        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)()</span>
<span class="linenos">24</span>
<span class="linenos">25</span>    <span class="k">def</span> <span class="nf">initAlgorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="linenos">26</span>        <span class="bp">self</span><span class="o">.</span><span class="n">addParameter</span><span class="p">(</span><span class="n">QgsProcessingParameterFeatureSource</span><span class="p">(</span>
<span class="linenos">27</span>            <span class="bp">self</span><span class="o">.</span><span class="n">INPUT_VECTOR</span><span class="p">,</span> <span class="s2">&quot;Input vector&quot;</span><span class="p">))</span>
<span class="linenos">28</span>        <span class="bp">self</span><span class="o">.</span><span class="n">addParameter</span><span class="p">(</span><span class="n">QgsProcessingParameterNumber</span><span class="p">(</span>
<span class="linenos">29</span>            <span class="bp">self</span><span class="o">.</span><span class="n">INPUT_BUFFERDIST</span><span class="p">,</span> <span class="s2">&quot;Buffer distance&quot;</span><span class="p">,</span>
<span class="linenos">30</span>            <span class="n">QgsProcessingParameterNumber</span><span class="o">.</span><span class="n">Double</span><span class="p">,</span>
<span class="linenos">31</span>            <span class="mf">100.0</span><span class="p">))</span>
<span class="linenos">32</span>        <span class="bp">self</span><span class="o">.</span><span class="n">addParameter</span><span class="p">(</span><span class="n">QgsProcessingParameterFeatureSink</span><span class="p">(</span>
<span class="linenos">33</span>            <span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT_BUFFER</span><span class="p">,</span> <span class="s2">&quot;Output buffer&quot;</span><span class="p">))</span>
<span class="linenos">34</span>
<span class="linenos">35</span>    <span class="k">def</span> <span class="nf">processAlgorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">feedback</span><span class="p">):</span>
<span class="linenos">36</span>        <span class="c1">#DO SOMETHING</span>
<span class="linenos">37</span>        <span class="n">algresult</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;native:smoothgeometry&quot;</span><span class="p">,</span>
<span class="linenos">38</span>            <span class="p">{</span><span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">INPUT_VECTOR</span><span class="p">],</span>
<span class="linenos">39</span>             <span class="s1">&#39;ITERATIONS&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos">40</span>             <span class="s1">&#39;OFFSET&#39;</span><span class="p">:</span><span class="mf">0.25</span><span class="p">,</span>
<span class="linenos">41</span>             <span class="s1">&#39;MAX_ANGLE&#39;</span><span class="p">:</span><span class="mi">180</span><span class="p">,</span>
<span class="linenos">42</span>             <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="s1">&#39;memory:&#39;</span><span class="p">},</span>
<span class="linenos">43</span>            <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">feedback</span><span class="o">=</span><span class="n">feedback</span><span class="p">,</span> <span class="n">is_child_algorithm</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">44</span>        <span class="n">smoothed</span> <span class="o">=</span> <span class="n">algresult</span><span class="p">[</span><span class="s1">&#39;OUTPUT&#39;</span><span class="p">]</span>
<span class="linenos">45</span>        <span class="n">algresult</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;native:buffer&#39;</span><span class="p">,</span>
<span class="linenos">46</span>            <span class="p">{</span><span class="s1">&#39;INPUT&#39;</span><span class="p">:</span> <span class="n">smoothed</span><span class="p">,</span>
<span class="linenos">47</span>            <span class="s1">&#39;DISTANCE&#39;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">INPUT_BUFFERDIST</span><span class="p">],</span>
<span class="linenos">48</span>            <span class="s1">&#39;SEGMENTS&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<span class="linenos">49</span>            <span class="s1">&#39;END_CAP_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">50</span>            <span class="s1">&#39;JOIN_STYLE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">51</span>            <span class="s1">&#39;MITER_LIMIT&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos">52</span>            <span class="s1">&#39;DISSOLVE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="linenos">53</span>            <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT_BUFFER</span><span class="p">]},</span>
<span class="linenos">54</span>            <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">feedback</span><span class="o">=</span><span class="n">feedback</span><span class="p">,</span> <span class="n">is_child_algorithm</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">55</span>        <span class="n">buffered</span> <span class="o">=</span> <span class="n">algresult</span><span class="p">[</span><span class="s1">&#39;OUTPUT&#39;</span><span class="p">]</span>
<span class="linenos">56</span>        <span class="k">return</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT_BUFFER</span><span class="p">:</span> <span class="n">buffered</span><span class="p">}</span>
</pre></div>
</div>
<p>After doing the necessary imports, the following
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingAlgorithm</span></code></a>
functions are specified:</p>
<ul>
<li><p><a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.name" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">name()</span></code></a>: The id of the
algorithm (lowercase).</p></li>
<li><p><a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.displayName" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">displayName()</span></code></a>:
A human readable name for the algorithm.</p></li>
<li><p><a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.createInstance" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">createInstance()</span></code></a>:
Create a new instance of the algorithm class.</p></li>
<li><p><a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.initAlgorithm" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initAlgorithm()</span></code></a>:
Configure the parameterDefinitions and outputDefinitions.</p>
<p>Here you describe the parameters and output of the algorithm.  In
this case, a feature source for the input, a feature sink for
the result and a number for the buffer distance.</p>
</li>
<li><p><a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.processAlgorithm" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">processAlgorithm()</span></code></a>:
Do the work.</p>
<p>Here we first run the <code class="docutils literal notranslate"><span class="pre">smoothgeometry</span></code> algorithm to smooth the
geometry, and then we run the <code class="docutils literal notranslate"><span class="pre">buffer</span></code> algorithm on the smoothed
output.
To be able to run algorithms from within another algorithm we have to
set the <code class="docutils literal notranslate"><span class="pre">is_child_algorithm</span></code> argument to <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>.
You can see how input and output parameters are used as parameters
to the <code class="docutils literal notranslate"><span class="pre">smoothgeometry</span></code> and <code class="docutils literal notranslate"><span class="pre">buffer</span></code> algorithms.</p>
</li>
</ul>
<p>There are a number of different parameter types available for input and output.
You can find the full list at <a class="reference internal" href="parameters.html#processing-algs-input-output"><span class="std std-ref">Input and output types for Processing Algorithms</span></a>.</p>
<p>The first parameter to the constructors is the name of the parameter,
and the second is the description of the parameter (for the user
interface).
The rest of the constructor parameters are parameter type specific.</p>
<p>The input can be turned into QGIS classes using the <code class="docutils literal notranslate"><span class="pre">parameterAs</span></code> functions
of <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingAlgorithm</span></code></a>.
For instance to get the number provided for the buffer distance as a double:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">parameterAsDouble</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">INPUT_BUFFERDIST</span><span class="p">,</span> <span class="n">context</span><span class="p">))</span><span class="o">.</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">processAlgorithm</span></code> function should return a dictionary
containing values for every output defined by the algorithm. This
allows access to these outputs from other algorithms, including other
algorithms contained within the same model.</p>
<p>Well behaved algorithms should define and return as many outputs as
makes sense. Non-feature outputs, such as numbers and strings, are very
useful when running your algorithm as part of a larger model, as these
values can be used as input parameters for subsequent algorithms
within the model. Consider adding numeric outputs for things like the
number of features processed, the number of invalid features
encountered, the number of features output, etc. The more outputs you
return, the more useful your algorithm becomes!</p>
<section id="feedback">
<h3><a class="toc-backref" href="#id3" role="doc-backlink"><span class="section-number">27.7.2.1. </span>Feedback</a><a class="headerlink" href="#feedback" title="Link to this heading"></a></h3>
<p>The <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingFeedback.html#qgis.core.QgsProcessingFeedback" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">feedback</span></code></a> object passed to
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.processAlgorithm" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">processAlgorithm()</span></code></a>
should be used for user feedback / interaction.
You can use the <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsFeedback.html#qgis.core.QgsFeedback.setProgress" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setProgress()</span></code></a>
function of the <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingFeedback.html#qgis.core.QgsProcessingFeedback" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">feedback</span></code></a> object to update
the progress bar (0 to 100) to inform the user about the progress of the
algorithm. This is very useful if your algorithm takes a long time to complete.</p>
<p>The <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingFeedback.html#qgis.core.QgsProcessingFeedback" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">feedback</span></code></a> object provides an
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsFeedback.html#qgis.core.QgsFeedback.isCanceled" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isCanceled()</span></code></a> method that
should be monitored to enable cancelation of the algorithm by the user.
The <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingFeedback.html#qgis.core.QgsProcessingFeedback.pushInfo" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pushInfo()</span></code></a> method of
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingFeedback.html#qgis.core.QgsProcessingFeedback" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">feedback</span></code></a> can be used to send information
to the user, and <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingFeedback.html#qgis.core.QgsProcessingFeedback.reportError" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reportError()</span></code></a>
is handy for pushing non-fatal errors to users.</p>
<p>Algorithms should avoid using other forms of providing feedback to
users, such as print statements or logging to
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsMessageLog.html#qgis.core.QgsMessageLog" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsMessageLog</span></code></a>, and
should always use the feedback object instead. This allows verbose
logging for the algorithm, and is also thread-safe (which is
important, given that algorithms are typically run in a background
thread).</p>
</section>
<section id="handling-errors">
<h3><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">27.7.2.2. </span>Handling errors</a><a class="headerlink" href="#handling-errors" title="Link to this heading"></a></h3>
<p>If your algorithm encounters an error which prevents it from
executing, such as invalid input values or some other condition from
which it cannot or should not recover, then you should raise a
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingException.html#qgis.core.QgsProcessingException" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingException</span></code></a>.
E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">feature</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
  <span class="k">raise</span> <span class="n">QgsProcessingException</span><span class="p">(</span><span class="s1">&#39;Invalid input value </span><span class="si">{}</span><span class="s1">, must be &gt;= 20&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">feature</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p>Try to avoid raising
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingException.html#qgis.core.QgsProcessingException" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingException</span></code></a> for
non-fatal errors
(e.g. when a feature has a null geometry), and instead just report
these errors via <code class="docutils literal notranslate"><span class="pre">feedback.reportError()</span></code> and skip the feature. This
helps make your algorithm “model-friendly”, as it avoids halting the
execution of an entire algorithm when a non-fatal error is
encountered.</p>
</section>
<section id="documenting-your-scripts">
<h3><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">27.7.2.3. </span>Documenting your scripts</a><a class="headerlink" href="#documenting-your-scripts" title="Link to this heading"></a></h3>
<p>As in the case of models, you can create additional documentation for
your scripts, to explain what they do and how to use them.</p>
<p><a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm" title="(in QGIS Python API v3.34)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingAlgorithm</span></code></a>
provides the <a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.helpString" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">helpString()</span></code></a>,
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.shortHelpString" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shortHelpString()</span></code></a> and
<a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.helpUrl" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">helpUrl()</span></code></a> functions for that purpose.
Specify / override these to provide more help to the user.</p>
<p><a class="reference external" href="https://qgis.org/pyqgis/3.34/core/QgsProcessingAlgorithm.html#qgis.core.QgsProcessingAlgorithm.shortDescription" title="(in QGIS Python API v3.34)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shortDescription()</span></code></a>
is used in the tooltip when hovering over the algorithm in the toolbox.</p>
</section>
</section>
<section id="pre-and-post-execution-script-hooks">
<h2><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">27.7.3. </span>Pre- and post-execution script hooks</a><a class="headerlink" href="#pre-and-post-execution-script-hooks" title="Link to this heading"></a></h2>
<p>Scripts can also be used as pre- and post-execution hooks that are run before
and after an algorithm is run, respectively. This can be used to automate tasks
that should be performed whenever an algorithm is executed.</p>
<p>The syntax is identical to the syntax explained above, but an additional global
variable named <code class="docutils literal notranslate"><span class="pre">alg</span></code> is available, representing the algorithm that has just
been (or is about to be) executed.</p>
<p>In the <span class="guilabel">General</span> group of the processing options dialog, you will find two
entries named <span class="guilabel">Pre-execution script</span> and <span class="guilabel">Post-execution
script</span> where the filenames of the scripts to be run in each case can be
entered.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="batch.html" class="btn btn-neutral float-left" title="27.6. The batch processing interface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="standalone.html" class="btn btn-neutral float-right" title="27.8. Using processing from the command line" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">Last updated on 2024 May 30, 01:27 +0900.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages:
Expected French translation link for https://docs.qgis.org/3.28/en/docs/user_manual/print_composer/overview_composer.html
would return https://app.transifex.com/qgis/qgis-documentation/translate/#fr/aa6d8bc653526d38b295ca94bf8eee5e
with the md5 value of "github#qgis/QGIS-Documentation#release_3.28#locale/en/LC_MESSAGES/docs/user_manual/print_composer/overview_composer.po"-->
<!--Make sure that mismatching language codes between Transifex and Sphinx are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: 3.34
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/user_manual/processing/console.html">en</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/cs/docs/user_manual/processing/console.html">cs</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/de/docs/user_manual/processing/console.html">de</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/es/docs/user_manual/processing/console.html">es</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/fr/docs/user_manual/processing/console.html">fr</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/hu/docs/user_manual/processing/console.html">hu</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/it/docs/user_manual/processing/console.html">it</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/processing/console.html">ja</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ko/docs/user_manual/processing/console.html">ko</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/lt/docs/user_manual/processing/console.html">lt</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/nl/docs/user_manual/processing/console.html">nl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_BR/docs/user_manual/processing/console.html">pt_BR</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_PT/docs/user_manual/processing/console.html">pt_PT</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ro/docs/user_manual/processing/console.html">ro</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ru/docs/user_manual/processing/console.html">ru</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zh-Hans/docs/user_manual/processing/console.html">zh-Hans</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/en/docs/user_manual/processing/console.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/en/docs/user_manual/processing/console.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/user_manual/processing/console.html">3.34</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.28/en/docs/user_manual/processing/console.html">3.28</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.22/en/docs/user_manual/processing/console.html">3.22</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/en/docs/user_manual/processing/console.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/en/docs/user_manual/processing/console.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/en/docs/user_manual/processing/console.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/en/docs/user_manual/processing/console.html">2.18</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/user_manual/processing/console.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://app.transifex.com/qgis/qgis-documentation/translate/#en/f6ccfdfd3b5a77d303c6bc7bdbfadfe9" target="_blank" rel="noopener noreferrer">Translate Page</a>
          </dd>
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/en" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/3.34" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/3.34" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/release-3_34" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>