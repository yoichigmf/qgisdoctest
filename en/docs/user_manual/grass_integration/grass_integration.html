<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>26. GRASS GIS Integration &mdash; QGIS Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/qgis_docs.css?v=5415a924" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/user_manual/grass_integration/grass_integration.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="27. QGIS processing framework" href="../processing/index.html" />
    <link rel="prev" title="25.2. User Authentication Workflows" href="../auth_system/auth_workflows.html" />
  <meta name="description" content="QGIS 3.34 documentation: 26. GRASS GIS Integration">
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   

          
          
          <a href="../../index.html" class="icon icon-home">
            QGIS Documentation
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.34
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">For Users</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">QGIS Desktop User Guide/Manual (QGIS 3.34)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../preamble/preamble.html">1. Preamble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/foreword.html">2. Foreword</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/conventions.html">3. Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/features.html">4. Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/getting_started.html">5. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/project_files.html">6. Working with Project Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_gui.html">7. QGIS GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/browser.html">8. The Browser panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_configuration.html">9. QGIS Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_projections/working_with_projections.html">10. Working with Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../map_views/index.html">11. Visualizing Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/general_tools.html">12. General Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expressions/index.html">13. Level up with Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style_library/index.html">14. The Style Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../managing_data_source/index.html">15. Managing Data Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector/index.html">16. Working with Vector Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_raster/index.html">17. Working with Raster Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_mesh/mesh.html">18. Working with Mesh Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector_tiles/vector_tiles.html">19. Working with Vector Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_point_clouds/point_clouds.html">20. Working with Point Clouds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_3d_tiles/3d_tiles.html">21. Working with 3D Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../print_composer/index.html">22. Laying out the maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_ogc/ogc_client_support.html">23. Working with OGC / ISO protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_gps/index.html">24. Working with GPS Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth_system/index.html">25. Authentication System</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">26. GRASS GIS Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#demo-dataset">26.1. Demo dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-grass-raster-and-vector-layers">26.2. Loading GRASS raster and vector layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#importing-data-into-a-grass-location-via-drag-and-drop">26.3. Importing data into a GRASS LOCATION via drag and drop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#managing-grass-data-in-qgis-browser">26.4. Managing GRASS data in QGIS Browser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grass-options">26.5. GRASS Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#starting-the-grass-plugin">26.6. Starting the GRASS plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#opening-grass-mapset">26.7. Opening GRASS mapset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grass-location-and-mapset">26.8. GRASS LOCATION and MAPSET</a></li>
<li class="toctree-l3"><a class="reference internal" href="#importing-data-into-a-grass-location">26.9. Importing data into a GRASS LOCATION</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-new-grass-location">26.9.1. Creating a new GRASS LOCATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-a-new-mapset">26.9.2. Adding a new MAPSET</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-grass-vector-data-model">26.10. The GRASS vector data model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-new-grass-vector-layer">26.11. Creating a new GRASS vector layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#digitizing-and-editing-a-grass-vector-layer">26.12. Digitizing and editing a GRASS vector layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-grass-region-tool">26.13. The GRASS region tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-grass-toolbox">26.14. The GRASS Toolbox</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#working-with-grass-modules">26.14.1. Working with GRASS modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#grass-module-examples">26.14.2. GRASS module examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customizing-the-grass-toolbox">26.14.3. Customizing the GRASS Toolbox</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../processing/index.html">27. QGIS processing framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing_algs/index.html">28. Processing providers and algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">29. Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/help_and_support.html">30. Help and Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/contributors.html">31. Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/index.html">32. Appendices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../literature_web/literature_and_web_references.html">33. Literature and Web References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Server Guide/Manual (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_manual/index.html">Training Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">A Gentle Introduction to GIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Writers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">Documentation Guidelines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyqgis_developer_cookbook/index.html">PyQGIS Cookbook (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">Developers Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">QGIS User Guide</a></li>
      <li class="breadcrumb-item active"><span class="section-number">26. </span>GRASS GIS Integration</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/user_manual/grass_integration/grass_integration.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../auth_system/auth_workflows.html" class="btn btn-neutral float-left" title="25.2. User Authentication Workflows" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../processing/index.html" class="btn btn-neutral float-right" title="27. QGIS processing framework" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div></div></blockquote>
<section id="grass-gis-integration">
<span id="sec-grass"></span><span id="index-0"></span><h1><span class="section-number">26. </span>GRASS GIS Integration<a class="headerlink" href="#grass-gis-integration" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#demo-dataset" id="id11">Demo dataset</a></p></li>
<li><p><a class="reference internal" href="#loading-grass-raster-and-vector-layers" id="id12">Loading GRASS raster and vector layers</a></p></li>
<li><p><a class="reference internal" href="#importing-data-into-a-grass-location-via-drag-and-drop" id="id13">Importing data into a GRASS LOCATION via drag and drop</a></p></li>
<li><p><a class="reference internal" href="#managing-grass-data-in-qgis-browser" id="id14">Managing GRASS data in QGIS Browser</a></p></li>
<li><p><a class="reference internal" href="#grass-options" id="id15">GRASS Options</a></p></li>
<li><p><a class="reference internal" href="#starting-the-grass-plugin" id="id16">Starting the GRASS plugin</a></p></li>
<li><p><a class="reference internal" href="#opening-grass-mapset" id="id17">Opening GRASS mapset</a></p></li>
<li><p><a class="reference internal" href="#grass-location-and-mapset" id="id18">GRASS LOCATION and MAPSET</a></p></li>
<li><p><a class="reference internal" href="#importing-data-into-a-grass-location" id="id19">Importing data into a GRASS LOCATION</a></p>
<ul>
<li><p><a class="reference internal" href="#creating-a-new-grass-location" id="id20">Creating a new GRASS LOCATION</a></p></li>
<li><p><a class="reference internal" href="#adding-a-new-mapset" id="id21">Adding a new MAPSET</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#the-grass-vector-data-model" id="id22">The GRASS vector data model</a></p></li>
<li><p><a class="reference internal" href="#creating-a-new-grass-vector-layer" id="id23">Creating a new GRASS vector layer</a></p></li>
<li><p><a class="reference internal" href="#digitizing-and-editing-a-grass-vector-layer" id="id24">Digitizing and editing a GRASS vector layer</a></p></li>
<li><p><a class="reference internal" href="#the-grass-region-tool" id="id25">The GRASS region tool</a></p></li>
<li><p><a class="reference internal" href="#the-grass-toolbox" id="id26">The GRASS Toolbox</a></p>
<ul>
<li><p><a class="reference internal" href="#working-with-grass-modules" id="id27">Working with GRASS modules</a></p></li>
<li><p><a class="reference internal" href="#grass-module-examples" id="id28">GRASS module examples</a></p>
<ul>
<li><p><a class="reference internal" href="#creating-contour-lines" id="id29">Creating contour lines</a></p></li>
<li><p><a class="reference internal" href="#creating-a-hillshade-3-d-effect" id="id30">Creating a Hillshade 3-D effect</a></p></li>
<li><p><a class="reference internal" href="#raster-statistics-in-a-vector-map" id="id31">Raster statistics in a vector map</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#customizing-the-grass-toolbox" id="id32">Customizing the GRASS Toolbox</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>GRASS integration provides access to GRASS GIS databases and functionalities
(see GRASS-PROJECT in <a class="reference internal" href="../literature_web/literature_and_web_references.html#literature-and-web"><span class="std std-ref">Literature and Web References</span></a>). The integration consists of two parts:
provider and plugin. The provider allows to browse, manage and visualize GRASS raster
and vector layers. The plugin can be used to create new GRASS locations and mapsets,
change GRASS region, create and edit vector layers and analyze GRASS 2-D and 3-D data
with more than 400 GRASS modules. In this section, we’ll introduce the provider and plugin
functionalities and give some examples of managing and working with GRASS data.</p>
<p>The provider supports GRASS version 6 and 7, the plugin supports GRASS 6 and 7
(starting from QGIS 2.12). QGIS distribution may contain provider/plugin for either
GRASS 6 or GRASS 7 or for both versions at the same time
(binaries have different file names). Only one version of the provider/plugin may be
loaded on runtime however.</p>
<section id="demo-dataset">
<h2><a class="toc-backref" href="#id11" role="doc-backlink"><span class="section-number">26.1. </span>Demo dataset</a><a class="headerlink" href="#demo-dataset" title="Link to this heading"></a></h2>
<p>As an example, we will use the QGIS Alaska dataset (see section <a class="reference internal" href="../introduction/getting_started.html#label-sampledata"><span class="std std-ref">Downloading sample data</span></a>).
It includes a small sample GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> with three vector layers and one
raster elevation map. Create a new folder called <code class="file docutils literal notranslate"><span class="pre">grassdata</span></code>, download
the QGIS ‘Alaska’ dataset <code class="file docutils literal notranslate"><span class="pre">qgis_sample_data.zip</span></code> from
<a class="reference external" href="https://qgis.org/downloads/data/">https://qgis.org/downloads/data/</a> and unzip the file into <code class="file docutils literal notranslate"><span class="pre">grassdata</span></code>.</p>
<p>More sample GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATIONs</span></code> are available at the GRASS website at
<a class="reference external" href="https://grass.osgeo.org/download/data/">https://grass.osgeo.org/download/data/</a>.</p>
</section>
<section id="loading-grass-raster-and-vector-layers">
<span id="sec-load-grassdata"></span><h2><a class="toc-backref" href="#id12" role="doc-backlink"><span class="section-number">26.2. </span>Loading GRASS raster and vector layers</a><a class="headerlink" href="#loading-grass-raster-and-vector-layers" title="Link to this heading"></a></h2>
<p>If the provider is loaded in QGIS, the location item with GRASS <a class="reference internal" href="../../../_images/grasslogo.png"><img alt="grassLogo" src="../../../_images/grasslogo.png" style="width: 1.5em;" /></a>
icon is added in the browser tree under each folder item which contains GRASS location.
Go to the folder <code class="file docutils literal notranslate"><span class="pre">grassdata</span></code> and expand location <code class="file docutils literal notranslate"><span class="pre">alaska</span></code> and
mapset <code class="file docutils literal notranslate"><span class="pre">demo</span></code>.</p>
<p>You can load GRASS raster and vector layers like any other layer from the browser either
by double click on layer item or by dragging and dropping to map canvas or legend.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>GRASS Data Loading</strong></p>
<p>If you don’t see GRASS location item, verify in
<span class="menuselection">Help ► About ► Providers</span> if
GRASS vector provider is loaded.</p>
</div>
</section>
<section id="importing-data-into-a-grass-location-via-drag-and-drop">
<span id="import-data-dnd"></span><h2><a class="toc-backref" href="#id13" role="doc-backlink"><span class="section-number">26.3. </span>Importing data into a GRASS LOCATION via drag and drop</a><a class="headerlink" href="#importing-data-into-a-grass-location-via-drag-and-drop" title="Link to this heading"></a></h2>
<p>This section gives an example of how to import raster and vector data into a GRASS mapset.</p>
<ol class="arabic simple">
<li><p>In QGIS browser navigate to the mapset you want to import data into.</p></li>
<li><p>In QGIS browser find a layer you want to import to GRASS, note that you can
open another instance of the browser (<span class="guilabel">Browser Panel (2)</span>) if
source data are too far from the mapset in the tree.</p></li>
<li><p>Drag a layer and drop it on the target mapset. The import may take some time for
larger layers, you will see animated icon <a class="reference internal" href="../../../_images/mIconImport.png"><img alt="import" src="../../../_images/mIconImport.png" style="width: 1.5em;" /></a> in front of new layer item
until the import finishes.</p></li>
</ol>
<p>When raster data are in different CRS, they can be reprojected using an <span class="guilabel">Approximate</span>
(fast) or <span class="guilabel">Exact</span> (precise) transformation. If a link to the source raster
is created (using <code class="docutils literal notranslate"><span class="pre">r.external</span></code>), the source data are in the same CRS and the format
is known to GDAL, the source data CRS will be used. You can set these options in the
<span class="guilabel">Browser</span> tab in <a class="reference internal" href="#grass-options"><span class="std std-ref">GRASS Options</span></a>.</p>
<p>If a source raster has more bands, a new GRASS map is created for each layer with
<strong>.&lt;band number&gt;</strong> suffix and group of all maps with <a class="reference internal" href="../../../_images/mIconRasterGroup.png"><img alt="rasterGroup" src="../../../_images/mIconRasterGroup.png" style="width: 1.5em;" /></a> icon is created.
External rasters have a different icon <a class="reference internal" href="../../../_images/mIconRasterLink.png"><img alt="rasterLink" src="../../../_images/mIconRasterLink.png" style="width: 1.5em;" /></a>.</p>
</section>
<section id="managing-grass-data-in-qgis-browser">
<span id="managing-grass-data"></span><h2><a class="toc-backref" href="#id14" role="doc-backlink"><span class="section-number">26.4. </span>Managing GRASS data in QGIS Browser</a><a class="headerlink" href="#managing-grass-data-in-qgis-browser" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Copying maps: GRASS maps may be copied between mapsets within the same location using drag and drop.</p></li>
<li><p>Deleting maps: Right click on a GRASS map and select <span class="guilabel">Delete</span> from context menu.</p></li>
<li><p>Renaming maps: Right click on a GRASS map and select <span class="guilabel">Rename</span> from context menu.</p></li>
</ul>
</section>
<section id="grass-options">
<span id="id1"></span><h2><a class="toc-backref" href="#id15" role="doc-backlink"><span class="section-number">26.5. </span>GRASS Options</a><a class="headerlink" href="#grass-options" title="Link to this heading"></a></h2>
<p>GRASS options may be set in <span class="guilabel">GRASS Options</span> dialog, which can be opened by right
clicking on the location or mapset item in the browser and then choosing <span class="guilabel">GRASS Options</span>.</p>
</section>
<section id="starting-the-grass-plugin">
<span id="sec-starting-grass"></span><h2><a class="toc-backref" href="#id16" role="doc-backlink"><span class="section-number">26.6. </span>Starting the GRASS plugin</a><a class="headerlink" href="#starting-the-grass-plugin" title="Link to this heading"></a></h2>
<p>To use GRASS functionalities in QGIS, you must select and load the GRASS plugin using the
Plugin Manager. To do this, go to the menu <span class="menuselection">Plugins ►</span> <a class="reference internal" href="../../../_images/mActionShowPluginManager.png"><img alt="showPluginManager" src="../../../_images/mActionShowPluginManager.png" style="width: 1.5em;" /></a>
<span class="menuselection">Manage and Install Plugins…</span>, select <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">GRASS</span> and click
<span class="guilabel">OK</span>.</p>
<p>The following main features are provided with the GRASS menu
(<span class="menuselection">Plugins ► GRASS</span>) when you start the GRASS plugin:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/grass_open_mapset.png"><img alt="grassOpenMapset" src="../../../_images/grass_open_mapset.png" style="width: 1.5em;" /></a> <sup>Open Mapset</sup></p></li>
<li><p><a class="reference internal" href="../../../_images/grass_new_mapset.png"><img alt="grassNewMapset" src="../../../_images/grass_new_mapset.png" style="width: 1.5em;" /></a> <sup>New Mapset</sup></p></li>
<li><p><a class="reference internal" href="../../../_images/grass_close_mapset.png"><img alt="grassCloseMapset" src="../../../_images/grass_close_mapset.png" style="width: 1.5em;" /></a> <sup>Close Mapset</sup></p></li>
<li><p><a class="reference internal" href="../../../_images/grass_tools.png"><img alt="grassTools" src="../../../_images/grass_tools.png" style="width: 1.5em;" /></a> <sup>Open GRASS Tools</sup></p></li>
<li><p><a class="reference internal" href="../../../_images/grass_region.png"><img alt="grassRegion" src="../../../_images/grass_region.png" style="width: 1.5em;" /></a> <sup>Display Current GRASS Region</sup></p></li>
<li><p><a class="reference internal" href="../../../_images/general.png"><img alt="general" src="../../../_images/general.png" style="width: 1.5em;" /></a> <sup>GRASS Options</sup></p></li>
</ul>
</section>
<section id="opening-grass-mapset">
<h2><a class="toc-backref" href="#id17" role="doc-backlink"><span class="section-number">26.7. </span>Opening GRASS mapset</a><a class="headerlink" href="#opening-grass-mapset" title="Link to this heading"></a></h2>
<p>A GRASS mapset must be opened to get access to GRASS Tools in the plugin (the tools
are disabled if no mapset is open). You can open a mapset from the browser:
right click on mapset item and then choose <span class="guilabel">Open mapset</span> from context menu.</p>
</section>
<section id="grass-location-and-mapset">
<span id="sec-about-loc"></span><h2><a class="toc-backref" href="#id18" role="doc-backlink"><span class="section-number">26.8. </span>GRASS LOCATION and MAPSET</a><a class="headerlink" href="#grass-location-and-mapset" title="Link to this heading"></a></h2>
<p>GRASS data are stored in a directory referred to as GISDBASE. This directory, often
called <code class="file docutils literal notranslate"><span class="pre">grassdata</span></code>, must be created before you start working with the GRASS
plugin in QGIS. Within this directory, the GRASS GIS data are organized by projects
stored in subdirectories called <code class="file docutils literal notranslate"><span class="pre">LOCATIONs</span></code>. Each <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> is defined
by its coordinate system, map projection and geographical boundaries. Each
<code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> can have several <code class="file docutils literal notranslate"><span class="pre">MAPSETs</span></code> (subdirectories of the
<code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code>) that are used to subdivide the project into different topics or
sub-regions, or as workspaces for individual team members (see Neteler &amp; Mitasova
2008 in <a class="reference internal" href="../literature_web/literature_and_web_references.html#literature-and-web"><span class="std std-ref">Literature and Web References</span></a>). In order to analyze vector and raster layers
with GRASS modules, you generally have to import them into a GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code>.
(This is not strictly true – with the GRASS modules <code class="file docutils literal notranslate"><span class="pre">r.external</span></code> and <code class="file docutils literal notranslate"><span class="pre">v.external</span></code>
you can create read-only links to external GDAL-supported datasets without
importing them. This is not the usual way for beginners to work with GRASS, therefore
this functionality will not be described here.)</p>
<figure class="align-center" id="id2">
<span id="figure-grass-location"></span><img alt="../../../_images/grass_location.png" src="../../../_images/grass_location.png" />
<figcaption>
<p><span class="caption-number">Fig. 26.1 </span><span class="caption-text">GRASS data in the alaska LOCATION</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="importing-data-into-a-grass-location">
<span id="sec-import-loc-data"></span><h2><a class="toc-backref" href="#id19" role="doc-backlink"><span class="section-number">26.9. </span>Importing data into a GRASS LOCATION</a><a class="headerlink" href="#importing-data-into-a-grass-location" title="Link to this heading"></a></h2>
<p>See section <a class="reference internal" href="#import-data-dnd"><span class="std std-ref">Importing data into a GRASS LOCATION via drag and drop</span></a> to find how data can be easily imported
by dragging and dropping in the browser.</p>
<p>This section gives an example of how to import raster and vector data into the
‘alaska’ GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> provided by the QGIS ‘Alaska’ dataset in traditional
way, using standard GRASS modules.
Therefore, we use the landcover raster map <code class="file docutils literal notranslate"><span class="pre">landcover.img</span></code> and the vector GML
file <code class="file docutils literal notranslate"><span class="pre">lakes.gml</span></code> from the QGIS ‘Alaska’ dataset (see <a class="reference internal" href="../introduction/getting_started.html#label-sampledata"><span class="std std-ref">Downloading sample data</span></a>).</p>
<ol class="arabic simple">
<li><p>Start QGIS and make sure the GRASS plugin is loaded.</p></li>
<li><p>In the GRASS toolbar, click the <a class="reference internal" href="../../../_images/grass_open_mapset.png"><img alt="grassOpenMapset" src="../../../_images/grass_open_mapset.png" style="width: 1.5em;" /></a> <sup>Open MAPSET</sup> icon
to bring up the <span class="guilabel">MAPSET</span> wizard.</p></li>
<li><p>Select as GRASS database the folder <code class="file docutils literal notranslate"><span class="pre">grassdata</span></code> in the QGIS
Alaska dataset, as <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> ‘alaska’, as <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code> ‘demo’ and
click <span class="guilabel">OK</span>.</p></li>
<li><p>Now click the <a class="reference internal" href="../../../_images/grass_tools.png"><img alt="grassTools" src="../../../_images/grass_tools.png" style="width: 1.5em;" /></a> <sup>Open GRASS tools</sup> icon. The
GRASS Toolbox (see section <a class="reference internal" href="#subsec-grass-toolbox"><span class="std std-ref">The GRASS Toolbox</span></a>) dialog appears.</p></li>
<li><p>To import the raster map <code class="file docutils literal notranslate"><span class="pre">landcover.img</span></code>, click the module
<code class="file docutils literal notranslate"><span class="pre">r.in.gdal</span></code> in the <span class="guilabel">Modules Tree</span> tab. This GRASS module
allows you to import GDAL-supported raster files into a GRASS
<code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code>. The module dialog for <code class="file docutils literal notranslate"><span class="pre">r.in.gdal</span></code> appears.</p></li>
<li><p>Browse to the folder <code class="file docutils literal notranslate"><span class="pre">raster</span></code> in the QGIS ‘Alaska’ dataset
and select the file <code class="file docutils literal notranslate"><span class="pre">landcover.img</span></code>.</p></li>
<li><p>As raster output name, define <code class="file docutils literal notranslate"><span class="pre">landcover_grass</span></code> and click
<span class="guilabel">Run</span>. In the <span class="guilabel">Output</span> tab, you see the currently running GRASS
command <code class="docutils literal notranslate"><span class="pre">r.in.gdal</span> <span class="pre">-o</span> <span class="pre">input=/path/to/landcover.img</span>
<span class="pre">output=landcover_grass</span></code>.</p></li>
<li><p>When it says <strong>Successfully finished</strong>, click <span class="guilabel">View Output</span>.
The <code class="file docutils literal notranslate"><span class="pre">landcover_grass</span></code> raster layer is now imported into GRASS and
will be visualized in the QGIS canvas.</p></li>
<li><p>To import the vector GML file <code class="file docutils literal notranslate"><span class="pre">lakes.gml</span></code>, click the module
<code class="file docutils literal notranslate"><span class="pre">v.in.ogr</span></code> in the <span class="guilabel">Modules Tree</span> tab. This GRASS module allows
you to import OGR-supported vector files into a GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code>. The
module dialog for <code class="file docutils literal notranslate"><span class="pre">v.in.ogr</span></code> appears.</p></li>
<li><p>Browse to the folder <code class="file docutils literal notranslate"><span class="pre">gml</span></code> in the QGIS ‘Alaska’ dataset and select the
file <code class="file docutils literal notranslate"><span class="pre">lakes.gml</span></code> as OGR file.</p></li>
<li><p>As vector output name, define <code class="file docutils literal notranslate"><span class="pre">lakes_grass</span></code> and click <span class="guilabel">Run</span>. You
don’t have to care about the other options in this example. In the
<span class="guilabel">Output</span> tab you see the currently running GRASS command
<code class="docutils literal notranslate"><span class="pre">v.in.ogr</span> <span class="pre">-o</span> <span class="pre">dsn=/path/to/lakes.gml</span> <span class="pre">output=lakes\_grass</span></code>.</p></li>
<li><p>When it says <strong>Succesfully finished</strong>, click <span class="guilabel">View Output</span>. The
<code class="file docutils literal notranslate"><span class="pre">lakes_grass</span></code> vector layer is now imported into GRASS and will be
visualized in the QGIS canvas.</p></li>
</ol>
<section id="creating-a-new-grass-location">
<span id="sec-create-loc"></span><h3><a class="toc-backref" href="#id20" role="doc-backlink"><span class="section-number">26.9.1. </span>Creating a new GRASS LOCATION</a><a class="headerlink" href="#creating-a-new-grass-location" title="Link to this heading"></a></h3>
<p>As an example, here is the sample GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATION</span> <span class="pre">alaska</span></code>, which is
projected in the Albers Equal Area projection using feet as units.
This sample GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATION</span> <span class="pre">alaska</span></code> will be used for all examples and
exercises in the following GRASS-related sections. It is useful to download and
install the dataset on your computer (see <a class="reference internal" href="../introduction/getting_started.html#label-sampledata"><span class="std std-ref">Downloading sample data</span></a>).</p>
<ol class="arabic simple">
<li><p>Start QGIS and make sure the GRASS plugin is loaded.</p></li>
<li><p>Visualize the <code class="file docutils literal notranslate"><span class="pre">alaska.shp</span></code> shapefile (see section <a class="reference internal" href="../managing_data_source/opening_data.html#loading-file"><span class="std std-ref">Loading a layer from a file</span></a>)
from the QGIS Alaska dataset (see <a class="reference internal" href="../introduction/getting_started.html#label-sampledata"><span class="std std-ref">Downloading sample data</span></a>).</p></li>
<li><p>In the GRASS toolbar, click on the <a class="reference internal" href="../../../_images/grass_new_mapset.png"><img alt="grassNewMapset" src="../../../_images/grass_new_mapset.png" style="width: 1.5em;" /></a> <sup>New mapset</sup> icon
to bring up the <span class="guilabel">MAPSET</span> wizard.</p></li>
<li><p>Select an existing GRASS database (GISDBASE) folder <code class="file docutils literal notranslate"><span class="pre">grassdata</span></code>, or create
one for the new <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> using a file manager on your computer. Then
click <span class="guilabel">Next</span>.</p></li>
<li><p>We can use this wizard to create a new <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code> within an existing
<code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> (see section <a class="reference internal" href="#sec-add-mapset"><span class="std std-ref">Adding a new MAPSET</span></a>) or to create a new
<code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> altogether. Select <a class="reference internal" href="../../../_images/radiobuttonon.png"><img alt="radioButtonOn" src="../../../_images/radiobuttonon.png" style="width: 1.5em;" /></a> <span class="guilabel">Create new
location</span> (see <a class="reference internal" href="#figure-grass-new-location"><span class="std std-numref">Fig. 26.2</span></a>).</p></li>
<li><p>Enter a name for the <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> – we used ‘alaska’ – and click <span class="guilabel">Next</span>.</p></li>
<li><p>Define the projection by clicking on the radio button <a class="reference internal" href="../../../_images/radiobuttonon.png"><img alt="radioButtonOn" src="../../../_images/radiobuttonon.png" style="width: 1.5em;" /></a>
<span class="guilabel">Projection</span> to enable the projection list.</p></li>
<li><p>We are using Albers Equal Area Alaska (feet) projection. Since we happen to
know that it is represented by the EPSG ID 2964, we enter it in the search box.
(Note: If you want to repeat this process for another <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> and
projection and haven’t memorized the EPSG ID, click on the <a class="reference internal" href="../../../_images/mIconProjectionEnabled.png"><img alt="projectionEnabled" src="../../../_images/mIconProjectionEnabled.png" style="width: 1.5em;" /></a>
<sup>CRS Status</sup> icon in the lower right-hand corner of the status bar (see
section <a class="reference internal" href="../working_with_projections/working_with_projections.html#label-projections"><span class="std std-ref">Working with Projections</span></a>)).</p></li>
<li><p>In <span class="guilabel">Filter</span>, insert 2964 to select the projection.</p></li>
<li><p>Click <span class="guilabel">Next</span>.</p></li>
<li><p>To define the default region, we have to enter the <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> bounds in the
north, south, east, and west directions. Here, we simply click on the button
<span class="guilabel">Set Current QGIS Extent</span>, to apply the extent of the loaded layer
<code class="file docutils literal notranslate"><span class="pre">alaska.shp</span></code> as the GRASS default region extent.</p></li>
<li><p>Click <span class="guilabel">Next</span>.</p></li>
<li><p>We also need to define a <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code> within our new <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> (this
is necessary when creating a new <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code>). You can name it whatever you
like - we used ‘demo’. GRASS automatically creates a special <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code> called
<code class="file docutils literal notranslate"><span class="pre">PERMANENT</span></code>, designed to store the core data for the project, its default
spatial extent and coordinate system definitions (see Neteler &amp; Mitasova 2008
in <a class="reference internal" href="../literature_web/literature_and_web_references.html#literature-and-web"><span class="std std-ref">Literature and Web References</span></a>).</p></li>
<li><p>Check out the summary to make sure it’s correct and click <span class="guilabel">Finish</span>.</p></li>
<li><p>The new <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code>, ‘alaska’, and two <code class="file docutils literal notranslate"><span class="pre">MAPSETs</span></code>, ‘demo’ and ‘PERMANENT’,
are created. The currently opened working set is ‘demo’, as you defined.</p></li>
<li><p>Notice that some of the tools in the GRASS toolbar that were disabled are now
enabled.</p></li>
</ol>
<figure class="align-center" id="id3">
<span id="figure-grass-new-location"></span><img alt="../../../_images/create_grass_location.png" src="../../../_images/create_grass_location.png" />
<figcaption>
<p><span class="caption-number">Fig. 26.2 </span><span class="caption-text">Creating a new GRASS LOCATION or a new MAPSET in QGIS</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>If that seemed like a lot of steps, it’s really not all that bad and a very quick
way to create a <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code>. The <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> ‘alaska’ is now ready for
data import (see section <a class="reference internal" href="#sec-import-loc-data"><span class="std std-ref">Importing data into a GRASS LOCATION</span></a>). You can also use the already-existing
vector and raster data in the sample GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> ‘alaska’,
included in the QGIS ‘Alaska’ dataset <a class="reference internal" href="../introduction/getting_started.html#label-sampledata"><span class="std std-ref">Downloading sample data</span></a>, and move on to
section <a class="reference internal" href="#label-vectmodel"><span class="std std-ref">The GRASS vector data model</span></a>.</p>
</section>
<section id="adding-a-new-mapset">
<span id="sec-add-mapset"></span><h3><a class="toc-backref" href="#id21" role="doc-backlink"><span class="section-number">26.9.2. </span>Adding a new MAPSET</a><a class="headerlink" href="#adding-a-new-mapset" title="Link to this heading"></a></h3>
<p>A user has write access only to a GRASS <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code> which he or she created. This
means that besides access to your own <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code>, you can read maps in other users’
<code class="file docutils literal notranslate"><span class="pre">MAPSETs</span></code> (and they can read yours), but you can modify or remove only the maps in
your own <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code>.</p>
<p>All <code class="file docutils literal notranslate"><span class="pre">MAPSETs</span></code> include a <code class="file docutils literal notranslate"><span class="pre">WIND</span></code> file that stores the current boundary
coordinate values and the currently selected raster resolution (see Neteler &amp; Mitasova
2008 in <a class="reference internal" href="../literature_web/literature_and_web_references.html#literature-and-web"><span class="std std-ref">Literature and Web References</span></a>, and section <a class="reference internal" href="#sec-grass-region"><span class="std std-ref">The GRASS region tool</span></a>).</p>
<ol class="arabic simple">
<li><p>Start QGIS and make sure the GRASS plugin is loaded.</p></li>
<li><p>In the GRASS toolbar, click on the <a class="reference internal" href="../../../_images/grass_new_mapset.png"><img alt="grassNewMapset" src="../../../_images/grass_new_mapset.png" style="width: 1.5em;" /></a> <sup>New mapset</sup> icon
to bring up the <span class="guilabel">MAPSET</span> wizard.</p></li>
<li><p>Select the GRASS database (GISDBASE) folder <code class="file docutils literal notranslate"><span class="pre">grassdata</span></code> with the
<code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> ‘alaska’, where we want to add a further <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code>
called ‘test’.</p></li>
<li><p>Click <span class="guilabel">Next</span>.</p></li>
<li><p>We can use this wizard to create a new <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code> within an existing
<code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> or to create a new <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> altogether. Click on the
radio button <a class="reference internal" href="../../../_images/radiobuttonon.png"><img alt="radioButtonOn" src="../../../_images/radiobuttonon.png" style="width: 1.5em;" /></a> <span class="guilabel">Select location</span>
(see <a class="reference internal" href="#figure-grass-new-location"><span class="std std-numref">Fig. 26.2</span></a>) and click <span class="guilabel">Next</span>.</p></li>
<li><p>Enter the name <code class="file docutils literal notranslate"><span class="pre">test</span></code> for the new <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code>. Below in the wizard, you
see a list of existing <code class="file docutils literal notranslate"><span class="pre">MAPSETs</span></code> and corresponding owners.</p></li>
<li><p>Click <span class="guilabel">Next</span>, check out the summary to make sure it’s all correct and
click <span class="guilabel">Finish</span>.</p></li>
</ol>
</section>
</section>
<section id="the-grass-vector-data-model">
<span id="label-vectmodel"></span><h2><a class="toc-backref" href="#id22" role="doc-backlink"><span class="section-number">26.10. </span>The GRASS vector data model</a><a class="headerlink" href="#the-grass-vector-data-model" title="Link to this heading"></a></h2>
<p>It is important to understand the <span class="target" id="index-1"></span>GRASS vector data model prior to digitizing.
In general, GRASS uses a topological vector model.
This means that areas are not represented as closed polygons, but by one or more
boundaries. A boundary between two adjacent areas is digitized only once, and it
is shared by both areas. Boundaries must be connected and closed without gaps.
An area is identified (and labelled) by the <strong>centroid</strong> of the area.</p>
<p>Besides boundaries and centroids, a vector map can also contain points and lines.
All these geometry elements can be mixed in one vector and will be represented
in different so-called ‘layers’ inside one GRASS vector map. So in GRASS, a layer
is not a vector or raster map but a level inside a vector layer. This is important
to distinguish carefully. (Although it is possible to mix geometry elements, it
is unusual and, even in GRASS, only used in special cases such as vector network
analysis. Normally, you should prefer to store different geometry elements in
different layers.)</p>
<p>It is possible to store several ‘layers’ in one vector dataset. For example,
fields, forests and lakes can be stored in one vector. An adjacent forest and lake
can share the same boundary, but they have separate attribute tables. It is also
possible to attach attributes to boundaries. An example might be the case where the boundary
between a lake and a forest is a road, so it can have a different attribute table.</p>
<p>The ‘layer’ of the feature is defined by the ‘layer’ inside GRASS. ‘Layer’ is the
number which defines if there is more than one layer inside the dataset (e.g.,
if the geometry is forest or lake). For now, it can be only a number. In the future,
GRASS will also support names as fields in the user interface.</p>
<p>Attributes can be stored inside the GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> as dBase,  SQLite3 or
in external database tables, for example, PostgreSQL, MySQL, Oracle, etc.</p>
<p id="index-2">Attributes in database tables are linked to geometry elements using a ‘category’
value.</p>
<p id="index-3">‘Category’ (key, ID) is an integer attached to geometry primitives, and it is
used as the link to one key column in the database table.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Learning the GRASS Vector Model</strong></p>
<p>The best way to learn the GRASS vector model and its capabilities is to
download one of the many GRASS tutorials where the vector model is described
more deeply. See <a class="reference external" href="https://grass.osgeo.org/learn/manuals/">https://grass.osgeo.org/learn/manuals/</a> for more information,
books and tutorials in several languages.</p>
</div>
</section>
<section id="creating-a-new-grass-vector-layer">
<span id="creating-new-grass-vectors"></span><span id="index-4"></span><h2><a class="toc-backref" href="#id23" role="doc-backlink"><span class="section-number">26.11. </span>Creating a new GRASS vector layer</a><a class="headerlink" href="#creating-a-new-grass-vector-layer" title="Link to this heading"></a></h2>
<p>To create a new GRASS vector layer, select one of following items from mapset context
menu in the browser:</p>
<ul class="simple">
<li><p>New Point Layer</p></li>
<li><p>New Line Layer</p></li>
<li><p>New Polygon Layer</p></li>
</ul>
<p>and enter a name in the dialog. A new vector map will be created and layer will be added
to canvas and editing started. Selecting type of the layer does not restrict geometry
types which can be digitized in the vector map. In GRASS, it is possible to organize all sorts
of geometry types (point, line and polygon) in one vector map. The type is only used to add
the layer to the canvas, because QGIS requires a layer to have a specific type.</p>
<p>It is also possible to add layers to existing vector maps selecting one of the items
described above from context menu of existing vector map.</p>
<p>In GRASS, it is possible to organize all sorts of geometry types (point, line and
area) in one layer, because GRASS uses a topological vector model, so you don’t
need to select the geometry type when creating a new GRASS vector. This is
different from shapefile creation with QGIS, because shapefiles use the Simple
Feature vector model (see section <a class="reference internal" href="../managing_data_source/create_layers.html#sec-create-vector"><span class="std std-ref">Creating new vector layers</span></a>).</p>
</section>
<section id="digitizing-and-editing-a-grass-vector-layer">
<span id="grass-digitizing"></span><span id="index-5"></span><h2><a class="toc-backref" href="#id24" role="doc-backlink"><span class="section-number">26.12. </span>Digitizing and editing a GRASS vector layer</a><a class="headerlink" href="#digitizing-and-editing-a-grass-vector-layer" title="Link to this heading"></a></h2>
<p>GRASS vector layers can be digitized using the standard QGIS digitizing tools.
There are however some particularities, which you should know about, due to</p>
<ul class="simple">
<li><p>GRASS topological model versus QGIS simple feature</p></li>
<li><p>complexity of GRASS model</p>
<ul>
<li><p>multiple layers in single maps</p></li>
<li><p>multiple geometry types in single map</p></li>
<li><p>geometry sharing by multiple features from multiple layers</p></li>
</ul>
</li>
</ul>
<p>The particularities are discussed in the following sections.</p>
<p><strong>Save, discard changes, undo, redo</strong></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All the changes done during editing are immediately written to vector map and related attribute tables.</p>
</div>
<p>Changes are written after each operation, it is however, possible to do undo/redo
or discard all changes when closing editing. If undo or discard changes is used, original state
is rewritten in vector map and attribute tables.</p>
<p>There are two main reasons for this behaviour:</p>
<ul class="simple">
<li><p>It is the nature of GRASS vectors coming from conviction that user wants to do what he is
doing and it is better to have data saved when the work is suddenly interrupted (for example,
blackout)</p></li>
<li><p>Necessity for effective editing of topological data is visualized information about topological
correctness, such information can only be acquired from GRASS vector map if changes are
written to the map.</p></li>
</ul>
<p><strong>Toolbar</strong></p>
<p>The ‘Digitizing Toolbar’ has some specific tools when a GRASS layer is edited:</p>
<table class="docutils align-default" id="table-grass-digitizing">
<thead>
<tr class="row-odd"><th class="head"><p>Icon</p></th>
<th class="head"><p>Tool</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/mActionCapturePoint.png"><img alt="capturePoint" src="../../../_images/mActionCapturePoint.png" style="width: 1.5em;" /></a></p></td>
<td><p>New Point</p></td>
<td><p>Digitize new point</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/mActionCaptureLine.png"><img alt="captureLine" src="../../../_images/mActionCaptureLine.png" style="width: 1.5em;" /></a></p></td>
<td><p>New Line</p></td>
<td><p>Digitize new line</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/mActionCaptureBoundary.png"><img alt="captureBoundary" src="../../../_images/mActionCaptureBoundary.png" style="width: 1.5em;" /></a></p></td>
<td><p>New Boundary</p></td>
<td><p>Digitize new boundary</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/mActionCaptureCentroid.png"><img alt="captureCentroid" src="../../../_images/mActionCaptureCentroid.png" style="width: 1.5em;" /></a></p></td>
<td><p>New Centroid</p></td>
<td><p>Digitize new centroid (label existing area)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/mActionCapturePolygon.png"><img alt="capturePolygon" src="../../../_images/mActionCapturePolygon.png" style="width: 1.5em;" /></a></p></td>
<td><p>New Closed Boundary</p></td>
<td><p>Digitize new closed boundary</p></td>
</tr>
</tbody>
</table>
<p>Table GRASS Digitizing: GRASS Digitizing Tools</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Digitizing polygons in GRASS</strong></p>
<p>If you want to create a polygon in GRASS, you first digitize the boundary of
the polygon. Then you add a centroid (label point) into the closed boundary.
The reason for this is that a topological vector model links the attribute information of
a polygon always to the centroid and not to the boundary.</p>
</div>
<p><strong>Category</strong></p>
<p>Category, often called cat, is sort of ID. The name comes from times when GRASS vectors
had only singly attribute “category”. Category is used as a link between geometry and attributes.
A single geometry may have multiple categories and thus represent multiple features in different
layers. Currently it is possible to assign only one category per layer using QGIS editing tools.
New features have automatically assigned new unique category, except boundaries.
Boundaries usually only form areas and do not represent linear features, it is however
possible to define attributes for a boundary later, for example in different layer.</p>
<p>New categories are always created only in currently being edited layer.</p>
<p>It is not possible to assign more categories to geometry using QGIS editing,
such data are properly represented as multiple features, and individual features,
even from different layers, may be deleted.</p>
<p><strong>Attributes</strong></p>
<p>Attributes of currently edited layer can only be modified. If the vector map contains more layers,
features of other layers will have all attributes set to ‘&lt;not editable (layer #)&gt;’ to warn you that
such attribute is not editable. The reason is, that other layers may have and usually have different
set of fields while QGIS only supports one fixed set of fields per layer.</p>
<p>If a geometry primitive does not have a category assigned, a new unique category is automatically
assigned and new record in attribute table is created when an attribute of that geometry is changed.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you want to do bulk update of attributes in table, for example using ‘Field Calculator’
(<a class="reference internal" href="../working_with_vector/attribute_table.html#vector-field-calculator"><span class="std std-ref">Using the Field Calculator</span></a>), and there are features without category which you don’t want
to update (typically boundaries), you can filter them out by setting ‘Advanced Filter’ to <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">null</span></code>.</p>
</div>
<p><strong>Editing style</strong></p>
<p id="index-6">The topological symbology is essential for effective editing of topological data. When editing
starts, a specialized ‘GRASS Edit’ renderer is set on the layer automatically and original renderer
is restored when editing is closed. The style may be customized in layer properties ‘Style’ tab.
The style can also be stored in project file or in separate file as any other style.
If you customize the style, do not change its name, because it is used to reset the style
when editing is started again.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Do not save project file when the layer is edited, the layer would be stored with
‘Edit Style’ which has no meaning if layer is not edited.</p>
</div>
<p>The style is based on topological information which is temporarily added to attribute table
as field ‘topo_symbol’. The field is automatically removed when editing is closed.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Do not remove ‘topo_symbol’ field from attribute table, that would make features
invisible because the renderer is based on that column.</p>
</div>
<p><strong>Snapping</strong></p>
<p>To form an area, vertices of connected boundaries must have <strong>exactly</strong> the same coordinates.
This can be achieved using snapping tool only if canvas and vector map have the same CRS.
Otherwise, due conversion from map coordinates to canvas and back, the coordinate may become
slightly different due to representation error and CRS transformations.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use layer’s CRS also for canvas when editing.</p>
</div>
<p><strong>Limitations</strong></p>
<p>Simultaneous editing of multiple layers within the same vector at the same time is not
supported. This is mainly due to the impossibility of handling multiple undo stacks for
a single data source.</p>
<p><a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a> <a class="reference internal" href="../../../_images/osx.png"><img alt="osx" src="../../../_images/osx.png" style="width: 1em;" /></a> On Linux and macOS only one GRASS layer can be edited at time. This is
due to a bug in GRASS which does not allow to close database drivers in random order.
This is being solved with GRASS developers.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>GRASS Edit Permissions</strong></p>
<p>You must be the owner of the GRASS <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code> you want to edit. It is
impossible to edit data layers in a <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code> that is not yours, even
if you have write permission.</p>
</div>
</section>
<section id="the-grass-region-tool">
<span id="sec-grass-region"></span><span id="index-7"></span><h2><a class="toc-backref" href="#id25" role="doc-backlink"><span class="section-number">26.13. </span>The GRASS region tool</a><a class="headerlink" href="#the-grass-region-tool" title="Link to this heading"></a></h2>
<p>The region definition (setting a spatial working window) in GRASS is important
for working with raster layers. Vector analysis is by default not limited to any
defined region definitions. But all newly created rasters will have the spatial
extension and resolution of the currently defined GRASS region, regardless of
their original extension and resolution. The current GRASS region is stored in
the <code class="file docutils literal notranslate"><span class="pre">$LOCATION/$MAPSET/WIND</span></code> file, and it defines north, south, east and
west bounds, number of columns and rows, horizontal and vertical spatial resolution.</p>
<p>It is possible to switch on and off the visualization of the GRASS region in the QGIS
canvas using the <a class="reference internal" href="../../../_images/grass_region.png"><img alt="grassRegion" src="../../../_images/grass_region.png" style="width: 1.5em;" /></a> <sup>Display current GRASS region</sup> button.</p>
<p id="index-8">The region can be modified in ‘Region’ tab in ‘GRASS Tolls’ dock widget.
Type in the new region bounds and resolution, and click <span class="guilabel">Apply</span>.
If you click on <span class="guilabel">Select the extent by dragging on canvas</span> you can select
a new region interactively with your mouse on the QGIS canvas dragging a rectangle.</p>
<p>The GRASS module <code class="file docutils literal notranslate"><span class="pre">g.region</span></code> provides a lot more parameters to define an
appropriate region extent and resolution for your raster analysis. You can use
these parameters with the GRASS Toolbox, described in section <a class="reference internal" href="#subsec-grass-toolbox"><span class="std std-ref">The GRASS Toolbox</span></a>.</p>
</section>
<section id="the-grass-toolbox">
<span id="subsec-grass-toolbox"></span><span id="index-9"></span><h2><a class="toc-backref" href="#id26" role="doc-backlink"><span class="section-number">26.14. </span>The GRASS Toolbox</a><a class="headerlink" href="#the-grass-toolbox" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../../../_images/grass_tools.png"><img alt="grassTools" src="../../../_images/grass_tools.png" style="width: 1.5em;" /></a> <sup>Open GRASS Tools</sup> box provides GRASS module functionalities
to work with data inside a selected GRASS <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> and <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code>.
To use the GRASS Toolbox you need to open a <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> and <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code>
that you have write permission for (usually granted, if you created the <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code>).
This is necessary, because new raster or vector layers created during analysis
need to be written to the currently selected <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> and <code class="file docutils literal notranslate"><span class="pre">MAPSET</span></code>.</p>
<figure class="align-center" id="id4">
<span id="figure-grass-toolbox"></span><img alt="../../../_images/grass_toolbox_moduletree.png" src="../../../_images/grass_toolbox_moduletree.png" />
<figcaption>
<p><span class="caption-number">Fig. 26.3 </span><span class="caption-text">GRASS Toolbox and Module Tree</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="working-with-grass-modules">
<span id="grass-modules"></span><h3><a class="toc-backref" href="#id27" role="doc-backlink"><span class="section-number">26.14.1. </span>Working with GRASS modules</a><a class="headerlink" href="#working-with-grass-modules" title="Link to this heading"></a></h3>
<p>The GRASS shell inside the GRASS Toolbox provides access to almost all (more than
300) GRASS modules in a command line interface. To offer a more user-friendly
working environment, about 200 of the available GRASS modules and functionalities
are also provided by graphical dialogs within the GRASS plugin Toolbox.</p>
<p>A complete list of GRASS modules available in the graphical Toolbox in QGIS
version 3.34 is available in the GRASS wiki at
<a class="reference external" href="https://grasswiki.osgeo.org/wiki/GRASS-QGIS_relevant_module_list">https://grasswiki.osgeo.org/wiki/GRASS-QGIS_relevant_module_list</a>.</p>
<p>It is also possible to customize the GRASS Toolbox content. This procedure is
described in section <a class="reference internal" href="#sec-toolbox-customizing"><span class="std std-ref">Customizing the GRASS Toolbox</span></a>.</p>
<p>As shown in <a class="reference internal" href="#figure-grass-toolbox"><span class="std std-numref">Fig. 26.3</span></a>, you can look for the appropriate GRASS
module using the thematically grouped <span class="guilabel">Modules Tree</span> or the searchable
<span class="guilabel">Modules List</span> tab.</p>
<p>By clicking on a graphical module icon, a new tab will be added to the Toolbox dialog,
providing three new sub-tabs: <span class="guilabel">Options</span>, <span class="guilabel">Output</span> and
<span class="guilabel">Manual</span>.</p>
<p><strong>Options</strong></p>
<p>The <span class="guilabel">Options</span> tab provides a simplified module dialog where you can
usually select a raster or vector layer visualized in the QGIS canvas and enter
further module-specific parameters to run the module.</p>
<figure class="align-center" id="id5">
<span id="figure-grass-module"></span><img alt="../../../_images/grass_module_option.png" src="../../../_images/grass_module_option.png" />
<figcaption>
<p><span class="caption-number">Fig. 26.4 </span><span class="caption-text">GRASS Toolbox Module Options</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The provided module parameters are often not complete to keep the dialog simple.
If you want to use further module parameters and flags, you need to start the
GRASS shell and run the module in the command line.</p>
<p>A new feature since QGIS 1.8 is the support for a <span class="guilabel">Show Advanced Options</span>
button below the simplified module dialog in the <span class="guilabel">Options</span> tab. At the
moment, it is only added to the module <code class="file docutils literal notranslate"><span class="pre">v.in.ascii</span></code> as an example of use, but it will
probably be part of more or all modules in the GRASS Toolbox in future versions
of QGIS. This allows you to use the complete GRASS module options without the need
to switch to the GRASS shell.</p>
<p><strong>Output</strong></p>
<figure class="align-center" id="id6">
<span id="figure-grass-module-output"></span><img alt="../../../_images/grass_module_output.png" src="../../../_images/grass_module_output.png" />
<figcaption>
<p><span class="caption-number">Fig. 26.5 </span><span class="caption-text">GRASS Toolbox Module Output</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The <span class="guilabel">Output</span> tab provides information about the output status of the
module. When you click the <span class="guilabel">Run</span> button, the module switches to the
<span class="guilabel">Output</span> tab and you see information about the analysis process. If
all works well, you will finally see a <code class="docutils literal notranslate"><span class="pre">Successfully</span> <span class="pre">finished</span></code> message.</p>
<p><strong>Manual</strong></p>
<figure class="align-center" id="id7">
<span id="figure-grass-module-manual"></span><img alt="../../../_images/grass_module_manual.png" src="../../../_images/grass_module_manual.png" />
<figcaption>
<p><span class="caption-number">Fig. 26.6 </span><span class="caption-text">GRASS Toolbox Module Manual</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The <span class="guilabel">Manual</span> tab shows the HTML help page of the GRASS module. You can
use it to check further module parameters and flags or to get a deeper knowledge
about the purpose of the module. At the end of each module manual page, you see
further links to the <code class="file docutils literal notranslate"><span class="pre">Main</span> <span class="pre">Help</span> <span class="pre">index</span></code>, the <code class="file docutils literal notranslate"><span class="pre">Thematic</span> <span class="pre">index</span></code> and the
<code class="file docutils literal notranslate"><span class="pre">Full</span> <span class="pre">index</span></code>. These links provide the same information as the
module <code class="file docutils literal notranslate"><span class="pre">g.manual</span></code>.</p>
<div class="admonition tip" id="index-10">
<p class="admonition-title">Tip</p>
<p><strong>Display results immediately</strong></p>
<p>If you want to display your calculation results immediately in your map canvas,
you can use the ‘View Output’ button at the bottom of the module tab.</p>
</div>
</section>
<section id="grass-module-examples">
<h3><a class="toc-backref" href="#id28" role="doc-backlink"><span class="section-number">26.14.2. </span>GRASS module examples</a><a class="headerlink" href="#grass-module-examples" title="Link to this heading"></a></h3>
<p>The following examples will demonstrate the power of some of the GRASS modules.</p>
<section id="creating-contour-lines">
<h4><a class="toc-backref" href="#id29" role="doc-backlink"><span class="section-number">26.14.2.1. </span>Creating contour lines</a><a class="headerlink" href="#creating-contour-lines" title="Link to this heading"></a></h4>
<p>The first example creates a vector contour map from an elevation raster (DEM).
Here, it is assumed that you have the Alaska <code class="file docutils literal notranslate"><span class="pre">LOCATION</span></code> set up as explained
in section <a class="reference internal" href="#sec-import-loc-data"><span class="std std-ref">Importing data into a GRASS LOCATION</span></a>.</p>
<ul class="simple">
<li><p>First, open the location by clicking the
<a class="reference internal" href="../../../_images/grass_open_mapset.png"><img alt="grassOpenMapset" src="../../../_images/grass_open_mapset.png" style="width: 1.5em;" /></a> <sup>Open mapset</sup> button and choosing the Alaska location.</p></li>
<li><p>Now open the Toolbox with the <a class="reference internal" href="../../../_images/grass_tools.png"><img alt="grassTools" src="../../../_images/grass_tools.png" style="width: 1.5em;" /></a> <sup>Open GRASS tools</sup> button.</p></li>
<li><p>In the list of tool categories, double-click <span class="menuselection">Raster ► Surface
Management ► Generate vector contour lines</span>.</p></li>
<li><p>Now a single click on the tool <strong>r.contour</strong> will open the tool dialog as
explained above (see <a class="reference internal" href="#grass-modules"><span class="std std-ref">Working with GRASS modules</span></a>).</p></li>
<li><p>In the <span class="guilabel">Name of input raster map</span> enter <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code>.</p></li>
<li><p>Type into the <span class="guilabel">Increment between Contour levels</span> <a class="reference internal" href="../../../_images/selectnumber.png"><img alt="selectNumber" src="../../../_images/selectnumber.png" style="width: 2.8em;" /></a>
the value 100. (This will create contour lines at intervals of 100 meters.)</p></li>
<li><p>Type into the <span class="guilabel">Name for output vector map</span> the name <code class="docutils literal notranslate"><span class="pre">ctour_100</span></code>.</p></li>
<li><p>Click <span class="guilabel">Run</span> to start the process. Wait for several moments until the message
<code class="docutils literal notranslate"><span class="pre">Successfully</span> <span class="pre">finished</span></code> appears in the output window. Then click <span class="guilabel">View Output</span>
and <span class="guilabel">Close</span>.</p></li>
</ul>
<p>Since this is a large region, it will take a while to display. After it finishes
rendering, you can open the layer properties window to change the line color so
that the contours appear clearly over the elevation raster, as in <a class="reference internal" href="../working_with_vector/vector_properties.html#vector-properties-dialog"><span class="std std-ref">The Vector Properties Dialog</span></a>.</p>
<p>Next, zoom in to a small, mountainous area in the center of Alaska. Zooming in close,
you will notice that the contours have sharp corners. GRASS offers the <strong>v.generalize</strong>
tool to slightly alter vector maps while keeping their overall shape. The tool
uses several different algorithms with different purposes. Some of the algorithms
(i.e., Douglas Peuker and Vertex Reduction) simplify the line by removing some of
the vertices. The resulting vector will load faster. This process is useful
when you have a highly detailed vector, but you are creating a very small-scale
map, so the detail is unnecessary.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>The simplify tool</strong></p>
<p>Note that QGIS has a <span class="menuselection">Vector ► Geometry Tools ► Simplify
geometries</span> tool that works just like the GRASS <strong>v.generalize</strong>
Douglas-Peuker algorithm.</p>
</div>
<p>However, the purpose of this example is different. The contour lines created by
<code class="docutils literal notranslate"><span class="pre">r.contour</span></code> have sharp angles that should be smoothed. Among the <strong>v.generalize</strong>
algorithms, there is Chaiken’s, which does just that (also Hermite splines). Be
aware that these algorithms can <strong>add</strong> additional vertices to the vector,
causing it to load even more slowly.</p>
<ul class="simple">
<li><p>Open the GRASS Toolbox and double-click the categories <span class="menuselection">Vector ►
Develop map ► Generalization</span>, then click on the <strong>v.generalize</strong> module to
open its options window.</p></li>
<li><p>Check that the ‘ctour_100’ vector appears as the <span class="guilabel">Name of input vector</span>.</p></li>
<li><p>From the list of algorithms, choose Chaiken’s. Leave all other options at their
default, and scroll down to the last row to enter in the field <span class="guilabel">Name
for output vector map</span> ‘ctour_100_smooth’, and click <span class="guilabel">Run</span>.</p></li>
<li><p>The process takes several moments. Once <code class="docutils literal notranslate"><span class="pre">Successfully</span> <span class="pre">finished</span></code> appears in
the output windows, click <span class="guilabel">View Output</span> and then <span class="guilabel">Close</span>.</p></li>
<li><p>You may change the color of the vector to display it clearly on the raster
background and to contrast with the original contour lines. You will notice
that the new contour lines have smoother corners than the original while staying
faithful to the original overall shape.</p></li>
</ul>
<figure class="align-center" id="id8">
<span id="figure-grass-module-generalize"></span><a class="reference internal image-reference" href="../../../_images/grass_toolbox_vgeneralize.png"><img alt="../../../_images/grass_toolbox_vgeneralize.png" src="../../../_images/grass_toolbox_vgeneralize.png" style="width: 35em;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 26.7 </span><span class="caption-text">GRASS module v.generalize to smooth a vector map</span><a class="headerlink" href="#id8" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Other uses for r.contour</strong></p>
<p>The procedure described above can be used in other equivalent situations. If
you have a raster map of precipitation data, for example, then the same method
will be used to create a vector map of isohyetal (constant rainfall) lines.</p>
</div>
</section>
<section id="creating-a-hillshade-3-d-effect">
<h4><a class="toc-backref" href="#id30" role="doc-backlink"><span class="section-number">26.14.2.2. </span>Creating a Hillshade 3-D effect</a><a class="headerlink" href="#creating-a-hillshade-3-d-effect" title="Link to this heading"></a></h4>
<p>Several methods are used to display elevation layers and give a 3-D effect to maps.
The use of contour lines, as shown above, is one popular method often chosen to
produce topographic maps. Another way to display a 3-D effect is by hillshading.
The hillshade effect is created from a DEM (elevation) raster by first calculating
the slope and aspect of each cell, then simulating the sun’s position in the sky
and giving a reflectance value to each cell. Thus, you get sun-facing slopes
lighted; the slopes facing away from the sun (in shadow) are darkened.</p>
<ul class="simple">
<li><p>Begin this example by loading the <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code> elevation raster. Start the GRASS
Toolbox, and under the Raster category, double-click to open <span class="menuselection">Spatial
analysis ► Terrain analysis</span>.</p></li>
<li><p>Then click <strong>r.shaded.relief</strong> to open the module.</p></li>
<li><p>Change the <span class="guilabel">azimuth angle</span> <a class="reference internal" href="../../../_images/selectnumber.png"><img alt="selectNumber" src="../../../_images/selectnumber.png" style="width: 2.8em;" /></a> 270 to 315.</p></li>
<li><p>Enter <code class="docutils literal notranslate"><span class="pre">gtopo30_shade</span></code> for the new hillshade raster, and click <span class="guilabel">Run</span>.</p></li>
<li><p>When the process completes, add the hillshade raster to the map. You should see
it displayed in grayscale.</p></li>
<li><p>To view both the hillshading and the colors of the <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code> together, move
the hillshade map below the <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code> map in the table of contents, then open
the <span class="menuselection">Properties</span> window of <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code>, switch to the
<span class="guilabel">Transparency</span> tab and set its transparency level to about 25%.</p></li>
</ul>
<p>You should now have the <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code> elevation with its colormap and transparency
setting displayed <strong>above</strong> the grayscale hillshade map. In order to see the
visual effects of the hillshading, turn off the <code class="docutils literal notranslate"><span class="pre">gtopo30_shade</span></code> map, then turn
it back on.</p>
<p><strong>Using the GRASS shell</strong></p>
<p>The GRASS plugin in QGIS is designed for users who are new to GRASS and not
familiar with all the modules and options. As such, some modules in the Toolbox
do not show all the options available, and some modules do not appear at all.
The GRASS shell (or console) gives the user access to those additional GRASS
modules that do not appear in the Toolbox tree, and also to some additional
options to the modules that are in the Toolbox with the simplest default
parameters. This example demonstrates the use of an additional option in the
<strong>r.shaded.relief</strong> module that was shown above.</p>
<figure class="align-center" id="id9">
<span id="figure-grass-module-shell"></span><img alt="../../../_images/grass_toolbox_shell.png" src="../../../_images/grass_toolbox_shell.png" />
<figcaption>
<p><span class="caption-number">Fig. 26.8 </span><span class="caption-text">The GRASS shell, r.shaded.relief module</span><a class="headerlink" href="#id9" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The module <strong>r.shaded.relief</strong> can take a parameter <code class="docutils literal notranslate"><span class="pre">zmult</span></code>, which multiplies
the elevation values relative to the X-Y coordinate units so that the hillshade
effect is even more pronounced.</p>
<ul class="simple">
<li><p>Load the <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code> elevation raster as above, then start the GRASS Toolbox
and click on the GRASS shell. In the shell window, type the command
<code class="docutils literal notranslate"><span class="pre">r.shaded.relief</span> <span class="pre">map=gtopo30</span> <span class="pre">shade=gtopo30_shade2</span> <span class="pre">azimuth=315</span> <span class="pre">zmult=3</span></code> and
press <kbd class="kbd docutils literal notranslate">Enter</kbd>.</p></li>
<li><p>After the process finishes, shift to the <span class="guilabel">Browse</span> tab and double-click
on the new <code class="docutils literal notranslate"><span class="pre">gtopo30_shade2</span></code> raster to display it in QGIS.</p></li>
<li><p>As explained above, move the shaded relief raster below the <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code> raster in
the table of contents, then check the transparency of the colored <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code> layer.
You should see that the 3-D effect stands out more strongly compared with the
first shaded relief map.</p></li>
</ul>
<figure class="align-center" id="id10">
<span id="figure-grass-module-display"></span><a class="reference internal image-reference" href="../../../_images/grass_toolbox_shadedrelief.png"><img alt="../../../_images/grass_toolbox_shadedrelief.png" src="../../../_images/grass_toolbox_shadedrelief.png" style="width: 35em;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 26.9 </span><span class="caption-text">Displaying shaded relief created with the GRASS module r.shaded.relief</span><a class="headerlink" href="#id10" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="raster-statistics-in-a-vector-map">
<h4><a class="toc-backref" href="#id31" role="doc-backlink"><span class="section-number">26.14.2.3. </span>Raster statistics in a vector map</a><a class="headerlink" href="#raster-statistics-in-a-vector-map" title="Link to this heading"></a></h4>
<p>The next example shows how a GRASS module can aggregate raster data and add columns
of statistics for each polygon in a vector map.</p>
<ul class="simple">
<li><p>Again using the Alaska data, refer to <a class="reference internal" href="#sec-import-loc-data"><span class="std std-ref">Importing data into a GRASS LOCATION</span></a> to import the
<code class="file docutils literal notranslate"><span class="pre">shapefiles/trees.shp</span></code> file into GRASS.</p></li>
<li><p>Now an intermediate step is required: centroids must be added to the imported
trees map to make it a complete GRASS area vector (including both boundaries
and centroids).</p></li>
<li><p>From the Toolbox, choose <span class="menuselection">Vector ► Manage features</span>, and open
the module <strong>v.centroids</strong>.</p></li>
<li><p>Enter as the <span class="guilabel">output vector map</span> ‘forest_areas’ and run the module.</p></li>
<li><p>Now load the <code class="docutils literal notranslate"><span class="pre">forest_areas</span></code> vector and display the types of forests - deciduous,
evergreen, mixed - in different colors: In the layer <span class="guilabel">Properties</span>
window, <span class="guilabel">Symbology</span> tab, choose from <span class="guilabel">Legend type</span>
<a class="reference internal" href="../../../_images/selectstring.png"><img alt="selectString" src="../../../_images/selectstring.png" style="width: 2.5em;" /></a> ‘Unique value’ and set the <span class="guilabel">Classification field</span>
to ‘VEGDESC’. (Refer to the explanation of the symbology tab in
<a class="reference internal" href="../working_with_vector/vector_properties.html#vector-style-menu"><span class="std std-ref">Symbology Properties</span></a> of the vector section.)</p></li>
<li><p>Next, reopen the GRASS Toolbox and open <span class="menuselection">Vector ► Vector update</span>
by other maps.</p></li>
<li><p>Click on the <strong>v.rast.stats</strong> module. Enter <code class="docutils literal notranslate"><span class="pre">gtopo30</span></code> and <code class="docutils literal notranslate"><span class="pre">forest_areas</span></code>.</p></li>
<li><p>Only one additional parameter is needed: Enter <span class="guilabel">column prefix</span> <code class="docutils literal notranslate"><span class="pre">elev</span></code>,
and click <span class="guilabel">Run</span>. This is a computationally heavy operation, which will run
for a long time (probably up to two hours).</p></li>
<li><p>Finally, open the <code class="docutils literal notranslate"><span class="pre">forest_areas</span></code> attribute table, and verify that several new
columns have been added, including <code class="docutils literal notranslate"><span class="pre">elev_min</span></code>, <code class="docutils literal notranslate"><span class="pre">elev_max</span></code>, <code class="docutils literal notranslate"><span class="pre">elev_mean</span></code>,
etc., for each forest polygon.</p></li>
</ul>
</section>
</section>
<section id="customizing-the-grass-toolbox">
<span id="sec-toolbox-customizing"></span><span id="index-11"></span><h3><a class="toc-backref" href="#id32" role="doc-backlink"><span class="section-number">26.14.3. </span>Customizing the GRASS Toolbox</a><a class="headerlink" href="#customizing-the-grass-toolbox" title="Link to this heading"></a></h3>
<p>Nearly all GRASS modules can be added to the GRASS Toolbox. An XML interface is
provided to parse the pretty simple XML files that configure the modules’
appearance and parameters inside the Toolbox.</p>
<p>A sample XML file for generating the module <code class="docutils literal notranslate"><span class="pre">v.buffer</span></code> (v.buffer.qgm) looks
like this:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE qgisgrassmodule SYSTEM &quot;http://mrcc.com/qgisgrassmodule.dtd&quot;&gt;</span>

<span class="nt">&lt;qgisgrassmodule</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Vector buffer&quot;</span><span class="w"> </span><span class="na">module=</span><span class="s">&quot;v.buffer&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">typeoption=</span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="na">layeroption=</span><span class="s">&quot;layer&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;buffer&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;output&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/qgisgrassmodule&gt;</span>
</pre></div>
</div>
<p>The parser reads this definition and creates a new tab inside the Toolbox when
you select the module. A more detailed description for adding new modules, changing
a module’s group, etc., can be found at
<a class="reference external" href="https://qgis.org/en/site/getinvolved/development/addinggrasstools.html">https://qgis.org/en/site/getinvolved/development/addinggrasstools.html</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../auth_system/auth_workflows.html" class="btn btn-neutral float-left" title="25.2. User Authentication Workflows" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../processing/index.html" class="btn btn-neutral float-right" title="27. QGIS processing framework" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">Last updated on 2024 May 30, 01:27 +0900.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages:
Expected French translation link for https://docs.qgis.org/3.28/en/docs/user_manual/print_composer/overview_composer.html
would return https://app.transifex.com/qgis/qgis-documentation/translate/#fr/aa6d8bc653526d38b295ca94bf8eee5e
with the md5 value of "github#qgis/QGIS-Documentation#release_3.28#locale/en/LC_MESSAGES/docs/user_manual/print_composer/overview_composer.po"-->
<!--Make sure that mismatching language codes between Transifex and Sphinx are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: 3.34
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/user_manual/grass_integration/grass_integration.html">en</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/cs/docs/user_manual/grass_integration/grass_integration.html">cs</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/de/docs/user_manual/grass_integration/grass_integration.html">de</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/es/docs/user_manual/grass_integration/grass_integration.html">es</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/fr/docs/user_manual/grass_integration/grass_integration.html">fr</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/hu/docs/user_manual/grass_integration/grass_integration.html">hu</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/it/docs/user_manual/grass_integration/grass_integration.html">it</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/grass_integration/grass_integration.html">ja</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ko/docs/user_manual/grass_integration/grass_integration.html">ko</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/lt/docs/user_manual/grass_integration/grass_integration.html">lt</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/nl/docs/user_manual/grass_integration/grass_integration.html">nl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_BR/docs/user_manual/grass_integration/grass_integration.html">pt_BR</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_PT/docs/user_manual/grass_integration/grass_integration.html">pt_PT</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ro/docs/user_manual/grass_integration/grass_integration.html">ro</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ru/docs/user_manual/grass_integration/grass_integration.html">ru</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zh-Hans/docs/user_manual/grass_integration/grass_integration.html">zh-Hans</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/en/docs/user_manual/grass_integration/grass_integration.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/en/docs/user_manual/grass_integration/grass_integration.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/user_manual/grass_integration/grass_integration.html">3.34</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.28/en/docs/user_manual/grass_integration/grass_integration.html">3.28</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.22/en/docs/user_manual/grass_integration/grass_integration.html">3.22</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/en/docs/user_manual/grass_integration/grass_integration.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/en/docs/user_manual/grass_integration/grass_integration.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/en/docs/user_manual/grass_integration/grass_integration.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/en/docs/user_manual/grass_integration/grass_integration.html">2.18</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/user_manual/grass_integration/grass_integration.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://app.transifex.com/qgis/qgis-documentation/translate/#en/8645df2cf8a5f5488521fe605b1f8924" target="_blank" rel="noopener noreferrer">Translate Page</a>
          </dd>
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/en" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/3.34" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/3.34" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/release-3_34" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>