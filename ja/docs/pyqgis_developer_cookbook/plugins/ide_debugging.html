<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>16.3. プラグインを書いてデバッグするためのIDE設定 &mdash; QGIS Documentation  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/qgis_docs.css?v=5415a924" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../../_static/translations.js?v=4dbe4bdc"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" />
    <link rel="next" title="16.4. プラグインをリリースする" href="releasing.html" />
    <link rel="prev" title="16.2. コードスニペット" href="snippets.html" />
  <meta name="description" content="QGIS 3.34 documentation: 16.3. プラグインを書いてデバッグするためのIDE設定">
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   

          
          
          <a href="../../index.html" class="icon icon-home">
            QGIS Documentation
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.34
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">ユーザ向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_manual/index.html">QGIS Desktopユーザーガイド／マニュアル (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Serverガイド／マニュアル (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_manual/index.html">トレーニングマニュアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">やさしい GIS 入門</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ドキュメント執筆者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">ドキュメント作成のガイドライン</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">開発者向け</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">PyQGISクックブック (QGIS 3.34)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro.html">1. はじめに</a></li>
<li class="toctree-l2"><a class="reference internal" href="../loadproject.html">2. プロジェクトをロードする</a></li>
<li class="toctree-l2"><a class="reference internal" href="../loadlayer.html">3. レイヤをロードする</a></li>
<li class="toctree-l2"><a class="reference internal" href="../legend.html">4. 目次（TOC）へのアクセス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../raster.html">5. ラスタレイヤを使う</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector.html">6. ベクタレイヤを使う</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geometry.html">7. ジオメトリの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crs.html">8. 投影法サポート</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canvas.html">9. マップキャンバスを使う</a></li>
<li class="toctree-l2"><a class="reference internal" href="../composer.html">10. 地図のレンダリングと印刷</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expressions.html">11. 式、フィルタ適用および値の算出</a></li>
<li class="toctree-l2"><a class="reference internal" href="../settings.html">12. 設定の読み込みと保存</a></li>
<li class="toctree-l2"><a class="reference internal" href="../communicating.html">13. ユーザーとコミュニケーションする</a></li>
<li class="toctree-l2"><a class="reference internal" href="../authentication.html">14. 認証インフラストラクチャ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tasks.html">15. タスク - バックグラウンドで重い仕事をする</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">16. Pythonプラグインを開発する</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plugins.html">16.1. Python プラグインを構成する</a></li>
<li class="toctree-l3"><a class="reference internal" href="snippets.html">16.2. コードスニペット</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">16.3. プラグインを書いてデバッグするためのIDE設定</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#useful-plugins-for-writing-python-plugins">16.3.1. Pythonプラグインを書くのに便利なプラグイン</a></li>
<li class="toctree-l4"><a class="reference internal" href="#a-note-on-configuring-your-ide-on-linux-and-windows">16.3.2. LinuxとWindowsでIDEを設定する際の注意点</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debugging-using-pyscripter-ide-windows">16.3.3. Pyscripter IDEを使ってデバッグする (Windows)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debugging-using-eclipse-and-pydev">16.3.4. EclipseとPyDevを使ってデバッグする</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debugging-with-pycharm-on-ubuntu-with-a-compiled-qgis">16.3.5. UbuntuでコンパイルしたQGISをPyCharmでデバッグする</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debugging-using-pdb">16.3.6. PDBを利用してデバッグする</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="releasing.html">16.4. プラグインをリリースする</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../processing.html">17. プロセシングプラグインを書く</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pluginlayer.html">18. プラグインレイヤを使う</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_analysis.html">19. ネットワーク分析ライブラリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server.html">20. QGIS ServerとPython</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cheat_sheet.html">21. PyQGISチートシート</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">開発者ガイド</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">PyQGIS 開発者用 Cookbook</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">16. </span>Pythonプラグインを開発する</a></li>
      <li class="breadcrumb-item active"><span class="section-number">16.3. </span>プラグインを書いてデバッグするためのIDE設定</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/pyqgis_developer_cookbook/plugins/ide_debugging.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="snippets.html" class="btn btn-neutral float-left" title="16.2. コードスニペット" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="releasing.html" class="btn btn-neutral float-right" title="16.4. プラグインをリリースする" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div><div class="admonition important">
<p class="admonition-title">重要</p>
<p>翻訳は <a class="reference external" href="https://qgis.org/en/site/getinvolved/translate.html#becoming-a-translator">あなたが参加できる</a> コミュニティの取り組みです。このページは現在 100.00% 翻訳されています。</p>
</div>
</div></blockquote>
<section id="index-0">
<span id="ide-settings-for-writing-and-debugging-plugins"></span><h1><span class="section-number">16.3. </span>プラグインを書いてデバッグするためのIDE設定<a class="headerlink" href="#index-0" title="Link to this heading"></a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#useful-plugins-for-writing-python-plugins" id="id6">Pythonプラグインを書くのに便利なプラグイン</a></p></li>
<li><p><a class="reference internal" href="#a-note-on-configuring-your-ide-on-linux-and-windows" id="id7">LinuxとWindowsでIDEを設定する際の注意点</a></p></li>
<li><p><a class="reference internal" href="#debugging-using-pyscripter-ide-windows" id="id8">Pyscripter IDEを使ってデバッグする (Windows)</a></p></li>
<li><p><a class="reference internal" href="#debugging-using-eclipse-and-pydev" id="id9">EclipseとPyDevを使ってデバッグする</a></p>
<ul>
<li><p><a class="reference internal" href="#installation" id="id10">インストール</a></p></li>
<li><p><a class="reference internal" href="#setting-up-eclipse" id="id11">Eclipseをセットアップする</a></p></li>
<li><p><a class="reference internal" href="#configuring-the-debugger" id="id12">デバッガを設定する</a></p></li>
<li><p><a class="reference internal" href="#making-eclipse-understand-the-api" id="id13">EclipseにAPIを理解させる</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#debugging-with-pycharm-on-ubuntu-with-a-compiled-qgis" id="id14">UbuntuでコンパイルしたQGISをPyCharmでデバッグする</a></p></li>
<li><p><a class="reference internal" href="#debugging-using-pdb" id="id15">PDBを利用してデバッグする</a></p></li>
</ul>
</nav>
<p>プログラマには皆それぞれ自分の好みのIDE /テキストエディタがありますが、ここに人気のIDEを設定し、QGISの Pythonプラグインを書いたりデバッグするためのいくつかの推奨事項があります。</p>
<section id="useful-plugins-for-writing-python-plugins">
<h2><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">16.3.1. </span>Pythonプラグインを書くのに便利なプラグイン</a><a class="headerlink" href="#useful-plugins-for-writing-python-plugins" title="Link to this heading"></a></h2>
<p>Pythonプラグインを書くときに便利なプラグインがあります。<span class="menuselection">プラグイン ► プラグインの管理とインストール...</span> から次をインストールします:</p>
<ul class="simple">
<li><p><em>Plugin reloader</em>: これにより、QGISを再起動することなくプラグインを再読み込みし、新しい変更を取り込むことができます。</p></li>
<li><p><em>First Aid</em>: これは、プラグインから例外が発生したときに変数を検査するためのPythonコンソールとローカルデバッガを追加します。</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>私たちは絶え間なく努力していますが、この行より先の情報はQGIS 3用に更新されていない可能性があります。</p>
</div>
</section>
<section id="a-note-on-configuring-your-ide-on-linux-and-windows">
<h2><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">16.3.2. </span>LinuxとWindowsでIDEを設定する際の注意点</a><a class="headerlink" href="#a-note-on-configuring-your-ide-on-linux-and-windows" title="Link to this heading"></a></h2>
<p><strong>Linux</strong> では、通常、QGISライブラリの場所をユーザの <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> 環境変数に追加するだけです。ほとんどのディストリビューションでは、<code class="file docutils literal notranslate"><span class="pre">~/.bashrc</span></code> または <code class="file docutils literal notranslate"><span class="pre">~/.bash-profile</span></code> を以下の行で編集することでこれを行うことができます（OpenSUSE Tumbleweed でテスト済み）：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PYTHONPATH</span><span class="s2">:/usr/share/qgis/python/plugins:/usr/share/qgis/python&quot;</span>
</pre></div>
</div>
<p>ファイルを保存し、以下のシェルコマンドを使って環境設定を実行します：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>~/.bashrc
</pre></div>
</div>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>Windows**では、QGISと同じ環境設定にし、QGISと同じライブラリとインタプリタを使用する必要があります。一番手っ取り早い方法は、QGISのスタートアップバッチファイルを変更することです。</p>
<p>OSGeo4Wインストーラを使用した場合はOSGeo4Wインストールの <code class="docutils literal notranslate"><span class="pre">bin</span></code> フォルダの下にこれを見つけることができます。 <code class="file docutils literal notranslate"><span class="pre">C:\OSGeo4W\bin\qgis-unstable.bat</span></code> のようなものを探してください。</p>
</section>
<section id="debugging-using-pyscripter-ide-windows">
<h2><a class="toc-backref" href="#id8" role="doc-backlink"><span class="section-number">16.3.3. </span>Pyscripter IDEを使ってデバッグする (Windows)</a><a class="headerlink" href="#debugging-using-pyscripter-ide-windows" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/pyscripter/pyscripter">Pyscripter IDE</a> を使うには、次のようにします：</p>
<ol class="arabic">
<li><p><code class="file docutils literal notranslate"><span class="pre">qgis-unstable.bat</span></code> のコピーを作成し、<code class="docutils literal notranslate"><span class="pre">pyscripter.bat</span></code> に名前を変更します。</p></li>
<li><p>それをエディタで開きます。そして最後の行、QGISを起動する行を削除してください。</p></li>
<li><p>Pyscripter実行ファイルを指す行を追加し、使用するPythonのバージョンを設定するコマンドライン引数を追加します</p></li>
<li><p>さらに、QGISが使用するPythonのDLLをPyscripterが見つけられるフォルダーを指す引数を追加します。これはOSGeoWインストールのbinフォルダーの下に見つけることができます</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="p">@</span><span class="k">echo</span> off
<span class="k">SET</span> <span class="nv">OSGEO4W_ROOT</span><span class="p">=</span>C:\OSGeo4W
<span class="k">call</span> <span class="s2">&quot;</span><span class="nv">%OSGEO4W_ROOT%</span><span class="s2">&quot;</span>\bin\o4w_env.bat
<span class="k">call</span> <span class="s2">&quot;</span><span class="nv">%OSGEO4W_ROOT%</span><span class="s2">&quot;</span>\bin\gdal16.bat
<span class="p">@</span><span class="k">echo</span> off
<span class="k">path</span> <span class="nv">%PATH%</span>;<span class="nv">%GISBASE%</span>\bin
<span class="k">Start</span> C:\pyscripter\pyscripter.exe --python25 --pythondllpath=C:\OSGeo4W\bin
</pre></div>
</div>
</li>
<li><p>このバッチファイルをダブルクリックすると、正しいパスでPyscripterが起動します。</p></li>
</ol>
<p>Pyscripterよりも人気のあるEclipseは、開発者の間で一般的な選択肢です。次のセクションでは、プラグインの開発とテストのためにEclipseを設定する方法を説明します。</p>
</section>
<section id="debugging-using-eclipse-and-pydev">
<h2><a class="toc-backref" href="#id9" role="doc-backlink"><span class="section-number">16.3.4. </span>EclipseとPyDevを使ってデバッグする</a><a class="headerlink" href="#debugging-using-eclipse-and-pydev" title="Link to this heading"></a></h2>
<section id="installation">
<h3><a class="toc-backref" href="#id10" role="doc-backlink"><span class="section-number">16.3.4.1. </span>インストール</a><a class="headerlink" href="#installation" title="Link to this heading"></a></h3>
<p>Eclipseを使うには、以下をインストールしてください</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.eclipse.org">Eclipse</a></p></li>
<li><p><a class="reference external" href="http://www.aptana.com">Aptana Studio 3 Plugin</a> 又は <a class="reference external" href="https://www.pydev.org">PyDev</a></p></li>
<li><p>QGIS 2.x</p></li>
<li><p>QGISのプラグインである <strong>Remote Debug</strong> をインストールすることもできます。現時点ではまだ実験的なプラグインなので、あらかじめ <span class="menuselection">プラグイン ► プラグインの管理とインストール... ► 設定</span> で <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">実験的プラグインも表示</span> を有効にしてください。</p></li>
</ul>
<p>WindowsでEclipseを使用する環境を準備するために、バッチファイルを作成し、それを使用してEclipseを起動する必要があります：</p>
<ol class="arabic">
<li><p><code class="file docutils literal notranslate"><span class="pre">qgis_core.dll</span></code> が存在するフォルダーを探します。通常、これは <code class="file docutils literal notranslate"><span class="pre">C:∕OSGeo4W∕Apps∕qgis∕bin</span></code> ですが、自分の QGIS アプリケーションをコンパイルした場合、これはビルドフォルダの <code class="file docutils literal notranslate"><span class="pre">output/bin/RelWithDebInfo</span></code> にあります</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">eclipse.exe</span></code> 実行ファイルを探します。</p></li>
<li><p>以下のスクリプトを作成し、QGISプラグイン開発時にeclipseの起動に使います。</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="s2">&quot;C:\OSGeo4W\bin\o4w_env.bat&quot;</span>
<span class="k">set</span> <span class="nv">PATH</span><span class="p">=</span><span class="nv">%PATH%</span>;C:\path\to\your\qgis_core.dll\parent\folder
<span class="k">start</span> /B C:\path\to\your\eclipse.exe
</pre></div>
</div>
</li>
</ol>
</section>
<section id="setting-up-eclipse">
<h3><a class="toc-backref" href="#id11" role="doc-backlink"><span class="section-number">16.3.4.2. </span>Eclipseをセットアップする</a><a class="headerlink" href="#setting-up-eclipse" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Eclipseで、新しいプロジェクトを作成します。 <em>一般的なプロジェクト</em> を選択しておいて本当のソースを後でリンクできるので、このプロジェクトをどこに配置するかは実際は問題になりません。</p>
<figure class="align-center" id="id2">
<img alt="../../../_images/eclipsenewproject.png" src="../../../_images/eclipsenewproject.png" />
<figcaption>
<p><span class="caption-number">図 16.114 </span><span class="caption-text">Eclipseプロジェクト</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p>新しいプロジェクトを右クリックして <span class="menuselection">New ► Folder</span> を選びます。</p></li>
<li><p><span class="guilabel">詳細</span> をクリックし、 <span class="guilabel">別の場所に リンク（リンクフォルダ）</span> を選択します。すでにデバッグしたいソースがある場合はこれらを選択してください。そうでない場合は、すでに説明したようにフォルダを作成してください。</p></li>
</ol>
<p>するとビュー <span class="guilabel">プロジェクトエクスプローラ</span> で、ソースツリーがポップアップしますので、コードでの作業を開始できます。すでに利用可能な構文の強調表示や他のすべての強力なIDEツールが使用できるようになっています。</p>
</section>
<section id="configuring-the-debugger">
<h3><a class="toc-backref" href="#id12" role="doc-backlink"><span class="section-number">16.3.4.3. </span>デバッガを設定する</a><a class="headerlink" href="#configuring-the-debugger" title="Link to this heading"></a></h3>
<p>デバッガが動くようにするには:</p>
<ol class="arabic simple">
<li><p>Eclipseでデバッグパースペクティブに切り替えます（<span class="menuselection">Window ► Open Perspective ► Other ► Debug</span>）。</p></li>
<li><p><span class="menuselection">PyDev ► Start Debug Server</span> を選んでPyDev デバッグサーバーを起動します。</p></li>
<li><p>EclipseはQGISからデバッグサーバーへの接続を待っています。QGISがデバッグサーバーに接続すると、Pythonスクリプトを制御できます。それはまさに私たちが <em>Remote Debug</em> プラグインをインストールしたものです。だからまだ起動していなければQGISを起動し、バグのシンボルをクリックしてください。</p></li>
</ol>
<p>ここでブレークポイントを設定できます。コードがそこに達すると実行は停止し、プラグインの現在の状態を検査できます。（ブレークポイントは下の画像の緑色の点です。ブレークポイントを設定したい行の左空白でダブルクリックすることで設定します）。</p>
<figure class="align-center" id="id3">
<img alt="../../../_images/breakpoint.png" src="../../../_images/breakpoint.png" />
<figcaption>
<p><span class="caption-number">図 16.115 </span><span class="caption-text">ブレークポイント</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>今利用できる非常に興味深いものはデバッグコンソールです。先に進む前に、現在実行がブレークポイントで停止していることを確認してください。</p>
<ol class="arabic">
<li><p>コンソールビューを開きます（<span class="menuselection">Window ► Show view</span>）。あまり面白くない <span class="guilabel">Debug Server</span> コンソールが表示されます。しかし <span class="guilabel">Open Console</span> というボタンがあり、これを押すともっと面白い PyDev デバッグコンソールに切り替えることができます。</p></li>
<li><p><span class="guilabel">コンソールを開く</span> ボタンの横にある矢印をクリックし、<em>PyDevコンソール</em> を選択します。どのコンソールを起動するかを尋ねるウィンドウが開きます。</p></li>
<li><p><em>PyDevデバッグコンソール</em> を選択します。それがグレイアウトしていて、デバッガを開始して有効なフレームを選択するように指示された場合は、リモートデバッガが接続されていて、現在ブレークポイント上にあることを確認してください。</p>
<figure class="align-center" id="id4">
<img alt="../../../_images/console-buttons.png" src="../../../_images/console-buttons.png" />
<figcaption>
<p><span class="caption-number">図 16.116 </span><span class="caption-text">PyDevデバッグコンソール</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
</ol>
<p>これで、現在のコンテキストから任意のコマンドをテストできる対話型コンソールが完成しました。変数を操作したり、APIを呼び出したり、好きなことができます。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>ちょっと面倒なのですが、コマンドを入力するたびコンソールはデバッグサーバーに戻ります。この動作を停止するには、デバッグサーバーページで <em>Pin Console</em> ボタンをクリックしますが、少なくとも現在のデバッグセッションではこの決定は記憶されます。</p>
</div>
</section>
<section id="making-eclipse-understand-the-api">
<h3><a class="toc-backref" href="#id13" role="doc-backlink"><span class="section-number">16.3.4.4. </span>EclipseにAPIを理解させる</a><a class="headerlink" href="#making-eclipse-understand-the-api" title="Link to this heading"></a></h3>
<p>非常に便利な機能は、Eclipseが実際にQGISのAPIについてわかっているようにすることです。これにより、タイプミスがないかコードを確認できます。これだけでなく、EclipseでのインポートからAPI呼び出しへ自動入力する支援を可能にします。</p>
<p>これを行うため、EclipseではQGISライブラリファイルを解析し、そこにすべての情報を取得します。しなければならないことは、どこのライブラリを検索するかをEclipseに伝えることだけです。</p>
<ol class="arabic">
<li><p><span class="menuselection">ウィンドウ ► 設定 ► PyDev ► インタプリタ ► Python</span> をクリック。</p>
<p>ウィンドウの上部と下部にいくつかのタブで設定済みのPythonインタプリタ（現在QGISのためのpython2.7）が表示されます。私たちにとって興味深いタブは、 <em>ライブラリ</em> および <em>強制ビルトイン</em> です。</p>
<figure class="align-center" id="id5">
<img alt="../../../_images/interpreter-libraries.png" src="../../../_images/interpreter-libraries.png" />
<figcaption>
<p><span class="caption-number">図 16.117 </span><span class="caption-text">PyDevデバッグコンソール</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p>最初にライブラリタブを開きます。</p></li>
<li><p>新しいフォルダーを追加し、QGISのインストールにあるpythonフォルダーを選択します。このフォルダーがどこにあるかわからない場合（pluginsフォルダーではない場合）：</p>
<ol class="arabic simple">
<li><p>QGISを開く</p></li>
<li><p>pythonコンソールを開始する</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qgis</span></code> を入力する</p></li>
<li><p>Enterを押す。どのQGISモジュールを使用しているか、そのパスが表示されます。</p></li>
<li><p>このパスから末尾の <code class="docutils literal notranslate"><span class="pre">/qgis/__init__.pyc</span></code> を取り除けば、目的のパスが得られます。</p></li>
</ol>
</li>
<li><p>pluginsフォルダーもここに追加してください（ <a class="reference internal" href="../../user_manual/introduction/qgis_configuration.html#user-profiles"><span class="std std-ref">user profile</span></a> フォルダーの下の <code class="file docutils literal notranslate"><span class="pre">python/plugins</span></code> にあります）。</p></li>
<li><p>次に <em>Forced Builtins</em> タブにジャンプし、<em>New...</em> をクリックして <code class="docutils literal notranslate"><span class="pre">qgis</span></code> と入力します。これでEclipseがQGIS APIを解析するようになります。おそらく、EclipseにPyQt APIについても知ってもらいたいでしょう。そのため、PyQtを強制ビルトインとして追加します。おそらくライブラリタブにはすでに存在しているはずです。</p></li>
<li><p><span class="guilabel">OK</span> をクリックして完了です。</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>QGIS APIが変更されるたびに（例えばQGIS masterをコンパイルしていてSIPファイルが変更された場合など）、このページに戻って <span class="guilabel">Apply</span> をクリックだけしてください。これでEclipseがすべてのライブラリを再度解析します。</p>
</div>
</section>
</section>
<section id="debugging-with-pycharm-on-ubuntu-with-a-compiled-qgis">
<h2><a class="toc-backref" href="#id14" role="doc-backlink"><span class="section-number">16.3.5. </span>UbuntuでコンパイルしたQGISをPyCharmでデバッグする</a><a class="headerlink" href="#debugging-with-pycharm-on-ubuntu-with-a-compiled-qgis" title="Link to this heading"></a></h2>
<p>PyCharmはJetBrains社が開発したPython用のIDEです。Community Editionという無料版とProfessionalという有料版があります。PyCharmはウェブサイト <a class="reference external" href="https://www.jetbrains.com/pycharm/download">https://www.jetbrains.com/pycharm/download</a> からダウンロードできます</p>
<p>Ubuntu上で指定されたビルドディレクトリ <code class="file docutils literal notranslate"><span class="pre">~/dev/qgis/build/master</span></code> でQGISをコンパイルしたと仮定します。自分でコンパイルしたQGISであることは必須ではありませんが、それでテストしています。パスは合わせる必要があります。</p>
<ol class="arabic simple">
<li><p>PyCharmの <span class="guilabel">Project Properties</span>, <span class="guilabel">Project Interpreter</span> に <code class="docutils literal notranslate"><span class="pre">QGIS</span></code> というPython仮想環境を作成します。</p></li>
<li><p>小さな歯車と次に <span class="guilabel">Add</span> をクリックします。</p></li>
<li><p><span class="guilabel">Virtualenv environment</span> を選びます。</p></li>
<li><p>すべてのプラグインにこのPythonインタプリタを使用するため、 <code class="file docutils literal notranslate"><span class="pre">~/dev/qgis/venv</span></code> のように、すべてのPythonプロジェクトの一般的な場所を選択します。</p></li>
<li><p>あなたのシステムで利用可能なPython 3ベースのインタプリタを選択し、次の2つのオプション、<span class="guilabel">Inherit global site-packages</span> と <span class="guilabel">Make available to all projects</span> をチェックしてください。</p></li>
</ol>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../_images/pycharm-add-venv.png"><img alt="../../../_images/pycharm-add-venv.png" src="../../../_images/pycharm-add-venv.png" style="width: 40em;" /></a>
</figure>
<ol class="arabic simple">
<li><p><span class="guilabel">OK</span> をクリックし、小さな歯車に戻り、:guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Show all`をクリックします。</p></li>
<li><p>新しいウィンドウで、新しいインタプリタ <code class="docutils literal notranslate"><span class="pre">QGIS</span></code> を選択し、垂直メニューの最後のアイコン <span class="guilabel">Show paths for the selected interpreter.</span> をクリックします。</p></li>
<li><p>最後に次の絶対パスをリストに加えます: <code class="file docutils literal notranslate"><span class="pre">~/dev/qgis/build/master/output/python</span></code></p></li>
</ol>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../_images/pycharm-adding-path.png"><img alt="../../../_images/pycharm-adding-path.png" src="../../../_images/pycharm-adding-path.png" style="width: 40em;" /></a>
</figure>
<ol class="arabic simple">
<li><p>PyCharmを再起動すると、すべてのプラグインでこの新しいPython仮想環境を使い始めることができます。</p></li>
</ol>
<p>PyCharm は QGIS API を認識し、<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">qgis.PyQt.QtCore</span> <span class="pre">import</span> <span class="pre">QDir</span></code> のように QGIS が提供する Qt を使用する場合は PyQt API も認識します。オートコンプリートが機能し、PyCharmがコードを検査できるようになります。</p>
<p>PyCharmのプロフェッショナル版では、リモートデバッグはうまく動作しています。コミュニティ版ではリモートデバッグは利用できません。ローカルデバッガにアクセスできるのは、QGIS自身ではなく、PyCharmの <em>内部</em> で（スクリプトやunittestとして）実行されるコードだけです。Pythonコードを <em>QGIS内で</em> 実行する場合は、前述の <em>First Aid</em> プラグインを使用するときでしょう。</p>
</section>
<section id="debugging-using-pdb">
<h2><a class="toc-backref" href="#id15" role="doc-backlink"><span class="section-number">16.3.6. </span>PDBを利用してデバッグする</a><a class="headerlink" href="#debugging-using-pdb" title="Link to this heading"></a></h2>
<p>EclipseやPyCharmのようなIDEを使用していない場合は、以下の手順でPDBを使用してデバッグできます。</p>
<ol class="arabic">
<li><p>まず、デバッグしたい場所に次のコードを追加します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use pdb for debugging</span>
<span class="kn">import</span> <span class="nn">pdb</span>
<span class="c1"># also import pyqtRemoveInputHook</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtCore</span> <span class="kn">import</span> <span class="n">pyqtRemoveInputHook</span>
<span class="c1"># These lines allow you to set a breakpoint in the app</span>
<span class="n">pyqtRemoveInputHook</span><span class="p">()</span>
<span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>次にQGISをコマンドラインから実行します。</p>
<p>Linuxではこうします:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./Qgis
</pre></div>
</div>
<p>macOSではこうします:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>/Applications/Qgis.app/Contents/MacOS/Qgis
</pre></div>
</div>
</li>
<li><p>そして、アプリケーションがブレークポイントに到達したら、コンソールに入力することができます！</p></li>
</ol>
<dl class="simple" id="index-1">
<dt><strong>TODO:</strong></dt><dd><p>テストの情報を加える</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="snippets.html" class="btn btn-neutral float-left" title="16.2. コードスニペット" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="releasing.html" class="btn btn-neutral float-right" title="16.4. プラグインをリリースする" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">最終更新: 2024 5月 30, 01:33 +0900
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages:
Expected French translation link for https://docs.qgis.org/3.28/en/docs/user_manual/print_composer/overview_composer.html
would return https://app.transifex.com/qgis/qgis-documentation/translate/#fr/aa6d8bc653526d38b295ca94bf8eee5e
with the md5 value of "github#qgis/QGIS-Documentation#release_3.28#locale/en/LC_MESSAGES/docs/user_manual/print_composer/overview_composer.po"-->
<!--Make sure that mismatching language codes between Transifex and Sphinx are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: 3.34
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">en</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/cs/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">cs</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/de/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">de</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/es/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">es</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/fr/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">fr</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/hu/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">hu</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/it/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">it</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">ja</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ko/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">ko</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/lt/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">lt</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/nl/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">nl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_BR/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">pt_BR</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_PT/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">pt_PT</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ro/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">ro</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ru/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">ru</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zh-Hans/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">zh-Hans</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">3.34</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.28/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">3.28</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.22/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">3.22</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/ja/docs/pyqgis_developer_cookbook/plugins/ide_debugging.html">2.18</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/pyqgis_developer_cookbook/plugins/ide_debugging.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://app.transifex.com/qgis/qgis-documentation/translate/#ja/f160aaf5e572c848c70009a2d5e53af7" target="_blank" rel="noopener noreferrer">Translate Page</a>
          </dd>
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/ja" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/3.34" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/3.34" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/release-3_34" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>