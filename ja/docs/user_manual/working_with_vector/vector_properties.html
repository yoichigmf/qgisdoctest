<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>16.1. ベクタプロパティダイアログ &mdash; QGIS Documentation  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/qgis_docs.css?v=5415a924" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/user_manual/working_with_vector/vector_properties.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../../_static/translations.js?v=4dbe4bdc"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" />
    <link rel="next" title="16.2. 属性テーブルの操作" href="attribute_table.html" />
    <link rel="prev" title="16. ベクタデータの操作" href="index.html" />
  <meta name="description" content="QGIS 3.34 documentation: 16.1. ベクタプロパティダイアログ">
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   

          
          
          <a href="../../index.html" class="icon icon-home">
            QGIS Documentation
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.34
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">ユーザ向け</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">QGIS Desktopユーザーガイド／マニュアル (QGIS 3.34)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../preamble/preamble.html">1. はじめに</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/foreword.html">2. 序文</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/conventions.html">3. 記述ルール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/features.html">4. 機能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/getting_started.html">5. 最初のステップ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/project_files.html">6. プロジェクトファイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_gui.html">7. QGISのユーザインタフェース</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/browser.html">8. ブラウザパネル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_configuration.html">9. QGISの設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_projections/working_with_projections.html">10. 投影法の操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../map_views/index.html">11. 地図の可視化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/general_tools.html">12. 一般ツール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expressions/index.html">13. 式でレベルアップ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style_library/index.html">14. スタイルライブラリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../managing_data_source/index.html">15. データソースの管理</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">16. ベクタデータの操作</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">16.1. ベクタプロパティダイアログ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#information-properties">16.1.1. 情報プロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-properties">16.1.2. ソースプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#symbology-properties">16.1.3. シンボロジプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#labels-properties">16.1.4. ラベルプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#diagrams-properties">16.1.5. ダイアグラムプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#masks-properties">16.1.6. マスクプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-view-properties">16.1.7. 3Dビュープロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fields-properties">16.1.8. フィールドプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#attributes-form-properties">16.1.9. 属性フォームプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joins-properties">16.1.10. テーブル結合プロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#auxiliary-storage-properties">16.1.11. 補助テーブルプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#actions-properties">16.1.12. アクションプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#display-properties">16.1.13. 表示名プロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rendering-properties">16.1.14. レンダリングプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#temporal-properties">16.1.15. 時系列プロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variables-properties">16.1.16. 変数プロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#elevation-properties">16.1.17. 標高プロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metadata-properties">16.1.18. メタデータプロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies-properties">16.1.19. 依存関係プロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#legend-properties">16.1.20. 凡例プロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qgis-server-properties">16.1.21. QGISサーバープロパティ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#digitizing-properties">16.1.22. デジタイズプロパティ</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="attribute_table.html">16.2. 属性テーブルの操作</a></li>
<li class="toctree-l3"><a class="reference internal" href="editing_geometry_attributes.html">16.3. 編集</a></li>
<li class="toctree-l3"><a class="reference internal" href="joins_relations.html">16.4. Connecting and Editing Data Across Layers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_raster/index.html">17. ラスタデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_mesh/mesh.html">18. メッシュデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector_tiles/vector_tiles.html">19. ベクタタイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_point_clouds/point_clouds.html">20. 点群の操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_3d_tiles/3d_tiles.html">21. 3Dタイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../print_composer/index.html">22. 地図のレイアウト</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_ogc/ogc_client_support.html">23. OGC / ISOプロトコルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_gps/index.html">24. GPSデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth_system/index.html">25. 認証システム</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grass_integration/grass_integration.html">26. GRASS GIS の統合</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing/index.html">27. QGIS プロセシングフレームワーク</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing_algs/index.html">28. プロセシングプロバイダとアルゴリズム</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">29. プラグイン</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/help_and_support.html">30. ヘルプとサポート</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/contributors.html">31. 協力者</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/index.html">32. 付録</a></li>
<li class="toctree-l2"><a class="reference internal" href="../literature_web/literature_and_web_references.html">33. 文献とWeb参照</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Serverガイド／マニュアル (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_manual/index.html">トレーニングマニュアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">やさしい GIS 入門</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ドキュメント執筆者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">ドキュメント作成のガイドライン</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">開発者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyqgis_developer_cookbook/index.html">PyQGISクックブック (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">開発者ガイド</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">QGISユーザガイド</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">16. </span>ベクタデータの操作</a></li>
      <li class="breadcrumb-item active"><span class="section-number">16.1. </span>ベクタプロパティダイアログ</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/user_manual/working_with_vector/vector_properties.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="index.html" class="btn btn-neutral float-left" title="16. ベクタデータの操作" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="attribute_table.html" class="btn btn-neutral float-right" title="16.2. 属性テーブルの操作" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div><div class="admonition important">
<p class="admonition-title">重要</p>
<p>翻訳は <a class="reference external" href="https://qgis.org/en/site/getinvolved/translate.html#becoming-a-translator">あなたが参加できる</a> コミュニティの取り組みです。このページは現在 97.27% 翻訳されています。</p>
</div>
</div></blockquote>
<section id="the-vector-properties-dialog">
<span id="vector-properties-dialog"></span><h1><span class="section-number">16.1. </span>ベクタプロパティダイアログ<a class="headerlink" href="#the-vector-properties-dialog" title="Link to this heading"></a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#information-properties" id="id86">情報プロパティ</a></p></li>
<li><p><a class="reference internal" href="#source-properties" id="id87">ソースプロパティ</a></p>
<ul>
<li><p><a class="reference internal" href="#settings" id="id88">設定</a></p></li>
<li><p><a class="reference internal" href="#coordinate-reference-system-and-geometry" id="id89">CRSとジオメトリ</a></p></li>
<li><p><a class="reference internal" href="#query-builder" id="id90">クエリビルダ</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#symbology-properties" id="id91">シンボロジプロパティ</a></p>
<ul>
<li><p><a class="reference internal" href="#features-rendering" id="id92">地物のレンダリング</a></p>
<ul>
<li><p><a class="reference internal" href="#single-symbol-renderer" id="id93">単一シンボルレンダラー</a></p></li>
<li><p><a class="reference internal" href="#no-symbols-renderer" id="id94">シンボルなしレンダラー</a></p></li>
<li><p><a class="reference internal" href="#categorized-renderer" id="id95">カテゴリ値レンダラー</a></p></li>
<li><p><a class="reference internal" href="#graduated-renderer" id="id96">連続値レンダラー</a></p></li>
<li><p><a class="reference internal" href="#proportional-symbol-and-multivariate-analysis" id="id97">比例シンボルと多変量解析</a></p></li>
<li><p><a class="reference internal" href="#rule-based-renderer" id="id98">ルールベースレンダラー</a></p></li>
<li><p><a class="reference internal" href="#point-displacement-renderer" id="id99">点の競合回避レンダラ</a></p></li>
<li><p><a class="reference internal" href="#point-cluster-renderer" id="id100">点のクラスタレンダラー</a></p></li>
<li><p><a class="reference internal" href="#merged-features-renderer" id="id101">結合済み地物レンダラー</a></p></li>
<li><p><a class="reference internal" href="#inverted-polygon-renderer" id="id102">反転ポリゴンレンダラー</a></p></li>
<li><p><a class="reference internal" href="#heatmap-renderer" id="id103">ヒートマップレンダラー</a></p></li>
<li><p><a class="reference internal" href="#d-renderer" id="id104">2.5Dレンダラー</a></p></li>
<li><p><a class="reference internal" href="#embedded-renderer" id="id105">埋め込みシンボルレンダラー</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#layer-rendering" id="id106">レイヤレンダリング</a></p></li>
<li><p><a class="reference internal" href="#other-settings" id="id107">その他の設定</a></p>
<ul>
<li><p><a class="reference internal" href="#symbol-levels" id="id108">シンボルレベル</a></p></li>
<li><p><a class="reference internal" href="#data-defined-size-legend" id="id109">データ定義による凡例サイズ</a></p></li>
<li><p><a class="reference internal" href="#animation-settings" id="id110">アニメーション設定</a></p></li>
<li><p><a class="reference internal" href="#draw-effects" id="id111">描画エフェクト</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#labels-properties" id="id112">ラベルプロパティ</a></p>
<ul>
<li><p><a class="reference internal" href="#setting-the-automated-placement-engine" id="id113">自動配置エンジンの設定</a></p></li>
<li><p><a class="reference internal" href="#rule-based-labeling" id="id114">ルールに基づくラベル付け</a></p></li>
<li><p><a class="reference internal" href="#define-labels-based-on-expressions" id="id115">式に基づいてラベルを定義する</a></p></li>
<li><p><a class="reference internal" href="#using-data-defined-override-for-labeling" id="id116">ラベル付けのためにデータ定義の上書きを使用する</a></p>
<ul>
<li><p><a class="reference internal" href="#the-label-toolbar" id="id117">ラベルツールバー</a></p></li>
<li><p><a class="reference internal" href="#customize-the-labels-from-the-map-canvas" id="id118">マップキャンバスからラベルをカスタマイズする</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#diagrams-properties" id="id119">ダイアグラムプロパティ</a></p>
<ul>
<li><p><a class="reference internal" href="#attributes" id="id120">属性</a></p></li>
<li><p><a class="reference internal" href="#rendering" id="id121">レンダリング</a></p></li>
<li><p><a class="reference internal" href="#size" id="id122">大きさ</a></p></li>
<li><p><a class="reference internal" href="#placement" id="id123">配置</a></p></li>
<li><p><a class="reference internal" href="#options" id="id124">オプション</a></p></li>
<li><p><a class="reference internal" href="#legend" id="id125">凡例</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#masks-properties" id="id126">マスクプロパティ</a></p></li>
<li><p><a class="reference internal" href="#d-view-properties" id="id127">3Dビュープロパティ</a></p></li>
<li><p><a class="reference internal" href="#fields-properties" id="id128">フィールドプロパティ</a></p></li>
<li><p><a class="reference internal" href="#attributes-form-properties" id="id129">属性フォームプロパティ</a></p>
<ul>
<li><p><a class="reference internal" href="#customizing-a-form-for-your-data" id="id130">データに合わせてフォームをカスタマイズする</a></p>
<ul>
<li><p><a class="reference internal" href="#the-autogenerated-form" id="id131">自動生成フォーム</a></p></li>
<li><p><a class="reference internal" href="#the-drag-and-drop-designer" id="id132">ドラッグ＆ドロップデザイナー</a></p>
<ul>
<li><p><a class="reference internal" href="#other-widgets" id="id133">他のウィジェット</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-custom-ui-file" id="id134">カスタム uiファイルを使用する</a></p></li>
<li><p><a class="reference internal" href="#enhance-your-form-with-custom-functions" id="id135">カスタム関数でフォームの機能を強化する</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#configure-the-field-behavior" id="id136">フィールドの動作を設定する</a></p>
<ul>
<li><p><a class="reference internal" href="#common-settings" id="id137">共通設定</a></p>
<ul>
<li><p><a class="reference internal" href="#widget-display" id="id138">ウィジェットの表示</a></p></li>
<li><p><a class="reference internal" href="#general-options" id="id139">一般情報</a></p></li>
<li><p><a class="reference internal" href="#constraints" id="id140">制約</a></p></li>
<li><p><a class="reference internal" href="#default-values" id="id141">デフォルト値</a></p></li>
<li><p><a class="reference internal" href="#policies" id="id142">ポリシー</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#edit-widgets" id="id143">編集ウィジェット</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#joins-properties" id="id144">テーブル結合プロパティ</a></p></li>
<li><p><a class="reference internal" href="#auxiliary-storage-properties" id="id145">補助テーブルプロパティ</a></p>
<ul>
<li><p><a class="reference internal" href="#labeling" id="id146">ラベル</a></p></li>
<li><p><a class="reference internal" href="#symbology" id="id147">シンボロジ</a></p></li>
<li><p><a class="reference internal" href="#attribute-table-and-widgets" id="id148">属性テーブルとウィジェット</a></p></li>
<li><p><a class="reference internal" href="#management" id="id149">管理</a></p></li>
<li><p><a class="reference internal" href="#auxiliary-storage-database" id="id150">補助テーブルのデータベース</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#actions-properties" id="id151">アクションプロパティ</a></p>
<ul>
<li><p><a class="reference internal" href="#defining-actions" id="id152">アクションの定義</a></p></li>
<li><p><a class="reference internal" href="#using-actions" id="id153">アクションを使用する</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#display-properties" id="id154">表示名プロパティ</a></p></li>
<li><p><a class="reference internal" href="#rendering-properties" id="id155">レンダリングプロパティ</a></p></li>
<li><p><a class="reference internal" href="#temporal-properties" id="id156">時系列プロパティ</a></p></li>
<li><p><a class="reference internal" href="#variables-properties" id="id157">変数プロパティ</a></p></li>
<li><p><a class="reference internal" href="#elevation-properties" id="id158">標高プロパティ</a></p></li>
<li><p><a class="reference internal" href="#metadata-properties" id="id159">メタデータプロパティ</a></p></li>
<li><p><a class="reference internal" href="#dependencies-properties" id="id160">依存関係プロパティ</a></p></li>
<li><p><a class="reference internal" href="#legend-properties" id="id161">凡例プロパティ</a></p></li>
<li><p><a class="reference internal" href="#qgis-server-properties" id="id162">QGISサーバープロパティ</a></p></li>
<li><p><a class="reference internal" href="#digitizing-properties" id="id163">デジタイズプロパティ</a></p>
<ul>
<li><p><a class="reference internal" href="#automatic-fixes" id="id164">自動修正</a></p></li>
<li><p><a class="reference internal" href="#geometry-checks" id="id165">ジオメトリチェック</a></p></li>
<li><p><a class="reference internal" href="#topology-checks" id="id166">トポロジチェック</a></p>
<ul>
<li><p><a class="reference internal" href="#gap-check-exceptions" id="id167">隙間チェックの例外</a></p></li>
<li><p><a class="reference internal" href="#geometry-validation-panel" id="id168">ジオメトリ検証パネル</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<p>ベクタレイヤの <span class="guilabel">レイヤプロパティ</span> ダイアログには、地図内のレイヤの地物の外観（シンボロジ、ラベル、ダイアグラム）やマウスとのインタラクション（アクション、地図のTips、フォームデザイン）を管理するための一般的な設定があります。また、レイヤについての情報を提供します。</p>
<p><span class="guilabel">レイヤプロパティ</span> ダイアログにアクセスするには：</p>
<ul class="simple">
<li><p><span class="guilabel">レイヤ</span> パネル内において、レイヤをダブルクリックするか、レイヤを右クリックしてポップアップメニューから <span class="guilabel">プロパティ...</span> を選択する</p></li>
<li><p>レイヤを選択した状態で、 <span class="menuselection">レイヤ ► レイヤのプロパティ...</span> メニューを選ぶ</p></li>
</ul>
<p>ベクタ <span class="guilabel">レイヤプロパティ</span> ダイアログには以下のセクションがあります：</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/metadata.png"><img alt="metadata" src="../../../_images/metadata.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorinformationmenu"><span class="std std-ref">情報</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/system.png"><img alt="system" src="../../../_images/system.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorsourcemenu"><span class="std std-ref">ソース</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/symbology.png"><img alt="symbology" src="../../../_images/symbology.png" style="width: 2em;" /></a> <a class="reference internal" href="#vector-style-menu"><span class="std std-ref">シンボロジ</span></a><sup>[1]</sup></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labelingSingle" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vector-labels-tab"><span class="std std-ref">ラベル</span></a><sup>[1]</sup></p></td>
<td><p><a class="reference internal" href="../../../_images/labelmask.png"><img alt="labelmask" src="../../../_images/labelmask.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vector-mask-menu"><span class="std std-ref">マスク</span></a><sup>[1]</sup></p></td>
<td><p><a class="reference internal" href="../../../_images/3d.png"><img alt="3d" src="../../../_images/3d.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#sec-3-d-view"><span class="std std-ref">3Dビュー</span></a><sup>[1]</sup></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/diagram.png"><img alt="diagram" src="../../../_images/diagram.png" style="width: 2em;" /></a> <a class="reference internal" href="#sec-diagram"><span class="std std-ref">ダイアグラム</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/mSourceFields.png"><img alt="sourceFields" src="../../../_images/mSourceFields.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vector-fields-menu"><span class="std std-ref">フィールド</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/mActionFormView.png"><img alt="formView" src="../../../_images/mActionFormView.png" style="width: 1.2em;" /></a> <a class="reference internal" href="#vector-attributes-menu"><span class="std std-ref">属性フォーム</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/join.png"><img alt="join" src="../../../_images/join.png" style="width: 2em;" /></a> <a class="reference internal" href="#vector-joins"><span class="std std-ref">テーブル結合</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/mIconAuxiliaryStorage.png"><img alt="auxiliaryStorage" src="../../../_images/mIconAuxiliaryStorage.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">補助テーブル</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/action.png"><img alt="action" src="../../../_images/action.png" style="width: 2em;" /></a> <a class="reference internal" href="#actions-menu"><span class="std std-ref">アクション</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/display.png"><img alt="display" src="../../../_images/display.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#maptips"><span class="std std-ref">表示名</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/rendering.png"><img alt="rendering" src="../../../_images/rendering.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorrenderingmenu"><span class="std std-ref">レンダリング</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/temporal.png"><img alt="temporal" src="../../../_images/temporal.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectortemporalmenu"><span class="std std-ref">時系列</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorvariablesmenu"><span class="std std-ref">変数</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/elevationscale.png"><img alt="elevationscale" src="../../../_images/elevationscale.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorelevationmenu"><span class="std std-ref">標高</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/editmetadata.png"><img alt="editMetadata" src="../../../_images/editmetadata.png" style="width: 1.2em;" /></a> <a class="reference internal" href="#vectormetadatamenu"><span class="std std-ref">メタデータ</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/dependencies.png"><img alt="dependencies" src="../../../_images/dependencies.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectordependenciesmenu"><span class="std std-ref">依存関係</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/legend.png"><img alt="legend" src="../../../_images/legend.png" style="width: 1.2em;" /></a> <a class="reference internal" href="#vectorlegendmenu"><span class="std std-ref">凡例</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/overlay.png"><img alt="overlay" src="../../../_images/overlay.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorservermenu"><span class="std std-ref">QGISサーバー</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/digitizing.png"><img alt="digitizing" src="../../../_images/digitizing.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#digitizingmenu"><span class="std std-ref">デジタイズ</span></a></p></td>
<td><p><a class="reference internal" href="../plugins/plugins.html#plugins"><span class="std std-ref">外部プラグイン</span></a><sup>[2]</sup> タブ</p></td>
<td></td>
</tr>
</tbody>
</table>
<p><sup>[1]</sup> <a class="reference internal" href="../introduction/general_tools.html#layer-styling-panel"><span class="std std-ref">レイヤスタイルパネル</span></a> からも利用可能です</p>
<p><sup>[2]</sup> インストールした <a class="reference internal" href="../plugins/plugins.html#plugins"><span class="std std-ref">外部プラグイン</span></a> は、任意でこのダイアログにタブを追加することがあります。これらについては、このドキュメントでは説明しません。外部プラグインのドキュメントを参照してください。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>レイヤスタイルの完全なまたは部分的なプロパティを共有する</strong></p>
<p>ダイアログの下部にある <span class="menuselection">スタイル</span> メニューを使用すると、レイヤスタイルのプロパティまたはその一部をさまざまな対象（ファイル、クリップボード、データベース）からインポートしたり、対象へエクスポートしたりすることができます。 <a class="reference internal" href="../introduction/general_tools.html#manage-custom-style"><span class="std std-ref">カスタムスタイルを管理する</span></a> を参照してください。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>埋め込まれたレイヤ（ <a class="reference internal" href="../introduction/general_tools.html#nesting-projects"><span class="std std-ref">外部プロジェクトからのレイヤの埋め込み</span></a> を参照）のプロパティ（シンボロジ、ラベル、アクション、デフォルト値、フォーム...）は、元のプロジェクトファイルから引用されているため、この動作を壊す可能性のある変更を避けるために、埋め込まれたレイヤに対してはレイヤプロパティダイアログは利用できなくなっています。</p>
</div>
<section id="information-properties">
<span id="vectorinformationmenu"></span><h2><a class="toc-backref" href="#id86" role="doc-backlink"><span class="section-number">16.1.1. </span>情報プロパティ</a><a class="headerlink" href="#information-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/metadata.png"><img alt="metadata" src="../../../_images/metadata.png" style="width: 1.5em;" /></a> <span class="guilabel">情報</span> タブは読み取り専用で、現在のレイヤの要約された情報やメタデータをさっと掴むことができる興味深い場所です。提供される情報には、以下のものがあります：</p>
<ul class="simple">
<li><p>一般情報：プロジェクト内での名前、ソースへのパス、付随的なファイルのリスト、最終更新時刻、ファイルの大きさ、使用しているプロバイダ</p></li>
<li><p>レイヤのプロバイダからの情報：ストレージ形式、ジオメトリタイプ、データソースの文字コード、領域、地物数など</p></li>
<li><p>空間参照システム（CRS）：CRSの名前、単位、投影法、精度、参照（静的か動的か）</p></li>
<li><p><a class="reference internal" href="#vectormetadatamenu"><span class="std std-ref">入力されたメタデータ</span></a> からの情報：アクセス、領域、リンク、連絡先、履歴など</p></li>
<li><p>ジオメトリ（空間的な範囲やCRSなど）や、属性（フィールド数や各フィールドの特性など）に関連した情報</p></li>
</ul>
</section>
<section id="source-properties">
<span id="vectorsourcemenu"></span><h2><a class="toc-backref" href="#id87" role="doc-backlink"><span class="section-number">16.1.2. </span>ソースプロパティ</a><a class="headerlink" href="#source-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/system.png"><img alt="system" src="../../../_images/system.png" style="width: 1.5em;" /></a> このタブでは、ベクタレイヤの一般的な設定の定義ができます。</p>
<figure class="align-center" id="id19">
<span id="figure-vector-general"></span><img alt="../../../_images/vector_source_menu.png" src="../../../_images/vector_source_menu.png" />
<figcaption>
<p><span class="caption-number">図 16.1 </span><span class="caption-text">ベクタレイヤプロパティダイアログのソースタブ</span><a class="headerlink" href="#id19" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="settings">
<h3><a class="toc-backref" href="#id88" role="doc-backlink"><span class="section-number">16.1.2.1. </span>設定</a><a class="headerlink" href="#settings" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>レイヤのファイル名とは異なる <span class="guilabel">レイヤ名</span> を設定すると、プロジェクト内（ <span class="guilabel">レイヤパネル</span> や式、印刷レイアウトの凡例など）でレイヤを識別するために使用されます。</p></li>
<li><p>データフォーマットにもよりますが、QGISが検出した文字コードが正しくない場合に <span class="guilabel">データソースの文字コード</span> を選択します。</p></li>
</ul>
</section>
<section id="coordinate-reference-system-and-geometry">
<h3><a class="toc-backref" href="#id89" role="doc-backlink"><span class="section-number">16.1.2.2. </span>CRSとジオメトリ</a><a class="headerlink" href="#coordinate-reference-system-and-geometry" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>レイヤに <a class="reference internal" href="../working_with_projections/working_with_projections.html#layer-crs"><span class="std std-ref">設定されたCRS</span></a> が表示されます。最近使用したCRSをドロップダウンリストから選ぶか、 <a class="reference internal" href="../../../_images/mActionSetProjection.png"><img alt="setProjection" src="../../../_images/mActionSetProjection.png" style="width: 1.5em;" /></a> <sup>CRSの選択</sup> ボタン（ <a class="reference internal" href="../working_with_projections/working_with_projections.html#crs-selector"><span class="std std-ref">座標参照系セレクタ</span></a> 参照）をクリックすることで、レイヤのCRSを変更できます。レイヤに適用されたCRSが間違っていた場合か、CRSが何も適用されていない場合にのみ、この操作を行ってください。データを別のCRSに再投影したい場合には、プロセシングアルゴリズムのレイヤの再投影を使用するか、  <a class="reference internal" href="../managing_data_source/create_layers.html#general-saveas"><span class="std std-ref">別のレイヤに保存</span></a> してください。</p></li>
<li><p><span class="guilabel">空間インデックスを作成</span> （OGRがサポートする形式のみです）</p></li>
<li><p><span class="guilabel">領域の更新</span> レイヤの領域情報を更新します。</p></li>
</ul>
</section>
<section id="query-builder">
<span id="vector-query-builder"></span><span id="index-0"></span><h3><a class="toc-backref" href="#id90" role="doc-backlink"><span class="section-number">16.1.2.3. </span>クエリビルダ</a><a class="headerlink" href="#query-builder" title="Link to this heading"></a></h3>
<p>クエリビルダダイアログは、レイヤプロパティダイアログの <span class="guilabel">ソース</span> タブの下部、 <span class="guilabel">プロバイダ地物フィルタ</span> グループの下にある <span class="guilabel">クエリビルダ</span> ボタンからアクセスできます。</p>
<p>クエリビルダは、SQLライクな WHERE句を使用してレイヤ内の地物のサブセットを定義し、メインウィンドウにその結果を表示するためのインタフェースを提供します。クエリが有効である限り、プロジェクトで利用可能となる地物はクエリの結果に対応するもののみです。</p>
<p><code class="docutils literal notranslate"><span class="pre">クエリビルダ</span></code> でフィルタを定義するために、複数のレイヤ属性を使用することができます。複数の属性の使用例を <a class="reference internal" href="#figure-vector-querybuilder"><span class="std std-numref">図 16.2</span></a> に示します。この例では、フィルタは属性の結合を行っています。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">toa</span></code> (<code class="docutils literal notranslate"><span class="pre">DateTime</span></code> フィールド: <code class="docutils literal notranslate"><span class="pre">cast(&quot;toa&quot;</span> <span class="pre">as</span> <span class="pre">character)</span> <span class="pre">&gt;</span> <span class="pre">'2017-05-17'</span></code> 、 <code class="docutils literal notranslate"><span class="pre">cast(&quot;toa&quot;</span> <span class="pre">as</span> <span class="pre">character)</span> <span class="pre">&lt;</span> <span class="pre">'2019-12-24T18:00:00'</span></code>) 、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> (<code class="docutils literal notranslate"><span class="pre">String</span></code> フィールド: <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;</span> <span class="pre">&gt;</span> <span class="pre">'S'</span></code>) 、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FID</span></code> (<code class="docutils literal notranslate"><span class="pre">Integer</span></code> フィールド: <code class="docutils literal notranslate"><span class="pre">FID</span> <span class="pre">&gt;</span> <span class="pre">10</span></code>)</p></li>
</ul>
<p>これらをAND、ORそしてNOT演算子と括弧で結合しています。この文法（ <code class="docutils literal notranslate"><span class="pre">toa</span></code> フィールドのDateTime形式も含め）は、GeoPackageデータセットで動作します。</p>
<p>フィルタはデータプロバイダ（OGR、PostgreSQL、MS SQL Server...）レベルで行われます。そのため、構文はデータプロバイダに依存します（例えば、DateTimeはESRI Shapefileフォーマットではサポートされていません）。完全な式:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;toa&quot;</span> <span class="k">as</span> <span class="n">character</span><span class="p">)</span> <span class="o">&gt;</span> <span class="s1">&#39;2017-05-17&#39;</span> <span class="n">AND</span>
<span class="n">cast</span><span class="p">(</span><span class="s2">&quot;toa&quot;</span> <span class="k">as</span> <span class="n">character</span><span class="p">)</span> <span class="o">&lt;</span> <span class="s1">&#39;2019-12-24T18:00:00&#39;</span> <span class="n">AND</span>
<span class="n">NOT</span> <span class="p">(</span><span class="s2">&quot;name&quot;</span> <span class="o">&gt;</span> <span class="s1">&#39;S&#39;</span> <span class="n">OR</span> <span class="n">FID</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>また、 <span class="guilabel">クエリビルダ</span> ダイアログは <span class="menuselection">レイヤ</span> メニューまたはレイヤのコンテキストメニューの  <span class="guilabel">フィルタ...</span> オプションを使用して開くこともできます。ダイアログの <span class="guilabel">属性</span> 、 <span class="guilabel">値</span> 、 <span class="guilabel">演算子</span> セクションは、 <span class="guilabel">プロバイダ特有のフィルタ式</span> ボックスに表示されるSQLライクなクエリを構築するのに役立ちます。</p>
<figure class="align-center" id="id20">
<span id="figure-vector-querybuilder"></span><img alt="../../../_images/queryBuilder.png" src="../../../_images/queryBuilder.png" />
<figcaption>
<p><span class="caption-number">図 16.2 </span><span class="caption-text">クエリビルダ</span><a class="headerlink" href="#id20" title="Link to this image"></a></p>
</figcaption>
</figure>
<p><strong>属性</strong> のリストには、レイヤの全ての属性が含まれます。SQL WHERE句フィールドに属性カラムを追加するには、属性名をダブルクリックするか、SQLボックスに属性名を入力します。</p>
<p><strong>値</strong> フレームは、現在選択されている属性の値をリストします。属性のユニークな値を全てリストするには、 <span class="guilabel">全て</span> ボタンをクリックします。代わりに、カラムのユニークな値を最初の25個リストするには、 <span class="guilabel">サンプル</span> ボタンをクリックします。SQL WHERE句フィールドに値を追加するには、値リストの値をダブルクリックします。値フレームの上部にある検索ボックスを使用して、リスト内から属性値を簡単にブラウズして見つけることができます。</p>
<p><strong>演算子</strong> セクションには、使用可能な演算子全てが含まれています。SQL WHERE句フィールドに演算子を追加するには、適切なボタンをクリックします。関係演算子（ <code class="docutils literal notranslate"><span class="pre">=</span></code> 、 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> など...）、文字列比較演算子（ <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> ）、論理演算子（ <code class="docutils literal notranslate"><span class="pre">AND</span></code> 、 <code class="docutils literal notranslate"><span class="pre">OR</span></code> など...）が利用可能です。</p>
<p><span class="guilabel">テスト</span> ボタンはクエリをチェックするのに役立ち、現在のクエリを満足する地物の数がメッセージボックスに表示されます。 <span class="guilabel">クリア</span> ボタンを使うと、SQLクエリを消去し、レイヤを元の状態（すなわち全ての地物を完全に読み込む状態）に戻します。クエリを <code class="file docutils literal notranslate"><span class="pre">.QQF</span></code> ファイルとして <span class="guilabel">保存...</span> することも、クエリをファイルからダイアログに <span class="guilabel">読み込み...</span> することもできます。</p>
<p>フィルタが適用されている場合、QGISは結果として得られるサブセットがレイヤの全体であるかのように扱います。例えば、 'Borough' でフィルタ（<code class="docutils literal notranslate"><span class="pre">&quot;TYPE_2&quot;</span> <span class="pre">=</span> <span class="pre">'Borough'</span></code> ）を適用すると、 <code class="docutils literal notranslate"><span class="pre">Anchorage</span></code> を表示することも、クエリすることも、保存も編集もできません。なぜならば、これは 'Municipality' であり、従ってサブセットの部分には含まれないからです。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>レイヤパネル内におけるフィルタされたレイヤの表示</strong></p>
<p><span class="guilabel">レイヤ</span> パネルにおいて、フィルタされたレイヤはレイヤの横に <a class="reference internal" href="../../../_images/mIndicatorFilter.png"><img alt="indicatorFilter" src="../../../_images/mIndicatorFilter.png" style="width: 1.5em;" /></a> <sup>フィルタ</sup> アイコンが表示され、ボタンの上にマウスを置くと、使用されているクエリが表示されます。アイコンをダブルクリックすると <span class="guilabel">クエリビルダ</span> ダイアログが開き、フィルタを編集できます。これは <span class="menuselection">レイヤ ► フィルタ...</span> メニューからもできます。</p>
</div>
</section>
</section>
<section id="symbology-properties">
<span id="vector-style-menu"></span><span id="index-1"></span><h2><a class="toc-backref" href="#id91" role="doc-backlink"><span class="section-number">16.1.3. </span>シンボロジプロパティ</a><a class="headerlink" href="#symbology-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/symbology.png"><img alt="symbology" src="../../../_images/symbology.png" style="width: 2em;" /></a> <span class="guilabel">シンボロジ</span> タブには、ベクタデータのレンダリングとシンボライズのための包括的なツールが用意されています。すべてのベクタデータに共通のツールや、さまざまな種類のベクタデータ用に作られた特別なシンボライズツールを使用することができます。ただし、すべてのタイプで次のようなダイアログ構造は共通です：上部には分類と地物のシンボルを準備するのに役立つウィジェットがあり、下部には <a class="reference internal" href="#layer-rendering"><span class="std std-ref">レイヤレンダリング</span></a> ウィジェットがあります。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>さまざまなレイヤ表現を素早く切り替える</strong></p>
<p><span class="guilabel">レイヤプロパティ</span> ダイアログの下部にある <span class="menuselection">スタイル ► 追加</span> メニューを使用すると、必要なだけスタイルを保存できます。スタイルとは、レイヤの全てのプロパティ（例えばシンボロジ、ラベル、ダイアグラム、属性フォーム、アクションなど）を好きなように組み合わせたものです。そして、 <span class="guilabel">レイヤパネル</span> 内のレイヤのコンテキストメニューからスタイルを切り替えるだけで、異なるデータ表現が自動的に得られます。</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>ベクタシンボロジをエクスポートする</strong></p>
<p>QGISからGoogle  *.kml や *.dxf、MapInfo *.tab ファイルにベクタシンボロジをエクスポートするオプションがあります。まずはレイヤの右マウスメニューを開き、 <span class="menuselection">名前を付けて保存...</span> をクリックして、出力ファイルの名前とその形式を指定します。ここでダイアログで <span class="menuselection">シンボロジのエクスポート</span> メニューを使用して、シンボルを <span class="menuselection">地物シンボロジ ►</span> または <span class="menuselection">シンボルレイヤシンボロジ ►</span> のいずれかとして保存します。シンボルレイヤを使用している場合には、2番目の設定を使用することをお勧めします。</p>
</div>
<section id="features-rendering">
<h3><a class="toc-backref" href="#id92" role="doc-backlink"><span class="section-number">16.1.3.1. </span>地物のレンダリング</a><a class="headerlink" href="#features-rendering" title="Link to this heading"></a></h3>
<p>レンダラーは、地物を正しいシンボルと共に描画する役割を持ちます。レイヤのジオメトリタイプに関係なく、一般的なレンダラーには、単一シンボル、カテゴリ値、連続値、ルールベースの 4 つのタイプがあります。ポイントレイヤーには、点の競合回避、点のクラスタ、ヒートマップレンダラーがあり、ポリゴンレイヤーには、結合済み地物、反転ポリゴン、2.5Dレンダラーがあります。</p>
<p>連続色のレンダラーはありません。これは、実際には連続値レンダラーの特殊な場合でしかないからです。カテゴリ値レンダラーおよび連続値レンダラーは、シンボルとカラーランプを指定して作成することができ、これによってシンボルの色を適切に設定できます。各データタイプ（ポイント、ライン、およびポリゴン）には、ベクタシンボルレイヤタイプが利用可能です。選択したレンダラーによっては、ダイアログにさまざまな追加のセクションがあります。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>ベクタレイヤのスタイルを設定する際にレンダラーの種類を変更しても、シンボルに設定した内容は維持されます。この機能は変更1回だけにしか働かないことに注意してください。レンダラーの種類の変更を繰り返すと、シンボルの設定は失われます。</p>
</div>
<section id="single-symbol-renderer">
<span id="index-2"></span><span id="id2"></span><h4><a class="toc-backref" href="#id93" role="doc-backlink">単一シンボルレンダラー</a><a class="headerlink" href="#single-symbol-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/rendererSingleSymbol.png"><img alt="singleSymbol" src="../../../_images/rendererSingleSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">単一定義（single）</span> レンダラーは、単一のユーザー定義のシンボルを使用してレイヤの全ての地物をレンダリングするために使用します。シンボル表現についての情報は、 <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">シンボルセレクタ</span></a> を参照してください。</p>
<figure class="align-center" id="id21">
<span id="figure-single-symbology"></span><img alt="../../../_images/singlesymbol_ng_line.png" src="../../../_images/singlesymbol_ng_line.png" />
<figcaption>
<p><span class="caption-number">図 16.3 </span><span class="caption-text">単一シンボルラインプロパティ</span><a class="headerlink" href="#id21" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="no-symbols-renderer">
<span id="no-symbol-renderer"></span><span id="index-3"></span><h4><a class="toc-backref" href="#id94" role="doc-backlink">シンボルなしレンダラー</a><a class="headerlink" href="#no-symbols-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/rendererNullSymbol.png"><img alt="nullSymbol" src="../../../_images/rendererNullSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">シンボルなし</span> レンダラーは、全ての地物に同一のレンダリングを適用することから、「単一定義シンボル」の特別なユースケースです。このレンダラーを使用すると、地物には何のシンボルも描画されませんが、ラベルやダイアグラム、その他の非シンボル部分は表示されます。</p>
<p>地物選択もキャンバスのレイヤで行うことができ、選択された地物はデフォルトのシンボルでレンダリングされます。編集中の地物も表示されます。</p>
<p>このレンダラーは、ラベルやダイアグラムだけを表示したいレイヤのための便利なショートカットです。この目的のために完全に透明な塗りつぶしやストロークでシンボルをレンダリングする必要はありません。</p>
</section>
<section id="categorized-renderer">
<span id="index-4"></span><span id="id3"></span><h4><a class="toc-backref" href="#id95" role="doc-backlink">カテゴリ値レンダラー</a><a class="headerlink" href="#categorized-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/rendererCategorizedSymbol.png"><img alt="categorizedSymbol" src="../../../_images/rendererCategorizedSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">カテゴリ値による定義（categorized）</span> レンダラーは、属性値または式の離散的な値を反映する特性を持ったユーザー定義のシンボルを使用してレイヤの地物をレンダリングするために使用します。</p>
<figure class="align-center" id="id22">
<span id="figure-categorized-symbology"></span><img alt="../../../_images/categorysymbol_ng_line.png" src="../../../_images/categorysymbol_ng_line.png" />
<figcaption>
<p><span class="caption-number">図 16.4 </span><span class="caption-text">カテゴリ値シンボルのオプション</span><a class="headerlink" href="#id22" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>カテゴリ値によるシンボロジをレイヤに使用するには、以下のように操作します。</p>
<ol class="arabic">
<li><p>分類の <span class="guilabel">値</span> の選択： これには既存のフィールドまたは <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">式</span></a> が使用できます。式はボックスに入力するか、関連する <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> ボタンを使用して構築することができます。 カテゴリ値に式を使用することで、シンボロジのためにフィールドを作成する必要がなくなります（例えば、分類基準が複数の属性値に由来する場合など）。</p>
<p>地物の分類のために使用する式は、どんな種類のものでも可能です。例えば、</p>
<ul>
<li><p>比較式：この場合、QGISは <code class="docutils literal notranslate"><span class="pre">1</span></code> （ <strong>True</strong> ） か <code class="docutils literal notranslate"><span class="pre">0</span></code> （ <strong>False</strong> ）を返します。 以下は一例です。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>myfield &gt;= 100
$id = @atlas_featureid
myfield % 2 = 0
within( $geometry, @atlas_geometry )
</pre></div>
</div>
</li>
<li><p>異なるフィールドの結合：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">concat</span><span class="p">(</span> <span class="n">field_1</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">field_2</span> <span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>フィールド値を使った計算結果：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfield</span> <span class="o">%</span> <span class="mi">2</span>
<span class="n">year</span><span class="p">(</span> <span class="n">myfield</span> <span class="p">)</span>
<span class="n">field_1</span> <span class="o">+</span> <span class="n">field_2</span>
<span class="n">substr</span><span class="p">(</span> <span class="n">field_1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span> <span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>連続値から離散的なクラスへの変換：例えば、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="n">THEN</span> <span class="s1">&#39;Big&#39;</span> <span class="n">ELSE</span> <span class="s1">&#39;Small&#39;</span> <span class="n">END</span>
</pre></div>
</div>
</li>
<li><p>複数の離散値を結合して単一カテゴリ化：例えば、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CASE</span>
<span class="n">WHEN</span> <span class="n">building</span> <span class="n">IN</span> <span class="p">(</span><span class="s1">&#39;residence&#39;</span><span class="p">,</span> <span class="s1">&#39;mobile home&#39;</span><span class="p">)</span> <span class="n">THEN</span> <span class="s1">&#39;residential&#39;</span>
<span class="n">WHEN</span> <span class="n">building</span> <span class="n">IN</span> <span class="p">(</span><span class="s1">&#39;commercial&#39;</span><span class="p">,</span> <span class="s1">&#39;industrial&#39;</span><span class="p">)</span> <span class="n">THEN</span> <span class="s1">&#39;Commercial and Industrial&#39;</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>地物を分類するためにはどんな種類の式も使用できますが、いくつかの複雑な式については <a class="reference internal" href="#rule-based-rendering"><span class="std std-ref">ルールによる定義に基づくレンダリング</span></a> を使用する方が簡単かもしれません。</p>
</div>
</li>
<li><p>全てのクラスのベースシンボルとなる <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">シンボル</span></a> を設定します。</p></li>
<li><p><a class="reference internal" href="../style_library/style_manager.html#color-ramp"><span class="std std-ref">カラーランプ</span></a>  を指定します。すなわち、各シンボルに適用する色によって、色の範囲を選択します。</p>
<p><a class="reference internal" href="../introduction/general_tools.html#color-ramp-widget"><span class="std std-ref">カラーランプウィジェット</span></a> の一般的なオプションに加えて、 <a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">ランダムカラーランプ</span> をカテゴリに適用することもできます。色が気に入らない場合には、 <span class="guilabel">色をシャッフル</span> エントリをクリックすると新しいランダムカラーの組み合わせを再生成することができます。</p>
</li>
<li><p>次に、 <span class="guilabel">分類</span> ボタンをクリックすると、与えられたフィールドもしくは式の離散値からクラスを生成します。</p></li>
<li><p><a class="reference internal" href="../introduction/general_tools.html#layer-styling-panel"><span class="std std-ref">ライブ更新</span></a> が利用できない場合には、 <span class="guilabel">適用</span> ボタンを押して変更を適用すると、マップキャンバス上の各地物がその分類のシンボルでレンダリングされます。</p>
<p>デフォルトでは、QGISは <span class="guilabel">その他の値</span> クラスをリストに追加します。初期状態では値が空ですが、このクラスは他のクラスに該当しない地物のためのデフォルトのクラスとして使用されます（例えば、分類フィールド/式にない値を持った新しい地物を作成した場合）。</p>
</li>
</ol>
<p>デフォルトの分類をさらに微調整することができます：</p>
<ul class="simple">
<li><p>新しい分類を <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>追加</sup> したり、選択した分類を <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="symbologyRemove" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> <sup>削除</sup> する、または分類を <span class="guilabel">すべて削除</span> することができます。</p></li>
<li><p>クラス名の左にあるチェックボックスのチェックを外すことで、クラスを無効化することができます。無効化されたクラスに対応する地物はマップ上に表示されません。</p></li>
<li><p>行をドラッグ＆ドロップしてクラスの順序を並べ替えることができます。</p></li>
<li><p>アイテムをダブルクリックすると、シンボルや値、クラスの凡例を変更することができます。</p></li>
</ul>
<p>選択したアイテムを右クリックすると、コンテキストメニューが表示されます：</p>
<ul>
<li><p><span class="guilabel">シンボルをコピーする</span> と <span class="guilabel">シンボルを貼り付ける</span> は、アイテムの表現を他のクラスに適用するのに便利な方法です。</p></li>
<li><p>選択したシンボルの <span class="guilabel">色を変更...</span></p></li>
<li><p>選択したシンボルの <span class="guilabel">不透明度を変更...</span></p></li>
<li><p>選択したシンボルの <span class="guilabel">出力単位を変更...</span></p></li>
<li><p>選択したラインシンボルの <span class="guilabel">幅を変更する...</span></p></li>
<li><p>選択したポイントシンボルの <span class="guilabel">サイズを変更...</span></p></li>
<li><p>選択したポイントシンボルの <span class="guilabel">角度を変更...</span></p></li>
<li><p><span class="guilabel">カテゴリをマージ</span> ：選択した複数のカテゴリを1つにまとめます。これにより、多数のカテゴリを持つレイヤのスタイル設定を簡単にできます。多数の相異なるカテゴリを、複数の値に適用される少数のより管理しやすいカテゴリの組にまとめることが可能になります。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>マージされたカテゴリのシンボルは、リスト内で選択されたカテゴリのうち最上位のものとなるため、マージする前に再利用したいシンボルのカテゴリを上に移動させると良いでしょう。</p>
</div>
</li>
<li><p>以前にマージされた <span class="guilabel">カテゴリをアンマージ</span></p></li>
</ul>
<p>作成したルールは <span class="guilabel">レイヤ</span> パネルのツリー階層にも表示されます。マップの凡例でエントリをダブルクリックすると、適用されたシンボルを編集できます。右クリックすると <a class="reference internal" href="../introduction/general_tools.html#editing-style-layer"><span class="std std-ref">さらにオプション</span></a> が表示されます。</p>
<p id="categorized-advanced-menu"><span class="guilabel">詳細設定</span> メニューのオプションにアクセスして、分類を効率化したり、シンボルレンダリングを微調整することができます。</p>
<ul class="simple">
<li><p><span class="guilabel">保存されたシンボルに一致</span> ： <a class="reference internal" href="../style_library/style_manager.html#vector-style-manager"><span class="std std-ref">シンボルのライブラリ</span></a> を使用して、分類のクラス値と名前が一致するシンボルを各カテゴリに割り当てます。</p></li>
<li><p><span class="guilabel">ファイルからのシンボルに一致...</span> ：シンボルが保存されたファイルを指定して、分類のクラス値と名前が一致するシンボルを各カテゴリに割り当てます。</p></li>
<li><p><a class="reference internal" href="#symbols-levels"><span class="std std-ref">描画順序...</span></a> は、シンボルのレンダリング順序を定義できます。</p></li>
</ul>
</section>
<section id="graduated-renderer">
<span id="index-5"></span><span id="id4"></span><h4><a class="toc-backref" href="#id96" role="doc-backlink">連続値レンダラー</a><a class="headerlink" href="#graduated-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/rendererGraduatedSymbol.png"><img alt="graduatedSymbol" src="../../../_images/rendererGraduatedSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">連続値による定義（graduated）</span> レンダラーは、選択した地物の属性値のクラス割り当てを反映した色やサイズのユーザー定義のシンボルを使用して、レイヤの地物すべてをレンダリングするために使用します。</p>
<p>カテゴリ値レンダラーと同じように、連続値レンダラーでは特定の列について回転やサイズ縮尺の値を定義できます。</p>
<p>また、カテゴリ値レンダラーと同じように、以下の選択ができます：</p>
<ul class="simple">
<li><p>分類の <span class="guilabel">値</span> ： これには既存のフィールドまたは <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">式</span></a> が使用できます。式はボックスに入力するか、関連する <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> ボタンを使用して構築することができます。 連続値に式を使用することで、シンボロジのためにフィールドを作成する必要がなくなります（例えば、分類基準が複数の属性値に由来する場合など）。</p></li>
<li><p>シンボル（シンボルセレクタダイアログを使用します）</p></li>
<li><p>凡例のフォーマットと精度</p></li>
<li><p>シンボルの変化に使用する方法：色または大きさ</p></li>
<li><p>色（カラーランプのリストを使用）：方法で色を選択した場合</p></li>
<li><p>大きさ（大きさの定義域およびその単位）</p></li>
</ul>
<p>それから、割り当てられたフィールドまたは式の値のインタラクティブなヒストグラムを示す「ヒストグラム」タブを使用できます。ヒストグラムウィジェットを使用して、クラス分割の移動や追加ができます。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>ベクタレイヤに関する詳細な情報を取得するために、統計パネルを使用できます。 <a class="reference internal" href="../introduction/general_tools.html#statistical-summary"><span class="std std-ref">統計量の出力パネル</span></a> を参照してください。</p>
</div>
<p>「クラス」タブに戻って、クラスの数および地物をクラスに分類するためのモードも（「モード」リストを使用して）指定できます。使用可能なモードは以下のとおりです：</p>
<ul class="simple">
<li><p>等量分類（Quantile）：各クラスは同じ数の要素を持ちます（ボックスプロットの考え方）。</p></li>
<li><p>等間隔分類：各クラスは同じサイズを持ちます（例：値の範囲が1から16で、4つのクラスとすると、各クラスのサイズは4です）</p></li>
<li><p>固定間隔：各クラスは、固定された値の範囲を持ちます（例：値が1から16で間隔サイズが4の場合、クラスは1-4、5-8、9-12、13-16となります）。</p></li>
<li><p>対数スケール：広い範囲の値を持つデータに対して適しています。小さい値は狭いクラス、大きな値は広いクラスになります（例：範囲 [0..100] の10進数で、2つのクラスとすると、1つ目のクラスは0から10まで、2つ目のクラスは10から100までとなります）。</p></li>
<li><p>自然分類（Jenks）：各クラス内の分散を最小化し、クラス間の分散を最大化するように分類します。</p></li>
<li><p>丸め間隔（Pretty）：xの値の範囲をカバーする、約n+1 個の等間隔のちょうどよい値の列を計算します。値は10のべき乗の1、2または5倍になるように選択されます（R言語のpretty <a class="reference external" href="https://www.rdocumentation.org/packages/base/topics/pretty">https://www.rdocumentation.org/packages/base/topics/pretty</a> に基づいています）。</p></li>
<li><p>標準偏差：クラスは値の標準偏差に応じて形成されます。</p></li>
</ul>
<p><span class="guilabel">シンボロジ</span> タブの中央にあるリストボックスには、クラスと値の範囲、凡例、レンダリングされるシンボルがリストされます。</p>
<p><strong>分類</strong> ボタンをクリックすると、選択したモードを使用してクラスが作成されます。各クラスは、クラス名の左にあるチェックボックスのチェックを外すことで無効にできます。</p>
<p>シンボルや値、クラスの凡例を変更するには、変更したい項目をダブルクリックします。</p>
<p>選択したアイテムを右クリックすると、コンテキストメニューが表示されます：</p>
<ul class="simple">
<li><p><span class="guilabel">シンボルをコピーする</span> と <span class="guilabel">シンボルを貼り付ける</span> は、アイテムの表現を他のクラスに適用するのに便利な方法です。</p></li>
<li><p>選択したシンボルの <span class="guilabel">色を変更...</span></p></li>
<li><p>選択したシンボルの <span class="guilabel">不透明度を変更...</span></p></li>
<li><p>選択したシンボルの <span class="guilabel">出力単位を変更...</span></p></li>
<li><p>選択したラインシンボルの <span class="guilabel">幅を変更する...</span></p></li>
<li><p>選択したポイントシンボルの <span class="guilabel">サイズを変更...</span></p></li>
<li><p>選択したポイントシンボルの <span class="guilabel">角度を変更...</span></p></li>
</ul>
<p><a class="reference internal" href="#figure-graduated-symbology"><span class="std std-numref">図 16.5</span></a> の例は、QGISサンプルデータセットの major_rivers レイヤに対する連続値レンダリングダイアログを示しています。</p>
<figure class="align-center" id="id23">
<span id="figure-graduated-symbology"></span><img alt="../../../_images/graduatedsymbol_ng_line.png" src="../../../_images/graduatedsymbol_ng_line.png" />
<figcaption>
<p><span class="caption-number">図 16.5 </span><span class="caption-text">連続値シンボルのオプション</span><a class="headerlink" href="#id23" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>作成したルールは <span class="guilabel">レイヤ</span> パネルのツリー階層にも表示されます。マップの凡例でエントリをダブルクリックすると、適用されたシンボルを編集できます。右クリックすると <a class="reference internal" href="../introduction/general_tools.html#editing-style-layer"><span class="std std-ref">さらにオプション</span></a> が表示されます。</p>
</section>
<section id="proportional-symbol-and-multivariate-analysis">
<span id="proportional-symbols"></span><span id="index-6"></span><h4><a class="toc-backref" href="#id97" role="doc-backlink">比例シンボルと多変量解析</a><a class="headerlink" href="#proportional-symbol-and-multivariate-analysis" title="Link to this heading"></a></h4>
<p>比例シンボルや多変量解析は、シンボロジのレンダリングドロップダウンリストから利用可能なレンダリングタイプではありません。しかし、上に挙げた任意のレンダリングオプションと <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">データによって定義された上書き</span></a> オプションを組み合わせることで、QGISにおいてポイントデータやラインデータをそのような表現で表示することができます。</p>
<p><strong>比例シンボルを作成する</strong></p>
<p>比例シンボルレンダリングを適用するには、以下の手順で操作します：</p>
<ol class="arabic">
<li><p>まずは、レイヤに <a class="reference internal" href="#single-symbol-renderer"><span class="std std-ref">単一シンボルレンダラー</span></a> を適用します。</p></li>
<li><p>次に、地物に適用するシンボルを設定します。</p></li>
<li><p>シンボルツリーの上位のアイテムを選択し、 <span class="guilabel">大きさ</span> （ポイントレイヤ）や <span class="guilabel">幅</span> （ラインレイヤ）オプションの隣にある <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>データによって定義された上書き</sup> <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">ボタン</span></a> を使用します。</p></li>
<li><p>フィールドを選択するか式を入力すると、各地物についてQGISは出力値をプロパティに適用し、マップキャンバスのシンボルを比例したサイズに変更します。</p>
<p>必要ならば、 <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> メニューの <span class="guilabel">アシスタント...</span> オプションを使用することで、シンボルサイズに何らかの変換（指数関数的、フラナリー...）を適用し、サイズの再スケーリングができます（詳細は <a class="reference internal" href="../introduction/general_tools.html#data-defined-assistant"><span class="std std-ref">データによる定義のアシスタントインターフェースを使用する</span></a> 参照）。</p>
</li>
</ol>
<p><a class="reference internal" href="../introduction/general_tools.html#label-legend"><span class="std std-ref">レイヤパネル</span></a> 内や <a class="reference internal" href="../print_composer/composer_items/composer_legend.html#layout-legend-item"><span class="std std-ref">印刷レイアウトの凡例アイテム</span></a> で比例シンボルを表示するかどうかを選択することができます。<span class="guilabel">シンボロジ</span> タブのメインダイアログの下部にある <span class="guilabel">詳細設定</span> ドロップダウンリストを開き、 <strong>データによる凡例サイズの定義...</strong> を選択して、凡例アイテムの設定ができます（詳細は <a class="reference internal" href="#data-defined-size-legend"><span class="std std-ref">データ定義による凡例サイズ</span></a> を参照）。</p>
<p><strong>多変量解析を作成する</strong></p>
<p>多変量解析レンダリングを使用すると、複数の変数間の関係を評価するのに役立ちます。例えば、ある変数をカラーランプで表して、別の変数をサイズで表現することができます。</p>
<p>QGISで多変量解析を作成する最も簡単な方法は、</p>
<ol class="arabic simple">
<li><p>はじめに、カテゴリ値または連続値によるレンダリングをレイヤに適用します。すべてのクラスが同じタイプのシンボルです。</p></li>
<li><p>次に、クラスに比例シンボロジを適用します：</p>
<ol class="arabic simple">
<li><p>分類フレームの上にある <span class="guilabel">変更</span> ボタンをクリックすると、 <span class="xref std std-ref">シンボルセレクタ</span> ダイアログが開きます。</p></li>
<li><p>上で見たのと同様、 <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">データによって定義された上書き</span></a> ウィジェットを使用して、シンボルレイヤの大きさや幅を再スケーリングします。</p></li>
</ol>
</li>
</ol>
<p>比例シンボルと同様に、カテゴリ値あるいは連続値クラスシンボルの上には、 <a class="reference internal" href="#data-defined-size-legend"><span class="std std-ref">データによる凡例サイズの定義</span></a> 機能を使用してスケーリングされたシンボロジをレイヤツリーに追加することができます。また、これらの表現は印刷レイアウトの凡例アイテムでも利用可能です。</p>
<figure class="align-center" id="id24">
<span id="figure-symbology-multivariate"></span><img alt="../../../_images/multivariate_example.png" src="../../../_images/multivariate_example.png" />
<figcaption>
<p><span class="caption-number">図 16.6 </span><span class="caption-text">凡例サイズを変化させた多変量解析の例</span><a class="headerlink" href="#id24" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="rule-based-renderer">
<span id="rule-based-rendering"></span><span id="index-7"></span><h4><a class="toc-backref" href="#id98" role="doc-backlink">ルールベースレンダラー</a><a class="headerlink" href="#rule-based-renderer" title="Link to this heading"></a></h4>
<p>ルールはQGISの <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">式</span></a> で、属性やプロパティによって地物を区別し、特定のレンダリング設定をその地物へ適用するために使用されます。ルールは入れ子にすることが可能で、地物は入れ子になった上位のレベルすべてに属している場合に、あるクラスに属します。</p>
<p><a class="reference internal" href="../../../_images/rendererRuleBasedSymbol.png"><img alt="ruleBasedSymbol" src="../../../_images/rendererRuleBasedSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">ルールによる定義（rule-based）</span> レンダラーは、選択した地物を細分化されたクラスに割り当てることを反映する特性を持ったシンボルを使用してレイヤの地物すべてをレンダリングするために設計されています。</p>
<p>ルールを作成するには：</p>
<ol class="arabic simple">
<li><p>既存の行をダブルクリックしてアクティブにするか（デフォルトでは、レンダリングモードが有効な場合、QGISはルールなしのシンボルを追加します）、または <a class="reference internal" href="../../../_images/symbologyEdit.png"><img alt="symbologyEdit" src="../../../_images/symbologyEdit.png" style="width: 1.5em;" /></a> <sup>現在のルールを編集</sup> ボタンや <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>ルールを追加</sup> ボタンをクリックします。</p></li>
<li><p>開いた <span class="guilabel">ルールの編集</span> ダイアログにおいて、各ルールを識別しやすいようにラベルを定義することができます。このラベルは <span class="guilabel">レイヤパネル</span> 内や印刷レイアウトの凡例にもに表示されます。</p></li>
<li><p><a class="reference internal" href="../../../_images/radiobuttonon.png"><img alt="radioButtonOn" src="../../../_images/radiobuttonon.png" style="width: 1.5em;" /></a> <span class="guilabel">フィルタ</span> オプションの隣にあるテキストボックスに式を手入力するか、テキストボックスの隣にある <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> ボタンを押し、式文字列ビルダダイアログを開きます。</p></li>
<li><p>提供されている関数とレイヤ属性を使用して、検索したい地物をフィルタリングするための <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">式</span></a> を作成します。 <span class="guilabel">テスト</span> ボタンを押すと、クエリの結果が確認できます。</p></li>
<li><p>ルールの詳しい説明のため、より長いラベルを入力することができます。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">縮尺の範囲</span> オプションを使用して、ルールが適用される縮尺を設定することができます。</p></li>
<li><p>最後に、地物に <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">使用するシンボル</span></a> を設定します。</p></li>
<li><p>そして、 <span class="guilabel">OK</span> ボタンを押します。</p></li>
</ol>
<p>ルールを要約した新しい行がレイヤプロパティダイアログに追加されます。上記の手順に従いルールを作成するか、既存のルールをコピー＆ペーストして、必要なだけルールを作成できます。ルールをドラッグ＆ドロップで上に重ねることで、ルールを入れ子にし、上位のルールの地物をサブクラスで改良できます。</p>
<p id="refine-selected-rule">ルールによる定義レンダラーは、カテゴリ値や連続値によるレンダラーと組み合わせることができます。ルールを選択し、 <span class="guilabel">選択したルールの絞り込み</span> ドロップダウンメニューを使用して、その機能をサブクラスでまとめることができます。絞り込みされたクラスはルールのサブアイテムのようにツリー階層で表示され、その親と同様に、各クラスでシンボロジやルールを設定できます。ルールの自動的な再設定は、以下の要素に基づいて行われます：</p>
<ul class="simple">
<li><p><strong>スケール</strong> ：指定された縮尺のリストに基づいて、このオプションはさまざまなユーザー定義の縮尺範囲を適用する一連のクラスを作成します。スケールに基づいた新たな各クラスは、独自のシンボロジや式の定義を持つことができます。これは例えば、さまざまな縮尺で同じ地物を異なるシンボルで表示したり、縮尺に応じて一部の地物だけを表示するのに便利な方法です（例えば、ローカル空港は大きなスケールで、国際空港は小さなスケールで表示するなど）。</p></li>
<li><p><strong>カテゴリ</strong> ：選択したルールに合致する地物に <a class="reference internal" href="#categorized-renderer"><span class="std std-ref">カテゴリ値レンダラー</span></a> を適用します。</p></li>
<li><p><strong>範囲</strong> ：選択したルールに合致する地物に <a class="reference internal" href="#graduated-renderer"><span class="std std-ref">連続値レンダラー</span></a> を適用します。</p></li>
</ul>
<p>絞り込まれたクラスはルールのサブアイテムのようにツリー階層で表示され、上と同様に各クラスにシンボロジを設定できます。入れ子になったルールのシンボルは上に積み重なっていくため、その選択には注意が必要です。 <span class="guilabel">ルールの編集</span> ダイアログで <a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">シンボル</span> のチェックを外すことで、特定のシンボルをスタック内でレンダリングしないようにできます。</p>
<p><span class="guilabel">ルールの編集</span> ダイアログでは、全てのルールは記述せず、 <a class="reference internal" href="../../../_images/radiobuttonoff.png"><img alt="radioButtonOff" src="../../../_images/radiobuttonoff.png" style="width: 1.5em;" /></a> <span class="guilabel">もしくは</span> オプションを使用して、同じレベルの他のどんなルールにもマッチしない地物全てをキャッチすることができます。これは、 <span class="menuselection">レイヤプロパティ ► シンボロジ ► ルールによる定義</span> ダイアログの <em>ルール</em> 列に <code class="docutils literal notranslate"><span class="pre">Else</span></code> と入力することでも実現できます。</p>
<p>選択したアイテムを右クリックすると、コンテキストメニューが表示されます：</p>
<ul class="simple">
<li><p><span class="guilabel">コピー</span> と <span class="guilabel">貼り付け</span> ：既存のアイテムをもとに新しいアイテムを作成するのに便利な方法です。</p></li>
<li><p><span class="guilabel">シンボルをコピーする</span> と <span class="guilabel">シンボルを貼り付ける</span> は、アイテムの表現を他のクラスに適用するのに便利な方法です。</p></li>
<li><p>選択したシンボルの <span class="guilabel">色を変更...</span></p></li>
<li><p>選択したシンボルの <span class="guilabel">不透明度を変更...</span></p></li>
<li><p>選択したシンボルの <span class="guilabel">出力単位を変更...</span></p></li>
<li><p>選択したラインシンボルの <span class="guilabel">幅を変更する...</span></p></li>
<li><p>選択したポイントシンボルの <span class="guilabel">サイズを変更...</span></p></li>
<li><p>選択したポイントシンボルの <span class="guilabel">角度を変更...</span></p></li>
<li><p><span class="guilabel">現在のルールを再調整する</span> サブメニューを開き、現在のルールを <strong>スケール</strong> 、 <strong>カテゴリ</strong> または <strong>範囲</strong> で絞りこむことができます。ダイアログ下部にある <a class="reference internal" href="#refine-selected-rule"><span class="std std-ref">対応したメニュー</span></a> を選択したときと同様です。</p></li>
</ul>
<p>ルールによる定義レンダラーダイアログの行のチェックを外すと、特定のルールやその入れ子になったルールに当てはまる地物がマップキャンバスから隠されます。</p>
<p>作成したルールはマップの凡例においてもツリー階層で表示されます。マップの凡例でエントリをダブルクリックすると、適用されたシンボルを編集できます。右クリックすると <a class="reference internal" href="../introduction/general_tools.html#editing-style-layer"><span class="std std-ref">さらにオプション</span></a> が表示されます。</p>
<p><a class="reference internal" href="#figure-rule-based-symbology"><span class="std std-numref">図 16.7</span></a> の例は、QGISサンプルデータセットの河川レイヤに対するルールによるレンダリングダイアログを示しています。</p>
<figure class="align-center" id="id25">
<span id="figure-rule-based-symbology"></span><img alt="../../../_images/rulesymbol_ng_line.png" src="../../../_images/rulesymbol_ng_line.png" />
<figcaption>
<p><span class="caption-number">図 16.7 </span><span class="caption-text">ルールによる定義シンボルのオプション</span><a class="headerlink" href="#id25" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="point-displacement-renderer">
<span id="point-displacement"></span><span id="index-8"></span><h4><a class="toc-backref" href="#id99" role="doc-backlink">点の競合回避レンダラ</a><a class="headerlink" href="#point-displacement-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/rendererPointDisplacementSymbol.png"><img alt="pointDisplacementSymbol" src="../../../_images/rendererPointDisplacementSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">点の競合回避</span> レンダラは、互いに与えられた距離の許容範囲内にあるポイント地物を取り、異なる配置方法に従って、それらのシンボルをそれらの重心の周りに配置します。これは、点レイヤの地物が同じ場所にあっても（例 建物内の施設）、すべての地物を視覚化する便利な方法です。</p>
<p>点の競合回避レンダラを設定するには:</p>
<ol class="arabic simple">
<li><p><span class="guilabel">中央シンボル</span> を設定します: 中心にある仮想的な点がどのように表示されるか</p></li>
<li><p><span class="guilabel">レンダラ</span> の種類を選びます: レイヤ内の地物をどのように分類するか（単一、カテゴリ値、ルール...）</p></li>
<li><p><span class="guilabel">レンダラの設定...</span> ボタンを押して選択したレンダラに応じた地物のシンボロジを設定します</p></li>
<li><p>近い地物が重なっているとみなされ、同じ仮想的な点上で競合回避する <span class="guilabel">距離</span> 許容範囲を設定します。共通のシンボル単位をサポートします。</p></li>
<li><p><span class="guilabel">競合する点の配置方法</span> を設定します:</p>
<ul class="simple">
<li><p><strong>リング状に配置</strong> ：すべての地物を一つの円周上に配置します。円周の半径は表示する地物の数に依存します。</p></li>
<li><p><strong>同心円状に配置</strong> ：地物を表示するために同心円の集合を使用します。</p></li>
<li><p><strong>グリッド</strong> ：規則的な格子を生成し、格子の交点にポイントシンボルを配置します。</p></li>
</ul>
</li>
<li><p>競合回避シンボルは <span class="guilabel">置き換え線</span> 上に配置されます。置き換え線の最小間隔はポイントシンボルレンダラに依存しますが、 <span class="guilabel">ストローク幅</span>、 <span class="guilabel">ストローク色</span>、 <span class="guilabel">サイズ調整</span> などの設定をカスタマイズすることができます（例えば、レンダリングされたポイントの間隔を広げるなど）。</p></li>
<li><p><span class="guilabel">ラベル</span> グループオプションを使用して、ポイントのラベル付けを行います: ラベルは競合回避シンボルの近くに配置され、地物の実際の位置には配置されません。</p>
<ol class="arabic simple">
<li><p><span class="guilabel">ラベル属性</span>: ラベル付けに使うレイヤのフィールドを選択します。</p></li>
<li><p><span class="guilabel">ラベルフォント</span> プロパティと大きさを設定します</p></li>
<li><p><span class="guilabel">ラベル色</span> を選びます</p></li>
<li><p><span class="guilabel">ラベルの距離係数</span> を設定します: 各ポイント地物のラベルを、シンボルの対角サイズに比例して、シンボルの中心からオフセットします。</p></li>
<li><p><a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">縮尺依存ラベルを使用する</span> をオンにすると、指定した <span class="guilabel">地図の最小縮尺</span> より大きな縮尺のときだけラベルを表示します。</p></li>
</ol>
</li>
</ol>
<figure class="align-center" id="id26">
<span id="figure-displacement-symbology"></span><img alt="../../../_images/poi_displacement.png" src="../../../_images/poi_displacement.png" />
<figcaption>
<p><span class="caption-number">図 16.8 </span><span class="caption-text">点の競合回避ダイアログ</span><a class="headerlink" href="#id26" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>点の競合回避レンダラーは、地物のジオメトリは変更しません。つまり、ポイントはその位置から移動してはいません。ポイントは元の場所に位置しています。変更はレンダリング目的のための視覚的なものに過ぎません。ずらした地物を作成したい場合には、代わりにプロセシングアルゴリズムの <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgispointsdisplacement"><span class="std std-ref">近隣点を散らす</span></a> を使用してください。</p>
</div>
</section>
<section id="point-cluster-renderer">
<span id="point-cluster"></span><span id="index-9"></span><h4><a class="toc-backref" href="#id100" role="doc-backlink">点のクラスタレンダラー</a><a class="headerlink" href="#point-cluster-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/rendererPointDisplacementSymbol.png"><img alt="pointDisplacementSymbol" src="../../../_images/rendererPointDisplacementSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">点の競合回避</span> レンダラーが最も近いか重ね合うポイント地物の配置を吹き飛ばすのとは異なり、<a class="reference internal" href="../../../_images/rendererPointClusterSymbol.png"><img alt="pointClusterSymbol" src="../../../_images/rendererPointClusterSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">点のクラスタ</span> レンダラーは近接した点を1つのレンダリングされたマーカーシンボルにグループ化します。互いに指定された距離内にある点は1つのシンボルに統合されます。点の集約は、単に検索距離内の最初のグループを割り当てるのではなく、最も近いグループが形成されるように行われます。</p>
<p>メインダイアログでは、以下の設定ができます。</p>
<ol class="arabic simple">
<li><p><span class="guilabel">クラスタシンボル</span> に点のクラスタを表すシンボルを設定する; デフォルトのレンダリングでは、フォントマーカーシンボルレイヤの <code class="docutils literal notranslate"><span class="pre">&#64;cluster_size</span></code> <a class="reference internal" href="../introduction/general_tools.html#general-tools-variables"><span class="std std-ref">variable</span></a> により集約された地物の数が表示されます。</p></li>
<li><p><span class="guilabel">レンダラ</span> の種類、つまりレイヤ内の地物をどのように分類したいか（単一、カテゴリ値、ルール...）を選びます</p></li>
<li><p><span class="guilabel">レンダラの設定</span> ボタンを押すと、地物のシンボルを通常通り設定することができます。このシンボルはクラスタ化されていない地物にのみ表示され、それ以外の地物には <span class="guilabel">クラスタシンボル</span> が適用されることに注意してください。また、クラスタ内のすべての点地物が同じレンダリングクラスに属し、同じ色が適用される場合、その色はクラスタの <code class="docutils literal notranslate"><span class="pre">&#64;cluster_color</span></code> 変数を表します。</p></li>
<li><p>地物をクラスタ化する際に考慮する <span class="guilabel">距離</span> の最大値を指定します。共通のシンボル単位をサポートします。</p></li>
</ol>
<figure class="align-center" id="id27">
<span id="figure-cluster-symbology"></span><img alt="../../../_images/cluster_symbol.png" src="../../../_images/cluster_symbol.png" />
<figcaption>
<p><span class="caption-number">図 16.9 </span><span class="caption-text">点のクラスタダイアログ</span><a class="headerlink" href="#id27" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>点のクラスタレンダラーは、地物のジオメトリは変更しません。つまり、ポイントはその位置から移動してはいません。ポイントは元の場所に位置しています。変更はレンダリング目的のための視覚的なものに過ぎません。クラスターに基づく地物を作成したい場合には、代わりにプロセシングアルゴリズムの <a class="reference internal" href="../processing_algs/qgis/vectoranalysis.html#qgiskmeansclustering"><span class="std std-ref">K平均クラスタリング</span></a> または <a class="reference internal" href="../processing_algs/qgis/vectoranalysis.html#qgisdbscanclustering"><span class="std std-ref">DBSCANクラスタリング</span></a> を使用してください。</p>
</div>
</section>
<section id="merged-features-renderer">
<span id="merged-renderer"></span><span id="index-10"></span><h4><a class="toc-backref" href="#id101" role="doc-backlink">結合済み地物レンダラー</a><a class="headerlink" href="#merged-features-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/rendererMergedFeatures.png"><img alt="mergedFeatures" src="../../../_images/rendererMergedFeatures.png" style="width: 1.5em;" /></a> <span class="guilabel">結合済み地物</span> レンダラーは、レンダリング前にポリゴン地物やライン地物を単一のオブジェクトに “融合させる” ことができます。これにより、複雑なシンボルや重なった地物が単一の連続的な地図シンボルとして表現されます。</p>
</section>
<section id="inverted-polygon-renderer">
<span id="index-11"></span><span id="id5"></span><h4><a class="toc-backref" href="#id102" role="doc-backlink">反転ポリゴンレンダラー</a><a class="headerlink" href="#inverted-polygon-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/rendererInvertedSymbol.png"><img alt="invertedSymbol" src="../../../_images/rendererInvertedSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">反転ポリゴン</span> レンダラーでは、レイヤのポリゴンの外側を塗りつぶすシンボルを定義できます。上記と同様、サブレンダラー、すなわち単一シンボル、連続値、カテゴリ値、ルールに基づく、または2.5Dレンダラーを選択できます。</p>
<figure class="align-center" id="id28">
<span id="figure-inverted-symbology"></span><img alt="../../../_images/inverted_polygon_symbol.png" src="../../../_images/inverted_polygon_symbol.png" />
<figcaption>
<p><span class="caption-number">図 16.10 </span><span class="caption-text">反転ポリゴンダイアログ</span><a class="headerlink" href="#id28" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="heatmap-renderer">
<span id="heatmap"></span><span id="index-12"></span><h4><a class="toc-backref" href="#id103" role="doc-backlink">ヒートマップレンダラー</a><a class="headerlink" href="#heatmap-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/rendererHeatmapSymbol.png"><img alt="heatmapSymbol" src="../../../_images/rendererHeatmapSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">ヒートマップ</span> レンダラーを使用すると、（マルチ）ポイントレイヤ用のライブダイナミックヒートマップを作成できます。ヒートマップ半径をミリメートル、ポイント、ピクセル、地図単位、インチで指定したり、ヒートマップのスタイルのカラーランプの選択・編集をしたり、スライダーを使用してレンダリングの速度と品質のトレードオフを選択したりすることができます。また、最大値の上限を定義したり、フィールドや式を使用してポイントに重みづけを与えることもできます。地物を追加したり削除したりすると、ヒートマップレンダラは自動的にヒートマップスタイルを更新します。</p>
<figure class="align-center" id="id29">
<span id="figure-heatmap-symbology"></span><img alt="../../../_images/heatmap_symbol.png" src="../../../_images/heatmap_symbol.png" />
<figcaption>
<p><span class="caption-number">図 16.11 </span><span class="caption-text">ヒートマップダイアログ</span><a class="headerlink" href="#id29" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="d-renderer">
<span id="d-rendering"></span><span id="index-13"></span><h4><a class="toc-backref" href="#id104" role="doc-backlink">2.5Dレンダラー</a><a class="headerlink" href="#d-renderer" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../../../_images/renderer25dSymbol.png"><img alt="25dSymbol" src="../../../_images/renderer25dSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">2.5D</span> レンダラーを使用すると、レイヤの地物に対して2.5次元的な効果を作成することができます。まずは、 <span class="guilabel">高さ</span> の値を（マップ単位で）選択します。これには、固定値、レイヤのフィールドのいずれか、または式を使用することができます。また、視点位置を再現するために <span class="guilabel">角度</span> を（度単位）を選択する必要があります（0° は西を意味し、反時計回り方向に数字が大きくなります）。詳細設定オプションで、 <span class="guilabel">屋根の色</span> と <span class="guilabel">壁の色</span> を設定します。地物の壁に太陽放射をシミュレートしたい場合には、 <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">壁の向きに応じた陰影表現</span> オプションにチェックを入れてください。また、影の <span class="guilabel">色</span> と <span class="guilabel">大きさ</span> （マップ単位）を設定することで、影をシミュレートすることもできます。</p>
<figure class="align-center" id="id30">
<span id="figure-25d-symbology"></span><img alt="../../../_images/2_5dsymbol.png" src="../../../_images/2_5dsymbol.png" />
<figcaption>
<p><span class="caption-number">図 16.12 </span><span class="caption-text">2.5Dダイアログ</span><a class="headerlink" href="#id30" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>2.5D効果を他のレンダラーと併用する</strong></p>
<p>2.5Dレンダラーの基本的なスタイルの設定が完了したら、これを別のレンダラー（単一、カテゴリ値、連続値）に変換できます。2.5D効果は保持され、他のすべてのレンダラー固有のオプションを使用して調整することができます（これにより、例えばカテゴリシンボルに素敵な2.5次元表現を加えたり、2.5Dシンボルにさまざまな追加のスタイリングを加えられます）。影や「建物」自体が他の近くの地物と干渉しないようにするためには、描画順序を有効にする必要がある場合があります（ <span class="menuselection">詳細設定 ► 描画順序...</span> ）。2.5Dの高さと角度の値はレイヤ内の変数に保存されているので、後からレイヤのプロパティダイアログボックスの変数タブで編集することができます。</p>
</div>
</section>
<section id="embedded-renderer">
<span id="index-14"></span><span id="id6"></span><h4><a class="toc-backref" href="#id105" role="doc-backlink">埋め込みシンボルレンダラー</a><a class="headerlink" href="#embedded-renderer" title="Link to this heading"></a></h4>
<p><span class="guilabel">埋め込みシンボル</span> レンダラーは、データソースが提供する「ネイティブな」シンボルを表示します。これは主に、既定のシンボロジを持つ <code class="file docutils literal notranslate"><span class="pre">KML</span></code> や <code class="file docutils literal notranslate"><span class="pre">TAB</span></code> データセットで利用します。</p>
</section>
</section>
<section id="layer-rendering">
<span id="index-15"></span><span id="id7"></span><h3><a class="toc-backref" href="#id106" role="doc-backlink"><span class="section-number">16.1.3.2. </span>レイヤレンダリング</a><a class="headerlink" href="#layer-rendering" title="Link to this heading"></a></h3>
<p>シンボロジタブでは、レイヤの全ての地物に共通で作用するいくつかのオプションを設定することもできます：</p>
<ul>
<li><p><span class="guilabel">不透明度</span> <img alt="slider" src="../../../_images/slider.png" /> ：このツールを使用すると、マップキャンバスで背面にあるレイヤを見えるようにできます。スライダーを使用して、ベクタレイヤの見え方を必要に応じて変化させてください。スライダーの横にあるメニューで不透明度の割合を正確に定義することもできます。</p></li>
<li><p><span class="guilabel">レイヤ</span> や <span class="guilabel">地物</span> レベルの <span class="guilabel">混合モード</span>  ：このツールを使用すると、これまではグラフィックソフトでしか使えなかったような、特別なレンダリング効果が得られます。上下のレイヤのピクセルは、 <a class="reference internal" href="../introduction/general_tools.html#blend-modes"><span class="std std-ref">混合モード</span></a> で説明されている設定で混合されます。</p></li>
<li><p><span class="guilabel">描画エフェクト</span> ボタンを使用して、レイヤの地物すべてに <a class="reference internal" href="#draw-effects"><span class="std std-ref">描画効果</span></a> を適用します。</p></li>
<li><p><span class="guilabel">地物描画順序の制御</span> では、地物属性を使用して、地物のレンダリングの <span class="target" id="index-45"></span>Z-順序 を定義できます。チェックボックスを有効にし、横にある <a class="reference internal" href="../../../_images/sort.png"><img alt="sort" src="../../../_images/sort.png" style="width: 1.5em;" /></a> ボタンを押してください。 <span class="guilabel">順序を定義する</span> ダイアログが開き、以下の手順で描画順序の定義ができます：</p>
<ol class="arabic simple">
<li><p>フィールドを選択するか、レイヤの地物に適用する式を作成します。</p></li>
<li><p>取得した地物をどの順序で並べるかを設定します。つまり、 <strong>昇順</strong> を選択した場合には、低い値の地物が高い値の地物よりも下にレンダリングされます。</p></li>
<li><p>地物がNULL値を返す時のレンダリングについて定義します： <strong>NULLは最初に</strong> （一番下に）または <strong>NULLは最後に</strong> （一番上に）</p></li>
<li><p>使用したいルールの数だけ上記の手順を繰り返します。</p></li>
</ol>
<p>最初のルールはレイヤ内の全ての地物に適用され、戻り値に応じてz-順序が付けられます。それから、同じ値（NULL値も含む）を持った各グループ内の地物について、同じz-順序を持っていることから、次のルールを適用してこれらを並べ替えます。以下、同様に続きます。</p>
</li>
</ul>
<figure class="align-center" id="id31">
<span id="figure-layer-rendering"></span><img alt="../../../_images/layer_rendering_options.png" src="../../../_images/layer_rendering_options.png" />
<figcaption>
<p><span class="caption-number">図 16.13 </span><span class="caption-text">レイヤレンダリングオプション</span><a class="headerlink" href="#id31" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="other-settings">
<h3><a class="toc-backref" href="#id107" role="doc-backlink"><span class="section-number">16.1.3.3. </span>その他の設定</a><a class="headerlink" href="#other-settings" title="Link to this heading"></a></h3>
<section id="symbol-levels">
<span id="symbols-levels"></span><span id="index-16"></span><h4><a class="toc-backref" href="#id108" role="doc-backlink">シンボルレベル</a><a class="headerlink" href="#symbol-levels" title="Link to this heading"></a></h4>
<p>重なったシンボルレイヤを許可するレンダラー（ヒートマップのみなし）のために、各シンボルレベルのレンダリング順序を制御するためのオプションがあります。</p>
<p>ほとんどのレンダラーについて、保存されたシンボルリストの下の <span class="guilabel">詳細設定</span> ボタンをクリックして <span class="guilabel">描画順序</span> を選択することで、シンボルレベルのオプションにアクセスすることができます。 <a class="reference internal" href="#rule-based-rendering"><span class="std std-ref">ルールベースレンダラー</span></a> では、このオプションは <span class="guilabel">描画順序...</span> ボタンから直接利用可能である一方で、 <a class="reference internal" href="#point-displacement"><span class="std std-ref">点の競合回避レンダラ</span></a> レンダラーではこのボタンは <span class="guilabel">レンダラの設定</span> ダイアログ内にあります。</p>
<p>シンボルレベルを有効にするには、 <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">描画順序を有効にする</span> にチェックを入れます。各行には結合されたシンボルの小さなサンプルとそのラベル、個々のシンボルレイヤが表示され、個々のシンボルレイヤは横に番号が付いた列に分割されています。数字はシンボルレイヤが描画されるレンダリング順序のレベルを表します。低い値のレベルが最初に描画されて下に置かれ、高い値のレベルは最後に他のシンボルレイヤの上に描かれます。</p>
<figure class="align-center" id="id32">
<span id="figure-symbol-levels"></span><img alt="../../../_images/symbol_levels.png" src="../../../_images/symbol_levels.png" />
<figcaption>
<p><span class="caption-number">図 16.14 </span><span class="caption-text">描画順序ダイアログ</span><a class="headerlink" href="#id32" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>描画順序を無効にしている場合には、完全なシンボルがそれぞれの地物の順序に従って描画されます。重なるシンボルは、他の下にあるシンボルを単に見えにくくします。加えて、同種のシンボルがお互いに「結合する」ことはありません。</p>
</div>
<figure class="align-center" id="id33">
<span id="figure-symbol-levels-example"></span><img alt="../../../_images/symbol_levels_examples.png" src="../../../_images/symbol_levels_examples.png" />
<figcaption>
<p><span class="caption-number">図 16.15 </span><span class="caption-text">シンボルレベルの有効（A）と無効（B）の差</span><a class="headerlink" href="#id33" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="data-defined-size-legend">
<span id="id8"></span><h4><a class="toc-backref" href="#id109" role="doc-backlink">データ定義による凡例サイズ</a><a class="headerlink" href="#data-defined-size-legend" title="Link to this heading"></a></h4>
<p>レイヤが <a class="reference internal" href="#proportional-symbols"><span class="std std-ref">比例シンボルや多変量解析レンダリング</span></a> によってレンダリングされている場合や、レイヤに <a class="reference internal" href="#diagram-size"><span class="std std-ref">可変サイズダイアグラム</span></a> が適用されている場合には、 <a class="reference internal" href="../introduction/general_tools.html#label-legend"><span class="std std-ref">レイヤパネル</span></a> や <a class="reference internal" href="../print_composer/composer_items/composer_legend.html#layout-legend-item"><span class="std std-ref">印刷レイアウトの凡例</span></a> のどちらにもスケーリングされたシンボルを表示させることができます。</p>
<p><span class="guilabel">データによる凡例サイズの定義</span> ダイアログを有効にしてシンボロジをレンダリングするには、保存されたシンボルリストの下にある <span class="guilabel">詳細設定</span> ボタンの同名のオプションを選択します。ダイアグラムについては、このオプションは <span class="guilabel">凡例</span> タブにあります。このダイアログには、以下のオプションがあります：</p>
<ul class="simple">
<li><p>凡例タイプの選択： <a class="reference internal" href="../../../_images/radiobuttonon.png"><img alt="radioButtonOn" src="../../../_images/radiobuttonon.png" style="width: 1.5em;" /></a> <span class="guilabel">凡例が有効になっていません</span> 、 <a class="reference internal" href="../../../_images/radiobuttonoff.png"><img alt="radioButtonOff" src="../../../_images/radiobuttonoff.png" style="width: 1.5em;" /></a> <span class="guilabel">リスト型凡例</span> 、 <a class="reference internal" href="../../../_images/radiobuttonoff.png"><img alt="radioButtonOff" src="../../../_images/radiobuttonoff.png" style="width: 1.5em;" /></a> <span class="guilabel">重ね合わせ凡例</span> から選択します。重ね合わせ凡例オプションについては、凡例アイテムの整列を <strong>下</strong> か <strong>中央</strong> で選択できます。</p></li>
<li><p>凡例表現で使用する <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">シンボル</span></a> のプレビュー</p></li>
<li><p>凡例へのタイトルの挿入</p></li>
<li><p>使用するクラスのサイズの再設定：デフォルトでは、QGISは（自然なプリティブレークに基づく）5つのクラスの凡例を提供しますが、 <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">サイズ項目の指定</span> オプションを使用して独自の分類を適用することができます。 <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> と <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="symbologyRemove" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> ボタンを使用して、カスタムクラスの値とラベルを設定します。</p></li>
<li><p>重ね合わせ凡例の場合には、以下を設定できます：</p>
<ul>
<li><p><span class="guilabel">整列方法</span> ：下または中央</p></li>
<li><p><span class="guilabel">ラインシンボル</span> の設定：シンボルから対応する凡例テキストへ引かれる水平線</p></li>
</ul>
</li>
</ul>
<p>凡例のプレビューがダイアログの右パネルに表示され、パラメータの設定に応じて更新されます。</p>
<figure class="align-center" id="id34">
<span id="figure-size-legend"></span><img alt="../../../_images/data_defined_size_legend.png" src="../../../_images/data_defined_size_legend.png" />
<figcaption>
<p><span class="caption-number">図 16.16 </span><span class="caption-text">データによる凡例サイズの設定</span><a class="headerlink" href="#id34" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>現在のところ、レイヤのシンボロジに対するデータによる凡例サイズの設定は、ポイントレイヤで単一定義、カテゴリ値、または連続値シンボロジを使用する場合にのみ適用できます。</p>
</div>
</section>
<section id="animation-settings">
<span id="index-17"></span><span id="id9"></span><h4><a class="toc-backref" href="#id110" role="doc-backlink">アニメーション設定</a><a class="headerlink" href="#animation-settings" title="Link to this heading"></a></h4>
<p>シンボルを <a class="reference internal" href="../style_library/symbol_selector.html#animated-marker"><span class="std std-ref">アニメーションシンボル</span></a> にするには、 <span class="guilabel">アニメーション設定</span> パネルを利用します。このパネルではシンボルのアニメーションを有効にし、シンボルを再描画するフレームレートを設定することができます。</p>
<ol class="arabic simple">
<li><p>まず、最上位のシンボルレベルに行き、ダイアログの右下にある <span class="guilabel">詳細設定</span> メニューを選択します</p></li>
<li><p><span class="guilabel">アニメーション設定</span> オプションを探します</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">アニメーション化</span> をチェックしてシンボルのアニメーションを有効にします</p></li>
<li><p><span class="guilabel">フレームレート</span>、つまりアニメーションの再生速度を設定します</p></li>
<li><p>これでサブシンボルのプロパティをアニメーション化するために、<code class="docutils literal notranslate"><span class="pre">&#64;symbol_frame</span></code> 変数をそのデータ定義プロパティで使えるようになります。</p></li>
</ol>
<p>例えば、シンボルの角度を <code class="docutils literal notranslate"><span class="pre">&#64;symbol_frame</span> <span class="pre">%</span> <span class="pre">360</span></code> というデータ定義された式に設定すると、そのシンボルは時間と共に回転し、回転速度はシンボルのフレームレートによって決まります:</p>
<blockquote>
<div><figure class="align-center" id="id35">
<a class="reference internal image-reference" href="../../../_images/animated_symbol.gif"><img alt="../../../_images/animated_symbol.gif" src="../../../_images/animated_symbol.gif" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 16.17 </span><span class="caption-text">シンボルの角度をデータ定義の式に設定する</span><a class="headerlink" href="#id35" title="Link to this image"></a></p>
</figcaption>
</figure>
</div></blockquote>
</section>
<section id="draw-effects">
<span id="index-18"></span><span id="id10"></span><h4><a class="toc-backref" href="#id111" role="doc-backlink">描画エフェクト</a><a class="headerlink" href="#draw-effects" title="Link to this heading"></a></h4>
<p>レイヤのレンダリングを改善し、地図の最終レンダリングのために他のソフトウェアに頼ることを避ける（あるいは少なくとも減らす）ために、QGISにはもう 1 つ強力な機能があります。 それは <a class="reference internal" href="../../../_images/mIconPaintEffects.png"><img alt="paintEffects" src="../../../_images/mIconPaintEffects.png" style="width: 1.5em;" /></a> <span class="guilabel">描画エフェクト</span> オプションで、ベクタレイヤの可視化をカスタマイズするための描画効果を追加します。</p>
<p>このオプションは、 <span class="menuselection">レイヤプロパティ ► シンボロジ</span> ダイアログの <a class="reference internal" href="#layer-rendering"><span class="std std-ref">レイヤレンダリング</span></a> グループ（レイヤ全体に適用する場合）、または <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">シンボルレイヤプロパティ</span></a> （対応する地物に適用する場合）にて利用可能です。両方を組み合わせて使用することもできます。</p>
<p>描画効果は <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">描画エフェクト</span> オプションにチェックを入れ、 <a class="reference internal" href="../../../_images/mIconPaintEffects.png"><img alt="paintEffects" src="../../../_images/mIconPaintEffects.png" style="width: 1.5em;" /></a> <sup>効果をカスタマイズ</sup> ボタンをクリックすることで有効化できます。これによって <span class="guilabel">効果のプロパティ</span> ダイアログ（ <a class="reference internal" href="#figure-effects-source"><span class="std std-numref">図 16.18</span></a> 参照）が開きます。以下のエフェクトタイプとカスタムオプションが利用可能です：</p>
<ul>
<li><p><strong>ソース</strong> ：レイヤのプロパティの設定に応じて地物の元のスタイルを描画します。スタイルの <span class="guilabel">不透明度</span> や、 <a class="reference internal" href="../introduction/general_tools.html#blend-modes"><span class="std std-ref">混合モード</span></a> 、 <a class="reference internal" href="#draw-modes"><span class="std std-ref">描画モード</span></a> の調整を行えます。これらはすべてのエフェクトタイプにに共通のプロパティです。</p>
<figure class="align-center" id="id36">
<span id="figure-effects-source"></span><img alt="../../../_images/source.png" src="../../../_images/source.png" />
<figcaption>
<p><span class="caption-number">図 16.18 </span><span class="caption-text">描画エフェクト：ソースダイアログ</span><a class="headerlink" href="#id36" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>ぼかし</strong> ：ベクタレイヤにぼかし効果を追加します。変更可能なカスタムオプションには、 <span class="guilabel">ぼかしの種類</span> （ <span class="guilabel">Stack blur （高速・高dpi非対応）</span> または <span class="guilabel">Gaussian blur （高dpi対応）</span> ）と <span class="guilabel">ぼかしの強さ</span> があります。</p>
<figure class="align-center" id="id37">
<span id="figure-effects-blur"></span><img alt="../../../_images/blur.png" src="../../../_images/blur.png" />
<figcaption>
<p><span class="caption-number">図 16.19 </span><span class="caption-text">描画エフェクト：ぼかしダイアログ</span><a class="headerlink" href="#id37" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>色付け</strong> ：この効果は、単一の色相を使用したスタイルのバージョンを作成するために使用します。ベースは常にシンボルのグレースケールバージョンで、これに対し以下の設定ができます：</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/selectstring.png"><img alt="selectString" src="../../../_images/selectstring.png" style="width: 2.5em;" /></a> <span class="guilabel">グレースケール</span> は、グレースケール画像をどのように作成するかを選択するのに使用します：選択肢は、「明度を使用」、「光度を使用」、「平均を使用」、「オフ」です。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">着色</span> にチェックを入れると、別の色と混合することができ、色の強さを調整できます。</p></li>
<li><p>適用後のシンボルの <span class="guilabel">輝度</span> 、 <span class="guilabel">コントラスト</span> 、 <span class="guilabel">彩度</span> のレベルを調整できます。</p></li>
</ul>
<figure class="align-center" id="id38">
<span id="figure-effects-colorize"></span><img alt="../../../_images/colorise.png" src="../../../_images/colorise.png" />
<figcaption>
<p><span class="caption-number">図 16.20 </span><span class="caption-text">描画エフェクト：色付けダイアログ</span><a class="headerlink" href="#id38" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>ドロップシャドウ</strong> ：この効果を使用すると地物に影が追加され、奥行きが追加されたように見えます。この効果は、影が移動する方向とソースオブジェクトとの近さを決定する <span class="guilabel">オフセット</span> 角度・距離を変更することでカスタマイズできます。 <span class="menuselection">ドロップシャドウ</span> にはエフェクトの <span class="guilabel">ぼかし半径</span> と <span class="guilabel">色</span> を変更するオプションもあります。</p>
<figure class="align-center" id="id39">
<span id="figure-effects-drop-shadow"></span><img alt="../../../_images/drop_shadow.png" src="../../../_images/drop_shadow.png" />
<figcaption>
<p><span class="caption-number">図 16.21 </span><span class="caption-text">描画エフェクト：ドロップシャドウダイアログ</span><a class="headerlink" href="#id39" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>インナーシャドウ</strong> ：この効果は <span class="guilabel">ドロップシャドウ</span> 効果と似ていますが、こちらは地物の境界の内部に影効果を追加します。カスタマイズに関するオプションは <span class="guilabel">ドロップシャドウ</span> 効果のものと同様です。</p>
<figure class="align-center" id="id40">
<span id="figure-effects-inner-shadow"></span><img alt="../../../_images/inner_shadow.png" src="../../../_images/inner_shadow.png" />
<figcaption>
<p><span class="caption-number">図 16.22 </span><span class="caption-text">描画エフェクト：インナーシャドウダイアログ</span><a class="headerlink" href="#id40" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>インナーグロー</strong> ：地物内部にグロー効果を追加します。この効果は、グローの <span class="guilabel">広がり</span> （幅）や <span class="guilabel">ぼかし半径</span> を調整することでカスタマイズできます。後者は、ぼかしをかけたい地物の端からの距離を指定します。加えて、 <span class="guilabel">単一色</span> または <span class="guilabel">カラーランプ</span> を使用してグローの色をカスタマイズするオプションもあります。</p>
<figure class="align-center" id="id41">
<span id="figure-effects-inner-glow"></span><img alt="../../../_images/inner_glow.png" src="../../../_images/inner_glow.png" />
<figcaption>
<p><span class="caption-number">図 16.23 </span><span class="caption-text">描画エフェクト：インナーグローダイアログ</span><a class="headerlink" href="#id41" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>アウターグロー</strong> ：この効果は <span class="guilabel">インナーグロー</span> 効果と似ていますが、こちらは地物の境界の外部にグロー効果を追加します。カスタマイズに関するオプションは <span class="guilabel">インナーグロー</span> 効果のものと同様です。</p>
<figure class="align-center" id="id42">
<span id="figure-effects-outer-glow"></span><img alt="../../../_images/outer_glow.png" src="../../../_images/outer_glow.png" />
<figcaption>
<p><span class="caption-number">図 16.24 </span><span class="caption-text">描画エフェクト：アウターグローダイアログ</span><a class="headerlink" href="#id42" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>トランスフォーム</strong> ：シンボル形状の変形可能性を追加します。カスタマイズに利用可能な1つ目のオプションは <span class="guilabel">水平反転</span> と <span class="guilabel">垂直反転</span> で、これらは実際にシンボルを水平・垂直軸に反転したものを作成します。その他のオプションは以下のとおりです：</p>
<ul class="simple">
<li><p><span class="guilabel">変形X,Y</span> ：地物をX軸方向やY軸方向に歪めます。</p></li>
<li><p><span class="guilabel">縮尺 X,Y</span> ：X軸やY軸に沿って与えられた割合で地物を拡大または縮小します。</p></li>
<li><p><span class="guilabel">回転</span> ：地物を中心周りに回転させます。</p></li>
<li><p><span class="guilabel">移動 X,Y</span> ：与えられたX軸やY軸方向距離に基づきアイテムの位置を変更します。</p></li>
</ul>
<figure class="align-center" id="id43">
<span id="figure-effects-transform"></span><img alt="../../../_images/transform.png" src="../../../_images/transform.png" />
<figcaption>
<p><span class="caption-number">図 16.25 </span><span class="caption-text">描画エフェクト：トランスフォームダイアログ</span><a class="headerlink" href="#id43" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
</ul>
<p>複数のエフェクトタイプを同時に使用することができます。エフェクトリスト内のチェックボックスを使用して、エフェクトを有効化（無効化）できます。選択したエフェクトタイプを変更するには、 <a class="reference internal" href="../../../_images/selectstring.png"><img alt="selectString" src="../../../_images/selectstring.png" style="width: 2.5em;" /></a> <span class="guilabel">エフェクトのタイプ</span> オプションを使用します。 <a class="reference internal" href="../../../_images/mActionArrowUp.png"><img alt="arrowUp" src="../../../_images/mActionArrowUp.png" style="width: 1.5em;" /></a> <sup>上に移動</sup> と <a class="reference internal" href="../../../_images/mActionArrowDown.png"><img alt="arrowDown" src="../../../_images/mActionArrowDown.png" style="width: 1.5em;" /></a> <sup>下に移動</sup> ボタンを使用してエフェクトを並べ替えたり、 <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>新しい効果を追加</sup> や <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="symbologyRemove" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> <sup>効果を削除</sup> ボタンを使用してエフェクトを追加/削除することもできます。</p>
<p>描画エフェクトで共通のオプションがあります。 <span class="guilabel">不透明度</span> と <span class="guilabel">混合モード</span> オプションは、 <a class="reference internal" href="#layer-rendering"><span class="std std-ref">レイヤレンダリング</span></a> での説明と同様に働き、トランスフォーム効果を除く全ての描画エフェクトで使用できます。</p>
<p id="draw-modes">また、全てのエフェクトについて <a class="reference internal" href="../../../_images/selectstring.png"><img alt="selectString" src="../../../_images/selectstring.png" style="width: 2.5em;" /></a> <span class="guilabel">描画モード</span> オプションが利用可能であり、下記のいくつかのルールに従い、シンボルのレンダリングや修正を行うかどうかについて選択できます。</p>
<ul class="simple">
<li><p>エフェクトは上から下の順でレンダリングされます。</p></li>
<li><p><span class="guilabel">レンダーのみ</span> モードは、エフェクトが見えることを意味します。</p></li>
<li><p><span class="guilabel">モディファイアのみ</span> モードは、エフェクトは見えないものの、適用した変更は次のエフェクト（すぐ1つ下のエフェクト）に渡されます。</p></li>
<li><p><span class="guilabel">レンダーとモディファイア</span> モードは、エフェクトが表示され、変更は次のエフェクトに渡されます。エフェクトがエフェクトリストの最上位またはすぐ上のエフェクトがモディファイアモードでない場合には、レイヤプロパティのオリジナルのソースシンボルを使用します（「ソース」と同様です）。</p></li>
</ul>
</section>
</section>
</section>
<section id="labels-properties">
<span id="vector-labels-tab"></span><h2><a class="toc-backref" href="#id112" role="doc-backlink"><span class="section-number">16.1.4. </span>ラベルプロパティ</a><a class="headerlink" href="#labels-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labelingSingle" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <span class="guilabel">ラベル</span> プロパティは、ベクタレイヤに対するスマートなラベル付けを設定するために必要かつ適切なすべての機能を提供します。このダイアログには、 <span class="guilabel">レイヤスタイル</span> パネルや <strong>ラベルツールバー</strong> の <a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labelingSingle" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <sup>レイヤラベリングオプション</sup> ボタンからもアクセスできます。</p>
<p>最初のステップは、ラベル付けの手法をドロップダウンリストから選択することです。利用可能な手法は、以下のとおりです：</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/labelingNone.png"><img alt="labelingNone" src="../../../_images/labelingNone.png" style="width: 1.5em;" /></a> <span class="guilabel">なし</span> ：デフォルト値で、レイヤにラベルを表示しません。</p></li>
<li><p><a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labelingSingle" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <span class="guilabel">単一定義</span> ：単一の属性もしくは式を使用して、マップにラベルを表示します。</p></li>
<li><p><a class="reference internal" href="../../../_images/labelingRuleBased.png"><img alt="labelingRuleBased" src="../../../_images/labelingRuleBased.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#rule-based-labeling"><span class="std std-ref">ルールに基づく定義</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelingObstacle.png"><img alt="labelingObstacle" src="../../../_images/labelingObstacle.png" style="width: 1.5em;" /></a> <span class="guilabel">他レイヤのラベルをブロック</span> ：自分のラベルはレンダリングしませんが、レイヤが他のレイヤのラベルとの衝突を回避するように設定することができます。</p></li>
</ul>
<p><a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labelingSingle" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <span class="guilabel">単一定義</span> オプションを選択したとすると、次のステップは以下のダイアログが開きます。</p>
<figure class="align-center" id="id44">
<span id="figure-labels"></span><img alt="../../../_images/label_menu_text.png" src="../../../_images/label_menu_text.png" />
<figcaption>
<p><span class="caption-number">図 16.26 </span><span class="caption-text">レイヤのラベル設定 - 単一定義</span><a class="headerlink" href="#id44" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>ダイアログの最上部には、 <span class="guilabel">値（Value）</span> のドロップダウンリストがあります。ラベル付けに使用する属性カラムを選択することができます。デフォルトでは、 <a class="reference internal" href="#maptips"><span class="std std-ref">表示名フィールド</span></a> が使用されます。式に基づいてラベルを定義したい場合には、 <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> をクリックします。詳細は <a class="reference internal" href="#labeling-with-expressions"><span class="std std-ref">式に基づいてラベルを定義する</span></a> を参照してください。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><a class="reference internal" href="#vectorlegendmenu"><span class="std std-ref">凡例</span></a> タブでラベル凡例表示を有効にした場合、フォーマット付きのラベルが凡例内のエントリとして表示されます。</p>
</div>
<p>以下は、様々なタブの下でラベルをカスタマイズするために表示されるオプションです。</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/text.png"><img alt="text" src="../../../_images/text.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-text"><span class="std std-ref">テキスト</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelformatting.png"><img alt="labelformatting" src="../../../_images/labelformatting.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-formatting"><span class="std std-ref">フォーマット</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelbuffer.png"><img alt="labelbuffer" src="../../../_images/labelbuffer.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-buffer"><span class="std std-ref">バッファ</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelmask.png"><img alt="labelmask" src="../../../_images/labelmask.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-mask"><span class="std std-ref">マスクグリッド</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelbackground.png"><img alt="labelbackground" src="../../../_images/labelbackground.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-background"><span class="std std-ref">背景</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelshadow.png"><img alt="labelshadow" src="../../../_images/labelshadow.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-shadow"><span class="std std-ref">影</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelcallout.png"><img alt="labelcallout" src="../../../_images/labelcallout.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-callouts"><span class="std std-ref">引出し線付きラベル</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelplacement.png"><img alt="labelplacement" src="../../../_images/labelplacement.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-placement"><span class="std std-ref">配置</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/render.png"><img alt="render" src="../../../_images/render.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-rendering"><span class="std std-ref">レンダリング</span></a></p></li>
</ul>
<p>各プロパティの設定方法は、 <a class="reference internal" href="../style_library/label_settings.html#showlabels"><span class="std std-ref">ラベルの設定</span></a> にあります。</p>
<section id="setting-the-automated-placement-engine">
<span id="automated-placement"></span><span id="index-19"></span><h3><a class="toc-backref" href="#id113" role="doc-backlink"><span class="section-number">16.1.4.1. </span>自動配置エンジンの設定</a><a class="headerlink" href="#setting-the-automated-placement-engine" title="Link to this heading"></a></h3>
<p>ラベルの自動的なふるまいに関するプロジェクトレベルの設定を行うために、自動配置設定を使用することができます。 <span class="guilabel">ラベル</span> タブの右上隅にある <a class="reference internal" href="../../../_images/mIconAutoPlacementSettings.png"><img alt="autoPlacementSettings" src="../../../_images/mIconAutoPlacementSettings.png" style="width: 1.5em;" /></a> <sup>自動配置設定（全レイヤに適用）</sup> ボタンをクリックするとダイアログが開き、以下の設定ができます：</p>
<figure class="align-center" id="id45">
<span id="figure-automated-placement"></span><img alt="../../../_images/placement_engine.png" src="../../../_images/placement_engine.png" />
<figcaption>
<p><span class="caption-number">図 16.27 </span><span class="caption-text">ラベルの自動配置エンジン</span><a class="headerlink" href="#id45" title="Link to this image"></a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p><span class="guilabel">候補の数</span> ：ライン地物やポリゴン地物について、地物のサイズに基づき可能なラベル配置の数を計算し割り当てます。地物が長いあるいは広いほど、より多くの候補を持ち、そのラベルは衝突のリスクが減ってより良い配置が可能となります。</p></li>
<li><p><span class="guilabel">テキスト出力形式</span> ：PDFやSVGへの <a class="reference internal" href="../map_views/map_view.html#exportingmapcanvas"><span class="std std-ref">マップキャンバスのエクスポート</span></a> や <a class="reference internal" href="../print_composer/create_output.html#create-output"><span class="std std-ref">レイアウトのエクスポート</span></a> の際に、ラベルレンダリングウィジェットのデフォルト値を設定します。 <span class="guilabel">ラベルを常にテキストとしてレンダリング</span> を選択した場合、ラベルは外部アプリケーション（Inkscapeなど）で通常のテキストとして編集することが可能です。ただし、副作用としてレンダリング品質が低下し、さらにテキストにバッファ等の特定の設定がなされていると、レンダリングに問題が発生します。このため、ラベルをアウトラインとしてエクスポートする <span class="guilabel">ラベルを常にパスとしてレンダリング（推奨）</span> を推奨しています。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">地図の端のラベルは省略</span> ：マップ範囲から部分的に外れたラベルをレンダリングするかどうかを制御します。チェックを入れると、（見える範囲内で完全なラベルを配置できない場合、）切れたラベルが表示されます。チェックを外すと、部分的にしか見えないラベルはスキップされます。この設定は、 <a class="reference internal" href="../print_composer/composer_items/composer_map.html#layout-map-item"><span class="std std-ref">地図レイアウトのアイテム</span></a> のラベル表示には影響しないことに留意してください。</p></li>
<li><p><a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">全レイヤの全ラベルを表示（衝突ラベルを含む）</span> ：このオプションはレイヤ単位で設定することもできます（ <a class="reference internal" href="../style_library/label_settings.html#labels-rendering"><span class="std std-ref">レンダリング</span></a> を参照）。</p></li>
<li><p><a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">位置未定ラベルの表示</span> ：これにより、重要なラベルがマップから（重複やその他の制約のためなどで）欠落しているかどうかを判断することができます。これらのラベルの表示色はカスタマイズ可能です。</p></li>
<li><p><a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">候補を表示（デバッグ用）</span> ：ラベル配置のために生成された候補を示すボックスすべてをマップ上に描画するかどうかを制御します。ラベル名のとおり、これはさまざまなラベル設定がもたらす効果のデバッグとテストのためにのみ有用です。これは、 <a class="reference internal" href="#label-toolbar"><span class="std std-ref">ラベルツールバー</span></a> のツールを使用して手動でより良い配置を行うのにも便利です。</p></li>
<li><p><span class="guilabel">ラベルバージョン</span> ：QGISはラベルの自動配置について2つの異なるバージョンをサポートしています：</p>
<ul>
<li><p><span class="guilabel">Version 1</span> ：古いシステム（QGIS3.10 以前のバージョンで使用されており、これらのバージョンで作成されたプロジェクトをQGIS3.12以降で開く時に使用）です。 Version 1 では、ラベルや障害物の優先順位を「大まかな目安」としてのみ扱っており、優先度の高い障害物の上に優先度の低いラベルが配置される可能性があります。このため、このバージョンを使用する場合には望むラベル付け結果を得ることが難しい場合があり、古いプロジェクトとの互換性を保つためでしか推奨されません。</p></li>
<li><p><span class="guilabel">Version 2 （推奨）</span> ：これは、QGIS 3.12以降で作成された新規プロジェクトでのデフォルトのシステムです。Version 2 では、どんな時にラベルが <a class="reference internal" href="../style_library/label_settings.html#labels-obstacles"><span class="std std-ref">障害物</span></a> に重なるのを許可するかを決定するロジックが変更修正されました。新しいロジックでは、 ラベル優先度に比べて障害物の重みづけが大きい障害物にラベルが重なることを禁止しています。その結果、このバージョンではラベル付けの結果がより予測しやすく、理解しやすくなりました。</p></li>
</ul>
</li>
</ul>
</section>
<section id="rule-based-labeling">
<span id="id11"></span><h3><a class="toc-backref" href="#id114" role="doc-backlink"><span class="section-number">16.1.4.2. </span>ルールに基づくラベル付け</a><a class="headerlink" href="#rule-based-labeling" title="Link to this heading"></a></h3>
<p>ルールに基づくラベル付けは <a class="reference internal" href="#rule-based-rendering"><span class="std std-ref">ルールに基づくレンダリング</span></a> と同様、複数のラベルの設定を定義し、式フィルタとスケール範囲に基づいて選択的にルールを適用できます。</p>
<p>ルールを作成するには：</p>
<ol class="arabic">
<li><p><span class="guilabel">ラベル</span> タブのメインドロップダウンリストで <a class="reference internal" href="../../../_images/labelingRuleBased.png"><img alt="labelingRuleBased" src="../../../_images/labelingRuleBased.png" style="width: 1.5em;" /></a> <a href="#id1"><span class="problematic" id="id2">**</span></a>ルールに基づく定義（rule-based）* オプションを選択します</p></li>
<li><p>ダイアログ下部にある <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>ルールを追加</sup> ボタンをクリックします</p></li>
<li><p>新しく現れたダイアログで、以下を入力します：</p>
<ul class="simple">
<li><p><span class="guilabel">説明</span> ： <span class="guilabel">ラベル</span> タブ内でルールの識別に使用するテキストで、印刷レイアウトの凡例の <a class="reference internal" href="#vectorlegendmenu"><span class="std std-ref">ラベル凡例エントリ</span></a> としても使用します</p></li>
<li><p><span class="guilabel">フィルタ</span> ：ラベル設定を適用する地物を選択するための式</p></li>
<li><p>他のルールがすでに設定されている場合には、 <span class="guilabel">もしくは</span> オプションを使用して、同じグループのどのルールのフィルタにもマッチしない地物すべてを選択できます</p></li>
</ul>
</li>
<li><p>このラベルのルールを適用する <a class="reference internal" href="../introduction/general_tools.html#label-scaledepend"><span class="std std-ref">縮尺の範囲</span></a> を設定できます。</p></li>
<li><p><span class="guilabel">ラベル</span> グループボックスで利用できるオプションは、通常の <a class="reference internal" href="../style_library/label_settings.html#showlabels"><span class="std std-ref">ラベルの設定</span></a> です。ラベルの設定を行い、 <span class="guilabel">OK</span> ボタンを押します。</p>
<figure class="align-center" id="id46">
<span id="figure-labels-rule-settings"></span><img alt="../../../_images/label_rule_settings.png" src="../../../_images/label_rule_settings.png" />
<figcaption>
<p><span class="caption-number">図 16.28 </span><span class="caption-text">ルールの設定</span><a class="headerlink" href="#id46" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
</ol>
<p>既存のルールの概要がメインダイアログに表示されます（ <a class="reference internal" href="#figure-labels-rule-based"><span class="std std-numref">図 16.29</span></a> 参照）。複数のルールを追加したり、ドラッグ＆ドロップでルールの並べ替えやルールを入れ子にできます。ルールを <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="symbologyRemove" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> ボタンで削除したり、 <a class="reference internal" href="../../../_images/symbologyEdit.png"><img alt="symbologyEdit" src="../../../_images/symbologyEdit.png" style="width: 1.5em;" /></a> ボタンまたはダブルクリックでルールを編集できます。</p>
<figure class="align-center" id="id47">
<span id="figure-labels-rule-based"></span><img alt="../../../_images/label_rules_panel.png" src="../../../_images/label_rules_panel.png" />
<figcaption>
<p><span class="caption-number">図 16.29 </span><span class="caption-text">ルールに基づくラベル作成パネル</span><a class="headerlink" href="#id47" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="define-labels-based-on-expressions">
<span id="labeling-with-expressions"></span><span id="index-20"></span><h3><a class="toc-backref" href="#id115" role="doc-backlink"><span class="section-number">16.1.4.3. </span>式に基づいてラベルを定義する</a><a class="headerlink" href="#define-labels-based-on-expressions" title="Link to this heading"></a></h3>
<p>ラベル付けタイプに単一定義、ルールに基づく定義のどちらを選択しても、QGISでは地物のラベル付けに式を使用することができます。</p>
<p><span class="guilabel">単一定義</span> を使用している場合には、プロパティのダイアログの <a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labelingSingle" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <span class="guilabel">ラベル</span> タブの <span class="guilabel">値</span> ドロップダウンリストの近くにある、 <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> ボタンをクリックします。</p>
<p><a class="reference internal" href="#figure-labels-expression"><span class="std std-numref">図 16.30</span></a> に alaska trees レイヤに木のタイプと面積をラベル付けするためのためのサンプル式を示します。 'VEGDESC' フィールドと説明用のテキスト、 <code class="docutils literal notranslate"><span class="pre">$area</span></code> に <code class="docutils literal notranslate"><span class="pre">format_number()</span></code> 関数を組み合わせて、ラベルを見栄え良くしています。</p>
<figure class="align-center" id="id48">
<span id="figure-labels-expression"></span><img alt="../../../_images/label_expression.png" src="../../../_images/label_expression.png" />
<figcaption>
<p><span class="caption-number">図 16.30 </span><span class="caption-text">式を使用したラベル付け</span><a class="headerlink" href="#id48" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>式に基づくラベル付けは簡単です。気を付ける必要があるのは、以下の点だけです。</p>
<ul class="simple">
<li><p>すべての要素（文字列、フィールド、関数）を <code class="docutils literal notranslate"><span class="pre">concat</span></code> や <code class="docutils literal notranslate"><span class="pre">+</span></code> 、 <code class="docutils literal notranslate"><span class="pre">||</span></code> のような文字列連結関数で結合する必要があるかもしれません。状況によっては、これらのツールすべてが必要とするものに適合するとは限らないことに注意してください（null や数値が含まれる場合など）。</p></li>
<li><p>文字列は 'シングルクォート' で書きます。</p></li>
<li><p>フィールドは &quot;ダブルクォート&quot; で書くか、引用符なしで書きます。</p></li>
</ul>
<p>いくつかの例を見てみましょう：</p>
<ol class="arabic">
<li><p>2つのフィールド「name」と「place」をカンマ区切りで並べたラベル:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;name&quot;</span> <span class="o">||</span> <span class="s1">&#39;, &#39;</span> <span class="o">||</span> <span class="s2">&quot;place&quot;</span>
</pre></div>
</div>
<p>これは次のような文字列を返します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">John</span> <span class="n">Smith</span><span class="p">,</span> <span class="n">Paris</span>
</pre></div>
</div>
</li>
<li><p>2つのフィールド「name」、「place」と他のテキストによるラベル：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;My name is &#39; + &quot;name&quot; + &#39;and I live in &#39; + &quot;place&quot;
&#39;My name is &#39; || &quot;name&quot; || &#39;and I live in &#39; || &quot;place&quot;
concat(&#39;My name is &#39;, name, &#39; and I live in &#39;, &quot;place&quot;)
</pre></div>
</div>
<p>これは次のような文字列を返します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">My</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">John</span> <span class="n">Smith</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">live</span> <span class="ow">in</span> <span class="n">Paris</span>
</pre></div>
</div>
</li>
<li><p>2つのフィールド「name」、「place」と他のテキストを様々な連結関数で組み合わせたラベル：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>concat(&#39;My name is &#39;, name, &#39; and I live in &#39; || place)
</pre></div>
</div>
<p>これは次のような文字列を返します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">My</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">John</span> <span class="n">Smith</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">live</span> <span class="ow">in</span> <span class="n">Paris</span>
</pre></div>
</div>
<p>「place」フィールドがNULLである場合には、次のような文字列が返ります:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">My</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">John</span> <span class="n">Smith</span>
</pre></div>
</div>
</li>
<li><p>2つのフィールド「name」、「place」と説明テキストによる複数行のラベル：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>concat(&#39;My name is &#39;, &quot;name&quot;, &#39;\n&#39; , &#39;I live in &#39; , &quot;place&quot;)
</pre></div>
</div>
<p>これは次のような文字列を返します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">My</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">John</span> <span class="n">Smith</span>
<span class="n">I</span> <span class="n">live</span> <span class="ow">in</span> <span class="n">Paris</span>
</pre></div>
</div>
</li>
<li><p>フィールドと $area 関数を使用した、場所の名前と単位を変換して丸めた面積を表示するラベル：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;The area of &#39; || &quot;place&quot; || &#39; has a size of &#39;
|| round($area/10000) || &#39; ha&#39;
</pre></div>
</div>
<p>これは次のような文字列を返します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">area</span> <span class="n">of</span> <span class="n">Paris</span> <span class="n">has</span> <span class="n">a</span> <span class="n">size</span> <span class="n">of</span> <span class="mi">10500</span> <span class="n">ha</span>
</pre></div>
</div>
</li>
<li><p>CASE ELSE 条件を作成します。 <cite>population</cite> フィールドの人口値が &lt;= 50000 であれば town、そうでなければ city とします：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>concat(&#39;This place is a &#39;,
CASE WHEN &quot;population&quot; &lt;= 50000 THEN &#39;town&#39; ELSE &#39;city&#39; END)
</pre></div>
</div>
<p>これは次のような文字列を返します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">place</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">town</span>
</pre></div>
</div>
</li>
<li><p>city の名前を表示し、他の地物はラベルを表示しません（&quot;city&quot; のコンテキストについては、上記の例を参照）：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CASE WHEN &quot;population&quot; &gt; 50000 THEN &quot;NAME&quot; END
</pre></div>
</div>
<p>これは次のような文字列を返します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Paris</span>
</pre></div>
</div>
</li>
</ol>
<p>式ビルダーで見ればわかるとおり、データのラベル付けのためにシンプルな式から非常に複雑な式まで作成できる何百もの関数がQGISにあります。式の詳細と例については <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">式</span></a> の章を参照してください。</p>
</section>
<section id="using-data-defined-override-for-labeling">
<span id="data-defined-labeling"></span><span id="index-21"></span><h3><a class="toc-backref" href="#id116" role="doc-backlink"><span class="section-number">16.1.4.4. </span>ラベル付けのためにデータ定義の上書きを使用する</a><a class="headerlink" href="#using-data-defined-override-for-labeling" title="Link to this heading"></a></h3>
<p><a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>データによって定義された上書き</sup> 機能を使用すると、属性テーブルのエントリやそれに基づく式によってラベル付けの設定が上書きされます。この機能は、上で説明したほとんどのラベル付けオプションの値を設定するために使用することができます。</p>
<p>例えば、Alaska QGISサンプルデータセットを使用して、 <code class="file docutils literal notranslate"><span class="pre">airports</span></code> レイヤを軍用利用の <code class="docutils literal notranslate"><span class="pre">USE</span></code> 列、つまり、空港が以下の意味で利用可能かどうかに基づいて名前をラベル付けしてみましょう：</p>
<ul class="simple">
<li><p>軍が利用可能な場合には、ラベルの色はグレーで、大きさはは8です。</p></li>
<li><p>それ以外の場合には、ラベルの色は青で、大きさは10です。</p></li>
</ul>
<p>このラベル付けを行うためには、レイヤの <code class="docutils literal notranslate"><span class="pre">NAME</span></code> フィールドでのラベル付け（ <a class="reference internal" href="../style_library/label_settings.html#showlabels"><span class="std std-ref">ラベルの設定</span></a> 参照）を有効にした後に、</p>
<ol class="arabic">
<li><p><span class="guilabel">テキスト</span> タブを有効化します。</p></li>
<li><p><span class="guilabel">大きさ</span> プロパティの横にある <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> アイコンをクリックします。</p></li>
<li><p><span class="guilabel">編集...</span> を選択し、以下の内容を入力します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CASE</span>
  <span class="n">WHEN</span> <span class="s2">&quot;USE&quot;</span> <span class="n">like</span> <span class="s1">&#39;%Military%&#39;</span> <span class="n">THEN</span> <span class="mi">8</span> <span class="o">--</span> <span class="n">because</span> <span class="n">compatible</span> <span class="n">values</span> <span class="n">are</span> <span class="s1">&#39;Military&#39;</span>
                                      <span class="o">--</span> <span class="ow">and</span> <span class="s1">&#39;Joint Military/Civilian&#39;</span>
  <span class="n">ELSE</span> <span class="mi">10</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
<li><p><span class="guilabel">OK</span> ボタンを押して式を有効にします。ダイアログが閉じて <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> ボタンが <a class="reference internal" href="../../../_images/mIconDataDefineExpressionOn.png"><img alt="dataDefineExpressionOn" src="../../../_images/mIconDataDefineExpressionOn.png" style="width: 1.5em;" /></a> になり、これはルールが実行されていることを意味します。</p></li>
<li><p>次に、色プロパティの横にあるボタンをクリックし、以下の式を入力して有効化します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CASE</span>
  <span class="n">WHEN</span> <span class="s2">&quot;USE&quot;</span> <span class="n">like</span> <span class="s1">&#39;%Military%&#39;</span> <span class="n">THEN</span> <span class="s1">&#39;150, 150, 150&#39;</span>
  <span class="n">ELSE</span> <span class="s1">&#39;0, 0, 255&#39;</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
</ol>
<p>同様にして、ラベルの他の任意のプロパティを好きなようにカスタマイズすることができます。 <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>データ定義の上書き</sup> ウィジェットの詳細については、 <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">データによって定義された上書きの設定</span></a> セクションの説明と操作方法を参照してください。</p>
<figure class="align-center" id="id49">
<span id="figure-labels-attribute-data-defined"></span><img alt="../../../_images/label_attribute_data_defined.png" src="../../../_images/label_attribute_data_defined.png" />
<figcaption>
<p><span class="caption-number">図 16.31 </span><span class="caption-text">属性値に基づいて書式設定された空港ラベル</span><a class="headerlink" href="#id49" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>データ定義の上書きをマルチパート地物の各パートのラベル付けに使用する</strong></p>
<p>ラベルプロパティとは別に、マルチパート地物のラベル付けを設定するオプションがあります。 <a class="reference internal" href="../../../_images/render.png"><img alt="render" src="../../../_images/render.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-rendering"><span class="std std-ref">レンダリング</span></a> を選択し、 <code class="docutils literal notranslate"><span class="pre">地物オプション</span></code> で <a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">マルチパートの各パートに表示</span> チェックボックスの横にある <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>データによって定義された上書き</sup> ボタンをクリックして、 <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">データによって定義された上書きの設定</span></a> で説明しているようにラベルを定義します。</p>
</div>
<section id="the-label-toolbar">
<span id="label-toolbar"></span><h4><a class="toc-backref" href="#id117" role="doc-backlink">ラベルツールバー</a><a class="headerlink" href="#the-label-toolbar" title="Link to this heading"></a></h4>
<p><span class="guilabel">ラベルツールバー</span> には、 <a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labelingSingle" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vector-labels-tab"><span class="std std-ref">ラベル</span></a> （とその <a class="reference internal" href="../style_library/label_settings.html#labels-callouts"><span class="std std-ref">引出し線</span></a> を含む）や <a class="reference internal" href="../../../_images/diagram.png"><img alt="diagram" src="../../../_images/diagram.png" style="width: 2em;" /></a> <a class="reference internal" href="#sec-diagram"><span class="std std-ref">ダイアグラム</span></a> のプロパティを操作するためのツールがあります。</p>
<figure class="align-center" id="id50">
<span id="figure-labels-tools"></span><img alt="../../../_images/diagram_toolbar.png" src="../../../_images/diagram_toolbar.png" />
<figcaption>
<p><span class="caption-number">図 16.32 </span><span class="caption-text">ラベルツールバー</span><a class="headerlink" href="#id50" title="Link to this image"></a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/mActionShowPinnedLabels.png"><img alt="showPinnedLabels" src="../../../_images/mActionShowPinnedLabels.png" style="width: 1.5em;" /></a> <sup>固定されたラベル・ダイアグラム・引出し線の強調</sup> ：アイテムのベクタレイヤが編集可能である場合には緑色で、そうでない場合は青色で強調表示します。</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionShowUnplacedLabel.png"><img alt="showUnplacedLabel" src="../../../_images/mActionShowUnplacedLabel.png" style="width: 1.5em;" /></a> <sup>位置未定ラベルの表示切り替え</sup> ：重要なラベルが（例えば重なりやその他の制約のために）マップから欠落しているかどうかを確かめることができます。これらのラベルの表示色はカスタマイズ可能です（ <a class="reference internal" href="#automated-placement"><span class="std std-ref">自動配置エンジンの設定</span></a> 参照）。</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionPinLabels.png"><img alt="pinLabels" src="../../../_images/mActionPinLabels.png" style="width: 1.5em;" /></a> <sup>ラベル・図表の固定/解放</sup> ：アイテムをクリックするか領域をドラッグすると、アイテムを固定します。 <kbd class="kbd docutils literal notranslate">Shift</kbd> キーを押したままアイテムをクリックまたは領域をドラッグすると、ラベルの固定が解放されます。 <kbd class="kbd docutils literal notranslate">Ctrl</kbd> キーを押したままアイテムをクリックまたは領域をドラッグすると、アイテムの固定・解放状態を切り替えることができます。</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionShowHideLabels.png"><img alt="showHideLabels" src="../../../_images/mActionShowHideLabels.png" style="width: 1.5em;" /></a> <sup>ラベル・ダイアグラムの表示/非表示</sup> ：アイテムをクリックするか、 <kbd class="kbd docutils literal notranslate">Shift</kbd> キーを押しながら領域をドラッグすると、アイテムが非表示になります。アイテムが非表示のときは、その地物をクリックするとラベルの表示を元に戻すことができます。領域をドラッグすると、その領域内のすべてのラベル表示が復元されます。</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionMoveLabel.png"><img alt="moveLabel" src="../../../_images/mActionMoveLabel.png" style="width: 1.5em;" /></a> <sup>ラベル、ダイアグラム、引出し線を移動</sup> ：クリックしてアイテムを選択し、好きな位置で再度クリックしてアイテムを移動させます。アイテムの新しい座標が <a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">補助テーブル</span></a> に保存されます。このツールでアイテムを選択して <kbd class="kbd docutils literal notranslate">Delete</kbd> キーを押すと、保存された位置の値が消去されます。</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionRotateLabel.png"><img alt="rotateLabel" src="../../../_images/mActionRotateLabel.png" style="width: 1.5em;" /></a> <sup>ラベルを回転</sup> ：ラベルをクリックして選択し、好きな回転量で再度クリックすると、回転が適用されます。上と同様で、新しい角度が補助テーブルに保存されます。このツールでラベルを選択して <kbd class="kbd docutils literal notranslate">Delete</kbd> キーを押すと、このラベルの回転の値が消去されます。</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionChangeLabelProperties.png"><img alt="changeLabelProperties" src="../../../_images/mActionChangeLabelProperties.png" style="width: 1.5em;" /></a> <sup>ラベル属性の変更</sup> クリックしたラベルのプロパティを変更するためのダイアログを開きます。このプロパティがあるフィールドにマッピングされていれば、ラベルテキストや座標、回転、フォント、大きさ、複数行の配置などのプロパティを変更することができます。ここでは、 <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">全パートにラベル</span>  のオプションも設定できます。</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><strong>ラベルツールによる現在のフィールド値の上書き</strong></p>
<p><span class="guilabel">ラベルツールバー</span> を使ってラベルをカスタマイズすると、マップされたフィールドにプロパティの新しい値が実際に書き込まれます。したがって、後で必要になるかもしれないデータを誤って置き換えないように注意してください！</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>元となるデータソースを変更せずにラベルをカスタマイズ（位置など）するには、 <a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">補助テーブルプロパティ</span></a> の機能を使うのがよいでしょう。</p>
</div>
</section>
<section id="customize-the-labels-from-the-map-canvas">
<h4><a class="toc-backref" href="#id118" role="doc-backlink">マップキャンバスからラベルをカスタマイズする</a><a class="headerlink" href="#customize-the-labels-from-the-map-canvas" title="Link to this heading"></a></h4>
<p><span class="guilabel">ラベルツールバー</span> と組み合わせると、データ定義による上書き設定によってマップキャンバス内のラベルを操作（移動、編集、回転）することができます。ここでは、 <a class="reference internal" href="../../../_images/mActionMoveLabel.png"><img alt="moveLabel" src="../../../_images/mActionMoveLabel.png" style="width: 1.5em;" /></a><sup>ラベル、ダイアグラム、引出し線を移動</sup> の機能について、データ定義の上書きを使用した例を説明します（ <a class="reference internal" href="#figure-labels-coordinate-data-defined"><span class="std std-numref">図 16.33</span></a> 参照）。</p>
<ol class="arabic">
<li><p>QGISサンプルデータセットから <code class="file docutils literal notranslate"><span class="pre">lakes.shp</span></code> をインポートします。</p></li>
<li><p>レイヤをダブルクリックしてレイヤプロパティを開きます。 <span class="guilabel">ラベル</span> をクリックし、 <span class="guilabel">配置</span> をクリックしてください。 <a class="reference internal" href="../../../_images/radiobuttonon.png"><img alt="radioButtonOn" src="../../../_images/radiobuttonon.png" style="width: 1.5em;" /></a> <span class="guilabel">重心からのオフセット</span> を選択します。</p></li>
<li><p><span class="guilabel">データによる定義</span> エントリを探します。 <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> アイコンをクリックして <span class="guilabel">座標</span> ためのフィールドの型を定義します。Xには <code class="docutils literal notranslate"><span class="pre">xlabel</span></code> 、Yには <code class="docutils literal notranslate"><span class="pre">ylabel</span></code> を選択してください。するとアイコンが黄色で強調表示されます。</p>
<figure class="align-center" id="id51">
<span id="figure-labels-coordinate-data-defined"></span><img alt="../../../_images/label_coordinate_data_defined.png" src="../../../_images/label_coordinate_data_defined.png" />
<figcaption>
<p><span class="caption-number">図 16.33 </span><span class="caption-text">データ定義の上書きを使用したベクタポリゴンレイヤのラベル付け</span><a class="headerlink" href="#id51" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p>湖にズームします。</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionToggleEditing.png"><img alt="toggleEditing" src="../../../_images/mActionToggleEditing.png" style="width: 1.5em;" /></a> <sup>編集モード切替</sup> ボタンを使用して、レイヤを編集可能状態にします。</p></li>
<li><p>ラベルツールバーの <a class="reference internal" href="../../../_images/mActionMoveLabel.png"><img alt="moveLabel" src="../../../_images/mActionMoveLabel.png" style="width: 1.5em;" /></a> アイコンをクリックします。これでラベルを別の位置に手動で移動させることができます（ <a class="reference internal" href="#figure-labels-move"><span class="std std-numref">図 16.34</span></a> 参照）。ラベルの新しい位置は、属性テーブルの <code class="docutils literal notranslate"><span class="pre">xlabel</span></code> と <code class="docutils literal notranslate"><span class="pre">ylabel</span></code> 列に保存されます。</p></li>
<li><p>以下の方法で、各湖と移動したラベルとを繋ぐ線を追加することもできます。</p>
<ul>
<li><p>ラベルの <a class="reference internal" href="../style_library/label_settings.html#labels-callouts"><span class="std std-ref">引出し線プロパティ</span></a></p></li>
<li><p>以下の式による <a class="reference internal" href="../style_library/symbol_selector.html#geometry-generator-symbol"><span class="std std-ref">ジオメトリジェネレータシンボルレイヤ</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>make_line( centroid( $geometry ), make_point( &quot;xlabel&quot;, &quot;ylabel&quot; ) )
</pre></div>
</div>
<figure class="align-center" id="id52">
<span id="figure-labels-move"></span><img alt="../../../_images/move_label.png" src="../../../_images/move_label.png" />
<figcaption>
<p><span class="caption-number">図 16.34 </span><span class="caption-text">移動したラベル</span><a class="headerlink" href="#id52" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>編集可能なデータソースなしでデータ定義のプロパティを使用するには、 <a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">補助テーブルプロパティ</span></a> 機能を使用するのが良いでしょう。</p>
</div>
</section>
</section>
</section>
<section id="diagrams-properties">
<span id="sec-diagram"></span><span id="index-22"></span><h2><a class="toc-backref" href="#id119" role="doc-backlink"><span class="section-number">16.1.5. </span>ダイアグラムプロパティ</a><a class="headerlink" href="#diagrams-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/diagram.png"><img alt="diagram" src="../../../_images/diagram.png" style="width: 2em;" /></a> <span class="guilabel">ダイアグラム</span> タブでは、ベクタレイヤにグラフィックオーバーレイを追加することができます（ <a class="reference internal" href="#figure-diagrams-attributes"><span class="std std-numref">図 16.35</span></a> 参照）。</p>
<p>ダイアグラムのコア実装は現在のところ、以下の機能をサポートしています：</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/diagramNone.png"><img alt="diagramNone" src="../../../_images/diagramNone.png" style="width: 1.5em;" /></a> <span class="guilabel">ダイアグラムなし</span> ：デフォルト値で、地物上には何のダイアグラムも表示しません。</p></li>
<li><p><a class="reference internal" href="../../../_images/pie-chart.png"><img alt="piechart" src="../../../_images/pie-chart.png" style="width: 1.5em;" /></a> <span class="guilabel">円グラフ（Pie Chart）</span> 円形の統計的な図形で、スライスに分割されており、数値の比率を表します。各スライスの円弧の長さは、それが表す量に比例します。</p></li>
<li><p><a class="reference internal" href="../../../_images/text.png"><img alt="text" src="../../../_images/text.png" style="width: 1.5em;" /></a> <span class="guilabel">テキストダイアグラム</span> 水平に分割された円で、内部に統計値を表示します。</p></li>
<li><p><a class="reference internal" href="../../../_images/histogram.png"><img alt="histogram" src="../../../_images/histogram.png" style="width: 1.5em;" /></a> <span class="guilabel">ヒストグラム</span> 各属性で色の異なるバーがお互いに横に並んだものです。</p></li>
<li><p><a class="reference internal" href="../../../_images/stacked-bar.png"><img alt="stackedBar" src="../../../_images/stacked-bar.png" style="width: 1.5em;" /></a> <span class="guilabel">積み上げ棒グラフ</span> 各属性で色の異なるバーが縦または横に積み重なったものです。</p></li>
</ul>
<p><span class="guilabel">ダイアグラム</span> タブの右上隅には <a class="reference internal" href="../../../_images/mIconAutoPlacementSettings.png"><img alt="autoPlacementSettings" src="../../../_images/mIconAutoPlacementSettings.png" style="width: 1.5em;" /></a> <sup>自動配置設定（すべてのレイヤに適用）</sup> ボタンがあり、マップキャンバス上でのダイアグラムの <a class="reference internal" href="#automated-placement"><span class="std std-ref">ラベル配置</span></a> を制御するための手段を提供します。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>ダイアグラムの種類をすばやく切り替える</strong></p>
<p>様々なダイアグラムで設定がほぼ共通していることから、ダイアグラムを設計するときには、設定を失うことなくダイアグラムの種類を気軽に変更して、どれがよりデータに適しているかを確認することができます。</p>
</div>
<p>ダイアグラムの種類ごとに、プロパティはいくつかのタブに分けられます。</p>
<ul class="simple">
<li><p><a class="reference internal" href="#diagram-attributes"><span class="std std-ref">属性</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-appearance"><span class="std std-ref">レンダリング</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-size"><span class="std std-ref">大きさ</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-placement"><span class="std std-ref">配置</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-options"><span class="std std-ref">オプション</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-legend"><span class="std std-ref">凡例</span></a></p></li>
</ul>
<section id="attributes">
<span id="diagram-attributes"></span><h3><a class="toc-backref" href="#id120" role="doc-backlink"><span class="section-number">16.1.5.1. </span>属性</a><a class="headerlink" href="#attributes" title="Link to this heading"></a></h3>
<p><span class="guilabel">属性</span> では、どの変数をダイアグラムに表示するかを定義します。 <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>選択した属性を追加</sup> ボタンを使用して表示したいフィールドを選択し、「利用する属性」パネルに並べます。 <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">式</span></a> を使って生成された属性も使用できます。</p>
<p>任意の行をクリックしドラッグすることで上下に移動させることができ、属性の表示方法を並べ替えられます。また、アイテムをダブルクリックすることで「凡例」列のラベルや属性の色を変更できます。</p>
<p>このラベルは、印刷レイアウトやレイヤツリーの凡例に表示されるデフォルトのテキストです。</p>
<figure class="align-center" id="id53">
<span id="figure-diagrams-attributes"></span><img alt="../../../_images/diagram_tab.png" src="../../../_images/diagram_tab.png" />
<figcaption>
<p><span class="caption-number">図 16.35 </span><span class="caption-text">ダイアグラムのプロパティ - 属性タブ</span><a class="headerlink" href="#id53" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="rendering">
<span id="diagram-appearance"></span><h3><a class="toc-backref" href="#id121" role="doc-backlink"><span class="section-number">16.1.5.2. </span>レンダリング</a><a class="headerlink" href="#rendering" title="Link to this heading"></a></h3>
<p><span class="guilabel">レンダリング</span> は、ダイアグラムの見た目を定義します。ここでは、統計値に干渉されない、以下のような一般的な設定項目があります：</p>
<ul class="simple">
<li><p>グラフィックの不透明度、輪郭線の幅、色</p></li>
<li><p>ダイアグラムのタイプによって、以下の設定があります：</p>
<ul>
<li><p>ヒストグラムと積み上げ棒グラフには、棒グラフの幅とバーの間隔の設定があります。積み上げ棒グラフはバーの間隔を <code class="docutils literal notranslate"><span class="pre">0</span></code> に設定するのが良いでしょう。さらに、 <span class="guilabel">軸の線シンボル</span> をマップキャンバス上に表示させることができ、 <a class="reference internal" href="../style_library/symbol_selector.html#vector-line-symbols"><span class="std std-ref">ラインシンボルのプロパティ</span></a> を使用してカスタマイズができます。</p></li>
<li><p>テキストダイアグラムには、円の背景色とテキストに使用される <a class="reference internal" href="../introduction/general_tools.html#font-selector"><span class="std std-ref">フォント</span></a> の設定があります。</p></li>
<li><p>円グラフには、最初の <span class="guilabel">パイの開始角</span> と、その <span class="guilabel">方向</span> （時計回りか反時計回りか）の設定があります。</p></li>
</ul>
</li>
<li><p>グラフィックに対する <a class="reference internal" href="#draw-effects"><span class="std std-ref">描画エフェクト</span></a> の使用</p></li>
</ul>
<p>このタブでは、さまざまなオプションを使用してダイアグラムの見た目を管理したり微調整することができます。</p>
<ul class="simple">
<li><p>ダイアグラムの <span class="guilabel">z-index</span> ：これは、ダイアグラムをお互いに重ねたり、ラベルに重ねたりする方法を制御します。数値の大きいダイアグラムは、他のダイアグラムやラベルの上に描画されます。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">すべて表示</span> ：たとえお互いに重なっているとしても、全てのダイアグラムを表示します。</p></li>
<li><p><span class="guilabel">表示</span> ：特定のダイアグラムのみをレンダリングするようにします。</p></li>
<li><p><span class="guilabel">常に表示するか否かを示す式</span> ：たとえ他のダイアグラムや地図ラベルと重なっているとしても常にレンダリングする特定のダイアグラムを選択します。</p></li>
<li><p><a class="reference internal" href="../introduction/general_tools.html#label-scaledepend"><span class="std std-ref">縮尺に応じた表示設定</span></a> の設定</p></li>
</ul>
<figure class="align-center" id="id54">
<span id="figure-diagrams-appearance"></span><img alt="../../../_images/diagram_tab_appearance.png" src="../../../_images/diagram_tab_appearance.png" />
<figcaption>
<p><span class="caption-number">図 16.36 </span><span class="caption-text">ダイアグラムのプロパティ - レンダリングタブ</span><a class="headerlink" href="#id54" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="size">
<span id="diagram-size"></span><h3><a class="toc-backref" href="#id122" role="doc-backlink"><span class="section-number">16.1.5.3. </span>大きさ</a><a class="headerlink" href="#size" title="Link to this heading"></a></h3>
<p><span class="guilabel">大きさ</span> は、選択した統計情報の表示方法を設定するメインタブです。ダイアグラムのサイズの <a class="reference internal" href="../introduction/general_tools.html#unit-selector"><span class="std std-ref">単位</span></a> は、「ミリメートル」、「ポイント」、「ピクセル」、「地図単位」、「インチ」のいずれかです。サイズの設定には以下のものを使用できます：</p>
<ul class="simple">
<li><p><span class="guilabel">固定サイズ</span> ：すべての地物のグラフィックを表現するためにただ一つだけのサイズを使用します（ヒストグラムでは使用できません）。</p></li>
<li><p><span class="guilabel">可変サイズ</span> ：レイヤの属性を使用した式に基づいたサイズを使用します:</p>
<ol class="arabic simple">
<li><p><span class="guilabel">属性</span> で、フィールドを選択するか式を構築します</p></li>
<li><p><span class="guilabel">検索</span> ボタンを押して属性値の <span class="guilabel">最大値</span> を求めるか、このウィジェットにカスタム値を入力します。</p></li>
<li><p>ヒストグラムと積み上げ棒グラフでは、属性の <span class="guilabel">最大値</span> に対応する <span class="guilabel">バーの長さ</span> の値を入力します。各地物について、バーの長さはこの対応関係を維持するために線形にスケーリングされます。</p></li>
<li><p>円グラフとテキストダイアグラムでは、属性の <span class="guilabel">最大値</span> に対応する <span class="guilabel">大きさ</span> の値を入力します。各地物について、円の面積や直径はこの対応関係を維持するために（ <code class="docutils literal notranslate"><span class="pre">0</span></code> から）線形にスケーリングされます。ただし、小さなダイアグラムには <span class="guilabel">最小サイズ</span> を設定することができます。</p></li>
</ol>
</li>
</ul>
<figure class="align-center" id="id55">
<span id="figure-diagrams-size"></span><img alt="../../../_images/diagram_tab_size.png" src="../../../_images/diagram_tab_size.png" />
<figcaption>
<p><span class="caption-number">図 16.37 </span><span class="caption-text">ダイアグラムのプロパティ - 大きさタブ</span><a class="headerlink" href="#id55" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="placement">
<span id="diagram-placement"></span><h3><a class="toc-backref" href="#id123" role="doc-backlink"><span class="section-number">16.1.5.4. </span>配置</a><a class="headerlink" href="#placement" title="Link to this heading"></a></h3>
<p><span class="guilabel">配置</span> は、ダイアグラムの位置を定義します。レイヤのジオメトリタイプに応じて、配置のための様々なオプションがあります（詳細は <a class="reference internal" href="../style_library/label_settings.html#labels-placement"><span class="std std-ref">配置</span></a> を参照）：</p>
<ul class="simple">
<li><p>ポイントジオメトリに対しては、 <span class="guilabel">点の周り</span> または <span class="guilabel">点に重ねる</span> オプションがあります。前者には、守るべき距離の設定が必要です。</p></li>
<li><p>ラインジオメトリに対しては、 <span class="guilabel">線の周り</span> または <span class="guilabel">線に重ねる</span> オプションがあります。ポイント地物同様、一つ目のオプションには守るべき距離の設定が必要であり、地物に対するダイアグラムの配置を指定することができます（「線の上」、「線上」または「線の下」）。同時に複数のオプションを選択することが可能です。その場合、QGISはダイアグラムの最適な位置を探します。ダイアグラムの位置のために線の方向を利用することもできることを覚えておいてください。</p></li>
<li><p>ポリゴン地物には、（設定した <span class="guilabel">距離</span> 離れた） <span class="guilabel">重心の周り</span> 、 <span class="guilabel">重心に重ねる</span> 、 <span class="guilabel">周辺を利用</span> 、 <span class="guilabel">ポリゴンの内側</span> のオプションがあります。</p></li>
</ul>
<p><span class="guilabel">座標</span> グループでは、属性値や式を使用して <span class="guilabel">X</span> 、 <span class="guilabel">Y</span> 座標を設定することで、地物ごとの基準でダイアグラムの配置を直接制御することができます。この情報は <a class="reference internal" href="#label-toolbar"><span class="std std-ref">ラベル、ダイアグラムを移動</span></a> ツールを使用しても入力されます。</p>
<p><span class="guilabel">優先度</span> セクションでは、各ダイアグラムの配置優先度を定義することができます。すなわち、同じ場所に異なるダイアグラムやラベルの候補がある場合、優先度の高いアイテムが表示され、他のアイテムは省略されます。</p>
<p><span class="guilabel">ダイアログやラベルを地物と重ならないようにするか否かを示す式</span> は、地物を <a class="reference internal" href="../style_library/label_settings.html#labels-obstacles"><span class="std std-ref">障害物</span></a> として使用するかを定義します。すなわち、 QGIS は障害物として使用する地物上にラベルやダイアグラムが重ならないように配置しようとします。優先度はこの時に、より重みの大きな地物のためにダイアグラムが非表示となるかどうかを評価するために使用されます。</p>
<figure class="align-center" id="id56">
<span id="figure-diagrams-placement"></span><img alt="../../../_images/diagram_tab_placement.png" src="../../../_images/diagram_tab_placement.png" />
<figcaption>
<p><span class="caption-number">図 16.38 </span><span class="caption-text">ベクタプロパティダイアログのダイアグラムプロパティの配置タブ</span><a class="headerlink" href="#id56" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="options">
<span id="diagram-options"></span><h3><a class="toc-backref" href="#id124" role="doc-backlink"><span class="section-number">16.1.5.5. </span>オプション</a><a class="headerlink" href="#options" title="Link to this heading"></a></h3>
<p>ヒストグラムと積み上げ棒グラフには <span class="guilabel">オプション</span> タブに設定があります。水平あるいは垂直方向のダイアグラムについて、 <span class="guilabel">棒グラフの向き</span> を <span class="guilabel">上</span> 、 <span class="guilabel">下</span> 、 <span class="guilabel">右</span> 、 <span class="guilabel">左</span> から選択することができます。</p>
</section>
<section id="legend">
<span id="diagram-legend"></span><span id="index-23"></span><h3><a class="toc-backref" href="#id125" role="doc-backlink"><span class="section-number">16.1.5.6. </span>凡例</a><a class="headerlink" href="#legend" title="Link to this heading"></a></h3>
<p><span class="guilabel">凡例</span> タブでは、 <a class="reference internal" href="../introduction/general_tools.html#label-legend"><span class="std std-ref">レイヤパネル</span></a> や <a class="reference internal" href="../print_composer/composer_items/composer_legend.html#layout-legend-item"><span class="std std-ref">印刷レイアウトの凡例</span></a> 内に、レイヤのシンボロジに続けてダイアグラムのアイテムを表示するかを選択することができます。</p>
<ul class="simple">
<li><p><span class="guilabel">ダイアグラムの凡例を表示</span> にチェックを入れると、上の <span class="guilabel">属性</span> タブで設定した <code class="docutils literal notranslate"><span class="pre">色</span></code> と <code class="docutils literal notranslate"><span class="pre">凡例</span></code> プロパティを凡例内に表示します。</p></li>
<li><p>そして、ダイアグラムに <a class="reference internal" href="#diagram-size"><span class="std std-ref">可変サイズ</span></a> を使用している場合には、 <span class="guilabel">可変サイズダイアグラムの凡例...</span> ボタンを押すと、凡例内でのダイアグラムのシンボルの比率を設定できます。ボタンを押すと <span class="guilabel">データによるサイズ定義</span> ダイアログが開き、 <a class="reference internal" href="#data-defined-size-legend"><span class="std std-ref">データ定義による凡例サイズ</span></a> で説明したオプションがあります。</p></li>
</ul>
<p>設定が済んだら、レイヤシンボロジに続けてダイアグラムの凡例アイテム（属性名と色、ダイアグラムサイズ）も印刷レイアウトの凡例に表示されるようになります。</p>
</section>
</section>
<section id="masks-properties">
<span id="vector-mask-menu"></span><h2><a class="toc-backref" href="#id126" role="doc-backlink"><span class="section-number">16.1.6. </span>マスクプロパティ</a><a class="headerlink" href="#masks-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/labelmask.png"><img alt="labelmask" src="../../../_images/labelmask.png" style="width: 1.5em;" /></a> <span class="guilabel">マスク</span> タブでは、任意の他のシンボルレイヤやラベルと重なっている現在のレイヤのシンボルの設定ができます。これは、色が似ていて重なった場合に判読の難しいシンボルとラベルの読みやすさを向上させるためのものです。現在のレイヤのシンボルレイヤの一部を「隠す」ために、アイテムの周りにカスタムの透明なマスクを追加します。</p>
<p>アクティブレイヤにマスクを適用するには、まず初めにプロジェクトで <a class="reference internal" href="../style_library/symbol_selector.html#mask-marker-symbol"><span class="std std-ref">マスクシンボルレイヤ</span></a> または <a class="reference internal" href="../style_library/label_settings.html#labels-mask"><span class="std std-ref">マスクラベル</span></a> を有効にする必要があります。それから、 <span class="guilabel">マスク</span> タブにおいて以下の項目にチェックを入れます：</p>
<ul class="simple">
<li><p><span class="guilabel">マスクするシンボルレイヤ</span> ：現在のレイヤの全てのシンボルレイヤがツリー構造でリストされています。ここでは、選択したマスクソースと重なった場合に透過的に「切り抜き」たいシンボルレイヤのアイテムを選択することができます。</p></li>
<li><p><span class="guilabel">マスクソース</span> ：プロジェクト内で定義されている全てのマスクラベルとマスクシンボルがリストされています。選択したマスクするシンボルレイヤに対してマスクを生成したいアイテムを選択します。</p></li>
</ul>
<figure class="align-center" id="id57">
<span id="figure-mask-properties"></span><img alt="../../../_images/masks_properties.png" src="../../../_images/masks_properties.png" />
<figcaption>
<p><span class="caption-number">図 16.39 </span><span class="caption-text">レイヤプロパティ - マスクタブ</span><a class="headerlink" href="#id57" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="d-view-properties">
<span id="sec-3-d-view"></span><span id="index-24"></span><h2><a class="toc-backref" href="#id127" role="doc-backlink"><span class="section-number">16.1.7. </span>3Dビュープロパティ</a><a class="headerlink" href="#d-view-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/3d.png"><img alt="3d" src="../../../_images/3d.png" style="width: 1.5em;" /></a> <span class="guilabel">3Dビュー</span> タブでは、 <a class="reference internal" href="../map_views/3d_map_view.html#label-3dmapview"><span class="std std-ref">3Dマップビュー</span></a> ツールで描画されるベクタレイヤに対する設定ができます。</p>
<p>レイヤを3Dで表示するには、タブの上部にあるコンボボックスから以下のどちらかを選択します：</p>
<ul class="simple">
<li><p><span class="guilabel">単一定義</span> ：地物は共通の3Dシンボルを使用してレンダリングされます。プロパティは <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">データ定義</span></a> とすることもできます。レイヤの各ジオメトリタイプに対する詳細については、 <a class="reference internal" href="../style_library/3d_symbols.html#dsymbols"><span class="std std-ref">3Dシンボルの設定</span></a> を参照してください。</p></li>
<li><p><span class="guilabel">ルールによる定義</span> ：複数のシンボル設定を定義し、式フィルタや縮尺範囲に応じて選択的に適用することができます。使い方の詳細については、 <a class="reference internal" href="#rule-based-rendering"><span class="std std-ref">ルールベースのレンダリング</span></a> を参照してください。</p></li>
</ul>
<figure class="align-center" id="id58">
<span id="figure-3dview-properties"></span><img alt="../../../_images/3d_view_properties.png" src="../../../_images/3d_view_properties.png" />
<figcaption>
<p><span class="caption-number">図 16.40 </span><span class="caption-text">ポイントレイヤの3Dプロパティ</span><a class="headerlink" href="#id58" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p><strong>シンボルの標高と地形の設定</strong> は、<span class="guilabel">標高</span> タブが <strong>望ましい</strong></p>
<p><span class="guilabel">3Dビュー</span> タブにある地物の標高と高度に関連するプロパティ（<span class="guilabel">標高の制約</span>、 <span class="guilabel">標高の拘束</span>、 <span class="guilabel">押し出し</span> または <span class="guilabel">高さ</span>）は、レイヤの <a class="reference internal" href="#vectorelevationmenu"><span class="std std-ref">標高プロパティ</span></a> からデフォルト値を継承するので、 <span class="guilabel">標高</span> タブ内で設定することが望ましい。</p>
</div>
<p>パフォーマンス向上のため、ベクタレイヤからのデータはマルチスレッドを使ってバックグラウンドで読み込まれ、タイルでレンダリングされます。タイルのサイズはタブの <span class="guilabel">レイヤレンダリング</span> セクションで制御できます：</p>
<ul class="simple">
<li><p><span class="guilabel">ズームレベルカウント</span> ：四分木の深さを決定します。例えば、ズームレベル１は、レイヤ全体に対してただ一つのタイルがあることを意味します。ズームレベル３は、リーフレベルに16枚のタイルがあることを意味します（ズームレベルが増えるごとに4倍になります）。デフォルト値は <code class="docutils literal notranslate"><span class="pre">3</span></code> で、最大値は <code class="docutils literal notranslate"><span class="pre">8</span></code> です。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">タイルのバウンディングボックスを表示</span> ：表示されるべきタイルが表示されない問題がある場合に特に有用なオプションです。</p></li>
</ul>
</section>
<section id="fields-properties">
<span id="vector-fields-menu"></span><span id="index-25"></span><h2><a class="toc-backref" href="#id128" role="doc-backlink"><span class="section-number">16.1.8. </span>フィールドプロパティ</a><a class="headerlink" href="#fields-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/mSourceFields.png"><img alt="sourceFields" src="../../../_images/mSourceFields.png" style="width: 1.5em;" /></a> <span class="guilabel">フィールド</span> タブでは、レイヤに関連したフィールドの情報が表示され、それらを編集することもできます。</p>
<p>レイヤは <a class="reference internal" href="../../../_images/mActionToggleEditing.png"><img alt="toggleEditing" src="../../../_images/mActionToggleEditing.png" style="width: 1.5em;" /></a> <sup>編集モード切替</sup> ボタンを使用して <a class="reference internal" href="editing_geometry_attributes.html#editingvector"><span class="std std-ref">編集可能</span></a> にすることができます。編集モードでは、 <a class="reference internal" href="../../../_images/mActionNewAttribute.png"><img alt="newAttribute" src="../../../_images/mActionNewAttribute.png" style="width: 1.5em;" /></a> <sup>新規フィールド</sup> と <a class="reference internal" href="../../../_images/mActionDeleteAttribute.png"><img alt="deleteAttribute" src="../../../_images/mActionDeleteAttribute.png" style="width: 1.5em;" /></a> <sup>フィールド削除</sup> ボタンを使用して、フィールド構造を変更することができます。</p>
<p><a class="reference internal" href="../../../_images/mActionNewAttribute.png"><img alt="newAttribute" src="../../../_images/mActionNewAttribute.png" style="width: 1.5em;" /></a> <sup>新規フィールド</sup> を作成する場合、コメントの編集が可能なデータソースでのみ <span class="guilabel">コメント</span> オプションを使用できます（詳細は <a class="reference internal" href="../introduction/browser.html#database-entries"><span class="std std-ref">データベースエントリ</span></a> を参照）。また、サポートされているOGRフォーマット(GeoPackageとESRI File Geodatabase)については、<span class="guilabel">フィールドを追加</span> ダイアログ内でエイリアスを設定することができる。</p>
<figure class="align-center" id="id59">
<span id="figure-add-field"></span><img alt="../../../_images/add_field_comments_aliases.png" src="../../../_images/add_field_comments_aliases.png" />
<figcaption>
<p><span class="caption-number">図 16.41 </span><span class="caption-text">フィールドを追加ダイアログ</span><a class="headerlink" href="#id59" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>また、フィールド名をダブルクリックすることで名前の変更もできます。これは PostgreSQL、OracleやメモリレイヤおよびGDALのバージョンに依存した、一部のGDALレイヤでのみサポートされています。</p>
<p>データソースや <a class="reference internal" href="#configure-field"><span class="std std-ref">属性フォームプロパティ</span></a> の設定では、フィールドの別名も表示されます。別名とは、地物のフォームや属性テーブルに使用することができる、人間が読みやすいフィールド名のことです。別名はプロジェクト内に保存されます。</p>
<p>データセットに含まれているフィールドや <a class="reference internal" href="attribute_table.html#virtual-field"><span class="std std-ref">仮想フィールド</span></a> 、 <a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">補助テーブル</span></a> の他に、 <span class="guilabel">フィールド</span> タブには <a class="reference internal" href="joins_relations.html#sec-joins"><span class="std std-ref">結合したレイヤ</span></a> のフィールドもリストされます。フィールドにはその出典に応じて異なる背景色が適用されます。</p>
<p>リストされた各フィールドについて、 <span class="guilabel">データ型</span> 、 <span class="guilabel">タイプ名</span> 、 <span class="guilabel">長さ</span> や <span class="guilabel">精度`</span> といった読取専用の属性もダイアログに表示されます。</p>
<p>データプロバイダによっては、例えばフィールド作成時にコメントをフィールドに関連付けることができます。この情報は読み込まれて <span class="guilabel">コメント</span> 列に表示され、地物フォームでフィールドのラベルにカーソルを乗せた際に表示されます。</p>
<p><span class="guilabel">設定</span> 列では、特定の状況でのフィールドの振る舞いを設定できます：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Not</span> <span class="pre">searchable</span></code> ： <a class="reference internal" href="../introduction/qgis_gui.html#locator-bar"><span class="std std-ref">検索ロケータバー</span></a> による検索を行いたくない場合には、このオプションにチェックを入れます</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WMS経由で公開しない</span></code> ：QGISサーバーでWMSとしてこのレイヤを提供する場合に、このフィールドを表示したくない場合には、このオプションにチェックを入れます</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WFS経由で公開しない</span></code> ：QGISサーバーでWFSとしてこのレイヤを提供する場合に、このフィールドを表示したくない場合には、このオプションにチェックを入れます</p></li>
</ul>
<figure class="align-center" id="id60">
<span id="figure-fields-tab"></span><img alt="../../../_images/fields_properties.png" src="../../../_images/fields_properties.png" />
<figcaption>
<p><span class="caption-number">図 16.42 </span><span class="caption-text">属性プロパティタブ</span><a class="headerlink" href="#id60" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="attributes-form-properties">
<span id="vector-attributes-menu"></span><h2><a class="toc-backref" href="#id129" role="doc-backlink"><span class="section-number">16.1.9. </span>属性フォームプロパティ</a><a class="headerlink" href="#attributes-form-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/mActionFormView.png"><img alt="formView" src="../../../_images/mActionFormView.png" style="width: 1.2em;" /></a> <span class="guilabel">属性フォーム</span> タブでは、新しい地物を作成したときや既存の地物に対するクエリを行ったときに表示されるフォームの設定ができます。以下のものが定義できます：</p>
<ul class="simple">
<li><p>地物フォームや属性テーブルの各フィールドの見た目や動作（ラベル、ウィジェット、制約条件など）</p></li>
<li><p>フォームの構成（カスタムもしくは自動生成）</p></li>
<li><p>フォームやフィールドウィジェットとのインタラクションを処理するためのPythonによる追加ロジック</p></li>
</ul>
<p>ダイアログの右上では、新しい地物を作成する際にフォームがデフォルトで開くかどうかの設定ができます。この設定はレイヤ毎に設定することもできますし、 <span class="menuselection">設定 ► オプション ► デジタイズ</span> メニューの <span class="guilabel">地物作成後に属性フォームをポップアップさせない</span> オプションでグローバルに設定することもできます。</p>
<section id="customizing-a-form-for-your-data">
<span id="customize-form"></span><span id="index-26"></span><h3><a class="toc-backref" href="#id130" role="doc-backlink"><span class="section-number">16.1.9.1. </span>データに合わせてフォームをカスタマイズする</a><a class="headerlink" href="#customizing-a-form-for-your-data" title="Link to this heading"></a></h3>
<p>デフォルトでは、 <a class="reference internal" href="../../../_images/mActionIdentify.png"><img alt="identify" src="../../../_images/mActionIdentify.png" style="width: 1.5em;" /></a> <sup>地物情報表示</sup> ツールで地物をクリックするか属性テーブルを <em>フォーム表示</em> モードに切り替えると、QGISは定義済みのウィジェット（通常はスピンボックスやテキストボックスで、各フィールドは専用の行として表現され、ウィジェットの横にはラベルがついています）を持った基本的なフォームを表示します。レイヤに <a class="reference internal" href="joins_relations.html#vector-relations"><span class="std std-ref">テーブル結合</span></a> が設定されている場合には、参照しているレイヤのフィールドは同じ基本構造に従って、フォームの下部にある埋め込みフレームに表示されます。</p>
<p>この表現は <span class="menuselection">レイヤプロパティ ► 属性フォーム</span> タブの <span class="guilabel">属性レイアウトエディタ</span> の設定値をデフォルトの <code class="docutils literal notranslate"><span class="pre">自動生成</span></code> とした場合の結果です。このプロパティは3つの値をとります：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">自動生成</span></code> ：フォームは「1行に1フィールド」の基本構造を取りますが、対応する各ウィジェットはカスタマイズも可能です。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ドラッグ＆ドロップデザイナー</span></code> ：ウィジェットのカスタマイズのほかに、例えばウィジェットをグループやタブに埋め込むことによって、フォームの構造をより複雑にできます。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uiファイルを提供する</span></code> ：地物フォームとしてQt designerファイルを使用することで、より複雑で完全な機能を持ったテンプレートになります。</p></li>
</ul>
<section id="the-autogenerated-form">
<h4><a class="toc-backref" href="#id131" role="doc-backlink">自動生成フォーム</a><a class="headerlink" href="#the-autogenerated-form" title="Link to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">自動生成</span></code> オプションがオンになっている時は、 <span class="guilabel">利用可能なウィジェット</span> パネルには、フォームに表示されるフィールド（レイヤのものと結合レイヤのもの）がリスト表示されています。フィールドを選択して、右側パネルでウィジェットの見た目や振る舞いを設定できます：</p>
<ul class="simple">
<li><p>フィールドに <a class="reference internal" href="#configure-field"><span class="std std-ref">ラベルのカスタマイズや自動的なチェック</span></a> を追加</p></li>
<li><p><a class="reference internal" href="#edit-widgets"><span class="std std-ref">特定のウィジェット</span></a> を使用するように設定</p></li>
</ul>
</section>
<section id="the-drag-and-drop-designer">
<span id="drag-drop-designer"></span><h4><a class="toc-backref" href="#id132" role="doc-backlink">ドラッグ＆ドロップデザイナー</a><a class="headerlink" href="#the-drag-and-drop-designer" title="Link to this heading"></a></h4>
<p>ドラッグ＆ドロップデザイナーは、例として <a class="reference internal" href="#figure-fields-form"><span class="std std-numref">図 16.43</span></a> に示すように、属性フィールドを表現するためのさまざまなコンテナ（タブやグループ）や、特定のフィールドと直接にはリンクしていないその他のウィジェット（HTML/QMLウィジェットやレイヤに定義された <a class="reference internal" href="#actions-menu"><span class="std std-ref">アクション</span></a> 等）を持ったフォームを作成できます。</p>
<figure class="align-center" id="id61">
<span id="figure-fields-form"></span><img alt="../../../_images/resulting_feature_form.png" src="../../../_images/resulting_feature_form.png" />
<figcaption>
<p><span class="caption-number">図 16.43 </span><span class="caption-text">タブと名前付きグループを備えた組み込みフォームの作成結果</span><a class="headerlink" href="#id61" title="Link to this image"></a></p>
</figcaption>
</figure>
<ol class="arabic">
<li><p><span class="guilabel">属性レイアウトエディタの選択</span> コンボボックスから <code class="docutils literal notranslate"><span class="pre">ドラッグ＆ドロップデザイナー</span></code> を選択します。これにより <span class="guilabel">利用可能なウィジェット</span> パネルの隣に <span class="guilabel">フォームのレイアウト</span> パネルが利用できるようになります。パネルには既存のフィールドが表示されています。フィールドを選択すると、3つ目のパネルに <a class="reference internal" href="#configure-field"><span class="std std-ref">プロパティ</span></a> が表示されます。</p></li>
<li><p><span class="guilabel">フォームのレイアウト</span> パネルで使用したくないフィールドは、選択して <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="symbologyRemove" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> ボタンを押すことで削除できます。 <a class="reference internal" href="../../../_images/mActionInvertSelection.png"><img alt="invertSelection" src="../../../_images/mActionInvertSelection.png" style="width: 1.5em;" /></a> <sup>選択部分を反転する</sup> ボタンを押すと、選択・未選択状態を切り替えることもできます。</p></li>
<li><p>最初のパネルから <span class="guilabel">フォームのレイアウト</span> パネルにフィールドをドラッグ＆ドロップすることで、フィールドを再追加できます。同じフィールドを複数回追加することができます。</p></li>
<li><p><span class="guilabel">フォームのレイアウト</span> パネル内でフィールドをドラッグ＆ドロップすることで位置の並べ替えができます。</p></li>
<li><p>コンテナを追加して同じカテゴリに属するフィールドを関連付け、フォームの構造を改良します。</p>
<ol class="arabic">
<li><p>最初に <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>フォームレイアウトに新しいタブまたはグループを追加します</sup> アイコンを使います。フィールドや他のグループがその中に表示されます。</p></li>
<li><p>次に、以下のコンテナのプロパティを設定します：</p>
<ul class="simple">
<li><p><span class="guilabel">ラベル</span>: コンテナに使用されるタイトル</p></li>
<li><p><span class="guilabel">コンテナ型</span>: <span class="guilabel">タブ</span>、:guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>グループボックス`（タブや他のグループの中にある折りたたみ可能なグループボックス）、 :guilabel:<a href="#id3"><span class="problematic" id="id4">`</span></a>行`（ウィジェットを横一列に並べることができるコンテナ型で、ウィジェットの数に応じて列の数が自動的に決定される）のいずれか、</p></li>
<li><p><span class="guilabel">Within</span>: このオプション機能により、新しいコンテナ（<span class="guilabel">グループボックス</span> または <span class="guilabel">行</span>）を埋め込む既存のコンテナを選択することができます。</p></li>
<li><p>埋め込みフィールドを並べる <span class="guilabel">列の数</span></p></li>
</ul>
<figure class="align-center" id="id62">
<span id="figure-fields-layout"></span><img alt="../../../_images/attribute_editor_layout.png" src="../../../_images/attribute_editor_layout.png" />
<figcaption>
<p><span class="caption-number">図 16.44 </span><span class="caption-text"><strong>属性レイアウトエディタ</strong> のコンテナ作成ダイアログ</span><a class="headerlink" href="#id62" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>以下に挙げるものやその他のプロパティは、アイテムを選択して3つ目のパネルで後からでも更新が可能です：</p>
<ul class="simple">
<li><p>コンテナのラベルの表示・非表示</p></li>
<li><p>コンテナの名前の変更</p></li>
<li><p>カラムの数の設定</p></li>
<li><p>コンテナの表示を制御する式の入力。この式はフォームが変更されるたびに毎回再評価され、これに応じてタブやグループボックスが表示 / 非表示になります。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a><span class="guilabel">グループボックスとして表示</span>: タブをトップレベルのグループボックスに変換します</p></li>
<li><p>グループボックスの場合、フォームを開いたときに、すべての地物に対して <span class="guilabel">Collapsed</span> して表示するか、式にマッチする地物に対してのみ表示（<span class="guilabel">式によって折り畳みを制御</span>）するかを設定します。</p></li>
<li><p>コンテナの <span class="guilabel">スタイル</span> の外観を、カスタム <span class="guilabel">背景色</span>、ラベルの色、フォントのプロパティで設定します</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>フォームレイアウトに新しいタブまたはグループを追加します</sup> アイコンをもう一度押すと、好きなだけコンテナを作成し、埋め込むことができます。</p></li>
</ol>
</li>
<li><p>次のステップとして、単純なドラッグ・アンド・ドロップで、関連するフィールドを各コンテナに割り当てます。グループボックスやタブも同じ方法で移動できます。</p></li>
<li><p>使用するフィールドの <a class="reference internal" href="#configure-field"><span class="std std-ref">ウィジェットをカスタマイズ する</span></a></p></li>
<li><p>レイヤが <a class="reference internal" href="joins_relations.html#vector-relations"><span class="std std-ref">１対多または多対多関係</span></a> にある場合、 <span class="guilabel">利用可能なウィジェット</span> パネルから <span class="guilabel">フォームのレイアウト</span> パネルにリレーション名をドラッグ＆ドロップしてください。関連するレイヤの属性フォームが現在のレイヤのフォームの選択された場所に埋め込まれます。他のアイテムと同様、プロパティの設定を行うには、リレーションのラベルを選択します：</p>
<ul class="simple">
<li><p>リレーションのラベルの表示・非表示</p></li>
<li><p>リンクボタンの表示</p></li>
<li><p>リンク解除ボタンの表示</p></li>
</ul>
</li>
<li><p>レイヤが <code class="docutils literal notranslate"><span class="pre">レイヤ</span></code> や <code class="docutils literal notranslate"><span class="pre">地物</span></code> のスコープで有効な一つ以上の <a class="reference internal" href="#actions-menu"><span class="std std-ref">アクション</span></a> を持つ場合には、 <span class="guilabel">アクション</span> の下にアクションが表示され、その他のフィールドと同様にドラッグ＆ドロップできます。関連付けられたアクションは、現在のレイヤのフォームの指定した場所に埋め込まれます。</p></li>
<li><p>さらに <span class="guilabel">他のウィジェット</span> から一つ以上のウィジェットを追加してフォームをカスタマイズします（<a class="reference internal" href="#other-widgets"><span class="std std-ref">他のウィジェット</span></a> を参照）</p></li>
<li><p>レイヤのプロパティダイアログの適用ボタンを押します。</p></li>
<li><p>地物属性フォームを開く（例えば <a class="reference internal" href="../../../_images/mActionIdentify.png"><img alt="identify" src="../../../_images/mActionIdentify.png" style="width: 1.5em;" /></a> <sup>地物情報表示</sup> ツール）と、新しいフォームが表示されます。</p></li>
</ol>
<section id="other-widgets">
<span id="id12"></span><h5><a class="toc-backref" href="#id133" role="doc-backlink">他のウィジェット</a><a class="headerlink" href="#other-widgets" title="Link to this heading"></a></h5>
<p>ドラッグ＆ドロップデザイナーには、特定のフィールドに接続されないウィジェットが多数用意されています。これらはフォームの外観を向上させたり、動的に計算された値を表示するために使用できます。</p>
<ul>
<li><p><span class="guilabel">HTMLウィジェット</span>: HTMLページを埋め込みます。そのHTMLソースは、動的に計算された式の結果を含めることができます。</p>
<p>HTMLウィジェットは、例えばフィールド（ここでは <code class="docutils literal notranslate"><span class="pre">photo</span></code> と呼ぶ）にBLOBとして保存されている画像を表示するのに使うことができます:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">ドラッグ＆ドロップデザイナー</span></code> モードで、 <span class="guilabel">フォームレイアウト`</span> に <span class="guilabel">HTML ウィジェット`</span> を追加します。</p></li>
<li><p><span class="guilabel">HTMLウィジェット</span> をダブルクリックして設定します。</p></li>
<li><p>デフォルトの <span class="guilabel">タイトル</span> を変更するか、非表示にします。</p></li>
<li><p><a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> ボタンを押して次のQGIS式を入力します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;&lt;img src= &quot;data:image/png;base64,&#39;</span> <span class="o">||</span> <span class="n">to_base64</span><span class="p">(</span><span class="s2">&quot;photo&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&quot;&gt;&#39;</span>
</pre></div>
</div>
<p><em>photo</em> を自分のBLOBフィールド名に置き換えていることを確認します。上記の式は、BLOBファイルがエンコードされたHTML画像タグを持つ文字列を作成します。</p>
</li>
<li><p>ダイアログを適用し、<a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> ボタンを押します。</p></li>
<li><p>QGISは自動的にHTMLフォーマットと関数を適用して式を評価し、次のようなコードになります:</p>
<div class="highlight-HTML notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">expression</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="s2">&quot;&#39;&lt;img src=\&quot;data:image/png;base64,&#39; || to_base64(\&quot;photo\&quot;) || &#39;\&quot;&gt;&#39;&quot;</span><span class="p">));&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>右側に画像のプレビューが表示されます。</p>
</li>
</ol>
</li>
<li><p><span class="guilabel">QMLウィジェット</span>: QMLページを埋め込みます。そのQMLソースは動的に計算された式の結果を含めることができます。</p></li>
<li><p><span class="guilabel">テキストウィジェット</span>: 基本的なHTMLマークアップをサポートし、動的に計算された式の結果を含むことができるテキストウィジェットを表示します。</p></li>
<li><p><span class="guilabel">スペーサーウィジェット</span>: 空の透明な矩形を挿入し、2つのウィジェット間の縦方向の距離を広げます。</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>動的コンテンツを表示する</strong></p>
<p>上記のウィジェット（ <span class="guilabel">スペーサーウィジェット</span> を除く）は式をサポートしており、フォームの他のフィールドが変更されるたびに動的に変更されるコンテンツを表示するために使用できます。これは、式に <code class="docutils literal notranslate"><span class="pre">current_value('field_name')</span></code> 関数を使い、別のフィールドの値を調べることで実現できます。</p>
</div>
</section>
</section>
<section id="using-custom-ui-file">
<span id="provide-ui-file"></span><h4><a class="toc-backref" href="#id134" role="doc-backlink">カスタム uiファイルを使用する</a><a class="headerlink" href="#using-custom-ui-file" title="Link to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">uiファイルを提供する</span></code> オプションを使うと、 Qt デザイナーで作られた複雑なダイアログを使用できます。uiファイルを使用することで、ダイアログボックスの作成がかなり自由に行えます。なお、グラフィカルオブジェクト（テキストボックス、コンボボックス等）をレイヤのフィールドにリンクさせるためには、同じ名前を与える必要があるということに注意してください。</p>
<p><span class="guilabel">UIの編集</span> を使って、使用するファイルへのパスを定義します。</p>
<p>uiファイルはリモートサーバーでホストすることも可能です。この場合には、 <span class="guilabel">UIの編集</span> にはファイルパスではなく、フォームのURLを指定します。</p>
<p><a class="reference internal" href="../../training_manual/index.html#qgis-training-manual-index-reference"><span class="std std-ref">QGISトレーニングマニュアル</span></a> 内の <a class="reference internal" href="../../training_manual/create_vector_data/forms.html#creating-new-form"><span class="std std-ref">新しいフォームの作成</span></a> レッスンにいくつかの例があります。更なる詳細情報については、 <a class="reference external" href="https://woostuff.wordpress.com/2011/09/05/qgis-tips-custom-feature-forms-with-python-logic/">https://woostuff.wordpress.com/2011/09/05/qgis-tips-custom-feature-forms-with-python-logic/</a> を参照してください。</p>
</section>
<section id="enhance-your-form-with-custom-functions">
<span id="form-custom-functions"></span><h4><a class="toc-backref" href="#id135" role="doc-backlink">カスタム関数でフォームの機能を強化する</a><a class="headerlink" href="#enhance-your-form-with-custom-functions" title="Link to this heading"></a></h4>
<p>QGISのフォームには、ダイアログを開いたときに呼び出されるPythonの関数を持たせることができます。ダイアログに追加のロジックを加えるには、この関数を使用します。フォームのコードは3つの異なる方法で指定できます：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">環境変数から読み込む</span></code> ：例えば <code class="file docutils literal notranslate"><span class="pre">startup.py</span></code> 内の関数やインストールされたプラグインの関数を使用します</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">外部ファイルから読み込む</span></code> ：ファイルブラウザを使用してファイルシステムから Python ファイルを選択するか、リモートファイルのURLを入力します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">このダイアログでコードを入力</span></code> ：Pythonエディタが表示され、使用する関数を直接入力できます。</p></li>
</ul>
<p>すべての場合において、呼び出される関数の名前を入力する必要があります（下の例では <cite>open</cite> ）。</p>
<p>例（MyForms.pyモジュール）：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="n">dialog</span><span class="p">,</span><span class="n">layer</span><span class="p">,</span><span class="n">feature</span><span class="p">):</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="n">control</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">findChild</span><span class="p">(</span><span class="n">QWidget</span><span class="p">,</span><span class="s2">&quot;My line edit&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Pythonのinit関数での参照は <code class="docutils literal notranslate"><span class="pre">open</span></code> のようになります。</p>
</section>
</section>
<section id="configure-the-field-behavior">
<span id="configure-field"></span><span id="index-27"></span><h3><a class="toc-backref" href="#id136" role="doc-backlink"><span class="section-number">16.1.9.2. </span>フィールドの動作を設定する</a><a class="headerlink" href="#configure-the-field-behavior" title="Link to this heading"></a></h3>
<p><span class="guilabel">属性フォーム</span> タブのメイン部分では、地物テーブルや地物フォームにおいてフィールドの値の入力や表示に使用されるウィジェットのタイプを設定することができます。ユーザーが各フィールドをどのように操作するかを定義したり、各フィールドに入力できる値や範囲を定義することができます。</p>
<figure class="align-center" id="id63">
<span id="figure-fields-widget"></span><img alt="../../../_images/edit_widgets_dialog.png" src="../../../_images/edit_widgets_dialog.png" />
<figcaption>
<p><span class="caption-number">図 16.45 </span><span class="caption-text">属性カラムの編集ウィジェットを選択するためのダイアログ</span><a class="headerlink" href="#id63" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="common-settings">
<span id="index-28"></span><h4><a class="toc-backref" href="#id137" role="doc-backlink">共通設定</a><a class="headerlink" href="#common-settings" title="Link to this heading"></a></h4>
<p>フィールドに適用するウィジェットの種類に関係なく、フィールドの編集の可否や編集方法を制御するために設定できる共通のプロパティがあります。</p>
<section id="widget-display">
<h5><a class="toc-backref" href="#id138" role="doc-backlink">ウィジェットの表示</a><a class="headerlink" href="#widget-display" title="Link to this heading"></a></h5>
<p><a class="reference internal" href="#drag-drop-designer"><span class="std std-ref">ドラッグ＆ドロップ</span></a> デザイナーモードでのみ利用でき、このグループはフィールドに割り当てられたウィジェットの外観を設定するのに役立ちます:</p>
<ul class="simple">
<li><p><span class="guilabel">表示</span>: フィールド名をフォームに表示するかどうかを指定します</p></li>
<li><p><span class="guilabel">ラベルの色を上書き</span>: フィールドのラベルに特定の色を適用します</p></li>
<li><p><span class="guilabel">ラベルのフォントを上書き</span>: フィールドのラベルに特定のフォントプロパティ（太字、斜体、下線、取り消し線、フォントファミリー）を適用します</p></li>
<li><p><span class="guilabel">サイズ</span>: 属性フォームのサイズを変更するときに、ウィジェットがどのようにサイズを相対的に変更するかを制御します。</p>
<ul>
<li><p><span class="guilabel">水平方向の引き伸ばし</span>: より大きな水平スペースを必要とするウィジェットのために、より大きな水平値を設定します。</p></li>
<li><p><span class="guilabel">垂直方向の引き伸ばし</span>: フォームのサイズが変更された時に、ウィジェットがどのように垂直方向にサイズ変更するかを決定します。</p></li>
</ul>
</li>
</ul>
</section>
<section id="general-options">
<h5><a class="toc-backref" href="#id139" role="doc-backlink">一般情報</a><a class="headerlink" href="#general-options" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p><span class="guilabel">別名（Alias）</span> ：フィールドに使用する、人間が読みやすい名前です。この別名は、地物フォームや属性テーブル、 <span class="guilabel">地物情報</span> パネルに表示されます。また、これは <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">式文字列ビルダ</span></a> 内でのフィールド名の代わりとしても使用することができ、式の理解やレビューを用意にします。別名はプロジェクトファイル内に保存されます。</p></li>
<li><p><span class="guilabel">コメント</span> ： <span class="guilabel">フィールド</span> タブに表示されているフィールドのコメントを読み取り専用で表示します。この情報は地物フォームでフィールドのラベルにマウスカーソルを乗せた際のツールチップとして表示されます。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">編集可能</span>: このオプションのチェックを外すと、レイヤが編集モードであっても、フィールドは読み取り専用（手動で変更できない）に設定されます。この設定にチェックを入れても、プロバイダ側の編集制限は上書きされないことに注意してください。このオプションは <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>データ定義の上書き</sup> ボタンによって、データ定義のプロパティによって制御することができます。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">最後に入力した値を利用する</span> ：このフィールドに最後に入力された値を記憶しておき、レイヤ内で次の地物を編集するときのデフォルト値として入力します。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">ラベルを上に置く</span> ：地物フォームでフィールド名をウィジェットの上に置くか、横に置くかを設定します。</p></li>
</ul>
</section>
<section id="constraints">
<span id="id13"></span><h5><a class="toc-backref" href="#id140" role="doc-backlink">制約</a><a class="headerlink" href="#constraints" title="Link to this heading"></a></h5>
<p>フィールドに入力する値を制限することができます。この制約には、以下の設定ができます：</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">非null</span>: ユーザーが値を入力することを必須とします。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">ユニーク</span> ：入力された値がフィールド全体で一意であることを保証します。</p></li>
<li><p>カスタム <span class="guilabel">式</span> に基づく制約：例えば、 <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">regexp_match(col0,'[^A-Za-z]')</span></code> は、 <em>col0</em> フィールドの値にアルファベット文字しかないことを保証します。制約を覚えやすくするための短い説明文を追加することができます。</p></li>
</ul>
<p>フィールドに値が追加されたり編集されるたびに、既存の制約条件が検証され、</p>
<ul class="simple">
<li><p>すべての要件を満たしている場合は、フォームのフィールドの横に緑色のチェック印が表示されます。</p></li>
<li><p>要件をすべて満たすことができていない場合には、フィールドは黄色またはオレンジ色で表示され、同じ色のバツ印がウィジェットの横に表示されます。バツ印にマウスカーソルを乗せると、どの制約条件が適用されいているのかを確認できるので、以下に従って値を修正します：</p>
<ul>
<li><p>満たされていない制約が強制のものでないとき（「ソフトな制約」）の場合、黄色いバツ印が表示され、「間違った」値で変更を保存することを妨げません；</p></li>
<li><p>オレンジ色のバツ印は無視することができず、制約を満たすまで変更を保存することができません。これは <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">制約を強制</span> オプションがチェックされているときに表示されます（「ハードな制約」）。</p></li>
</ul>
</li>
</ul>
</section>
<section id="default-values">
<span id="id14"></span><h5><a class="toc-backref" href="#id141" role="doc-backlink">デフォルト値</a><a class="headerlink" href="#default-values" title="Link to this heading"></a></h5>
<ul>
<li><p><span class="guilabel">デフォルト値</span> ：新しい地物に対して、デフォルトでフィールドを定義済みの値または <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">式ベースの値</span></a> で自動的に入力します。例を挙げると、以下のような値を定義できます:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$x</span></code> や <code class="docutils literal notranslate"><span class="pre">$length</span></code> 、 <code class="docutils literal notranslate"><span class="pre">$area</span></code> を使用して、地物の作成時に地物のX座標や長さ、面積やその他の幾何学的情報を自動的にフィールドに入力します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maximum(&quot;field&quot;)+1</span></code> を使用して、新しい地物を作成するたびにフィールドに 1 を加算します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">now()</span></code> を使用して、地物の作成日時を保存します。</p></li>
<li><p>式の中で <a class="reference internal" href="../introduction/general_tools.html#general-tools-variables"><span class="std std-ref">変数</span></a> を使用すると、作業者の名前（ <code class="docutils literal notranslate"><span class="pre">&#64;user_full_name</span></code> ）やプロジェクトのファイルパス（ <code class="docutils literal notranslate"><span class="pre">&#64;project_path</span></code> ）などを簡単に挿入できるようになります。</p></li>
</ul>
<p>結果のデフォルト値のプレビューがウィジェットの下部に表示されます。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">デフォルト値</span></code> オプションは、作成される地物の他のフィールドの値を取得できないので、それらを組み合わせた式を使うことはできません。つまり、 <code class="docutils literal notranslate"><span class="pre">concat(field1,</span> <span class="pre">field2)</span></code> のような式は使えないということです。</p>
</div>
</li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">更新時にデフォルト値を適用する</span> ：地物の属性やジオメトリに変更があった場合に、デフォルト値が再計算されます。このオプションは、データを変更した最後のユーザーや、最後に変更された時間などの値を保存するのに便利です。</p></li>
</ul>
</section>
<section id="policies">
<span id="id15"></span><h5><a class="toc-backref" href="#id142" role="doc-backlink">ポリシー</a><a class="headerlink" href="#policies" title="Link to this heading"></a></h5>
<p><span class="guilabel">ポリシー</span> は <span class="guilabel">地物を分割した時</span> にフィールドにどのように値を割り当てるかを決めることができます:</p>
<ul class="simple">
<li><p><span class="guilabel">Duplicate Values</span>: Keeps the existing value of the field for the resulting split features.</p></li>
<li><p><span class="guilabel">Use Default Value</span>: Resets the field by recalculating its <a class="reference internal" href="#default-values"><span class="std std-ref">default value</span></a>.
If no default value clause exists, the existing value is kept for the resulting split features.</p></li>
<li><p><span class="guilabel">Remove Value</span>: Clears the field to an unset state.</p></li>
<li><p><span class="guilabel">Use Ratio Geometries</span>: Recalculates the field value for all split portions
by multiplying the existing value by ratio of the split parts lengths or areas.</p></li>
</ul>
</section>
</section>
<section id="edit-widgets">
<span id="id16"></span><h4><a class="toc-backref" href="#id143" role="doc-backlink">編集ウィジェット</a><a class="headerlink" href="#edit-widgets" title="Link to this heading"></a></h4>
<p>フィールドの型に基づき、QGISはデフォルトのウィジェットタイプを自動的に決定しフィールドに割り当てます。このウィジェットは、フィールドの型に適合する任意のウィジェットにユーザーが後から置き換えることが可能です。利用可能なウィジェットは以下のとおりです：</p>
<ul>
<li><p><strong>Binary (BLOB)</strong>: Available only for binary fields, it displays by default a label
with the size of the embedded data, if not empty.
A drop-down button next to the label allows to:</p>
<ul class="simple">
<li><p><span class="guilabel">Embed file</span>, replacing or filling the field</p></li>
<li><p><span class="guilabel">Clear contents</span>, removing any data in the field</p></li>
<li><p><span class="guilabel">Save contents to file</span>, exporting the data as a file on disk</p></li>
</ul>
<p>It is also possible to preview the embedded binary file in the field,
if combined in a drag-and-drop form with e.g. a <a class="reference internal" href="#other-widgets"><span class="std std-ref">QML or HTML widget</span></a>.</p>
</li>
<li><p><strong>チェックボックス</strong> ：チェックボックスを表示します。チェック状態で入力される値が決まります。</p></li>
<li><p><strong>分類</strong> ：レイヤに <a class="reference internal" href="#categorized-renderer"><span class="std std-ref">カテゴリ値シンボロジ</span></a> が適用されている場合にのみ利用でき、クラス値のコンボボックスを表示します。</p></li>
<li><p><strong>色</strong> ： <a class="reference internal" href="../introduction/general_tools.html#color-selector"><span class="std std-ref">カラーウィジェット</span></a> を表示し、色の選択ができます。色の値はhtml表記で属性テーブルに保存されます。</p></li>
<li><p><strong>日付/時刻</strong> ：日付、時刻、またはその両方を入力するためのカレンダーウィジェットを開くことができる行フィールドを表示します。カラムの型はテキストでなければなりません。カスタム表示形式やカレンダーのポップアップなどの設定を選択することができます。</p></li>
<li><p><strong>列挙</strong> ：データベースから取得された既定の値のコンボボックスを開きます。これは現在のところ、PostgreSQLプロバイダで <code class="docutils literal notranslate"><span class="pre">enum</span></code> 型のフィールドでのみサポートしています。</p></li>
<li><p><strong>アタッチメント</strong> ：「ファイルを開く」ダイアログを使用して、ファイルパスを相対パスまたは絶対パスで保存します。これは、ハイパーリンク（ドキュメントへのパス）や画像、ウェブページ等を表示するために使用します。また、リソースを取得・保存するための <a class="reference internal" href="attribute_table.html#external-storage"><span class="std std-ref">外部ストレージシステム</span></a> の設定もできます。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>アタッチメントウィジェットの相対パス</strong></p>
<p>ファイルブラウザで選択されたパスが <code class="file docutils literal notranslate"><span class="pre">.qgs</span></code> プロジェクトファイルと同じディレクトリかまたは下の階層に位置している場合、パスは相対パスに変換されます。これにより、 <code class="file docutils literal notranslate"><span class="pre">.qgs</span></code> プロジェクトにマルチメディア情報がアタッチメントされている場合の可搬性が向上します。</p>
</div>
</li>
<li><p><strong>非表示</strong> ：非表示の属性列は表示されません。ユーザーはフィールドの内容を見ることができません。</p></li>
<li><p><strong>キー/値</strong> 一つのフィールドにキー/値のペアのセットを保存するための2カラムのテーブルを表示します。これは現在のところ、PostgreSQLプロバイダで <code class="docutils literal notranslate"><span class="pre">hstore</span></code> 型のフィールドでのみサポートしています。</p></li>
<li><p><strong>JSON を閲覧</strong> ：シンタックスハイライトされたJSONデータをテキストエディタまたはツリービューで表示します。このウィジェットは現在のところ、読み取り専用です。データがどのように表示されるかを変更するオプションがいくつかあります。「デフォルト表示形式」は、ウィジェットがテキストモードで表示されるか、ツリーモードで表示されるかを指定します。「JSONのフォーマット」には、ツリービューのみに関係する以下の３つのオプションがあります：</p>
<ul class="simple">
<li><p>字下げ：改行と4文字のスペースによるインデントを使用して、データを人間が読みやすい形式で表示します。</p></li>
<li><p>コンパクト：改行や空白を含まない、サイズ最適化された１行の文字列でデータを表示します。</p></li>
<li><p>無効化：プロバイダからの形式どおりにデータを表示します。</p></li>
</ul>
</li>
<li><p><strong>リスト</strong> ：一つのフィールドに様々な値を追加できる1カラムのテーブルを表示します。これは現在のところ、PostgreSQLプロバイダで <code class="docutils literal notranslate"><span class="pre">array</span></code> 型のフィールドでのみサポートしています。</p></li>
<li><p><strong>範囲</strong> ：特定の範囲から数値を設定できます。編集ウィジェットにはスライダーやスピンボックスもあります。</p></li>
<li><p><strong>リレーションの参照</strong> ：これは、 <a class="reference internal" href="joins_relations.html#vector-relations"><span class="std std-ref">リレーション</span></a> が設定されている場合に参照フィールド（つまりは子レイヤの外部キー）に指定されたフィールドのデフォルトのウィジェットです。 これにより親地物のフォームへ直接アクセスすることができ、その逆に親地物には子地物のリストとフォームが埋め込まれます。</p></li>
<li><p><strong>テキスト編集</strong> （デフォルト）：これは単純なテキストまたはマルチラインを使用できるテキスト編集フィールドを開きます。マルチラインを選択した場合は、HTMLコンテンツを選択できます。</p></li>
<li><p><strong>ユニーク値</strong>：既に属性テーブルで使用されている値のいずれかを選択できます。「編集可能」が有効になっている場合、自動補完をサポートするラインエディットが表示されます。そうでない場合はコンボボックスが使用されます。</p></li>
<li><p><strong>Uuidジェネレータ</strong> ：値が空の場合には読み取り専用のUUID（Universally Unique Identifiers）フィールドを生成します。</p></li>
<li><p><strong>バリューマップ</strong> ：事前に定義されたアイテムを持ったコンボボックスです。値は属性に格納され、コンボボックスに説明が表示されます。値は手動で定義するか、またはレイヤやCSVファイルから読み込むことができます。</p></li>
<li><p><strong>値のリレーション</strong> ：関係テーブルの値をコンボボックスに表示します。レイヤ、キーカラム、値カラムを選択できます。標準的な動作を変更するために、NULL値の許可、値による並べ替え、複数選択の許可、オートコンプリートの使用といったオプションが利用可能です。オートコンプリートチェックボックスを有効にすると、フォームにはドロップダウンリストまたはラインエディットフィールドが表示されます。</p>
<p>レイヤがPostgreSQL、GeoPackageまたはSpatiaLite形式で保存されており、 「値のリレーション」ウィジェットを使用する設定となっているが、必要となるレイヤがプロジェクトにまだ読み込まれていない場合、QGISはそのレイヤを同じデータベース/接続から自動的に検索します。</p>
</li>
</ul>
</section>
</section>
</section>
<section id="joins-properties">
<span id="vector-joins"></span><span id="index-29"></span><h2><a class="toc-backref" href="#id144" role="doc-backlink"><span class="section-number">16.1.10. </span>テーブル結合プロパティ</a><a class="headerlink" href="#joins-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/join.png"><img alt="join" src="../../../_images/join.png" style="width: 2em;" /></a> <span class="guilabel">結合</span> タブでは、現在のレイヤの地物を、読み込まれた別のベクタレイヤ（またはテーブル）の地物に関連付けることができます。結合はレイヤ間で共有される属性に基づいて1対1の関係で行われます。結合の詳細については <a class="reference internal" href="joins_relations.html#sec-joins"><span class="std std-ref">二つのレイヤの地物を結合する</span></a> を参照してください。</p>
</section>
<section id="auxiliary-storage-properties">
<span id="vector-auxiliary-storage"></span><h2><a class="toc-backref" href="#id145" role="doc-backlink"><span class="section-number">16.1.11. </span>補助テーブルプロパティ</a><a class="headerlink" href="#auxiliary-storage-properties" title="Link to this heading"></a></h2>
<p>スタイルやラベルをカスタマイズするには、 <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">データによって定義された上書きの設定</span></a> で説明しているように、データによって定義されたプロパティを使用するのが一般的です。しかし、元となるデータが読み取り専用の場合には、これができない場合があります。さらに、データ定義のプロパティの設定では非常に時間がかかり、望ましくない場合さえもあります。例えば、 <a class="reference internal" href="#label-toolbar"><span class="std std-ref">ラベルツールバー</span></a> にあるマップツールを完全に使用したい場合には、元のデータソースに20以上のフィールド（X・Y位置、回転角度、フォント、色など）を追加して設定する必要があります。</p>
<p>補助テーブルのメカニズムは、これらの制限や扱いにくい設定に対する解決策です。補助フィールドは、これらのデータ定義のプロパティ（ラベル、ダイアグラム、シンボロジなど）を自動的に管理し、編集可能なテーブル結合によってSQLite データベース内に保存するための間接的な方法です。 これにより、編集可能ではないレイヤのプロパティを保存することができます。</p>
<p>ベクタレイヤプロパティダイアログには、補助テーブルを管理するためのタブがあります。</p>
<figure class="align-center" id="id64">
<img alt="../../../_images/auxiliary_storage_tab.png" src="../../../_images/auxiliary_storage_tab.png" />
<figcaption>
<p><span class="caption-number">図 16.46 </span><span class="caption-text">補助テーブルタブ</span><a class="headerlink" href="#id64" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="labeling">
<span id="vector-auxiliary-storage-key"></span><h3><a class="toc-backref" href="#id146" role="doc-backlink"><span class="section-number">16.1.11.1. </span>ラベル</a><a class="headerlink" href="#labeling" title="Link to this heading"></a></h3>
<p>編集可能でなくともデータソースはデータ定義のプロパティによってカスタマイズできることを考慮すると、 <a class="reference internal" href="#label-toolbar"><span class="std std-ref">ラベルツールバー</span></a> で説明しているラベリングマップツールは、ラベリングが有効になると同時に常に利用可能になります。</p>
<p>実際のところ、補助テーブルシステムはこれらのプロパティをSQLiteデータベース（ <a class="reference internal" href="#vector-auxiliary-storage-database"><span class="std std-ref">補助テーブルのデータベース</span></a> 参照）に保存するための補助レイヤが必要です。ラベリングマップツールがアクティブになっている状態で初めてマップをクリックしたときに、補助レイヤの作成プロセスが実行されます。このときウィンドウが表示され、結合に使用する主キーを選択します（地物が一意に識別されることを保証するため）。</p>
<figure class="align-center" id="id65">
<span id="figure-auxiliary-layer-creation"></span><img alt="../../../_images/auxiliary_storage_key.png" src="../../../_images/auxiliary_storage_key.png" />
<figcaption>
<p><span class="caption-number">図 16.47 </span><span class="caption-text">補助レイヤの作成ダイアログ</span><a class="headerlink" href="#id65" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>現在のデータソースに補助レイヤが設定されると、補助テーブルタブでその情報を検索することができます：</p>
<figure class="align-center" id="id66">
<img alt="../../../_images/auxiliary_storage_tabkey.png" src="../../../_images/auxiliary_storage_tabkey.png" />
<figcaption>
<p><span class="caption-number">図 16.48 </span><span class="caption-text">補助レイヤのキー</span><a class="headerlink" href="#id66" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>補助レイヤには次のような特徴があります：</p>
<ul class="simple">
<li><p>主キーは <code class="docutils literal notranslate"><span class="pre">ID</span></code></p></li>
<li><p>補助属性を使用した <code class="docutils literal notranslate"><span class="pre">0</span></code> 個の地物がある</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> 個の補助属性がある</p></li>
</ul>
<p>補助レイヤが作成されたので、レイヤのラベルを編集することができます。 <a class="reference internal" href="../../../_images/mActionChangeLabelProperties.png"><img alt="changeLabelProperties" src="../../../_images/mActionChangeLabelProperties.png" style="width: 1.5em;" /></a> <sup>ラベル属性の変更</sup> マップツールが有効な状態でラベルをクリックすると、サイズや色などのスタイリングプロパティを更新することができます。これに対応したデータ定義のプロパティが作成され、この情報は検索することができます。</p>
<figure class="align-center" id="id67">
<img alt="../../../_images/auxiliary_storage_fields.png" src="../../../_images/auxiliary_storage_fields.png" />
<figcaption>
<p><span class="caption-number">図 16.49 </span><span class="caption-text">補助属性</span><a class="headerlink" href="#id67" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>上図でわかるように、 <code class="docutils literal notranslate"><span class="pre">21</span></code> 個の属性が自動的に作成され、ラベリング用に設定されています。例えば、 <code class="docutils literal notranslate"><span class="pre">FontStyle</span></code> 補助属性の型は <code class="docutils literal notranslate"><span class="pre">String</span></code> であり、元のSQLite データベース内では <code class="docutils literal notranslate"><span class="pre">labeling_fontstyle</span></code> という名前が付けられています。これらの補助属性を使用している地物が <code class="docutils literal notranslate"><span class="pre">1</span></code> つあることもわかります。</p>
<p><span class="guilabel">ラベル</span> プロパティタブ内で <a class="reference internal" href="../../../_images/mIconDataDefineOn.png"><img alt="dataDefineOn" src="../../../_images/mIconDataDefineOn.png" style="width: 1.5em;" /></a> アイコンが表示されていることに注目してください。これは、データ定義の上書きオプションが正しく設定されていることを示しています。</p>
<figure class="align-center" id="id68">
<img alt="../../../_images/auxiliary_storage_dd.png" src="../../../_images/auxiliary_storage_dd.png" />
<figcaption>
<p><span class="caption-number">図 16.50 </span><span class="caption-text">データ定義のプロパティの自動生成</span><a class="headerlink" href="#id68" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>この方法の他に、 <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>データによって定義された上書き</sup> ボタンを使用して特定のプロパティのための補助属性を作成する方法もあります。 <span class="guilabel">データをプロジェクトに格納する</span> をクリックすると、例えば <span class="guilabel">不透明度</span> フィールド用の補助属性が自動的に作成されます。補助レイヤがまだ作成されていない状態でこのボタンをクリックすると、まずは結合に使用する主キーを選択するためのウィンドウ（ <a class="reference internal" href="#figure-auxiliary-layer-creation"><span class="std std-numref">図 16.47</span></a> ）が表示されます。</p>
</section>
<section id="symbology">
<h3><a class="toc-backref" href="#id147" role="doc-backlink"><span class="section-number">16.1.11.2. </span>シンボロジ</a><a class="headerlink" href="#symbology" title="Link to this heading"></a></h3>
<p>上で述べたラベルのカスタマイズ方法と同じように、補助属性を使ってシンボルやダイアグラムのスタイル設定ができます。これを行うには、 <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>データによって定義された上書き</sup> をクリックして、特定のプロパティに対して <span class="guilabel">データをプロジェクトに格納する</span> を選択します。例えば、 <span class="guilabel">塗りつぶし色</span> 属性の場合には以下の図のようになります。</p>
<figure class="align-center" id="id69">
<img alt="../../../_images/auxiliary_storage_symbol.png" src="../../../_images/auxiliary_storage_symbol.png" />
<figcaption>
<p><span class="caption-number">図 16.51 </span><span class="caption-text">シンボルに対するデータ定義のプロパティのメニュー</span><a class="headerlink" href="#id69" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>各シンボルにはさまざま属性（塗りつぶしスタイル、塗りつぶし色、ストローク色など）があるため、属性を表現する各補助属性には名前の衝突を避けるためにユニークな名前が必要です。 <span class="guilabel">データをプロジェクトに格納する</span> を選択すると、ウィンドウが開き属性の <span class="guilabel">型</span> が表示され、補助属性のユニークな名前を入力するよう求められます。例えば <span class="guilabel">塗りつぶし色</span> の補助属性を作成すると、次のようなウィンドウが開きます。</p>
<figure class="align-center" id="id70">
<img alt="../../../_images/auxiliary_storage_symbol_name.png" src="../../../_images/auxiliary_storage_symbol_name.png" />
<figcaption>
<p><span class="caption-number">図 16.52 </span><span class="caption-text">シンボルの補助属性の名前</span><a class="headerlink" href="#id70" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>作成できたら、この補助属性は補助テーブルタブから検索することが可能になります。</p>
<figure class="align-center" id="id71">
<img alt="../../../_images/auxiliary_storage_symbol_field.png" src="../../../_images/auxiliary_storage_symbol_field.png" />
<figcaption>
<p><span class="caption-number">図 16.53 </span><span class="caption-text">シンボルの補助属性</span><a class="headerlink" href="#id71" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="attribute-table-and-widgets">
<h3><a class="toc-backref" href="#id148" role="doc-backlink"><span class="section-number">16.1.11.3. </span>属性テーブルとウィジェット</a><a class="headerlink" href="#attribute-table-and-widgets" title="Link to this heading"></a></h3>
<p>補助属性は <a class="reference internal" href="attribute_table.html#sec-attribute-table"><span class="std std-ref">属性テーブル</span></a> を使用して編集することができます。ただし、全ての補助属性が最初から属性テーブルに表示されているわけではありません。</p>
<p>補助属性のうち、レイヤのシンボロジやラベリング、表示方法やダイアグラムなどの属性を表現するものは、自動的に属性テーブルに表示されます。例外は <a class="reference internal" href="#label-toolbar"><span class="std std-ref">ラベルツールバー</span></a> を使用して修正可能な属性で、これはデフォルトでは非表示となっています。 <code class="docutils literal notranslate"><span class="pre">色</span></code> を表す補助属性には <strong>色</strong> ウィジェットがデフォルトで設定され、これ以外の補助属性のデフォルトは <strong>テキスト編集</strong> ウィジェットです。</p>
<p><a class="reference internal" href="#label-toolbar"><span class="std std-ref">ラベルツールバー</span></a> を使用して修正可能な補助属性は、属性テーブルではデフォルトで <strong>非表示</strong> になっています。属性を表示するためには <a class="reference internal" href="#vector-attributes-menu"><span class="std std-ref">属性フォームプロパティタブ</span></a> を開き、補助属性の <span class="guilabel">ウィジェットタイプ</span> の値を <strong>非表示</strong> から他の関連する値に変更します。例えば、 <strong>auxiliary_storage_labeling_size</strong> を <strong>テキスト編集</strong> ウィジェットへと変更したり、 <strong>auxiliary_storage_labeling_color</strong> を <strong>色</strong> ウィジェットに変更したりする等です。そうすると、これらの属性は属性テーブルに表示されるようになります。</p>
<p>属性テーブル内での補助属性は以下の画像のように表示されます。</p>
<figure class="align-center" id="id72">
<img alt="../../../_images/auxiliary_storage_widgets.png" src="../../../_images/auxiliary_storage_widgets.png" />
<figcaption>
<p><span class="caption-number">図 16.54 </span><span class="caption-text">補助属性のフォーム</span><a class="headerlink" href="#id72" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="management">
<h3><a class="toc-backref" href="#id149" role="doc-backlink"><span class="section-number">16.1.11.4. </span>管理</a><a class="headerlink" href="#management" title="Link to this heading"></a></h3>
<p><span class="guilabel">補助テーブル</span> メニューでは、補助属性の管理ができます。</p>
<figure class="align-center" id="id73">
<img alt="../../../_images/auxiliary_storage_actions.png" src="../../../_images/auxiliary_storage_actions.png" />
<figcaption>
<p><span class="caption-number">図 16.55 </span><span class="caption-text">補助テーブルの管理</span><a class="headerlink" href="#id73" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>最初のアイテム <span class="guilabel">作成する</span> は、補助テーブルがすでに作成されているため、この画像では無効化されています。新たな作業の場合は、このアクションを使って補助テーブルを作成することができます。 <a class="reference internal" href="#vector-auxiliary-storage-key"><span class="std std-ref">ラベル</span></a> で説明しているように、この時には主キーが必要です。</p>
<p><span class="guilabel">クリア</span> アクションは、全ての補助属性を残しますが、その値を削除します。これにより、これらの属性を使用している地物の数は <code class="docutils literal notranslate"><span class="pre">0</span></code> になります。</p>
<p><span class="guilabel">削除</span> アクションは補助テーブルを完全に削除します。言い換えると、対応するテーブルは元のSQLiteデータベースから削除され、プロパティのカスタム設定が失われます。</p>
<p>最後の <span class="guilabel">エクスポート</span> アクションでは、補助テーブルを <a class="reference internal" href="../managing_data_source/create_layers.html#general-saveas"><span class="std std-ref">新しいベクタレイヤ</span></a> として保存できます。ジオメトリは補助テーブルには保存されていないことに注意してください。ただし、この時にジオメトリをもとのデータソースから一緒にエクスポートすることはできます。</p>
</section>
<section id="auxiliary-storage-database">
<span id="vector-auxiliary-storage-database"></span><h3><a class="toc-backref" href="#id150" role="doc-backlink"><span class="section-number">16.1.11.5. </span>補助テーブルのデータベース</a><a class="headerlink" href="#auxiliary-storage-database" title="Link to this heading"></a></h3>
<p>プロジェクトを <code class="docutils literal notranslate"><span class="pre">.qgs</span></code> 形式で保存する場合には、補助テーブルに使用しているSQLite データベースはプロジェクトと同じ場所に拡張子 <code class="docutils literal notranslate"><span class="pre">.qgd</span></code> で保存されます。</p>
<p>この代わりに <code class="docutils literal notranslate"><span class="pre">.qgz</span></code> 形式によるアーカイブを使用するのが利便性のためには良いでしょう。この場合には <code class="docutils literal notranslate"><span class="pre">.qgd</span></code> ファイルと  <code class="docutils literal notranslate"><span class="pre">.qgs</span></code> ファイルは両方ともアーカイブ内に埋め込まれます。</p>
</section>
</section>
<section id="actions-properties">
<span id="actions-menu"></span><span id="index-30"></span><h2><a class="toc-backref" href="#id151" role="doc-backlink"><span class="section-number">16.1.12. </span>アクションプロパティ</a><a class="headerlink" href="#actions-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/action.png"><img alt="action" src="../../../_images/action.png" style="width: 2em;" /></a> <span class="guilabel">アクション</span> タブは、地物の属性に基づいてアクションを実行する機能を提供します。この機能を使って、例えば、地物の属性から作成した引数でプログラムを実行したり、Webレポートツールにパラメータを渡したりなど、いくつでもアクションを実行することができます。</p>
<figure class="align-center" id="id74">
<span id="figure-actions"></span><img alt="../../../_images/action_dialog.png" src="../../../_images/action_dialog.png" />
<figcaption>
<p><span class="caption-number">図 16.56 </span><span class="caption-text">いくつかのサンプルアクションを含むアクションダイアログの概要</span><a class="headerlink" href="#id74" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>アクションが便利なのは、頻繁に外部のアプリケーションを実行したり、ベクタレイヤの1つ以上の値に基づいてウェブページを表示したりする場合です。それらには様々な種類があり、次のように使うことができます:</p>
<ul>
<li><p><span class="guilabel">一般</span>、 <span class="guilabel">macOS</span>、 <span class="guilabel">Windows</span>、 <span class="guilabel">Unix</span> アクションは外部プロセスを開始します。</p></li>
<li><p><span class="guilabel">Python</span> アクションはPythonコードを実行します。</p></li>
<li><p><span class="guilabel">一般</span> と <span class="guilabel">Python</span> アクションは、どのプラットフォームでも表示されます。</p></li>
<li><p><span class="guilabel">macOS</span>、<span class="guilabel">Windows</span>、<span class="guilabel">Unix</span> アクションは、それぞれのプラットフォーム上だけに表示されます（つまり、エディタを開くための「編集」アクションは3つ定義することができ、ユーザーはプラットフォームに応じたただ1つの「編集」アクションのみが表示され、そのアクションを実行してエディタを開きます） 。</p></li>
<li><p><span class="guilabel">URLを開く</span>: 与えられたURLを開くHTTP GETリクエストを使います。</p></li>
<li><p><span class="guilabel">URL送信 (urlencoded/JSON)</span>： <span class="guilabel">URLを開く</span> アクションと同じですが、HTTP POSTリクエストを使います。データは、&quot;application/x-www-form-urlencoded&quot;、またはボディが有効なJSONの場合は &quot;application/json &quot;を使って、URLにポストされます。</p>
<p>アクションの呼び出しの例は次のようなものになります:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8000?/[% url_encode(map(&#39;file&#39;, &#39;index.php&#39;)) %]
</pre></div>
</div>
</li>
<li><p><span class="guilabel">URL送信 (multipart)</span>：<span class="guilabel">URLを開く</span> アクションと同じですが、HTTP POSTリクエストを使います。データは&quot;multipart/form-data&quot;を使ってURLに投稿されます。</p></li>
</ul>
<p>ダイアログにはいくつかの例が含まれています。 <span class="guilabel">デフォルトアクションを作成</span> ボタンをクリックするとそれらを読み込むことができます。例のどれかを編集するには、行をダブルクリックします。例の一つに属性値に基づいた検索の実行があります。これは以下の議論で使用します。</p>
<p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">属性テーブルに表示</span> にチェックを入れると、地物スコープにチェックの入ったアクションを <span class="guilabel">コンボボックス</span> または <span class="guilabel">別々のボタン</span> として属性テーブルダイアログ内に表示させることができます（ <a class="reference internal" href="attribute_table.html#configure-table-columns"><span class="std std-ref">列の設定</span></a> を参照）。</p>
<section id="defining-actions">
<span id="adding-actions"></span><span id="index-31"></span><h3><a class="toc-backref" href="#id152" role="doc-backlink"><span class="section-number">16.1.12.1. </span>アクションの定義</a><a class="headerlink" href="#defining-actions" title="Link to this heading"></a></h3>
<p>属性のアクションを定義するには、ベクタ <span class="guilabel">レイヤプロパティ</span> ダイアログを開いて <span class="guilabel">アクション</span> タブをクリックしてください。 <span class="guilabel">アクション</span> タブ内で <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>アクションを追加</sup> をクリックすると、 <span class="guilabel">アクションの編集</span> ダイアログが開きます。</p>
<p>アクションの <span class="guilabel">型</span> を選択し、アクションにわかりやすい名前を与えます。アクション自体には、アクションが呼び出されたときに実行されるアプリケーションの名前が含まれている必要があります。アプリケーションへの引数として、1つ以上の属性フィールドの値を追加できます。アクションが呼び出されると、 <code class="docutils literal notranslate"><span class="pre">%</span></code> で始まるフィールド名の文字列は、そのフィールドの値に置き換えられます。特別な文字列 <code class="docutils literal notranslate"><span class="pre">%%</span></code> は、地物情報表示結果や属性テーブルから選択されたフィールドの値に置き換えられます（<a class="reference internal" href="#using-actions"><span class="std std-ref">アクションを使用する</span></a> を参照）。二重引用符は、テキストをプログラムやスクリプト、コマンドの単一引数にまとめるために使用することができます。バックスラッシュが前置された二重引用符は無視されます。</p>
<p>Actions can invoke a single process, with arguments, so Boolean operators (such as <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">;</span></code>, <code class="docutils literal notranslate"><span class="pre">|</span></code>) will not work.
In UNIX-like operating systems multiple commands can be executed via <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">-c</span></code>.</p>
<p>アクションの <span class="guilabel">スコープ</span> では、どこでアクションが有効となるかを定義することができます。次の選択肢があります：</p>
<ol class="arabic simple">
<li><p><span class="guilabel">フィールド</span> ：アクションは属性テーブル内のセルで右クリックした場合や地物フォーム内、あるいはメインツールバーのデフォルトアクションボタンで利用可能です。</p></li>
<li><p><span class="guilabel">地物</span> ：アクションは属性テーブル内のセルで右クリックした場合に利用可能です。</p></li>
<li><p><span class="guilabel">キャンバス</span> ：アクションはツールバーのメインアクションボタンで利用可能です。</p></li>
<li><p><span class="guilabel">フォーム</span>: アクションは <a class="reference internal" href="#drag-drop-designer"><span class="std std-ref">ドラッグ＆ドロップ</span></a> モードを使用してデザインされた地物フォームでのみ利用可能です。</p></li>
<li><p><span class="guilabel">レイヤ</span> ：アクションは属性テーブルのツールバー内のアクションボタンで利用可能です。この型のアクションは、単一の地物ではなくレイヤ全体を対象としていることに注意してください。</p></li>
</ol>
<p>フィールド名が他のフィールド名の部分文字列である場合（例えば <code class="docutils literal notranslate"><span class="pre">col1</span></code> と <code class="docutils literal notranslate"><span class="pre">col10</span></code> ）、フィールド名（と % 文字）を角括弧で囲むことで示す必要があります（例えば <code class="docutils literal notranslate"><span class="pre">[%col10]</span></code> ）。 こうすることで <code class="docutils literal notranslate"><span class="pre">%col10</span></code> フィールド名が、末尾に <code class="docutils literal notranslate"><span class="pre">0</span></code> がある <code class="docutils literal notranslate"><span class="pre">%col1</span></code> フィールド名と間違えることを防げます。角括弧はQGISがフィールドの値を代入する際に除去されます。置換されたフィールドを角括弧で囲みたい場合は、次のように2つ目の組を使用します： <code class="docutils literal notranslate"><span class="pre">[[%col10]]</span></code></p>
<p><span class="guilabel">地物情報表示</span> ツールを使用すると、 <span class="guilabel">地物情報</span> ダイアログを開くことができます。これには、レイヤのタイプに関連した情報が含まれる <em>（派生した属性）</em> アイテムを含みます。このアイテムの値は派生したフィールド名の頭に <code class="docutils literal notranslate"><span class="pre">(Derived).</span></code> を付けることで、他のフィールドと同じ方法でアクセスできます。例えばポイントレイヤには <code class="docutils literal notranslate"><span class="pre">X</span></code> と <code class="docutils literal notranslate"><span class="pre">Y</span></code> というフィールドがあり、これらのフィールドの値はアクション内で、 <code class="docutils literal notranslate"><span class="pre">%(Derived).X</span></code> と <code class="docutils literal notranslate"><span class="pre">%(Derived).Y</span></code> で使用できます。派生した属性は <span class="guilabel">地物情報</span> ダイアログボックスからのみ利用可能で、 <span class="guilabel">属性テーブル</span> ダイアログボックスからは利用できません。</p>
<p id="index-32">以下に2つのアクション例を示します：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">konqueror</span> <span class="pre">https://www.google.com/search?q=%nam</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">konqueror</span> <span class="pre">https://www.google.com/search?q=%%</span></code></p></li>
</ul>
<p>最初の例では、ウェブブラウザ konqueror を起動して開くべきURLを渡しています。このURLは、ベクタレイヤの <code class="docutils literal notranslate"><span class="pre">nam</span></code> フィールドの値のGoogle検索を実行します。アクションによって呼び出されるアプリケーションやスクリプトはパスが通っているか、もしくはフルパスで指定する必要があることに注意してください。念のため、最初の例を次のように書き換えてみましょう： <code class="docutils literal notranslate"><span class="pre">/opt/kde3/bin/konqueror</span> <span class="pre">https://www.google.com/search?q=%nam</span></code> 。これにより、アクションが呼ばれたときには konqueror アプリケーションが確実に実行されるようになります。</p>
<p>2つ目の例では %% 表記を使用しています。この値は特定のフィールドに依存しません。アクションが呼び出されると、 %% は地物情報や属性テーブルの選択したフィールドの値に置き換えられます。</p>
</section>
<section id="using-actions">
<span id="index-33"></span><span id="id17"></span><h3><a class="toc-backref" href="#id153" role="doc-backlink"><span class="section-number">16.1.12.2. </span>アクションを使用する</a><a class="headerlink" href="#using-actions" title="Link to this heading"></a></h3>
<p>QGISには、レイヤに対して有効にしたアクションを実行するための多数の方法があります。設定に応じて、次のような方法が利用できます：</p>
<ul class="simple">
<li><p><span class="guilabel">属性ツールバー</span> や <span class="guilabel">属性テーブル</span> ダイアログの <a class="reference internal" href="../../../_images/mAction.png"><img alt="actionRun" src="../../../_images/mAction.png" style="width: 1.5em;" /></a> <sup>地物アクションの実行</sup> ボタンのドロップダウンメニュー</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionIdentify.png"><img alt="identify" src="../../../_images/mActionIdentify.png" style="width: 1.5em;" /></a> <sup>地物情報表示</sup> ツールで地物を右クリック（更なる情報は <a class="reference internal" href="../introduction/general_tools.html#identify"><span class="std std-ref">地物の識別</span></a> 参照）</p></li>
<li><p><span class="guilabel">地物情報</span> パネルの <span class="guilabel">アクション</span> セクション</p></li>
<li><p><span class="guilabel">属性テーブル</span> ダイアログ内の <span class="guilabel">アクション</span> 列のアイテム</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">%%</span></code> 表記を使用するアクションを起動する場合には、 <span class="guilabel">地物情報</span> ダイアログや <span class="guilabel">属性テーブル</span> ダイアログ内で、アプリケーションやスクリプトに渡したいフィールド値を右クリックしてください。</p>
<p>ここでは、bash と <code class="docutils literal notranslate"><span class="pre">echo</span></code> コマンドを使って、ベクタレイヤからデータを取り出してファイルに挿入する別の例を紹介します（従って <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a> またはおそらく <a class="reference internal" href="../../../_images/osx.png"><img alt="osx" src="../../../_images/osx.png" style="width: 1em;" /></a> でしか動作しません）。本件のレイヤには、種名 <code class="docutils literal notranslate"><span class="pre">taxon_name</span></code> 、緯度 <code class="docutils literal notranslate"><span class="pre">lat</span></code> 、経度 <code class="docutils literal notranslate"><span class="pre">long</span></code> のフィールドがあります。ここでは、地域を空間的に選択すると、（QGISマップエリアで黄色に表示されている）選択されたレコードのフィールド値をテキストファイルにエクスポートできるようにしたいと思います。これを達成するためのアクションは次のとおりです。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;echo </span><span class="se">\&quot;</span><span class="s2">%taxon_name </span><span class="si">%la</span><span class="s2">t </span><span class="si">%lo</span><span class="s2">ng</span><span class="se">\&quot;</span><span class="s2"> &gt;&gt; /tmp/species_localities.txt&quot;</span>
</pre></div>
</div>
<p>いくつかの地域を選択してそれぞれでアクションを実行し、出力ファイルを開くと、以下のようなものが表示されます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Acacia</span> <span class="n">mearnsii</span> <span class="o">-</span><span class="mf">34.0800000000</span> <span class="mf">150.0800000000</span>
<span class="n">Acacia</span> <span class="n">mearnsii</span> <span class="o">-</span><span class="mf">34.9000000000</span> <span class="mf">150.1200000000</span>
<span class="n">Acacia</span> <span class="n">mearnsii</span> <span class="o">-</span><span class="mf">35.2200000000</span> <span class="mf">149.9300000000</span>
<span class="n">Acacia</span> <span class="n">mearnsii</span> <span class="o">-</span><span class="mf">32.2700000000</span> <span class="mf">150.4100000000</span>
</pre></div>
</div>
<p>練習問題として、 <code class="docutils literal notranslate"><span class="pre">lakes</span></code> レイヤでGoogle検索を実行するアクションを作成してみましょう。まずは、あるキーワードで検索を実行するために必要なURLを見つけ出す必要があります。これは、Googleにアクセスして簡単な検索を行い、ブラウザのアドレスバーからURLを取得するだけで簡単にできます。少しの手間で、 <code class="docutils literal notranslate"><span class="pre">QGIS</span></code> が検索語のときにはURLの形式は <a class="reference external" href="https://www.google.com/search?q=QGIS">https://www.google.com/search?q=QGIS</a> であることがわかりました。この情報をもとに次へと進みましょう。</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">lakes</span></code> レイヤが読み込まれていることを確認してください。</p></li>
<li><p>凡例内のレイヤをダブルクリックして <span class="guilabel">レイヤプロパティ</span> ダイアログを開くか、またはレイヤを右クリックしてポップアップメニューから <span class="menuselection">プロパティ</span> を選択します。</p></li>
<li><p><span class="guilabel">アクション</span> タブをクリックします。</p></li>
<li><p><a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>アクションを追加</sup> ボタンをクリックします。</p></li>
<li><p>アクション型に <span class="guilabel">URLを開く</span> を選択し、</p></li>
<li><p>アクションの名前を入力します。例えば <code class="docutils literal notranslate"><span class="pre">Google</span> <span class="pre">検索</span></code> など。</p></li>
<li><p>さらに <span class="guilabel">短いタイトル</span> や <span class="guilabel">アイコン</span> も追加することができます。</p></li>
<li><p>アクションの <span class="guilabel">スコープ</span> を選択します。詳細については <a class="reference internal" href="#adding-actions"><span class="std std-ref">アクションの定義</span></a> を参照してください。この例ではデフォルトの設定のままとします。</p></li>
<li><p>アクションには、Google検索に使用するURLを検索語を含まないところまで追加します： <code class="docutils literal notranslate"><span class="pre">https://www.google.com/search?q=</span></code></p></li>
<li><p>ここまでで <span class="guilabel">アクション</span> フィールドのテキストは次のようになっています:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>https://www.google.com/search?q=
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lakes</span></code> レイヤのフィールド名を含むドロップダウンボックスをクリックします。これは <span class="guilabel">挿入</span> ボタンのすぐ左にあります。</p></li>
<li><p>ドロップダウンボックスから、 :guilabel:'NAMES' を選択して <span class="guilabel">挿入</span> をクリックします。</p></li>
<li><p>するとアクションテキストは次のようになります:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>https://www.google.com/search?q=[%NAMES%]
</pre></div>
</div>
</li>
<li><p>アクション作成を終了して追加するために、 <span class="guilabel">OK</span> ボタンをクリックします。</p>
<figure class="align-center" id="id75">
<span id="figure-add-action"></span><img alt="../../../_images/add_action_edit.png" src="../../../_images/add_action_edit.png" />
<figcaption>
<p><span class="caption-number">図 16.57 </span><span class="caption-text">この例で設定されたアクションの編集ダイアログ</span><a class="headerlink" href="#id75" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
</ol>
<p>これでアクションが完成し、使用できるようになりました。</p>
<p><span class="guilabel">レイヤプロパティ</span> ダイアログを閉じ、地図を見たい領域にズームして下さい。  <code class="docutils literal notranslate"><span class="pre">lakes</span></code> レイヤがアクティブであることを確認して、地物情報表示ツールで湖をクリックして下さい。地物情報ボックスの中にアクションが表示されているはずです：</p>
<figure class="align-center" id="id76">
<span id="figure-actions-selection"></span><img alt="../../../_images/action_identifyaction.png" src="../../../_images/action_identifyaction.png" />
<figcaption>
<p><span class="caption-number">図 16.58 </span><span class="caption-text">地物を選択し、アクションを選択する状態</span><a class="headerlink" href="#id76" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>アクションをクリックすると、デフォルトのブラウザが立ち上がり、 URL <a class="reference external" href="https://www.google.com/search?q=Tustumena">https://www.google.com/search?q=Tustumena</a> に移動します。アクションにさらに属性フィールドを追加することも可能です。これにはアクションテキストの末尾に <code class="docutils literal notranslate"><span class="pre">+</span></code> を追加し、別のフィールドを選択して <span class="guilabel">挿入</span> をクリックします。ただしこの例では、検索する意味があるような他のフィールドは持っていません。</p>
<p>レイヤには複数のアクションを定義することができ、 <span class="guilabel">地物情報</span> ダイアログにはそれぞれが表示されます。</p>
<p>また、属性テーブルからアクションを呼び出すには、属性テーブルの行を選択して右クリックし、ポップアップメニューからアクションを選択します。</p>
<p>アクションにはさまざまな使い方があります。例えば、画像や写真の位置とファイル名を含むポイントレイヤがあれば、画像を表示するビューアを起動するアクションを作成することができます。また、アクションを使って、Google検索の例と同じように属性フィールドやフィールドの組み合わせを指定して、webベースのレポートを起動することもできるでしょう。</p>
<p>また、より複雑な例を、例えば <strong>Python</strong> アクションを使用して作成できます。</p>
<p>通常、外部アプリケーションでファイルを開くためのアクションを作成する際には絶対パスまたは相対パスを使用することができます。後者のケースでは、パスは外部プログラムの実行ファイル位置に対して相対的になります。しかし、選択したレイヤ（シェープファイルやSpatiaLite のようなファイルベースのもの）に対する相対パスを使用する必要がある場合にはどうでしょうか？次のようなコードで対応することができます。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;firefox&quot;</span>
<span class="n">imagerelpath</span> <span class="o">=</span> <span class="s2">&quot;images_test/test_image.jpg&quot;</span>
<span class="n">layer</span> <span class="o">=</span> <span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="n">layerpath</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">source</span><span class="p">()</span> <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">providerType</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;ogr&#39;</span>
  <span class="k">else</span> <span class="p">(</span><span class="n">qgis</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">QgsDataSourceURI</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">source</span><span class="p">())</span><span class="o">.</span><span class="n">database</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">providerType</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;spatialite&#39;</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">layerpath</span><span class="p">))</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">imagerelpath</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span> <span class="p">[</span><span class="n">command</span><span class="p">,</span> <span class="n">image</span> <span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>このアクションは <em>Python</em> 型であり、 <em>command</em> と <em>imagerelpath</em> 変数は必要に応じて変更する必要があることは覚えておく必要があります。</p>
<p>では、相対パスが（保存された）プロジェクトファイルに相対的である必要がある場合はどうでしょうか？Pythonアクションのコードは以下のようになります。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;firefox&quot;</span>
<span class="n">imagerelpath</span> <span class="o">=</span> <span class="s2">&quot;images_test/test_image.jpg&quot;</span>
<span class="n">projectpath</span> <span class="o">=</span> <span class="n">qgis</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">fileName</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">projectpath</span><span class="p">))</span> <span class="k">if</span> <span class="n">projectpath</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="kc">None</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">imagerelpath</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span> <span class="p">[</span><span class="n">command</span><span class="p">,</span> <span class="n">image</span> <span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>もう一つのPythonアクションの例は、プロジェクトに新しいレイヤを追加することができるものです。例えば、以下の例では、ベクタレイヤとラスタレイヤそれぞれをプロジェクトに追加します。プロジェクトに追加されるファイルの名前やレイヤに付けられる名前はデータ駆動型です（ <em>filename</em> と <em>layername</em> は、アクションが作成されたベクタレイヤの属性テーブルの列名です）。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addVectorLayer</span><span class="p">(</span><span class="s1">&#39;/yourpath/[% &quot;filename&quot; %].shp&#39;</span><span class="p">,</span>
  <span class="s1">&#39;[% &quot;layername&quot; %]&#39;</span><span class="p">,</span> <span class="s1">&#39;ogr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>ラスタ（この例ではTIF画像）を追加するには、次のようになります：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addRasterLayer</span><span class="p">(</span><span class="s1">&#39;/yourpath/[% &quot;filename&quot; %].tif&#39;</span><span class="p">,</span>
  <span class="s1">&#39;[% &quot;layername&quot; %]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="display-properties">
<span id="maptips"></span><span id="index-34"></span><h2><a class="toc-backref" href="#id154" role="doc-backlink"><span class="section-number">16.1.13. </span>表示名プロパティ</a><a class="headerlink" href="#display-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/display.png"><img alt="display" src="../../../_images/display.png" style="width: 1.5em;" /></a> <span class="guilabel">表示名</span> タブでは、地物の識別に使用するフィールドの設定ができます。</p>
<ul class="simple">
<li><p><span class="guilabel">表示名</span>: フィールドまたは <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">expression</span></a> に基づきます。デフォルトでは、<code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> コンポーネント を持つフィールドが存在しない場合、レイヤの最初のフィールドに設定されます。これは次のように使用されます:</p>
<ul>
<li><p><a class="reference internal" href="../introduction/general_tools.html#identify"><span class="std std-ref">地物情報表示ツール</span></a> の結果の地物情報の先頭に表示されるラベル</p></li>
<li><p><a class="reference internal" href="../introduction/qgis_configuration.html#locator-options"><span class="std std-ref">ロケータバー</span></a> で全てのレイヤから地物を検索する際に使用されるフィールド</p></li>
<li><p>属性テーブルの <a class="reference internal" href="attribute_table.html#attribute-table-view"><span class="std std-ref">フォームビュー</span></a> での地物の識別子</p></li>
<li><p>マップやレイアウトをGeoPDF 等のレイヤ出力形式にエクスポートする際の地物識別子</p></li>
<li><p>地図のTips情報、すなわち、 <a class="reference internal" href="../../../_images/mActionMapTips.png"><img alt="mapTips" src="../../../_images/mActionMapTips.png" style="width: 1.5em;" /></a> <sup>地図のTipsを表示</sup> アイコンを押した状態でアクティブレイヤの地物上にマウスカーソルを重ねた際に、マップキャンバスに表示されるメッセージ。<a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Tipsを有効化</span> が有効で、:guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>地図のTipsのHTML定義‘ が設定されていない場合に適用されます。</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Tipsを有効化</span> は、レイヤの地図のTipsを表示するかどうかを制御します。</p></li>
<li><p><span class="guilabel">地図のTipsのHTML定義</span> は、QGIS式とhtmlスタイルやタグ（マルチライン、フォント、画像、ハイパーリンク、表、...）をミックスした、地図のTips用の複雑で完全なHTMLテキストエディタを提供します。コードのサンプルの結果は <span class="guilabel">プレビュー</span> フレームで確認することができます（<span class="guilabel">表示名</span> の出力をプレビューするのにも便利です）。</p></li>
</ul>
<figure class="align-center" id="id77">
<span id="figure-display-code"></span><img alt="../../../_images/display_html.png" src="../../../_images/display_html.png" />
<figcaption>
<p><span class="caption-number">図 16.59 </span><span class="caption-text">地図のTipsのHTMLコード</span><a class="headerlink" href="#id77" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>地図のTipsを表示するには:</p>
<ol class="arabic simple">
<li><p>メニューオプション <span class="menuselection">ビュー ► 地図のTipsを表示</span> を選択するか、 <span class="guilabel">属性ツールバー</span> の <a class="reference internal" href="../../../_images/mActionMapTips.png"><img alt="mapTips" src="../../../_images/mActionMapTips.png" style="width: 1.5em;" /></a> <sup>地図のTipsを表示</sup> アイコンをクリックします。</p></li>
<li><p>対象としているレイヤがアクティブで、<a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Tipsを有効化</span> プロパティがチェックされていることを確かめます。</p></li>
<li><p>地物の上に移動すると、対応する情報が上に表示されます。</p></li>
</ol>
<p>地図のTipsはクロスレイヤ機能で、一度有効にすると、オフに切り替えるまで、プロジェクト内のマップチップが有効なレイヤ全てに適用されます。</p>
<figure class="align-center" id="id78">
<span id="figure-display-mapped"></span><img alt="../../../_images/map_tip.png" src="../../../_images/map_tip.png" />
<figcaption>
<p><span class="caption-number">図 16.60 </span><span class="caption-text">HTMLコードで作られた地図のTips</span><a class="headerlink" href="#id78" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="rendering-properties">
<span id="vectorrenderingmenu"></span><span id="index-35"></span><h2><a class="toc-backref" href="#id155" role="doc-backlink"><span class="section-number">16.1.14. </span>レンダリングプロパティ</a><a class="headerlink" href="#rendering-properties" title="Link to this heading"></a></h2>
<figure class="align-center" id="id79">
<span id="figure-rendering"></span><img alt="../../../_images/vector_rendering.png" src="../../../_images/vector_rendering.png" />
<figcaption>
<p><span class="caption-number">図 16.61 </span><span class="caption-text">レイヤのレンダリングプロパティダイアログ</span><a class="headerlink" href="#id79" title="Link to this image"></a></p>
</figcaption>
</figure>
<p><a class="reference internal" href="../../../_images/rendering.png"><img alt="rendering" src="../../../_images/rendering.png" style="width: 1.5em;" /></a> <span class="guilabel">レンダリング</span> タブには次のプロパティがあります:</p>
<ul>
<li><p><a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> :縮尺に応じた表示設定` では、 <span class="guilabel">最大縮尺（含まない）</span> と <span class="guilabel">最小縮尺（含む）</span> を設定することができ、地物が表示される縮尺の範囲を定義します。それらはこの範囲外で非表示になります。<a class="reference internal" href="../../../_images/mActionMapIdentification.png"><img alt="mapIdentification" src="../../../_images/mActionMapIdentification.png" style="width: 1.5em;" /></a> <sup>現在のキャンバススケールを使う</sup> ボタンを使用すると、現在のマップキャンバスの縮尺を可視範囲の境界として使用することができます。詳しくは <a class="reference internal" href="../introduction/general_tools.html#label-scaledepend"><span class="std std-ref">表示縮尺セレクタ</span></a> を参照してください。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>レイヤの縮尺に応じた表示は、<span class="guilabel">レイヤ</span> パネルからも有効にすることもできます:　レイヤを右クリックし、コンテキストメニューから <span class="guilabel">レイヤの縮尺表示を設定</span> を選択します。</p>
</div>
</li>
<li><p>QGISはオンザフライでの地物の簡素化をサポートしています。これにより、小縮尺で多数の複雑な地物を描画する際のレンダリング時間を短縮することができます。この機能は、レイヤの設定の <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">ジオメトリの簡素化</span> オプションで有効または無効にすることができます。また、新しく追加されたレイヤに対して、デフォルトで簡素化を有効にするグローバル設定もあります（詳細は <a class="reference internal" href="../introduction/qgis_configuration.html#global-simplification"><span class="std std-ref">グローバルな地物の簡素化</span></a> を参照してください）。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>地物の簡素化により、場合によってはレンダリングされた出力に不整合が発生することがあります。これには、ポリゴン間の細長い隙間の発生や、オフセットに基づくシンボルレイヤの不正確なレンダリングなどがあります。</p>
</div>
</li>
<li><p>The <a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Fixed reference scale</span> indicates the map scale
at which symbology and labeling sizes which uses paper-based units (such as millimeters or points) relate to.
The sizes will be scaled accordingly whenever the map is viewed at a different scale.</p>
<p>For instance, a line layer using a 2mm wide line with a 1:2000 <span class="guilabel">Reference scale</span> set
will be rendered using 4mm wide lines when the map is viewed at 1:1000.</p>
</li>
<li><p>The <span class="guilabel">Selections</span> group allows you to control whether a specific color or symbol should be used
in place of the defaults (<span class="menuselection">Project properties ► General ► Selection color</span>)
for a particular layer.
This is useful to improve the visibility of selected features with certain symbology:</p>
<ul class="simple">
<li><p><span class="guilabel">Use default selection color</span></p></li>
<li><p><span class="guilabel">Override color for selected features</span>: e.g. if the layer uses a yellow color by default
and the standard yellow selection is not visible.</p></li>
<li><p><span class="guilabel">Override symbol for selected features</span>: e.g. if a line layer uses a thin symbol,
and coloring the lines might not make them visible enough, overriding the symbol with a thicker line can help.
Also, if the layer uses raster symbology or gradient fills/lines/shapeburst with color ramp symbology,
then the default selection color is not applied at all;
being able to set a specific simpler symbol to use for selected features in the layer can help.</p></li>
</ul>
</li>
<li><p>Rendering extremely detailed layers (e.g. polygon layers with a huge number of nodes),
can cause layout exports in PDF/SVG format to be huge as all nodes are included in the exported file.
This can also make the resultant file very slow to work with/open in other programs.</p>
<p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">レイヤをラスタとして描画する</span> にチェックを入れると、これらのレイヤがラスタ化されるので、このようなレイヤに含まれるノード全てをエクスポートするファイルに含める必要がなくなり、レンダリングが高速化されます。</p>
<p>You can also do this by forcing the layout to export as a raster,
but that is an all-or-nothing solution, given that the rasterisation is applied to all layers.
Alternatively, you can rely on geometry simplification in <a class="reference internal" href="../print_composer/create_output.html#create-output"><span class="std std-ref">layout export settings</span></a>.</p>
</li>
<li><p><a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Refresh layer at interval</span>: controls whether and how regular a layer can be refreshed.
Available <span class="guilabel">Configuration</span> options are:</p>
<ul class="simple">
<li><p><span class="guilabel">Reload data</span>: the layer will be completely refreshed.
Any cached data will be discarded and refetched from the provider.
This mode may result in slower map refreshes.</p></li>
<li><p><span class="guilabel">Redraw layer only</span>: this mode is useful for animation
or when the layer's style will be updated at regular intervals.
Canvas updates are deferred in order to avoid refreshing multiple times
if more than one layer has an auto update interval set.</p>
</li>
</ul>
<p>It is also possible to set the <span class="guilabel">Interval (seconds)</span> between consecutive refreshments.</p>
</li>
<li><p>データプロバイダによっては、QGISの外でデータソースに変更が適用されたときに、QGISへ通知を送信することができます（例：PostgreSQL）。 <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">通知時にレイヤを更新する</span> オプションを使用すると、通知によって更新を実行できます。また、 <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">メッセージがある場合のみ</span> のテキストボックスで設定した特定のメッセージの場合にのみレイヤを更新するよう制限することもできます。</p></li>
</ul>
</section>
<section id="temporal-properties">
<span id="vectortemporalmenu"></span><span id="index-36"></span><h2><a class="toc-backref" href="#id156" role="doc-backlink"><span class="section-number">16.1.15. </span>時系列プロパティ</a><a class="headerlink" href="#temporal-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/temporal.png"><img alt="temporal" src="../../../_images/temporal.png" style="width: 1.5em;" /></a> <span class="guilabel">時系列</span> タブは、時間経過に伴うレイヤのレンダリングを制御するオプションを提供します。このような動的なレンダリングには、マップキャンバスで <a class="reference internal" href="../map_views/map_view.html#maptimecontrol"><span class="std std-ref">時系列ナビ</span></a> を有効にする必要があります。</p>
<figure class="align-center" id="id80">
<span id="figure-temporalvector"></span><img alt="../../../_images/vector_temporal.png" src="../../../_images/vector_temporal.png" />
<figcaption>
<p><span class="caption-number">図 16.62 </span><span class="caption-text">ベクタレイヤの時系列プロパティダイアログ</span><a class="headerlink" href="#id80" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>ベクタレイヤの時系列レンダリングを設定するには、 <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">動的時系列コントロール</span> オプションにチェックを入れます。データセットの構造にもよりますが、 <span class="guilabel">設定</span> オプションのいずれかを使用します：</p>
<ul class="simple">
<li><p><span class="guilabel">固定時間範囲</span> ：マップキャンバスの時間フレームが指定する <span class="guilabel">開始時刻</span> と <span class="guilabel">終了時刻</span> の範囲と重なる場合に、すべての地物がレンダリングされます。</p></li>
<li><p><span class="guilabel">Date/Time型の単一フィールド</span> ：地物の <span class="guilabel">フィールド</span> の値がマップキャンバスの時間フレーム内にある場合に、地物がレンダリングされます。 <span class="guilabel">イベントの継続時間</span> を設定することができます。 <span class="guilabel">地物を累積表示</span> オプションにチェックを入れると、マップの時間フレーム内かそれ以前に発生したすべての地物をレンダリングし続けます。従ってイベントの継続時間は無視されます。</p></li>
<li><p><span class="guilabel">開始・終了の日時のフィールド</span> ： <span class="guilabel">開始フィールド</span> と <span class="guilabel">終了フィールド</span> の値で指定される範囲がマップキャンバスの時間フレームと重なる場合に地物がレンダリングされます。</p></li>
<li><p><span class="guilabel">開始・終了の継続時間のフィールド</span> ： <span class="guilabel">開始フィールド</span> と <span class="guilabel">継続時間フィールド</span> の値で定義される範囲がマップキャンバスの時間フレームと重なる場合に地物がレンダリングされます。</p></li>
<li><p><span class="guilabel">式による開始・終了日時</span> ：フィールドの <span class="guilabel">開始式</span> と <span class="guilabel">終了式</span> で指定される時間範囲がマップキャンバスの時間フレームと重なる場合に地物がレンダリングされます。</p></li>
<li><p><span class="guilabel">レイヤのみ再描画</span> ：レイヤは新しいアニメーションフレーム毎に再描画されますが、地物に対する時間ベースのフィルタリングは何も適用されません。これは、レンダラーの設定に時間ベースの式の値を使用しているレイヤ（例：データによって定義されたシンボロジ）に便利です。</p></li>
</ul>
<p>また、地物の時間範囲の <span class="guilabel">上限</span> を次のように設定することが可能です：</p>
<ul class="simple">
<li><p><span class="guilabel">始点を含み終点を除く</span></p></li>
<li><p><span class="guilabel">始点も終点も含む</span></p></li>
</ul>
</section>
<section id="variables-properties">
<span id="vectorvariablesmenu"></span><span id="index-37"></span><h2><a class="toc-backref" href="#id157" role="doc-backlink"><span class="section-number">16.1.16. </span>変数プロパティ</a><a class="headerlink" href="#variables-properties" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> <span class="guilabel">Variables</span> tab lists all the variables available at
the layer's level (which includes all global and project's variables).</p>
<p>また、ここではユーザーはレイヤレベルの変数の管理もできます。 <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> ボタンをクリックして、新しいレイヤレベルのカスタム変数を追加します。同様に、リストからレイヤレベルのカスタム変数を選択して <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="symbologyRemove" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> ボタンを押すと、変数が削除されます。</p>
<p>一般ツールの <a class="reference internal" href="../introduction/general_tools.html#general-tools-variables"><span class="std std-ref">値を変数に格納する</span></a> セクションには、変数の使用に関する詳細があります。</p>
</section>
<section id="elevation-properties">
<span id="vectorelevationmenu"></span><span id="index-38"></span><h2><a class="toc-backref" href="#id158" role="doc-backlink"><span class="section-number">16.1.17. </span>標高プロパティ</a><a class="headerlink" href="#elevation-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/elevationscale.png"><img alt="elevationscale" src="../../../_images/elevationscale.png" style="width: 1.5em;" /></a> <span class="guilabel">標高</span> タブには、 <a class="reference internal" href="../map_views/3d_map_view.html#label-3dmapview"><span class="std std-ref">3Dマップビュー</span></a> 内のレイヤの標高プロパティと、 <a class="reference internal" href="../map_views/elevation_profile.html#label-elevation-profile-view"><span class="std std-ref">profile tool charts</span></a> 内のレイヤの標高をコントロールするオプションがあります。具体的には次が設定できます:</p>
<figure class="align-center" id="id81">
<span id="figure-elevationvector"></span><img alt="../../../_images/vector_elevation.png" src="../../../_images/vector_elevation.png" />
<figcaption>
<p><span class="caption-number">図 16.63 </span><span class="caption-text">ベクタレイヤの標高プロパティダイアログ</span><a class="headerlink" href="#id81" title="Link to this image"></a></p>
</figcaption>
</figure>
<ul>
<li><p><span class="guilabel">標高クランピング</span>: 地物の高度をどのように、またどちらにするかを定義します：</p>
<ul class="simple">
<li><p><span class="guilabel">地形の高さ</span>: 地形の高さから直接標高を取得し、地物内の既存のZ値を無視します。データ定義の地形からの <span class="guilabel">オフセット</span> 値を入力することもできます。</p></li>
<li><p><span class="guilabel">地形に相対的</span>: 地物にあるZ値が地形の高さに加算されます。<span class="guilabel">スケール</span> 係数とデータ定義の <span class="guilabel">オフセット</span> を使って標高を調整することができます。このオプションは2Dジオメトリレイヤでは利用できません。</p></li>
<li><p><span class="guilabel">地物の絶対位置</span>: 地形の高さを無視し、地物のZ値を直接標高に使います。<span class="guilabel">スケール</span> 係数とデータ定義の <span class="guilabel">オフセット</span> を使って標高を調整することができます。2Dジオメトリレイヤ（Z値を持たない）の場合、代わりにデータ定義の <span class="guilabel">基準高</span> を設定することができます。</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a><span class="guilabel">押し出しを有効化</span>: <span class="guilabel">高さ</span> を設定することで、地物がベースから垂直方向にどれだけ高く伸びるかを制御することができます。これは、2Dジオメトリレイヤ、例えばポリゴンの建物の足跡レイヤが、実際には3Dオブジェクトを表していることを示すのに便利です。</p></li>
<li><p><span class="guilabel">標高バインディング</span>: <span class="guilabel">標高クランピング</span> に依存する地形をラインレイヤまたはポリゴンレイヤと組み合わせる場合にのみ関係するオプションで、地形の高さに対する地物の標高の設定方法を制御します。地形は次の位置からサンプリングすることができます:</p>
<ul class="simple">
<li><p>地物の <span class="guilabel">重心</span> では、各頂点のz値に重心の高さが加えられます</p></li>
<li><p>個々の <span class="guilabel">頂点</span> では、その頂点のz値に加えられる前に</p></li>
</ul>
</li>
<li><p><span class="guilabel">断面図の外観</span>: 断面図を描画する際に、地物をどのように表示するかを制御します。主に2つの <span class="guilabel">解釈</span> モードが利用できます：</p>
<ul>
<li><p><span class="guilabel">各地物</span>: 断面図線がベクタ地物と交差する離散的な位置をサンプリングします。この交差はレイヤの種類や押し出しの有無によって、点、線、面として表現されます。</p>
<p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">レイヤのシンボルに従う</span> をチェックすると、地物は対応する <a class="reference internal" href="#vector-style-menu"><span class="std std-ref">レイヤのスタイル</span></a> で断面図上にレンダリングされます（例えば、カテゴリ値の分類が断面図上で見えるようになります）。断面図のシンボルの型がレイヤのレンダラのシンボルの型と一致しない場合、レンダラのシンボルの色のみが断面図シンボルに適用されます。</p>
<p>レイヤの設定によっては、断面図のシンボルをカスタム・スタイルで表現することができます：</p>
<ul class="simple">
<li><p><a class="reference internal" href="../style_library/symbol_selector.html#vector-marker-symbols"><span class="std std-ref">マーカースタイル</span></a>: 押し出しのないポイント地物とライン地物、および断面図線に接する押し出しのないポリゴン地物用</p></li>
<li><p>:ref:<a href="#id1"><span class="problematic" id="id2">`</span></a>線のスタイル <a href="#id3"><span class="problematic" id="id4">`</span></a>: 押し出しのあるポイント地物とライン地物、および断面図線と交差する押し出しのないポリゴン地物用</p></li>
<li><p><a class="reference internal" href="../style_library/symbol_selector.html#vector-fill-symbols"><span class="std std-ref">塗りつぶしスタイル</span></a>: 押し出しのあるポリゴン地物用</p></li>
</ul>
</li>
<li><p>as <span class="guilabel">Continuous Surface (e.g. contours)</span>: the elevation chart
will be rendered as a surface instead of separate features by joining
the sampled elevation results into a continuous line. This can enhance
visualisation and is designed for vector layers which represent a
continuous elevation surface, e.g. contour lines or surveyed elevation points.
The profile <span class="guilabel">Style</span> can be set as:</p>
<ul class="simple">
<li><p>特定の <a class="reference internal" href="../style_library/symbol_selector.html#vector-line-symbols"><span class="std std-ref">線のスタイル</span></a> を持った <span class="guilabel">線</span></p></li>
<li><p>塗りつぶしシンボルを使って、標高曲線の上（<span class="guilabel">Fill above</span>）または下（<span class="guilabel">Fill below</span>）にレンダリングされた標高面。表面のシンボロジは以下のように表されます:</p>
<ul>
<li><p><a class="reference internal" href="../style_library/symbol_selector.html#vector-fill-symbols"><span class="std std-ref">塗りつぶしスタイル</span></a></p></li>
<li><p>そして <span class="guilabel">上限</span>: 塗りつぶしサーフェスがどの高さになるかの最大値（または最小値）</p></li>
</ul>
</li>
</ul>
<p>さらに、<a class="reference internal" href="../../../_images/unchecked.png"><img alt="unchecked" src="../../../_images/unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">マーカーをサンプリング表示</span> をチェックすることで、判読線上にマーカーを表示し、それらに <span class="guilabel">マーカースタイル</span> を割り当てることができます。</p>
</li>
</ul>
</li>
</ul>
</section>
<section id="metadata-properties">
<span id="vectormetadatamenu"></span><span id="index-39"></span><h2><a class="toc-backref" href="#id159" role="doc-backlink"><span class="section-number">16.1.18. </span>メタデータプロパティ</a><a class="headerlink" href="#metadata-properties" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../../_images/editmetadata.png"><img alt="editMetadata" src="../../../_images/editmetadata.png" style="width: 1.2em;" /></a> <span class="guilabel">メタデータ</span> タブには、レイヤに関するメタデータレポートの作成・編集オプションがあります。詳細は <a class="reference internal" href="../introduction/general_tools.html#metadatamenu"><span class="std std-ref">メタデータ</span></a> を参照してください。</p>
</section>
<section id="dependencies-properties">
<span id="vectordependenciesmenu"></span><span id="index-40"></span><h2><a class="toc-backref" href="#id160" role="doc-backlink"><span class="section-number">16.1.19. </span>依存関係プロパティ</a><a class="headerlink" href="#dependencies-properties" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../../../_images/dependencies.png"><img alt="dependencies" src="../../../_images/dependencies.png" style="width: 1.5em;" /></a> <span class="guilabel">Dependencies</span> tab allows to declare data
dependencies between layers. A data dependency occurs when a data modification
in a layer, not by direct user manipulation, may modify data of other layers.
This is the case for instance when geometry of a layer is updated by a
database trigger or custom PyQGIS scripting after modification of another
layer's geometry.</p>
<p><span class="guilabel">依存関係</span> タブでは、現在のレイヤのデータを外部から変更する可能性のあるレイヤを任意で選択できます。依存するレイヤを正しく指定すれば、依存するレイヤが変更されたときに、QGISはこのレイヤのキャッシュを無効化することができます。</p>
</section>
<section id="legend-properties">
<span id="vectorlegendmenu"></span><span id="index-41"></span><h2><a class="toc-backref" href="#id161" role="doc-backlink"><span class="section-number">16.1.20. </span>凡例プロパティ</a><a class="headerlink" href="#legend-properties" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../../../_images/legend.png"><img alt="legend" src="../../../_images/legend.png" style="width: 1.2em;" /></a> <span class="guilabel">Legend</span> properties tab provides you with advanced
settings for the <a class="reference internal" href="../introduction/general_tools.html#label-legend"><span class="std std-ref">Layers panel</span></a> and/or the <a class="reference internal" href="../print_composer/composer_items/composer_legend.html#layout-legend-item"><span class="std std-ref">print
layout legend</span></a>. These options include:</p>
<ul class="simple">
<li><p>レイヤに適用しているシンボロジにもよりますが、凡例に複数のエントリが表示されることで、必ずしも読みやすく便利な表示になるとは限りません。 <span class="guilabel">凡例の枠の画像 ` で代わりとなる :ref:`画像の選択 &lt;embedded_file_selector&gt;</span> を行うことができ、 <span class="guilabel">レイヤ</span> パネルや印刷レイアウトの凡例の両者で表示されます。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">ラベル凡例を表示</span> ：さまざまなラベル設定の概要を凡例内のエントリとして表示します。 <a class="reference internal" href="../style_library/label_settings.html#showlabels"><span class="std std-ref">ラベルのスタイル</span></a> が、説明とともにプレビューされます。</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">シンボル上のテキスト</span> ：場合によっては、凡例内のシンボルに追加の情報を加えると便利なことがあります。このフレームでは、レイヤのシンボロジで使用されているシンボルのどれにでもテキストつけることができます。このテキストは、 <span class="guilabel">レイヤ</span> パネルとプリントレイアウトの凡例の両方でシンボル上に表示されます。テーブルウィジェットでシンボルの横に各テキストを入力するか、 <span class="guilabel">式でラベルを設定</span> ボタンを使ってテーブルに入力することで、凡例とテキストの対応付けがなされます。 テキストの外観は <span class="guilabel">テキスト形式</span> ボタンのフォント・色セレクタウィジェットで設定します。</p></li>
</ul>
<figure class="align-center" id="id82">
<span id="figure-legend-text-symbol"></span><img alt="../../../_images/text_legend_symbols.png" src="../../../_images/text_legend_symbols.png" />
<figcaption>
<p><span class="caption-number">図 16.64 </span><span class="caption-text">シンボル上のテキスト設定（左）と <span class="guilabel">レイヤ</span> パネルでのレンダリング結果（右）</span><a class="headerlink" href="#id82" title="Link to this image"></a></p>
</figcaption>
</figure>
<ul>
<li><p>レイヤパネル内のレイヤツリーに埋め込み可能なウィジェットのリスト。このアイディアは、レイヤで頻繁に使用するいくつかのアクション（不透明度の設定、フィルタ、選択、スタイルなど）に簡単にアクセスするための方法を提供することです。</p>
<p>デフォルトではQGISは不透明度ウィジェットを提供していますが、これは独自ウィジェットを登録するプラグインによって拡張することが可能で、管理するレイヤにカスタムアクションを割り当てられます。</p>
</li>
</ul>
</section>
<section id="qgis-server-properties">
<span id="vectorservermenu"></span><span id="index-42"></span><h2><a class="toc-backref" href="#id162" role="doc-backlink"><span class="section-number">16.1.21. </span>QGISサーバープロパティ</a><a class="headerlink" href="#qgis-server-properties" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../../../_images/overlay.png"><img alt="overlay" src="../../../_images/overlay.png" style="width: 1.5em;" /></a> <span class="guilabel">QGIS Server</span> tab consists of <span class="guilabel">Description</span>,
<span class="guilabel">Attribution</span>, <span class="guilabel">Metadata URL</span>, and <span class="guilabel">Legend URL</span>
sections.</p>
<p><span class="guilabel">説明</span> セクションでは、リクエスト内でのレイヤ参照に使用される <span class="guilabel">短い名前</span> （短い名前の詳細については、 <a class="reference internal" href="../../server_manual/services/basics.html#services-basics-short-name"><span class="std std-ref">短い名前</span></a> を参照）を変更できます。また、レイヤの <span class="guilabel">タイトル</span> や <span class="guilabel">要約</span> を追加・編集したり、 <span class="guilabel">キーワードリスト</span> をここに定義することができます。このキーワードリストはメタデータカタログで使用することができます。タイトルをXMLメタデータファイルから使用したい場合には、 <span class="guilabel">データURL</span> フィールドにリンク先を入力する必要があります。</p>
<p><span class="guilabel">帰属</span> を使用してXMLメタデータカタログから属性データを取得します。</p>
<p><span class="guilabel">メタデータURL</span> では、XMLメタデータカタログへの一般的なパスを追加できます。この情報はその後のセッションのためにQGISプロジェクトファイル内に保存され、QGISサーバーで使用されます。</p>
<p><span class="guilabel">凡例URL</span> セクションでは、凡例画像のURLをURLフィールドに指定します。「形式」ドロップダウンメニューのオプションを使用して、適切な画像形式を選択できます。現在、PNGおよびJPG・JPEG画像形式をサポートしています。</p>
<figure class="align-center" id="id83">
<span id="figure-server-vector"></span><img alt="../../../_images/vector_server_properties.png" src="../../../_images/vector_server_properties.png" />
<figcaption>
<p><span class="caption-number">図 16.65 </span><span class="caption-text">ベクタレイヤプロパティダイアログのQGISサーバータブ</span><a class="headerlink" href="#id83" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>QGISサーバーについて更に学ぶには、 <a class="reference internal" href="../../server_manual/index.html#qgis-server-manual"><span class="std std-ref">QGIS Server ガイド / マニュアル</span></a> を読んでください。</p>
</section>
<section id="digitizing-properties">
<span id="digitizingmenu"></span><span id="index-43"></span><h2><a class="toc-backref" href="#id163" role="doc-backlink"><span class="section-number">16.1.22. </span>デジタイズプロパティ</a><a class="headerlink" href="#digitizing-properties" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../../../_images/digitizing.png"><img alt="digitizing" src="../../../_images/digitizing.png" style="width: 1.5em;" /></a> <span class="guilabel">Digitizing</span> tab gives access to options that help
to ensure the quality of digitized geometries.</p>
<figure class="align-center" id="id84">
<span id="figure-digitizing-vector"></span><img alt="../../../_images/vector_digitizing_properties.png" src="../../../_images/vector_digitizing_properties.png" />
<figcaption>
<p><span class="caption-number">図 16.66 </span><span class="caption-text">QGISのベクタレイヤプロパティダイアログのデジタイズタブ</span><a class="headerlink" href="#id84" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="automatic-fixes">
<span id="snap-to-grid"></span><h3><a class="toc-backref" href="#id164" role="doc-backlink"><span class="section-number">16.1.22.1. </span>自動修正</a><a class="headerlink" href="#automatic-fixes" title="Link to this heading"></a></h3>
<p><span class="guilabel">自動修正</span> セクションのオプションは、追加または修正されたジオメトリの頂点に直接影響を与えます。 <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">重複ノードを削除</span> オプションがチェックされている場合、全く同じ座標の連続する2頂点は削除されます。 <span class="guilabel">ジオメトリの精度</span> が設定されている場合、すべての頂点座標は設定されたジオメトリ精度の最も近い倍数に丸められます。丸めはレイヤの座標参照系で行われます。Z値とM値は丸められません。多くのマップツールでは、デジタイズ中にはキャンバスにグリッドが表示されます。</p>
<figure class="align-center" id="id85">
<span id="figure-snap-to-grid"></span><img alt="../../../_images/vertex_snap_to_grid.png" src="../../../_images/vertex_snap_to_grid.png" />
<figcaption>
<p><span class="caption-number">図 16.67 </span><span class="caption-text">上の頂点を移動させると、全ての頂点がグリッドにスナップする</span><a class="headerlink" href="#id85" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="geometry-checks">
<h3><a class="toc-backref" href="#id165" role="doc-backlink"><span class="section-number">16.1.22.2. </span>ジオメトリチェック</a><a class="headerlink" href="#geometry-checks" title="Link to this heading"></a></h3>
<p><span class="guilabel">ジオメトリチェック</span> のセクションでは、ジオメトリ単位での追加的な検証を有効にできます。ジオメトリを変更すると直ちに、チェック失敗が <span class="guilabel">ジオメトリ検証</span> パネルでユーザーに報告されます。チェックに失敗している間は、レイヤを保存することができません。 <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">有効（valid）か</span> のチェックは、ジオメトリの自己交差のような、基本的な妥当性確認を実行します。</p>
</section>
<section id="topology-checks">
<h3><a class="toc-backref" href="#id166" role="doc-backlink"><span class="section-number">16.1.22.3. </span>トポロジチェック</a><a class="headerlink" href="#topology-checks" title="Link to this heading"></a></h3>
<p><span class="guilabel">トポロジチェック</span> のセクションでは、トポロジの追加的な検証を有効にできます。トポロジのチェックはユーザーがレイヤを保存した際に実行されます。チェックしたエラーは <span class="guilabel">ジオメトリ検証</span> パネルに報告されます。検証エラーが存在する限りは、レイヤを保存することができません。トポロジのチェックは、修正のあった地物のバウンディングボックス領域内で実行されます。同じ領域内に他の地物が存在することもあるため、現在の編集セッションで発生したエラーだけでなく、他の地物に関するトポロジエラーも報告されます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>トポロジチェックのオプション</p></th>
<th class="head"><p>説明図</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">隙間がないか</span> は、隣接するポリゴンとの間に隙間がないかをチェックします。</p></td>
<td><figure class="align-default">
<img alt="../../../_images/gapcheck.png" src="../../../_images/gapcheck.png" />
</figure>
</td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">重なり（Overlap）</span> は、隣接するポリゴンとの重なりがないかをチェックします。</p></td>
<td><figure class="align-default">
<img alt="../../../_images/overlapcheck.png" src="../../../_images/overlapcheck.png" />
</figure>
</td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">頂点欠損（点で分割されるべき直線）</span> のチェックは、隣接するポリゴンの共有された境界について、頂点が一方の境界には無く、他方の境界にはあるようなものをチェックします。</p></td>
<td><figure class="align-default">
<img alt="../../../_images/missingvertexcheck.png" src="../../../_images/missingvertexcheck.png" />
</figure>
</td>
</tr>
</tbody>
</table>
<section id="gap-check-exceptions">
<h4><a class="toc-backref" href="#id167" role="doc-backlink">隙間チェックの例外</a><a class="headerlink" href="#gap-check-exceptions" title="Link to this heading"></a></h4>
<p>他の部分はポリゴンで完全に覆われているものの、ポリゴンレイヤのある領域内には隙間を作っておくのが望ましい場合もあります。例えば、土地利用レイヤでは湖のために穴があり得るかもしれません。隙間チェックでは、無視される領域を定義することができます。このような領域内の隙間は許容されるものであるから、ここでは <em>許容される隙間（Allowed Gaps）</em> 領域と呼ぶことにします。</p>
<p><span class="guilabel">許容される隙間</span> の隙間チェックに関するオプションでは、 <em>レイヤ</em> を設定できます。</p>
<p>隙間チェックが実行される際に、 <em>許容される隙間のレイヤ</em> の1つ以上のポリゴンでカバーされている隙間はトポロジエラーとしては報告されません。</p>
<p>また、 <span class="guilabel">バッファ</span> を追加設定することもできます。このバッファは <em>許容される隙間のレイヤ</em> の各ポリゴンに適用されます。これにより、隙間の境目にあるアウトラインのわずかな変化に影響されにくいテストが可能となります。</p>
<p><em>許容される隙間</em> を有効にすると、検出された隙間エラーのための追加ボタン（ <span class="guilabel">許容される隙間を追加</span> ）が、デジタイズ中に隙間が報告されるジオメトリ検証ドックで利用できます。 <span class="guilabel">許容される隙間を追加</span> ボタンを押すと、検出された隙間のジオメトリを持つ新しいポリゴンが <em>許容される隙間レイヤ</em> に挿入されます。これにより、許容されている隙間に素早くフラグを立てることができます。</p>
</section>
<section id="geometry-validation-panel">
<span id="id18"></span><h4><a class="toc-backref" href="#id168" role="doc-backlink">ジオメトリ検証パネル</a><a class="headerlink" href="#geometry-validation-panel" title="Link to this heading"></a></h4>
<p><span class="guilabel">ジオメトリ検証</span> パネルは、上記のデジタイズのチェックのいずれかによるエラーの検出が引き金となって表示されます。このダイアログにはエラーのリストとその説明が表示され、キーボードの矢印キーや専用の矢印ボタンを使用してリストをブラウズできます。</p>
<p>レイヤに編集内容を保存する前に、すべての問題に対処する必要があります。対処するためには：</p>
<ol class="arabic simple">
<li><p>エラーを一つ選択し、以下のボタンを利用できます：</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/mActionZoomToSelected.png"><img alt="zoomToSelected" src="../../../_images/mActionZoomToSelected.png" style="width: 1.5em;" /></a> <span class="guilabel">地物にズーム</span></p></li>
<li><p><a class="reference internal" href="../../../_images/mActionZoomToLayer.png"><img alt="zoomToLayer" src="../../../_images/mActionZoomToLayer.png" style="width: 1.5em;" /></a> <span class="guilabel">問題箇所にズーム</span></p></li>
</ul>
</li>
<li><p>通常どおり、 <a class="reference internal" href="editing_geometry_attributes.html#editingvector"><span class="std std-ref">デジタイジングツール</span></a> を選択して問題を修正します。</p></li>
</ol>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="16. ベクタデータの操作" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="attribute_table.html" class="btn btn-neutral float-right" title="16.2. 属性テーブルの操作" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">最終更新: 2024 6月 25, 05:29 +0900
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages:
Expected French translation link for https://docs.qgis.org/3.28/en/docs/user_manual/print_composer/overview_composer.html
would return https://app.transifex.com/qgis/qgis-documentation/translate/#fr/aa6d8bc653526d38b295ca94bf8eee5e
with the md5 value of "github#qgis/QGIS-Documentation#release_3.28#locale/en/LC_MESSAGES/docs/user_manual/print_composer/overview_composer.po"-->
<!--Make sure that mismatching language codes between Transifex and Sphinx are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: 3.34
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/user_manual/working_with_vector/vector_properties.html">en</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/cs/docs/user_manual/working_with_vector/vector_properties.html">cs</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/de/docs/user_manual/working_with_vector/vector_properties.html">de</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/es/docs/user_manual/working_with_vector/vector_properties.html">es</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/fr/docs/user_manual/working_with_vector/vector_properties.html">fr</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/hu/docs/user_manual/working_with_vector/vector_properties.html">hu</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/it/docs/user_manual/working_with_vector/vector_properties.html">it</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/working_with_vector/vector_properties.html">ja</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ko/docs/user_manual/working_with_vector/vector_properties.html">ko</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/lt/docs/user_manual/working_with_vector/vector_properties.html">lt</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/nl/docs/user_manual/working_with_vector/vector_properties.html">nl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_BR/docs/user_manual/working_with_vector/vector_properties.html">pt_BR</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_PT/docs/user_manual/working_with_vector/vector_properties.html">pt_PT</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ro/docs/user_manual/working_with_vector/vector_properties.html">ro</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ru/docs/user_manual/working_with_vector/vector_properties.html">ru</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zh-Hans/docs/user_manual/working_with_vector/vector_properties.html">zh-Hans</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/ja/docs/user_manual/working_with_vector/vector_properties.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/ja/docs/user_manual/working_with_vector/vector_properties.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/working_with_vector/vector_properties.html">3.34</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.28/ja/docs/user_manual/working_with_vector/vector_properties.html">3.28</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.22/ja/docs/user_manual/working_with_vector/vector_properties.html">3.22</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/ja/docs/user_manual/working_with_vector/vector_properties.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/ja/docs/user_manual/working_with_vector/vector_properties.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/ja/docs/user_manual/working_with_vector/vector_properties.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/ja/docs/user_manual/working_with_vector/vector_properties.html">2.18</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/user_manual/working_with_vector/vector_properties.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://app.transifex.com/qgis/qgis-documentation/translate/#ja/f447ac1b0efe017a5e2807677e0dd2b0" target="_blank" rel="noopener noreferrer">Translate Page</a>
          </dd>
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/ja" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/3.34" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/3.34" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/release-3_34" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>