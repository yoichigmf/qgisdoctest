<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>27.11. 外部アプリケーションの設定 &mdash; QGIS Documentation  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/qgis_docs.css?v=5415a924" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/user_manual/processing/3rdParty.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../../_static/translations.js?v=4dbe4bdc"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" />
    <link rel="next" title="28. プロセシングプロバイダとアルゴリズム" href="../processing_algs/index.html" />
    <link rel="prev" title="27.10. プロセシングアルゴリズムのための入力と出力の型" href="parameters.html" />
  <meta name="description" content="QGIS 3.34 documentation: 27.11. 外部アプリケーションの設定">
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   

          
          
          <a href="../../index.html" class="icon icon-home">
            QGIS Documentation
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.34
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">ユーザ向け</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">QGIS Desktopユーザーガイド／マニュアル (QGIS 3.34)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../preamble/preamble.html">1. はじめに</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/foreword.html">2. 序文</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/conventions.html">3. 記述ルール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/features.html">4. 機能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/getting_started.html">5. 最初のステップ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/project_files.html">6. プロジェクトファイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_gui.html">7. QGISのユーザインタフェース</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/browser.html">8. ブラウザパネル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_configuration.html">9. QGISの設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_projections/working_with_projections.html">10. 投影法の操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../map_views/index.html">11. 地図の可視化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/general_tools.html">12. 一般ツール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expressions/index.html">13. 式でレベルアップ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style_library/index.html">14. スタイルライブラリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../managing_data_source/index.html">15. データソースの管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector/index.html">16. ベクタデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_raster/index.html">17. ラスタデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_mesh/mesh.html">18. メッシュデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector_tiles/vector_tiles.html">19. ベクタタイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_point_clouds/point_clouds.html">20. 点群の操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_3d_tiles/3d_tiles.html">21. 3Dタイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../print_composer/index.html">22. 地図のレイアウト</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_ogc/ogc_client_support.html">23. OGC / ISOプロトコルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_gps/index.html">24. GPSデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth_system/index.html">25. 認証システム</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grass_integration/grass_integration.html">26. GRASS GIS の統合</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">27. QGIS プロセシングフレームワーク</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">27.1. はじめに</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">27.2. プロセシングフレームワークを設定する</a></li>
<li class="toctree-l3"><a class="reference internal" href="toolbox.html">27.3. ツールボックス</a></li>
<li class="toctree-l3"><a class="reference internal" href="history.html">27.4. 履歴マネージャ</a></li>
<li class="toctree-l3"><a class="reference internal" href="modeler.html">27.5. モデルデザイナー</a></li>
<li class="toctree-l3"><a class="reference internal" href="batch.html">27.6. バッチ処理インターフェイス</a></li>
<li class="toctree-l3"><a class="reference internal" href="console.html">27.7. プロセシングアルゴリズムをコンソールから使う</a></li>
<li class="toctree-l3"><a class="reference internal" href="standalone.html">27.8. プロセシングをコマンドラインから使用する</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts.html">27.9. 新たなプロセシングアルゴリズムをPythonスクリプトで作成する</a></li>
<li class="toctree-l3"><a class="reference internal" href="parameters.html">27.10. プロセシングアルゴリズムのための入力と出力の型</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">27.11. 外部アプリケーションの設定</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-note-for-windows-users">27.11.1. Windowsユーザーへの注意点</a></li>
<li class="toctree-l4"><a class="reference internal" href="#a-note-on-file-formats">27.11.2. ファイル形式に関する注意点</a></li>
<li class="toctree-l4"><a class="reference internal" href="#a-note-on-vector-layer-selections">27.11.3. ベクタレイヤの選択に関する注意点</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-third-party-providers">27.11.4. Using third-party Providers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../processing_algs/index.html">28. プロセシングプロバイダとアルゴリズム</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">29. プラグイン</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/help_and_support.html">30. ヘルプとサポート</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/contributors.html">31. 協力者</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/index.html">32. 付録</a></li>
<li class="toctree-l2"><a class="reference internal" href="../literature_web/literature_and_web_references.html">33. 文献とWeb参照</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Serverガイド／マニュアル (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_manual/index.html">トレーニングマニュアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">やさしい GIS 入門</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ドキュメント執筆者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">ドキュメント作成のガイドライン</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">開発者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyqgis_developer_cookbook/index.html">PyQGISクックブック (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">開発者ガイド</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">QGISユーザガイド</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">27. </span>QGIS プロセシングフレームワーク</a></li>
      <li class="breadcrumb-item active"><span class="section-number">27.11. </span>外部アプリケーションの設定</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/user_manual/processing/3rdParty.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="parameters.html" class="btn btn-neutral float-left" title="27.10. プロセシングアルゴリズムのための入力と出力の型" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../processing_algs/index.html" class="btn btn-neutral float-right" title="28. プロセシングプロバイダとアルゴリズム" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div><div class="admonition important">
<p class="admonition-title">重要</p>
<p>翻訳は <a class="reference external" href="https://qgis.org/en/site/getinvolved/translate.html#becoming-a-translator">あなたが参加できる</a> コミュニティの取り組みです。このページは現在 91.72% 翻訳されています。</p>
</div>
</div></blockquote>
<section id="configuring-external-applications">
<span id="processing-results"></span><span id="index-0"></span><h1><span class="section-number">27.11. </span>外部アプリケーションの設定<a class="headerlink" href="#configuring-external-applications" title="Link to this heading"></a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#a-note-for-windows-users" id="id5">Windowsユーザーへの注意点</a></p></li>
<li><p><a class="reference internal" href="#a-note-on-file-formats" id="id6">ファイル形式に関する注意点</a></p></li>
<li><p><a class="reference internal" href="#a-note-on-vector-layer-selections" id="id7">ベクタレイヤの選択に関する注意点</a></p></li>
<li><p><a class="reference internal" href="#using-third-party-providers" id="id8">Using third-party Providers</a></p>
<ul>
<li><p><a class="reference internal" href="#saga" id="id9">SAGA: System for Automated Geoscientific Analyses、地球科学自動分析システム</a></p>
<ul>
<li><p><a class="reference internal" href="#about-saga-grid-system-limitations" id="id10">SAGAグリッドシステムの制限について</a></p></li>
<li><p><a class="reference internal" href="#limitations-for-multi-band-layers" id="id11">マルチバンドレイヤーに関する制限</a></p></li>
<li><p><a class="reference internal" href="#limitations-in-cell-size" id="id12">セルサイズの制限</a></p></li>
<li><p><a class="reference internal" href="#logging" id="id13">ログを記録する</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#r-scripts-and-libraries" id="id14">R scripts and libraries</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-r-scripts-from-the-qgis-collection" id="id15">QGISコレクションからRスクリプトを追加する</a></p></li>
<li><p><a class="reference internal" href="#creating-r-scripts" id="id16">Rスクリプトを作る</a></p></li>
<li><p><a class="reference internal" href="#r-libraries-installed-when-running-sf-test" id="id17">sf_testの実行時にインストールされるRライブラリ</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#grass" id="id18">GRASS</a></p></li>
<li><p><a class="reference internal" href="#lastools" id="id19">LAStools</a></p></li>
<li><p><a class="reference internal" href="#otb-applications" id="id20">OTBアプリケーション</a></p>
<ul>
<li><p><a class="reference internal" href="#documentation-of-otb-settings-available-in-qgis-processing" id="id21">QGISプロセシングで利用できるOTB設定のドキュメント</a></p></li>
<li><p><a class="reference internal" href="#compatibility-and-troubleshoot" id="id22">Compatibility and Troubleshoot</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<p>プロセシングフレームワークは、追加のアプリケーションを使って拡張できます。外部アプリケーションに依存するアルゴリズムは、独自のアルゴリズムプロバイダによって管理されます。追加のプロバイダは個別のプラグインとして見つけることができ、QGISプラグインマネージャを使ってインストールできます。</p>
<p>このセクションでは、これらの追加アプリケーションを含むようにプロセシングフレームワークを設定する方法を示し、それらに基づいたアルゴリズムのいくつかの特別な機能について説明します。一度システムを正しく設定すれば、他のアルゴリズムと同じように、ツールボックスやモデルデザイナーなど、どのコンポーネントからでも外部アルゴリズムを実行することができるようになります。</p>
<p>デフォルトでは、QGISに同梱されていない外部アプリケーションに依存するアルゴリズムは有効になっていません。システムにインストールされている場合は、プロセシング設定ダイアログで有効にすることができます。</p>
<section id="a-note-for-windows-users">
<h2><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">27.11.1. </span>Windowsユーザーへの注意点</a><a class="headerlink" href="#a-note-for-windows-users" title="Link to this heading"></a></h2>
<p>あなたが上級ユーザーでなく、Windows上でQGISを実行している場合、この章の残りを読むことに興味がないかもしれません。スタンドアロンインストーラを使ってQGISをあなたのシステムにインストールしてください。これにより、SAGAとGRASSが自動的にインストールされ、QGISから実行できるように設定されます。これらのプロバイダから提供されるすべてのアルゴリズムは、それ以上の設定を必要とすることなく実行できるようになります。OSGeo4W アプリケーションを使ってインストールする場合は、SAGA と GRASS を選択してインストールするようにしてください。</p>
</section>
<section id="a-note-on-file-formats">
<h2><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">27.11.2. </span>ファイル形式に関する注意点</a><a class="headerlink" href="#a-note-on-file-formats" title="Link to this heading"></a></h2>
<p>外部ソフトウェアを使用する場合、QGISでファイルを開いたからといって、そのファイルをその外部ソフトウェアで開いて処理できるわけではありません。ほとんどの場合、QGISで開いたファイルを他のソフトウェアで読み込むことができますが、そうでない場合もあります。ラスタレイヤ、ベクタレイヤを問わず、データベースや一般的でないファイル形式を使用する場合、問題が発生する可能性があります。そのような場合は、両方のプログラムが確実に理解できる、よく知られたファイル形式を使用するようにし、コンソール出力（ログパネル）をチェックして、何が間違っているのかを調べてください。</p>
<p>例えば、GRASSのラスタレイヤを入力として外部のアルゴリズムを呼び出すと、トラブルが発生し、作業が完了しない可能性があります。このため、そのようなレイヤはアルゴリズムに利用可能なレイヤとして表示されません。</p>
<p>しかしながら、ベクタレイヤについては問題が起きません。QGIS はベクタレイヤを外部アプリケーションに渡す前に、元のファイル形式から外部アプリケーションで受け入れられる形式に自動的に変換するためです。これには余分な処理時間が加わり、大きなレイヤで顕著でしょう。ですから、同じようなサイズのShapefile形式のデータセットからのレイヤよりも、DB接続からのレイヤの処理に時間がかかっても驚かないでください。</p>
<p>外部アプリケーションを使用していないプロバイダはQGISで開けるレイヤはどれも処理できます。なぜならそれらはQGISを通じて分析のためにそれを開いているので。</p>
<p>QGIS で生成されるすべてのラスタおよびベクタ出力形式は、入力レイヤとして使用できます。一部のプロバイダは特定の形式をサポートしていませんが、すべてのプロバイダは、後にQGISが自動的に変換できる一般的な形式にエクスポートできます。入力レイヤについては、変換が必要な場合、処理時間が長くなる可能性があります。</p>
</section>
<section id="a-note-on-vector-layer-selections">
<h2><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">27.11.3. </span>ベクタレイヤの選択に関する注意点</a><a class="headerlink" href="#a-note-on-vector-layer-selections" title="Link to this heading"></a></h2>
<p>外部アプリケーションがQGIS内でベクタレイヤに存在する選択を知らされることもできます。しかし、それにはそれらが元から外部アプリケーションでサポートされていない形式であったかのように、すべての入力ベクタレイヤを書き換えることが必要です。選択が存在しないか、 <em>選択された地物のみを使用</em> オプションがプロセシングの一般設定で有効になっていない場合にのみ、レイヤは外部アプリケーションに直接渡すことができます。</p>
<p>また、選択した地物だけをエクスポートする必要がある場合もあり、その場合は実行時間が長くなります。</p>
</section>
<section id="using-third-party-providers">
<h2><a class="toc-backref" href="#id8" role="doc-backlink"><span class="section-number">27.11.4. </span>Using third-party Providers</a><a class="headerlink" href="#using-third-party-providers" title="Link to this heading"></a></h2>
<section id="saga">
<span id="saga-configure"></span><span id="index-1"></span><h3><a class="toc-backref" href="#id9" role="doc-backlink"><span class="section-number">27.11.4.1. </span>SAGA: System for Automated Geoscientific Analyses、地球科学自動分析システム</a><a class="headerlink" href="#saga" title="Link to this heading"></a></h3>
<p>SAGAがQGISのインストールに含まれている場合、SAGAアルゴリズムをQGISから実行することができます。</p>
<p>Windowsを使っているなら、スタンドアロンインストーラーとOSGeo4Wインストーラーの両方にSAGAが含まれています。</p>
<section id="about-saga-grid-system-limitations">
<h4><a class="toc-backref" href="#id10" role="doc-backlink">SAGAグリッドシステムの制限について</a><a class="headerlink" href="#about-saga-grid-system-limitations" title="Link to this heading"></a></h4>
<p>複数の入力ラスターレイヤーを必要とするほとんどのSAGAアルゴリズムは、それらが同じグリッド系を持つことを必要としています。つまり、それらが同じ地理的領域をカバーして同じセルサイズを持ち、対応するグリッドが一致する必要があります。QGISからSAGAアルゴリズムを呼び出すときは、そのセルサイズと範囲に関係なく、どんなレイヤーも使用できます。複数のラスターレイヤーはSAGAアルゴリズムのための入力として使用される場合、QGISは（SAGAアルゴリズムが異なるグリッド系からのレイヤーで動作できない場合）共通のグリッド系にそれらをリサンプリングした後、SAGAに渡します。</p>
<p>その一般的なグリッド系の定義は、ユーザーによって制御され、そうする設定ウィンドウのSAGAグループ内のいくつかのパラメーターがあります。ターゲットグリッド系を設定する2つの方法があります。</p>
<ul>
<li><p>手動で設定する。次のパラメーターの値を設定することによって範囲を定義します。</p>
<ul class="simple">
<li><p><span class="guilabel">リサンプリング最小X</span></p></li>
<li><p><span class="guilabel">リサンプリング最大X</span></p></li>
<li><p><span class="guilabel">リサンプリング最小Y</span></p></li>
<li><p><span class="guilabel">リサンプリング最大Y</span></p></li>
<li><p><span class="guilabel">リサンプリングセルサイズ</span></p></li>
</ul>
<p>QGISはその範囲に対して入力レイヤーを、それらがその範囲と重複していない場合でも、再サンプリングすることに注意してください。</p>
</li>
<li><p>入力レイヤーから自動的に設定する。このオプションを選択するには、 <span class="guilabel">リサンプリングにグリッド系の最小カバーを使用</span> オプションチェックするだけです。他のすべての設定は無視され、すべての入力レイヤーを最小でカバーする範囲が使用されます。ターゲットレイヤーのセルサイズは、入力レイヤーの全てのセルサイズの最大値です。</p></li>
</ul>
<p>多重ラスターレイヤーを使用しないあるいは固有の入力グリッドシステムを必要としないアルゴリズムでは、SAGAを呼び出す前にリサンプリングは実行されませんし、これらのパラメーターは使用されません。</p>
</section>
<section id="limitations-for-multi-band-layers">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">マルチバンドレイヤーに関する制限</a><a class="headerlink" href="#limitations-for-multi-band-layers" title="Link to this heading"></a></h4>
<p>QGISとは異なり、SAGAではマルチバンドレイヤーをサポートしていません。（例えばRGBまたはマルチスペクトル画像のような）マルチバンドレイヤーを使用する場合は、最初にシングルバンド化された画像に分割する必要があります。そうするためには、「SAGA/グリッドツール/RGB画像を分割」アルゴリズム（RGB画像から三つの画像を作成する）や「SAGA /グリッドツール/バンド抽出」アルゴリズム（単一バンドを抽出する）を使用できます。</p>
</section>
<section id="limitations-in-cell-size">
<h4><a class="toc-backref" href="#id12" role="doc-backlink">セルサイズの制限</a><a class="headerlink" href="#limitations-in-cell-size" title="Link to this heading"></a></h4>
<p>SAGAではラスターレイヤーがx軸とy軸において同じセルサイズであることを仮定しています。もし、水平方向と垂直方向でセルサイズが異なる値のレイヤーで作業するならば、予期せぬ結果を得ることになるでしょう。この場合、入力レイヤーがSAGAによって適切に処理されないであろうという警告がプロセスログに加えられることになります。</p>
</section>
<section id="logging">
<h4><a class="toc-backref" href="#id13" role="doc-backlink">ログを記録する</a><a class="headerlink" href="#logging" title="Link to this heading"></a></h4>
<p>QGISはSAGAを呼び出すと、それはこれにより、すべての必要な操作を実行するためにコマンドのセットを通過する、そのコマンドラインインターフェイスを使用しません。SAGAは、追加のコンテンツと共に、既に行われる処理のパーセンテージを含むコンソールに情報を書き込むことにより、その進捗状況を示しています。この出力はフィルタがかけられ、アルゴリズムの実行中に、プログレスバーを更新するために使用されます。</p>
<p>QGISによって送信されたコマンドとSAGAによって出力された追加情報は、他のプロセシングログメッセージと一緒にログに記録することができ、QGISがSAGAアルゴリズムを実行するときに何が起こっているかを追跡するのに便利です。このロギングメカニズムを有効にするための2つの設定、すなわち <span class="guilabel">コンソール出力をログに記録する</span> と <span class="guilabel">実行コマンドをログに記録する</span> があります。</p>
<p>外部アプリケーションを使用し、コマンドラインから呼び出す他のほとんどのプロバイダにも同様のオプションがあるため、プロセシング設定リストの他の場所にも同様のオプションがあります。</p>
</section>
</section>
<section id="r-scripts-and-libraries">
<span id="r-scripts"></span><span id="index-2"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink"><span class="section-number">27.11.4.2. </span>R scripts and libraries</a><a class="headerlink" href="#r-scripts-and-libraries" title="Link to this heading"></a></h3>
<p>プロセシングでRを有効にするには、<strong>Processing R Provider</strong> プラグインをインストールしてQGIS用にRを設定する必要があります。</p>
<p>設定は <span class="menuselection">設定 ► オプション</span> の <span class="guilabel">プロセシング</span> タブにある <span class="menuselection">プロバイダ ► R</span> で行ないます。</p>
<p>オペレーティング・システムによっては、 <span class="guilabel">R folder</span> を使ってRバイナリの場所を指定する必要があるかもしれません。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><strong>Windows</strong> の場合、Rの実行ファイルは通常 <code class="file docutils literal notranslate"><span class="pre">C:¥Program</span> <span class="pre">Files¥R¥</span></code> の下のフォルダ(<code class="docutils literal notranslate"><span class="pre">R-</span> <span class="pre">&lt;version&gt;</span></code>)にあります。バイナリ <strong>ではなく</strong> フォルダを指定してください！</p>
<p><strong>Linux</strong> では、RフォルダがPATH環境変数に入っていることを確認するだけです。ターミナル・ウィンドウで <code class="docutils literal notranslate"><span class="pre">R</span></code> が R を起動すれば、準備は完了です。</p>
</div>
<p><strong>Processing R Provider</strong> プラグインをインストールすると、いくつかのサンプルスクリプトが <span class="guilabel">プロセシングツールボックス</span> に見つかります：</p>
<ul class="simple">
<li><p><span class="guilabel">Scatterplot</span> は与えられたベクタレイヤの2つの数値フィールドから散布図を作成するR関数を実行します。</p></li>
<li><p><span class="guilabel">test_sf</span> は <code class="docutils literal notranslate"><span class="pre">sf</span></code> パッケージに依存するいくつかの操作を行い、R パッケージ <code class="docutils literal notranslate"><span class="pre">sf</span></code> がインストールされているかどうかをチェックするために使うことができます。パッケージがインストールされていない場合、Rはプロセシングオプションの <span class="menuselection">プロバイダ ► R</span> で指定された <span class="guilabel">Package repository</span> を使って、パッケージ（および依存するすべてのパッケージ）のインストールを試みます。デフォルトはhttps://cran.r-project.org/ です。インストールには時間がかかるかもしれません…</p></li>
<li><p><span class="guilabel">test_sp</span> を使うと、Rパッケージ <code class="docutils literal notranslate"><span class="pre">sp</span></code> がインストールされているかどうかをチェックできます。このパッケージがインストールされていない場合、Rがインストールを試みます。</p></li>
</ul>
<figure class="align-center">
<img alt="../../../_images/processing_toolbox_r_install.png" src="../../../_images/processing_toolbox_r_install.png" />
</figure>
<p>RがQGIS用に正しく設定されていれば、これらのスクリプトを実行できるはずです。</p>
<section id="adding-r-scripts-from-the-qgis-collection">
<span id="adding-r-scripts"></span><span id="index-3"></span><h4><a class="toc-backref" href="#id15" role="doc-backlink">QGISコレクションからRスクリプトを追加する</a><a class="headerlink" href="#adding-r-scripts-from-the-qgis-collection" title="Link to this heading"></a></h4>
<p>QGISにおけるRの統合はSAGAとは異なり、あらかじめ定義された実行可能なアルゴリズムのセットはありません（<em>Processing R Provider</em> プラグインに付属するいくつかのスクリプト例を除く）。</p>
<p>サンプル R スクリプトのセットは QGIS Repository で利用可能です。以下の手順を実行し、<em>QGIS Resource Sharing</em> プラグインを使用してそれらを読み込んで有効にします。</p>
<ol class="arabic">
<li><p><em>QGIS Resource Sharing</em> プラグインを追加します（プラグインマネージャの <span class="guilabel">設定</span> で <span class="guilabel">実験的プラグインも表示</span> を有効にする必要があるかもしれません）。</p></li>
<li><p>Open it (<span class="menuselection">Plugins ► Resource Sharing ► Resource Sharing</span>)</p></li>
<li><p><span class="guilabel">Settings</span> タブを選びます</p></li>
<li><p><span class="guilabel">Reload repositories</span> をクリックします</p></li>
<li><p><span class="guilabel">All</span> タブを選びます</p></li>
<li><p>リストから <span class="guilabel">QGIS R script collection</span> を選び、<span class="guilabel">Install</span> ボタンをクリックします</p></li>
<li><p>これでそのコレクションが <span class="guilabel">Installed</span> タブにリストされているはずです</p></li>
<li><p>プラグインを閉じます</p></li>
<li><p><span class="guilabel">プロセシングツールボックス</span> を開きます。問題がなければ、スクリプトの例がRの下に様々なグループで表示されます（下のスクリーンショットでは一部のグループのみが展開されています）。</p>
<figure class="align-center" id="id4">
<img alt="../../../_images/processing_toolbox_r_scripts.png" src="../../../_images/processing_toolbox_r_scripts.png" />
<figcaption>
<p><span class="caption-number">図 27.36 </span><span class="caption-text">いくつかのRスクリプトが表示された <span class="guilabel">プロセシングツールボックス</span></span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>一番上のスクリプトは、<em>Processing R Provider</em> プラグインのスクリプト例です。</p>
</li>
<li><p>もし何らかの理由でスクリプトが <span class="guilabel">プロセシングツールボックス</span> で利用できない場合は、次を試してみてください：</p>
<ol class="arabic">
<li><p>プロセシング設定を開く（<span class="menuselection">設定 ► オプション ► プロセシング</span> タブ）</p></li>
<li><p><span class="menuselection">プロバイダ ► R ► R scripts folder</span> に移動する</p>
<ul>
<li><p>Ubuntuではそのパスを次に設定する（またはそのパスに含めた方が良い）：</p>
<blockquote>
<div><p>/home/&lt;user&gt;/.local/share/QGIS/QGIS3/profiles/default/resource_sharing/repositories/github.com/qgis/QGIS-Resources/collections/rscripts</p>
</div></blockquote>
<figure class="align-center">
<img alt="../../../_images/rscript_folder.png" src="../../../_images/rscript_folder.png" />
</figure>
</li>
<li><p>Windowsではそのパスを次に設定する（またはそのパスに含めた方が良い）：</p>
<blockquote>
<div><p>C:\Users\&lt;user&gt;\AppData\Roaming\QGIS\QGIS3\profiles\default\resource_sharing\repositories\github.com\qgis\QGIS-Resources\collections\rscripts</p>
</div></blockquote>
</li>
</ul>
<p>編集するにはダブルクリックします。その後、パスを貼り付けたり入力したりするか、<span class="guilabel">...</span> ボタンでディレクトリに移動し、開いたダイアログで <span class="guilabel">追加</span> ボタンを押します。ここでは複数のディレクトリを指定することができます。それらはセミコロン(&quot;;&quot;)で区切られます。</p>
<figure class="align-center">
<img alt="../../../_images/rscript_folder_add.png" src="../../../_images/rscript_folder_add.png" />
</figure>
</li>
</ol>
</li>
</ol>
<p>QGIS 2 オンラインコレクションからすべての R スクリプトを取得したい場合は、<em>QGIS R script collection</em> の代わりに <em>QGIS R script collection (from QGIS 2)</em> を選択してください。おそらく、ベクタデータの入出力に依存するスクリプトは動作しないことがわかります。</p>
</section>
<section id="creating-r-scripts">
<span id="index-4"></span><span id="id2"></span><h4><a class="toc-backref" href="#id16" role="doc-backlink">Rスクリプトを作る</a><a class="headerlink" href="#creating-r-scripts" title="Link to this heading"></a></h4>
<p>Rから行うのと同じように、スクリプトを書いたり、Rコマンドを呼び出したりすることができます。このセクションでは、QGISでRコマンドを使用するための構文と、その中でQGISオブジェクト（レイヤ、テーブル）を利用する方法について説明します。</p>
<p>R関数を呼び出すアルゴリズム（または、開発したより複雑なRスクリプトをQGISから利用できるようにしたい場合）を追加するには、Rコマンドを実行するスクリプトファイルを作成する必要があります。</p>
<p>Rスクリプトファイルの拡張子は <code class="file docutils literal notranslate"><span class="pre">.rsx</span></code> で、R構文とRスクリプトの基本的な知識があれば、作成はとても簡単です。これらのファイルはRスクリプトフォルダに保存する必要があります。このフォルダ（<span class="guilabel">R scripts folder</span>）は、プロセシング設定ダイアログの <span class="guilabel">R</span> 設定グループで指定することができます）。</p>
<p>Rのメソッド <code class="docutils literal notranslate"><span class="pre">spsample</span></code> を呼び出して、指定したポリゴンレイヤのポリゴンの境界内にランダムなグリッドを作成する、非常にシンプルなスクリプトファイルを見てみましょう。このメソッドは <code class="docutils literal notranslate"><span class="pre">maptools</span></code> パッケージに属しています。QGISに組み込みたいアルゴリズムのほとんどが空間データを使用または生成するため、<code class="docutils literal notranslate"><span class="pre">maptools</span></code> や <code class="docutils literal notranslate"><span class="pre">sp</span></code>/<code class="docutils literal notranslate"><span class="pre">sf</span></code> のような空間パッケージの知識は非常に役に立ちます。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">##Random points within layer extent=name</span>
<span class="c1">##Point pattern analysis=group</span>
<span class="c1">##Vector_layer=vector</span>
<span class="c1">##Number_of_points=number 10</span>
<span class="c1">##Output=output vector</span>
<span class="n">library</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
<span class="n">spatpoly</span> <span class="o">=</span> <span class="k">as</span><span class="p">(</span><span class="n">Vector_layer</span><span class="p">,</span> <span class="s2">&quot;Spatial&quot;</span><span class="p">)</span>
<span class="n">pts</span><span class="o">=</span><span class="n">spsample</span><span class="p">(</span><span class="n">spatpoly</span><span class="p">,</span><span class="n">Number_of_points</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
<span class="n">spdf</span><span class="o">=</span><span class="n">SpatialPointsDataFrame</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="k">as</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">pts</span><span class="p">))</span>
<span class="n">Output</span><span class="o">=</span><span class="n">st_as_sf</span><span class="p">(</span><span class="n">spdf</span><span class="p">)</span>
</pre></div>
</div>
<p>Pythonの二重のコメント記号（<cite>##</cite>）で始まる最初の行は、スクリプトの表示名とグループを定義し、QGISに入力と出力を伝えます。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>自分でRスクリプトを書く方法を詳しく知るには、トレーニングマニュアルの <a class="reference internal" href="../../training_manual/processing/r_intro.html#r-intro"><span class="std std-ref">R Intro</span></a> セクションを参照し、 <a class="reference internal" href="../appendices/qgis_r_syntax.html#r-syntax"><span class="std std-ref">QGIS R Syntax</span></a> セクションを参照してください。</p>
</div>
<p>入力パラメータを宣言すると、QGISはその情報を2つのことに使用します：そのパラメータの値をユーザに尋ねるユーザインタフェースを作成することと、R関数の入力として使用できる対応したR変数を作成することです。</p>
<p>上記の例では、<code class="docutils literal notranslate"><span class="pre">Vector_layer</span></code> という <code class="docutils literal notranslate"><span class="pre">vector</span></code> 型の入力を宣言しました。そのアルゴリズムを実行するとき、QGIS はユーザが選択したレイヤを開き、それを <code class="docutils literal notranslate"><span class="pre">Vector_layer</span></code> という変数に格納します。つまり、パラメータ名はそのパラメータの値にアクセスするために使用するRの変数名となります（そのため、Rの予約語をパラメータ名として使用することは避けるべきです）。</p>
<p>ベクタレイヤやラスタレイヤなどの空間パラメータは <code class="docutils literal notranslate"><span class="pre">st_read()</span></code> (または <code class="docutils literal notranslate"><span class="pre">readOGR</span></code>) や <code class="docutils literal notranslate"><span class="pre">brick()</span></code> (または <code class="docutils literal notranslate"><span class="pre">readGDAL</span></code>) コマンドを使って読み込まれ（これらのコマンドを記述ファイルに追加する必要はありません -- QGIS が行います）、<code class="docutils literal notranslate"><span class="pre">sf</span></code> (または <code class="docutils literal notranslate"><span class="pre">Spatial*DataFrame</span></code>) オブジェクトとして保存されます。</p>
<p>テーブルフィールドは、選択されたフィールド名を格納する文字列として保存されます。</p>
<p>ベクタファイルは、<code class="docutils literal notranslate"><span class="pre">##load_vector_using_rgdal</span></code> を指定すると、 <code class="docutils literal notranslate"><span class="pre">st_read()</span></code> の代わりに <code class="docutils literal notranslate"><span class="pre">readOGR()</span></code> コマンドを使って読み込むことができます。これは <code class="docutils literal notranslate"><span class="pre">sf</span></code> オブジェクトの代わりに <code class="docutils literal notranslate"><span class="pre">Spatial*DataFrame</span></code> オブジェクトを生成します。</p>
<p>ラスタファイルは、<code class="docutils literal notranslate"><span class="pre">##load_raster_using_rgdal</span></code> を指定すると、<code class="docutils literal notranslate"><span class="pre">brick()</span></code> の代わりに <code class="docutils literal notranslate"><span class="pre">readGDAL()</span></code> コマンドを使って読み込むことができます。</p>
<p>もしあなたが上級ユーザーで、QGISにレイヤのオブジェクトを作成させたくない場合、 <code class="docutils literal notranslate"><span class="pre">##pass_filenames</span></code> を使用することで、ファイル名を文字列で指定することができます。この場合、そのファイルに含まれるデータに対して操作を行う前に、ファイルを開く必要があります。</p>
<p>以上の情報で、Rスクリプトの最初の行（Pythonのコメント文字で始まっていない最初の行）を理解することができます。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">library</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
<span class="n">spatpoly</span> <span class="o">=</span> <span class="k">as</span><span class="p">(</span><span class="n">Vector_layer</span><span class="p">,</span> <span class="s2">&quot;Spatial&quot;</span><span class="p">)</span>
<span class="n">pts</span><span class="o">=</span><span class="n">spsample</span><span class="p">(</span><span class="n">polyg</span><span class="p">,</span><span class="n">numpoints</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">spsample</span></code> 関数は <em>sp</em> ライブラリで提供されているので、最初にすることはそのライブラリを読み込むことです。変数 <code class="docutils literal notranslate"><span class="pre">Vector_layer</span></code> には <code class="docutils literal notranslate"><span class="pre">sf</span></code> オブジェクトが格納されています。ここでは <em>sp</em> ライブラリの関数（<code class="docutils literal notranslate"><span class="pre">spsample</span></code>）を使用するので、<code class="docutils literal notranslate"><span class="pre">as</span></code> 関数を使用して <code class="docutils literal notranslate"><span class="pre">sf</span></code> オブジェクトを <code class="docutils literal notranslate"><span class="pre">SpatialPolygonsDataFrame</span></code> オブジェクトに変換する必要があります。</p>
<p>次に、このオブジェクトと <code class="docutils literal notranslate"><span class="pre">numpoints</span></code> 入力パラメータ（生成するポイントの数を指定します）を使用して <code class="docutils literal notranslate"><span class="pre">spsample</span></code> 関数を呼び出します。</p>
<p><code class="docutils literal notranslate"><span class="pre">Output</span></code> という名前のベクタ出力を宣言したので、<code class="docutils literal notranslate"><span class="pre">sf</span></code> オブジェクトを含む <code class="docutils literal notranslate"><span class="pre">Output</span></code> という名前の変数を作成しなければなりません。</p>
<p>これを 2 つのステップで行います。まず、<em>SpatialPointsDataFrame</em> 関数を使用して、関数の結果から <code class="docutils literal notranslate"><span class="pre">SpatialPolygonsDataFrame</span></code> オブジェクトを作成し、次に、(<em>sf</em> ライブラリの) <code class="docutils literal notranslate"><span class="pre">st_as_sf</span></code> 関数を使用して、そのオブジェクトを <code class="docutils literal notranslate"><span class="pre">sf</span></code> オブジェクトに変換します。</p>
<p>中間変数には好きな名前を使うことができます。ただ、最終的な結果を格納する変数が定義された名前（この場合は <code class="docutils literal notranslate"><span class="pre">Output</span></code>）を持ち、適切な値（ベクタレイヤの出力には <code class="docutils literal notranslate"><span class="pre">sf</span></code> オブジェクト）を含んでいることを確認してください。</p>
<p>この場合、<code class="docutils literal notranslate"><span class="pre">spsample</span></code> メソッドから得られた結果は、<code class="docutils literal notranslate"><span class="pre">SpatialPointsDataFrame</span></code> オブジェクトを介して、明示的に <code class="docutils literal notranslate"><span class="pre">sf</span></code> オブジェクトに変換する必要がありました。なぜなら、それ自体がpppクラスのオブジェクトであり、QGISに返すことができないからです。</p>
<p>アルゴリズムは、ラスタレイヤを生成した場合、それらが保存されている方法は、 <code class="docutils literal notranslate"><span class="pre">##dontuserasterpackage</span></code> オプションを使用しているかどうかに依存します。それを使用している場合は、これらのレイヤは、 <code class="docutils literal notranslate"><span class="pre">writeGDAL()</span></code> メソッドを使用して保存されます。そうでない場合、 <code class="docutils literal notranslate"><span class="pre">raster</span></code> パッケージから <code class="docutils literal notranslate"><span class="pre">writeRaster()</span></code> メソッドが使用されます。</p>
<p><code class="docutils literal notranslate"><span class="pre">##pass_filenames</span></code> オプションを使用した場合、出力は <code class="docutils literal notranslate"><span class="pre">raster</span></code> パッケージを使用して生成されます（ <code class="docutils literal notranslate"><span class="pre">writeRaster()</span></code> を使用）。</p>
<p>アルゴリズムがレイヤを生成せず、代わりにコンソールにテキスト結果を表示する場合、実行が終了したらコンソールに表示させたいことを示す必要があります。そのためには、表示させたい結果を生成するコマンド行を <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> （「大なり」）記号で始めるだけです。行頭に <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> が付いた行の出力のみが表示されます。例えば、ベクタレイヤの属性の指定されたフィールド（カラム）に対して正規性テストを実行するアルゴリズムの記述ファイルを以下に示します：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">##layer=vector</span>
<span class="c1">##field=field layer</span>
<span class="c1">##nortest=group</span>
<span class="n">library</span><span class="p">(</span><span class="n">nortest</span><span class="p">)</span>
<span class="o">&gt;</span><span class="n">lillie</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">layer</span><span class="p">[[</span><span class="n">field</span><span class="p">]])</span>
</pre></div>
</div>
<p>最後の行の出力が印刷されているが、第一の出力はない（そしていずれも、他のコマンドラインからの出力は、QGISによって自動的に追加されています）。</p>
<p>もしあなたのアルゴリズムが（<code class="docutils literal notranslate"><span class="pre">plot()``メソッドを使って）何らかのグラフィックを作成するのであれば、以下の行を追加してください（``output_plots_to_html</span></code> は以前は <code class="docutils literal notranslate"><span class="pre">showplots</span></code> でした）：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">##output_plots_to_html</span>
</pre></div>
</div>
<p>これは、QGISはRの実行が完了した後に開かれる一時ファイルにすべてのRのグラフィック出力をリダイレクトするようになります。</p>
<p>グラフィックスとコンソールの両方の結果は、プロセシング結果マネージャから入手できます。</p>
<p>For more information, please check the R scripts in the official
QGIS collection (you download and install them using the <em>QGIS
Resource Sharing</em> plugin, as explained in <a class="reference internal" href="#adding-r-scripts"><span class="std std-ref">QGISコレクションからRスクリプトを追加する</span></a>).
Most of them are rather simple and will greatly help you understand
how to create your own scripts.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">sf</span></code>、<code class="docutils literal notranslate"><span class="pre">rgdal</span></code>、<code class="docutils literal notranslate"><span class="pre">raster</span></code> ライブラリはデフォルトで読み込まれるので、対応する <code class="docutils literal notranslate"><span class="pre">library()</span></code> コマンドを追加する必要はありません。しかし、その他の必要なライブラリは明示的に読み込む必要があります： library(ggplot2)`` （<code class="docutils literal notranslate"><span class="pre">ggplot2</span></code> ライブラリを読み込む）。もしそのパッケージがあなたのマシンにまだインストールされていない場合、プロセシングはそのパッケージをダウンロードしてインストールしようとします。こうすることで、R Standaloneでもパッケージを利用できるようになります。パッケージのダウンロードが必要な場合、スクリプトの初回実行に時間がかかる可能性があることに <strong>注意してください</strong>。</p>
</div>
</section>
<section id="r-libraries-installed-when-running-sf-test">
<span id="index-5"></span><h4><a class="toc-backref" href="#id17" role="doc-backlink">sf_testの実行時にインストールされるRライブラリ</a><a class="headerlink" href="#r-libraries-installed-when-running-sf-test" title="Link to this heading"></a></h4>
<p>Rスクリプト <code class="docutils literal notranslate"><span class="pre">sp_test</span></code> は、Rパッケージ <code class="docutils literal notranslate"><span class="pre">sp</span></code> と <code class="docutils literal notranslate"><span class="pre">raster</span></code> を読み込もうとします。</p>
<p>Rスクリプト <em>sf_test</em> は、<code class="docutils literal notranslate"><span class="pre">sf</span></code> と <code class="docutils literal notranslate"><span class="pre">raster</span></code> を読み込もうとします。これら二つのパッケージがインストールされていないとき、Rはそれら（とそれが依存する全てのライブラリ）を読み込んでインストールしようとするでしょう。</p>
<p>以下のRライブラリは、UbuntuのProcessing Toolboxから <em>Processing R Provider</em> プラグインのバージョン2.0と <em>R</em> 3.4.4（<em>apt</em> パッケージの <code class="docutils literal notranslate"><span class="pre">r-base-core</span></code> のみ）を新規インストールして <code class="docutils literal notranslate"><span class="pre">sf_test</span></code> を実行した後、<code class="file docutils literal notranslate"><span class="pre">~/.local/share/QGIS/QGIS3/profiles/default/processing/rscripts`</span></code> に格納されます：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abind</span><span class="p">,</span> <span class="n">askpass</span><span class="p">,</span> <span class="n">assertthat</span><span class="p">,</span> <span class="n">backports</span><span class="p">,</span> <span class="n">base64enc</span><span class="p">,</span> <span class="n">BH</span><span class="p">,</span> <span class="n">bit</span><span class="p">,</span> <span class="n">bit64</span><span class="p">,</span> <span class="n">blob</span><span class="p">,</span> <span class="n">brew</span><span class="p">,</span> <span class="n">callr</span><span class="p">,</span> <span class="n">classInt</span><span class="p">,</span> <span class="n">cli</span><span class="p">,</span> <span class="n">colorspace</span><span class="p">,</span> <span class="n">covr</span><span class="p">,</span> <span class="n">crayon</span><span class="p">,</span> <span class="n">crosstalk</span><span class="p">,</span> <span class="n">curl</span><span class="p">,</span> <span class="n">DBI</span><span class="p">,</span> <span class="n">deldir</span><span class="p">,</span>
<span class="n">desc</span><span class="p">,</span> <span class="n">dichromat</span><span class="p">,</span> <span class="n">digest</span><span class="p">,</span> <span class="n">dplyr</span><span class="p">,</span> <span class="n">e1071</span><span class="p">,</span> <span class="n">ellipsis</span><span class="p">,</span> <span class="n">evaluate</span><span class="p">,</span> <span class="n">fansi</span><span class="p">,</span> <span class="n">farver</span><span class="p">,</span> <span class="n">fastmap</span><span class="p">,</span> <span class="n">gdtools</span><span class="p">,</span> <span class="n">ggplot2</span><span class="p">,</span> <span class="n">glue</span><span class="p">,</span> <span class="n">goftest</span><span class="p">,</span> <span class="n">gridExtra</span><span class="p">,</span> <span class="n">gtable</span><span class="p">,</span> <span class="n">highr</span><span class="p">,</span> <span class="n">hms</span><span class="p">,</span>
<span class="n">htmltools</span><span class="p">,</span> <span class="n">htmlwidgets</span><span class="p">,</span> <span class="n">httpuv</span><span class="p">,</span> <span class="n">httr</span><span class="p">,</span> <span class="n">jsonlite</span><span class="p">,</span> <span class="n">knitr</span><span class="p">,</span> <span class="n">labeling</span><span class="p">,</span> <span class="n">later</span><span class="p">,</span> <span class="n">lazyeval</span><span class="p">,</span> <span class="n">leafem</span><span class="p">,</span> <span class="n">leaflet</span><span class="p">,</span> <span class="n">leaflet</span><span class="o">.</span><span class="n">providers</span><span class="p">,</span> <span class="n">leafpop</span><span class="p">,</span> <span class="n">leafsync</span><span class="p">,</span> <span class="n">lifecycle</span><span class="p">,</span> <span class="n">lwgeom</span><span class="p">,</span>
<span class="n">magrittr</span><span class="p">,</span> <span class="n">maps</span><span class="p">,</span> <span class="n">mapview</span><span class="p">,</span> <span class="n">markdown</span><span class="p">,</span> <span class="n">memoise</span><span class="p">,</span> <span class="n">microbenchmark</span><span class="p">,</span> <span class="n">mime</span><span class="p">,</span> <span class="n">munsell</span><span class="p">,</span> <span class="n">odbc</span><span class="p">,</span> <span class="n">openssl</span><span class="p">,</span> <span class="n">pillar</span><span class="p">,</span> <span class="n">pkgbuild</span><span class="p">,</span> <span class="n">pkgconfig</span><span class="p">,</span> <span class="n">pkgload</span><span class="p">,</span> <span class="n">plogr</span><span class="p">,</span> <span class="n">plyr</span><span class="p">,</span> <span class="n">png</span><span class="p">,</span> <span class="n">polyclip</span><span class="p">,</span>
<span class="n">praise</span><span class="p">,</span> <span class="n">prettyunits</span><span class="p">,</span> <span class="n">processx</span><span class="p">,</span> <span class="n">promises</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">purrr</span><span class="p">,</span> <span class="n">R6</span><span class="p">,</span> <span class="n">raster</span><span class="p">,</span> <span class="n">RColorBrewer</span><span class="p">,</span> <span class="n">Rcpp</span><span class="p">,</span> <span class="n">reshape2</span><span class="p">,</span> <span class="n">rex</span><span class="p">,</span> <span class="n">rgeos</span><span class="p">,</span> <span class="n">rlang</span><span class="p">,</span> <span class="n">rmarkdown</span><span class="p">,</span> <span class="n">RPostgres</span><span class="p">,</span> <span class="n">RPostgreSQL</span><span class="p">,</span>
<span class="n">rprojroot</span><span class="p">,</span> <span class="n">RSQLite</span><span class="p">,</span> <span class="n">rstudioapi</span><span class="p">,</span> <span class="n">satellite</span><span class="p">,</span> <span class="n">scales</span><span class="p">,</span> <span class="n">sf</span><span class="p">,</span> <span class="n">shiny</span><span class="p">,</span> <span class="n">sourcetools</span><span class="p">,</span> <span class="n">sp</span><span class="p">,</span> <span class="n">spatstat</span><span class="p">,</span> <span class="n">spatstat</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">spatstat</span><span class="o">.</span><span class="n">utils</span><span class="p">,</span> <span class="n">stars</span><span class="p">,</span> <span class="n">stringi</span><span class="p">,</span> <span class="n">stringr</span><span class="p">,</span> <span class="n">svglite</span><span class="p">,</span>
<span class="n">sys</span><span class="p">,</span> <span class="n">systemfonts</span><span class="p">,</span> <span class="n">tensor</span><span class="p">,</span> <span class="n">testthat</span><span class="p">,</span> <span class="n">tibble</span><span class="p">,</span> <span class="n">tidyselect</span><span class="p">,</span> <span class="n">tinytex</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">utf8</span><span class="p">,</span> <span class="n">uuid</span><span class="p">,</span> <span class="n">vctrs</span><span class="p">,</span> <span class="n">viridis</span><span class="p">,</span> <span class="n">viridisLite</span><span class="p">,</span> <span class="n">webshot</span><span class="p">,</span> <span class="n">withr</span><span class="p">,</span> <span class="n">xfun</span><span class="p">,</span> <span class="n">XML</span><span class="p">,</span> <span class="n">xtable</span>
</pre></div>
</div>
</section>
</section>
<section id="grass">
<span id="grass-configure"></span><span id="index-6"></span><h3><a class="toc-backref" href="#id18" role="doc-backlink"><span class="section-number">27.11.4.3. </span>GRASS</a><a class="headerlink" href="#grass" title="Link to this heading"></a></h3>
<p>GRASSを設定するのはSAGAを設定するのとあまり変わりません。Windowsをお使いの場合は、まずGRASSフォルダのパスを定義する必要があります。</p>
<p>デフォルトでは、プロセシングフレームワークは、QGISに同梱されているGRASSディストリビューションを使用するようにGRASSコネクタを設定しようとします。ほとんどのシステムでは問題なく動作するはずですが、問題が発生した場合は、GRASSコネクタを手動で設定する必要があるかもしれません。また、別のGRASSを使用したい場合は、別のバージョンがインストールされているフォルダを指すように設定を変更することができます。アルゴリズムを正しく動作させるにはGRASS 7が必要です。</p>
<p>Linuxをお使いの場合は、GRASSが正しくインストールされ、ターミナルウィンドウから問題なく実行できることを確認してください。</p>
<p>GRASSアルゴリズムは、計算するための領域を使用します。この領域は、アルゴリズムを毎回実行するために使用されるすべての入力レイヤーを覆う最小範囲をとる、自動的SAGA構成に見られるものと同様の値を用いて、または手動で定義できます。後者のアプローチが好む動作である場合、GRASSの設定パラメーターで <span class="guilabel">最小カバー領域を使用</span> オプションをチェックするだけです。</p>
</section>
<section id="lastools">
<span id="lastools-configure"></span><span id="index-7"></span><h3><a class="toc-backref" href="#id19" role="doc-backlink"><span class="section-number">27.11.4.4. </span>LAStools</a><a class="headerlink" href="#lastools" title="Link to this heading"></a></h3>
<p>QGISで <a class="reference external" href="https://rapidlasso.com/lastools/">LAStools</a> を使うには、LAStoolsをコンピュータにダウンロードしてインストールし、LAStoolsプラグイン（公式リポジトリから入手可能です）をQGISにインストールする必要があります。</p>
<p>Linuxプラットフォームでは、いくつかのツールを実行するために <a class="reference external" href="https://www.winehq.org/">Wine</a> が必要です。</p>
<p>LAStoolsはProcessing options (<span class="menuselection">設定 ► オプション</span>, <span class="guilabel">プロセシング</span> タブ, <span class="menuselection">プロバイダ ► LAStools</span>)で有効化され、設定されます。ここでLAStools (<span class="guilabel">LAStoolsフォルダ</span>)とWine (<span class="guilabel">Wineフォルダ</span>)の場所を指定できます。Ubuntuの場合、デフォルトのWineフォルダは <code class="file docutils literal notranslate"><span class="pre">/usr/bin</span></code> です。</p>
</section>
<section id="otb-applications">
<span id="otb-configure"></span><span id="index-8"></span><h3><a class="toc-backref" href="#id20" role="doc-backlink"><span class="section-number">27.11.4.5. </span>OTBアプリケーション</a><a class="headerlink" href="#otb-applications" title="Link to this heading"></a></h3>
<p>OTBアプリケーションはQGISプロセシングフレームワークで完全にサポートされています。</p>
<p><a class="reference external" href="https://www.orfeo-toolbox.org">OTB</a> (Orfeo ToolBox) is an image
processing library for remote sensing data. It also provides
applications that provide image processing functionalities.
The list of applications and their documentation are available in
<a class="reference external" href="https://www.orfeo-toolbox.org/CookBook/Applications.html">OTB CookBook</a></p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>OTBはQGISと一緒に配布されていないので、別途インストールする必要があることに注意してください。OTBのバイナリパッケージは <a class="reference external" href="https://www.orfeo-toolbox.org/download">download page</a> にあります。</p>
</div>
<p>OTBライブラリを見つけるようにQGISプロセシングを設定するには：</p>
<ol class="arabic simple">
<li><p>Open the processing settings: <span class="menuselection">Settings ► Options ► Processing</span></p></li>
<li><p>You can see <code class="docutils literal notranslate"><span class="pre">OTB</span></code> under <span class="menuselection">Providers</span> menu:</p>
<ol class="arabic simple">
<li><p>Expand the <span class="guilabel">OTB</span> entry</p></li>
<li><p><span class="guilabel">OTBフォルダ</span> を設定します。これはOTBがインストールされている場所です。</p></li>
<li><p><span class="guilabel">OTBアプリケーションフォルダ</span> を設定します。これはOTBアプリケーションの場所です（<code class="file docutils literal notranslate"><span class="pre">&lt;PATH_TO_OTB_INSTALLATION&gt;/lib/otb/applications</span></code>）</p></li>
<li><p>Click <span class="guilabel">OK</span> to save the settings and close the dialog.</p></li>
</ol>
</li>
</ol>
<p>設定が正しければ <span class="guilabel">プロセシングツールボックス</span> でOTBアルゴリズムが利用可能になります。</p>
<section id="documentation-of-otb-settings-available-in-qgis-processing">
<h4><a class="toc-backref" href="#id21" role="doc-backlink">QGISプロセシングで利用できるOTB設定のドキュメント</a><a class="headerlink" href="#documentation-of-otb-settings-available-in-qgis-processing" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>OTBフォルダ</strong>: これはOTBが利用可能なディレクトリです。</p></li>
<li><p><strong>OTBアプリケーションフォルダ</strong>：これはOTBアプリケーションの場所です。</p>
<p>複数のパスが許されます。</p>
</li>
<li><p><strong>ログのレベル</strong> （オプション）：OTBアプリケーションが使うロガーのレベル。</p>
<p>ログのレベルはアルゴリズム実行中に表示される詳細の量を制御します。指定できるログのレベルの値は <code class="docutils literal notranslate"><span class="pre">INFO</span></code>、<code class="docutils literal notranslate"><span class="pre">WARNING</span></code>、<code class="docutils literal notranslate"><span class="pre">CRITICAL</span></code>、<code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> です。この値はデフォルトでは <code class="docutils literal notranslate"><span class="pre">INFO</span></code> です。これは上級者向けの設定です。</p>
</li>
<li><p><strong>使用するRAMの最大値</strong> （オプション）：OTBアプリケーションはデフォルトで利用可能なすべてのシステムRAMを使います。</p>
<p>しかし、このオプションを使って、特定の量のRAM（MB単位）を使うようにOTBに指示することができます。256の値はOTBプロセシングプロバイダによって無視されます。これは上級者向けの設定です。</p>
</li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>ジオイドファイル**（オプション）：ジオイドファイルのパス。</p>
<p>このオプションは、OTBアプリケーションのパラメータelev.dem.geoidとelev.geoidの値を設定します。この値をグローバルに設定することで、複数の処理アルゴリズムで値を共有することができます。デフォルトでは空。</p>
</li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>SRTMタイルフォルダ**（オプション）：SRTMタイルが利用できるディレクトリ。</p>
<p>SRTM データをローカルに保存し、処理中にファイルをダウンロードすることを避けることができます。このオプションは、OTBアプリケーションのelev.dem.pathとelev.demパラメータの値を設定します。この値をグローバルに設定することで、複数の処理アルゴリズムで値を共有することができます。デフォルトでは空。</p>
</li>
</ul>
</section>
<section id="compatibility-and-troubleshoot">
<h4><a class="toc-backref" href="#id22" role="doc-backlink">Compatibility and Troubleshoot</a><a class="headerlink" href="#compatibility-and-troubleshoot" title="Link to this heading"></a></h4>
<p>Starting from OTB 6.6.1, new releases of OTB are made compatible
with at least the latest QGIS version available at that time.</p>
<p>QGISプロセシングのOTBアプリケーションに問題がある場合は、<a class="reference external" href="https://gitlab.orfeo-toolbox.org/orfeotoolbox/otb/-/issues">OTB bug tracker</a> に <code class="docutils literal notranslate"><span class="pre">qgis</span></code> ラベルを付けてissueを登録してください。</p>
<p>Additional information about OTB and QGIS can be found in
<a class="reference external" href="https://www.orfeo-toolbox.org/CookBook-develop/QGISInterface.html">OTB Cookbook</a>.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="parameters.html" class="btn btn-neutral float-left" title="27.10. プロセシングアルゴリズムのための入力と出力の型" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../processing_algs/index.html" class="btn btn-neutral float-right" title="28. プロセシングプロバイダとアルゴリズム" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">最終更新: 2024 5月 30, 01:33 +0900
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages:
Expected French translation link for https://docs.qgis.org/3.28/en/docs/user_manual/print_composer/overview_composer.html
would return https://app.transifex.com/qgis/qgis-documentation/translate/#fr/aa6d8bc653526d38b295ca94bf8eee5e
with the md5 value of "github#qgis/QGIS-Documentation#release_3.28#locale/en/LC_MESSAGES/docs/user_manual/print_composer/overview_composer.po"-->
<!--Make sure that mismatching language codes between Transifex and Sphinx are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: 3.34
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/user_manual/processing/3rdParty.html">en</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/cs/docs/user_manual/processing/3rdParty.html">cs</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/de/docs/user_manual/processing/3rdParty.html">de</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/es/docs/user_manual/processing/3rdParty.html">es</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/fr/docs/user_manual/processing/3rdParty.html">fr</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/hu/docs/user_manual/processing/3rdParty.html">hu</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/it/docs/user_manual/processing/3rdParty.html">it</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/processing/3rdParty.html">ja</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ko/docs/user_manual/processing/3rdParty.html">ko</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/lt/docs/user_manual/processing/3rdParty.html">lt</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/nl/docs/user_manual/processing/3rdParty.html">nl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_BR/docs/user_manual/processing/3rdParty.html">pt_BR</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_PT/docs/user_manual/processing/3rdParty.html">pt_PT</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ro/docs/user_manual/processing/3rdParty.html">ro</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ru/docs/user_manual/processing/3rdParty.html">ru</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zh-Hans/docs/user_manual/processing/3rdParty.html">zh-Hans</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/ja/docs/user_manual/processing/3rdParty.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/ja/docs/user_manual/processing/3rdParty.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/processing/3rdParty.html">3.34</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.28/ja/docs/user_manual/processing/3rdParty.html">3.28</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.22/ja/docs/user_manual/processing/3rdParty.html">3.22</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/ja/docs/user_manual/processing/3rdParty.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/ja/docs/user_manual/processing/3rdParty.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/ja/docs/user_manual/processing/3rdParty.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/ja/docs/user_manual/processing/3rdParty.html">2.18</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/user_manual/processing/3rdParty.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://app.transifex.com/qgis/qgis-documentation/translate/#ja/1b134e3c3a8989e814022d24284f7dcf" target="_blank" rel="noopener noreferrer">Translate Page</a>
          </dd>
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/ja" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/3.34" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/3.34" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/release-3_34" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>