<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>13.2. 関数のリスト &mdash; QGIS Documentation  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/qgis_docs.css?v=5415a924" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/user_manual/expressions/functions_list.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../../_static/translations.js?v=4dbe4bdc"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" />
    <link rel="next" title="14. スタイルライブラリ" href="../style_library/index.html" />
    <link rel="prev" title="13.1. 式" href="expression.html" />
  <meta name="description" content="QGIS 3.34 documentation: 13.2. 関数のリスト">
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   

          
          
          <a href="../../index.html" class="icon icon-home">
            QGIS Documentation
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.34
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">ユーザ向け</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">QGIS Desktopユーザーガイド／マニュアル (QGIS 3.34)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../preamble/preamble.html">1. はじめに</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/foreword.html">2. 序文</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/conventions.html">3. 記述ルール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/features.html">4. 機能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/getting_started.html">5. 最初のステップ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/project_files.html">6. プロジェクトファイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_gui.html">7. QGISのユーザインタフェース</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/browser.html">8. ブラウザパネル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_configuration.html">9. QGISの設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_projections/working_with_projections.html">10. 投影法の操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../map_views/index.html">11. 地図の可視化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/general_tools.html">12. 一般ツール</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">13. 式でレベルアップ</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="expression.html">13.1. 式</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">13.2. 関数のリスト</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#aggregates-functions">13.2.1. 集計関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#array-functions">13.2.2. 配列関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#color-functions">13.2.3. 色関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditional-functions">13.2.4. 条件関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conversions-functions">13.2.5. 変換関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-functions">13.2.6. カスタム関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#date-and-time-functions">13.2.7. 日付と時刻の関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fields-and-values">13.2.8. フィールドと値</a></li>
<li class="toctree-l4"><a class="reference internal" href="#files-and-paths-functions">13.2.9. ファイルとパスの関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#form-functions">13.2.10. フォーム関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fuzzy-matching-functions">13.2.11. ファジー・マッチング関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general-functions">13.2.12. 一般関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geometry-functions">13.2.13. ジオメトリ関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#layout-functions">13.2.14. レイアウト関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#map-layers">13.2.15. 地図レイヤ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#maps-functions">13.2.16. マップ関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mathematical-functions">13.2.17. 数学関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#meshes-functions">13.2.18. メッシュ関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operators">13.2.19. 演算子</a></li>
<li class="toctree-l4"><a class="reference internal" href="#processing-functions">13.2.20. プロセシング関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rasters-functions">13.2.21. ラスタ関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#record-and-attributes-functions">13.2.22. レコードと属性関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#relations">13.2.23. リレーション</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sensors-functions">13.2.24. Sensors Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string-functions">13.2.25. 文字列関数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-expressions">13.2.26. ユーザー式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variables">13.2.27. 変数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recent-functions">13.2.28. 最近の関数</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../style_library/index.html">14. スタイルライブラリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../managing_data_source/index.html">15. データソースの管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector/index.html">16. ベクタデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_raster/index.html">17. ラスタデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_mesh/mesh.html">18. メッシュデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector_tiles/vector_tiles.html">19. ベクタタイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_point_clouds/point_clouds.html">20. 点群の操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_3d_tiles/3d_tiles.html">21. 3Dタイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../print_composer/index.html">22. 地図のレイアウト</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_ogc/ogc_client_support.html">23. OGC / ISOプロトコルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_gps/index.html">24. GPSデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth_system/index.html">25. 認証システム</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grass_integration/grass_integration.html">26. GRASS GIS の統合</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing/index.html">27. QGIS プロセシングフレームワーク</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing_algs/index.html">28. プロセシングプロバイダとアルゴリズム</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">29. プラグイン</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/help_and_support.html">30. ヘルプとサポート</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/contributors.html">31. 協力者</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/index.html">32. 付録</a></li>
<li class="toctree-l2"><a class="reference internal" href="../literature_web/literature_and_web_references.html">33. 文献とWeb参照</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Serverガイド／マニュアル (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_manual/index.html">トレーニングマニュアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">やさしい GIS 入門</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ドキュメント執筆者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">ドキュメント作成のガイドライン</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">開発者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyqgis_developer_cookbook/index.html">PyQGISクックブック (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">開発者ガイド</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">QGISユーザガイド</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">13. </span>式でレベルアップ</a></li>
      <li class="breadcrumb-item active"><span class="section-number">13.2. </span>関数のリスト</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/user_manual/expressions/functions_list.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="expression.html" class="btn btn-neutral float-left" title="13.1. 式" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../style_library/index.html" class="btn btn-neutral float-right" title="14. スタイルライブラリ" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div><div class="admonition important">
<p class="admonition-title">重要</p>
<p>翻訳は <a class="reference external" href="https://qgis.org/en/site/getinvolved/translate.html#becoming-a-translator">あなたが参加できる</a> コミュニティの取り組みです。このページは現在 99.33% 翻訳されています。</p>
</div>
</div></blockquote>
<section id="list-of-functions">
<span id="functions-list"></span><span id="index-0"></span><h1><span class="section-number">13.2. </span>関数のリスト<a class="headerlink" href="#list-of-functions" title="Link to this heading"></a></h1>
<p>QGISで利用可能な関数、演算子、変数をカテゴリ別でまとめて以下に示します。</p>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#aggregates-functions" id="id109">集計関数</a></p></li>
<li><p><a class="reference internal" href="#array-functions" id="id110">配列関数</a></p></li>
<li><p><a class="reference internal" href="#color-functions" id="id111">色関数</a></p></li>
<li><p><a class="reference internal" href="#conditional-functions" id="id112">条件関数</a></p></li>
<li><p><a class="reference internal" href="#conversions-functions" id="id113">変換関数</a></p></li>
<li><p><a class="reference internal" href="#custom-functions" id="id114">カスタム関数</a></p></li>
<li><p><a class="reference internal" href="#date-and-time-functions" id="id115">日付と時刻の関数</a></p></li>
<li><p><a class="reference internal" href="#fields-and-values" id="id116">フィールドと値</a></p></li>
<li><p><a class="reference internal" href="#files-and-paths-functions" id="id117">ファイルとパスの関数</a></p></li>
<li><p><a class="reference internal" href="#form-functions" id="id118">フォーム関数</a></p></li>
<li><p><a class="reference internal" href="#fuzzy-matching-functions" id="id119">ファジー・マッチング関数</a></p></li>
<li><p><a class="reference internal" href="#general-functions" id="id120">一般関数</a></p></li>
<li><p><a class="reference internal" href="#geometry-functions" id="id121">ジオメトリ関数</a></p></li>
<li><p><a class="reference internal" href="#layout-functions" id="id122">レイアウト関数</a></p></li>
<li><p><a class="reference internal" href="#map-layers" id="id123">地図レイヤ</a></p></li>
<li><p><a class="reference internal" href="#maps-functions" id="id124">マップ関数</a></p></li>
<li><p><a class="reference internal" href="#mathematical-functions" id="id125">数学関数</a></p></li>
<li><p><a class="reference internal" href="#meshes-functions" id="id126">メッシュ関数</a></p></li>
<li><p><a class="reference internal" href="#operators" id="id127">演算子</a></p></li>
<li><p><a class="reference internal" href="#processing-functions" id="id128">プロセシング関数</a></p></li>
<li><p><a class="reference internal" href="#rasters-functions" id="id129">ラスタ関数</a></p></li>
<li><p><a class="reference internal" href="#record-and-attributes-functions" id="id130">レコードと属性関数</a></p></li>
<li><p><a class="reference internal" href="#relations" id="id131">リレーション</a></p></li>
<li><p><a class="reference internal" href="#sensors-functions" id="id132">Sensors Functions</a></p></li>
<li><p><a class="reference internal" href="#string-functions" id="id133">文字列関数</a></p></li>
<li><p><a class="reference internal" href="#user-expressions" id="id134">ユーザー式</a></p></li>
<li><p><a class="reference internal" href="#variables" id="id135">変数</a></p></li>
<li><p><a class="reference internal" href="#recent-functions" id="id136">最近の関数</a></p></li>
</ul>
</nav>
<section id="aggregates-functions">
<span id="aggregates-function"></span><span id="index-1"></span><h2><a class="toc-backref" href="#id109" role="doc-backlink"><span class="section-number">13.2.1. </span>集計関数</a><a class="headerlink" href="#aggregates-functions" title="Link to this heading"></a></h2>
<p>このグループには、レイヤやフィールドの値を集計する関数が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id2">
<ul class="simple">
<li><p><a class="reference internal" href="#aggregate" id="id137">aggregate</a></p></li>
<li><p><a class="reference internal" href="#array-agg" id="id138">array_agg</a></p></li>
<li><p><a class="reference internal" href="#collect" id="id139">collect</a></p></li>
<li><p><a class="reference internal" href="#concatenate" id="id140">concatenate</a></p></li>
<li><p><a class="reference internal" href="#concatenate-unique" id="id141">concatenate_unique</a></p></li>
<li><p><a class="reference internal" href="#count" id="id142">count</a></p></li>
<li><p><a class="reference internal" href="#count-distinct" id="id143">count_distinct</a></p></li>
<li><p><a class="reference internal" href="#count-missing" id="id144">count_missing</a></p></li>
<li><p><a class="reference internal" href="#iqr" id="id145">iqr</a></p></li>
<li><p><a class="reference internal" href="#majority" id="id146">majority</a></p></li>
<li><p><a class="reference internal" href="#max-length" id="id147">max_length</a></p></li>
<li><p><a class="reference internal" href="#maximum" id="id148">maximum</a></p></li>
<li><p><a class="reference internal" href="#mean" id="id149">mean</a></p></li>
<li><p><a class="reference internal" href="#median" id="id150">median</a></p></li>
<li><p><a class="reference internal" href="#min-length" id="id151">min_length</a></p></li>
<li><p><a class="reference internal" href="#minimum" id="id152">minimum</a></p></li>
<li><p><a class="reference internal" href="#minority" id="id153">minority</a></p></li>
<li><p><a class="reference internal" href="#q1" id="id154">q1</a></p></li>
<li><p><a class="reference internal" href="#q3" id="id155">q3</a></p></li>
<li><p><a class="reference internal" href="#range" id="id156">range</a></p></li>
<li><p><a class="reference internal" href="#relation-aggregate" id="id157">relation_aggregate</a></p></li>
<li><p><a class="reference internal" href="#stdev" id="id158">stdev</a></p></li>
<li><p><a class="reference internal" href="#sum" id="id159">sum</a></p></li>
</ul>
</nav>
</div>
<section id="aggregate">
<span id="expression-function-aggregates-aggregate"></span><h3><a class="toc-backref" href="#id137" role="doc-backlink"><span class="section-number">13.2.1.1. </span>aggregate</a><a class="headerlink" href="#aggregate" title="Link to this heading"></a></h3>
<p>別のレイヤの地物を使って計算された値の集計値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>aggregate(layer, aggregate, expression, [filter], [concatenator=''], [order_by])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - レイヤ名かレイヤIDのどちらかを表す文字列</p></li>
<li><p><strong>aggregate</strong> - 計算する集計値に対応する文字列。有効なオプションは次のとおり：</p>
<ul>
<li><p>count</p></li>
<li><p>count_distinct</p></li>
<li><p>count_missing</p></li>
<li><p>min</p></li>
<li><p>max</p></li>
<li><p>sum</p></li>
<li><p>mean</p></li>
<li><p>median</p></li>
<li><p>stdev</p></li>
<li><p>stdevsample</p></li>
<li><p>range</p></li>
<li><p>minority</p></li>
<li><p>majority</p></li>
<li><p>q1: 第1四分位数</p></li>
<li><p>q3: 第3四分位数</p></li>
<li><p>iqr: 四分位範囲</p></li>
<li><p>min_length: 文字列長の最小値</p></li>
<li><p>max_length: 文字列長の最大値</p></li>
<li><p>concatenate: 文字列を連結文字で連結</p></li>
<li><p>concatenate_unique: ユニークな文字列のみを連結文字で連結</p></li>
<li><p>collect: マルチパートジオメトリに集約したものを生成</p></li>
<li><p>array_agg: 集約値の配列を生成</p></li>
</ul>
</li>
<li><p><strong>expression</strong> - 集約の対象とするサブ式またはフィールド名</p></li>
<li><p><strong>filter</strong> - （オプション）集約の計算に使用する地物を制限するフィルタ式。フィールドとジオメトリは結合されるレイヤの地物からのものです。ソースの地物には変数 &#64;parent でアクセスできます。</p></li>
<li><p><strong>concatenator</strong> - <a href="#id1"><span class="problematic" id="id2">`</span></a>concatenate' および 'concatenate_unique' 集約の値を結合するために使用するオプションの文字列です。</p></li>
<li><p><strong>order_by</strong> - （オプション）集約値の計算に使用される地物を並べ替えるためのフィルタ式。フィールドとジオメトリは結合されるレイヤの地物からのものです。デフォルトでは、返される地物の順序は決まっていません。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">aggregate(layer:='rail_stations',aggregate:='sum',expression:=&quot;passengers&quot;)</span></code> → rail_stations レイヤの passengers フィールドの値の合計</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aggregate('rail_stations','sum',</span> <span class="pre">&quot;passengers&quot;/7)</span></code> → &quot;passengers&quot; フィールドを合計する前に7で割って、 &quot;passengers&quot; の日平均を計算する</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aggregate(layer:='rail_stations',aggregate:='sum',expression:=&quot;passengers&quot;,filter:=&quot;class&quot;&gt;3)</span></code> → &quot;class&quot; 属性が 3 より大きい地物だけ、 &quot;passengers&quot; フィールドの値を合計する</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aggregate(layer:='rail_stations',aggregate:='concatenate',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">concatenator:=',')</span></code> → rail_stations レイヤの全地物の name フィールドをコンマ区切りで連結する</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aggregate(layer:='countries',</span> <span class="pre">aggregate:='max',</span> <span class="pre">expression:=&quot;code&quot;,</span> <span class="pre">filter:=intersects(</span> <span class="pre">&#64;geometry,</span> <span class="pre">geometry(&#64;parent)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'countries' レイヤ上で交差している国の国コード</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aggregate(layer:='rail_stations',aggregate:='sum',expression:=&quot;passengers&quot;,filter:=contains(</span> <span class="pre">&#64;atlas_geometry,</span> <span class="pre">&#64;geometry</span> <span class="pre">)</span> <span class="pre">)</span></code> → 現在の地図帳地物内にある rail_stations レイヤの passengers フィールドの値の合計</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aggregate(layer:='rail_stations',</span> <span class="pre">aggregate:='collect',</span> <span class="pre">expression:=centroid(&#64;geometry),</span> <span class="pre">filter:=&quot;region_name&quot;</span> <span class="pre">=</span> <span class="pre">attribute(&#64;parent,'name')</span> <span class="pre">)</span></code> → 同じ地域の rail_stations のジオメトリ重心を現在地物として集約する</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-agg">
<span id="expression-function-aggregates-array-agg"></span><h3><a class="toc-backref" href="#id138" role="doc-backlink"><span class="section-number">13.2.1.2. </span>array_agg</a><a class="headerlink" href="#array-agg" title="Link to this heading"></a></h3>
<p>属性値を集約し、配列として返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_agg(expression, [group_by], [filter], [order_by])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
<li><p><strong>order_by</strong> - （オプション）集約計算の地物を並べ替えるための式。デフォルトでは、返される地物の順序は決まっていません。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_agg(&quot;name&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、name フィールドの値のリスト</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="collect">
<span id="expression-function-aggregates-collect"></span><h3><a class="toc-backref" href="#id139" role="doc-backlink"><span class="section-number">13.2.1.3. </span>collect</a><a class="headerlink" href="#collect" title="Link to this heading"></a></h3>
<p>式で集約されたジオメトリをマルチパートジオメトリとして返します</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>collect(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集約するジオメトリ式</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">collect(</span> <span class="pre">&#64;geometry</span> <span class="pre">)</span></code> → 集約されたジオメトリのマルチパートジオメトリ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collect(</span> <span class="pre">centroid(&#64;geometry),</span> <span class="pre">group_by:=&quot;region&quot;,</span> <span class="pre">filter:=</span> <span class="pre">&quot;use&quot;</span> <span class="pre">=</span> <span class="pre">'civilian'</span> <span class="pre">)</span></code> → region の値に基づいて civilian 地物の重心を集約します</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="concatenate">
<span id="expression-function-aggregates-concatenate"></span><h3><a class="toc-backref" href="#id140" role="doc-backlink"><span class="section-number">13.2.1.4. </span>concatenate</a><a class="headerlink" href="#concatenate" title="Link to this heading"></a></h3>
<p>フィールドまたは式の値を区切り文字（デリミタ）で連結した文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>concatenate(expression, [group_by], [filter], [concatenator], [order_by])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
<li><p><strong>concatenator</strong> - （オプション）区切り文字列。デフォルトは空</p></li>
<li><p><strong>order_by</strong> - （オプション）集約計算の地物を並べ替えるための式。デフォルトでは、返される地物の順序は決まっていません。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">concatenate(&quot;town_name&quot;,group_by:=&quot;state&quot;,concatenator:=',')</span></code> → state フィールドでグループ化された、 town_name のコンマ区切りのリスト</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="concatenate-unique">
<span id="expression-function-aggregates-concatenate-unique"></span><h3><a class="toc-backref" href="#id141" role="doc-backlink"><span class="section-number">13.2.1.5. </span>concatenate_unique</a><a class="headerlink" href="#concatenate-unique" title="Link to this heading"></a></h3>
<p>フィールドまたは式による文字列を重複を除外して区切り文字（デリミタ）で連結した文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>concatenate_unique(expression, [group_by], [filter], [concatenator], [order_by])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
<li><p><strong>concatenator</strong> - （オプション）区切り文字列。デフォルトは空</p></li>
<li><p><strong>order_by</strong> - （オプション）集約計算の地物を並べ替えるための式。デフォルトでは、返される地物の順序は決まっていません。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">concatenate_unique(&quot;town_name&quot;,group_by:=&quot;state&quot;,concatenator:=',')</span></code> → state フィールドでグループ化された、重複のない town_name のコンマ区切りのリスト</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="count">
<span id="expression-function-aggregates-count"></span><h3><a class="toc-backref" href="#id142" role="doc-backlink"><span class="section-number">13.2.1.6. </span>count</a><a class="headerlink" href="#count" title="Link to this heading"></a></h3>
<p>マッチする地物の数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>count(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">count(&quot;stations&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された stations の数</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="count-distinct">
<span id="expression-function-aggregates-count-distinct"></span><h3><a class="toc-backref" href="#id143" role="doc-backlink"><span class="section-number">13.2.1.7. </span>count_distinct</a><a class="headerlink" href="#count-distinct" title="Link to this heading"></a></h3>
<p>重複を除いた（distinctな）値の数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>count_distinct(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">count_distinct(&quot;stations&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、重複のない stations の値の数</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="count-missing">
<span id="expression-function-aggregates-count-missing"></span><h3><a class="toc-backref" href="#id144" role="doc-backlink"><span class="section-number">13.2.1.8. </span>count_missing</a><a class="headerlink" href="#count-missing" title="Link to this heading"></a></h3>
<p>欠損値（NULL）の数を返します</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>count_missing(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">count_missing(&quot;stations&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、stations の欠損値（NULL）の数</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="iqr">
<span id="expression-function-aggregates-iqr"></span><h3><a class="toc-backref" href="#id145" role="doc-backlink"><span class="section-number">13.2.1.9. </span>iqr</a><a class="headerlink" href="#iqr" title="Link to this heading"></a></h3>
<p>フィールドまたは式の値の四分位範囲（IQR）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>iqr(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iqr(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、population の値の四分位範囲</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="majority">
<span id="expression-function-aggregates-majority"></span><h3><a class="toc-backref" href="#id146" role="doc-backlink"><span class="section-number">13.2.1.10. </span>majority</a><a class="headerlink" href="#majority" title="Link to this heading"></a></h3>
<p>フィールドまたは式の最頻値（最もよく出現する値）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>majority(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">majority(&quot;class&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、最も頻繁に出現する class の値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="max-length">
<span id="expression-function-aggregates-max-length"></span><h3><a class="toc-backref" href="#id147" role="doc-backlink"><span class="section-number">13.2.1.11. </span>max_length</a><a class="headerlink" href="#max-length" title="Link to this heading"></a></h3>
<p>フィールドまたは式の文字列の最大長を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>max_length(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">max_length(&quot;town_name&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された town_name 文字列の最大長</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="maximum">
<span id="expression-function-aggregates-maximum"></span><h3><a class="toc-backref" href="#id148" role="doc-backlink"><span class="section-number">13.2.1.12. </span>maximum</a><a class="headerlink" href="#maximum" title="Link to this heading"></a></h3>
<p>フィールドまたは式の最大値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>maximum(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">maximum(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、population の最大値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="mean">
<span id="expression-function-aggregates-mean"></span><h3><a class="toc-backref" href="#id149" role="doc-backlink"><span class="section-number">13.2.1.13. </span>mean</a><a class="headerlink" href="#mean" title="Link to this heading"></a></h3>
<p>フィールドまたは式の平均値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>mean(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mean(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、population の平均値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="median">
<span id="expression-function-aggregates-median"></span><h3><a class="toc-backref" href="#id150" role="doc-backlink"><span class="section-number">13.2.1.14. </span>median</a><a class="headerlink" href="#median" title="Link to this heading"></a></h3>
<p>フィールドまたは式の中央値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>median(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">median(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、 population の中央値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="min-length">
<span id="expression-function-aggregates-min-length"></span><h3><a class="toc-backref" href="#id151" role="doc-backlink"><span class="section-number">13.2.1.15. </span>min_length</a><a class="headerlink" href="#min-length" title="Link to this heading"></a></h3>
<p>フィールドまたは式の文字列の最短長を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>min_length(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">min_length(&quot;town_name&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化されたtown_name の文字列の最短長</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="minimum">
<span id="expression-function-aggregates-minimum"></span><h3><a class="toc-backref" href="#id152" role="doc-backlink"><span class="section-number">13.2.1.16. </span>minimum</a><a class="headerlink" href="#minimum" title="Link to this heading"></a></h3>
<p>フィールドまたは式の最小値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>minimum(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minimum(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、population の最小値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="minority">
<span id="expression-function-aggregates-minority"></span><h3><a class="toc-backref" href="#id153" role="doc-backlink"><span class="section-number">13.2.1.17. </span>minority</a><a class="headerlink" href="#minority" title="Link to this heading"></a></h3>
<p>フィールドまたは式の最少出現値（出現が最も少ない値）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>minority(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minority(&quot;class&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、出現が最も稀な class の値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="q1">
<span id="expression-function-aggregates-q1"></span><h3><a class="toc-backref" href="#id154" role="doc-backlink"><span class="section-number">13.2.1.18. </span>q1</a><a class="headerlink" href="#q1" title="Link to this heading"></a></h3>
<p>フィールドまたは式の値の第１四分位数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>q1(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">q1(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、population の値の第１四分位数</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="q3">
<span id="expression-function-aggregates-q3"></span><h3><a class="toc-backref" href="#id155" role="doc-backlink"><span class="section-number">13.2.1.19. </span>q3</a><a class="headerlink" href="#q3" title="Link to this heading"></a></h3>
<p>フィールドまたは式の値の第３四分位数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>q3(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">q3(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、population の値の第３四分位数</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="range">
<span id="expression-function-aggregates-range"></span><h3><a class="toc-backref" href="#id156" role="doc-backlink"><span class="section-number">13.2.1.20. </span>range</a><a class="headerlink" href="#range" title="Link to this heading"></a></h3>
<p>フィールドまたは式の値の範囲（最大値 - 最小値）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>range(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">range(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、population の値の範囲</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="relation-aggregate">
<span id="expression-function-aggregates-relation-aggregate"></span><h3><a class="toc-backref" href="#id157" role="doc-backlink"><span class="section-number">13.2.1.21. </span>relation_aggregate</a><a class="headerlink" href="#relation-aggregate" title="Link to this heading"></a></h3>
<p>レイヤのリレーションからマッチする子地物を使用して計算された集計値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>relation_aggregate(relation, aggregate, expression, [concatenator=''], [order_by])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>relation</strong> - リレーションIDを表す文字列</p></li>
<li><p><strong>aggregate</strong> - 計算する集計値に対応する文字列。有効なオプションは次のとおり：</p>
<ul>
<li><p>count</p></li>
<li><p>count_distinct</p></li>
<li><p>count_missing</p></li>
<li><p>min</p></li>
<li><p>max</p></li>
<li><p>sum</p></li>
<li><p>mean</p></li>
<li><p>median</p></li>
<li><p>stdev</p></li>
<li><p>stdevsample</p></li>
<li><p>range</p></li>
<li><p>minority</p></li>
<li><p>majority</p></li>
<li><p>q1: 第1四分位数</p></li>
<li><p>q3: 第3四分位数</p></li>
<li><p>iqr: 四分位範囲</p></li>
<li><p>min_length: 文字列長の最小値</p></li>
<li><p>max_length: 文字列長の最大値</p></li>
<li><p>concatenate: 文字列を連結文字で連結</p></li>
<li><p>concatenate_unique: ユニークな文字列のみを連結文字で連結</p></li>
<li><p>collect: マルチパートジオメトリに集約したものを生成</p></li>
<li><p>array_agg: 集約値の配列を生成</p></li>
</ul>
</li>
<li><p><strong>expression</strong> - 集約の対象とするサブ式またはフィールド名</p></li>
<li><p><strong>concatenator</strong> - （オプション） 'concatenate' 集約で値の結合に使用される文字</p></li>
<li><p><strong>order_by</strong> - （オプション）集約値の計算に使用される地物を並べ替えるための式。フィールドとジオメトリは結合されるレイヤの地物からのものです。デフォルトでは、返される地物の順序は決まっていません。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">relation_aggregate(relation:='my_relation',aggregate:='mean',expression:=&quot;passengers&quot;)</span></code> → 'my_relation' リレーションを使用してマッチする子地物の passengers の値の平均値</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relation_aggregate('my_relation','sum',</span> <span class="pre">&quot;passengers&quot;/7)</span></code> →  'my_relation' リレーションを使用してマッチする子地物の passengers フィールドを7で割った値の合計</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relation_aggregate('my_relation','concatenate',</span> <span class="pre">&quot;towns&quot;,</span> <span class="pre">concatenator:=',')</span></code> → 'my_relation' リレーションを使用してマッチする子地物の towns フィールドをコンマ区切りで連結したリスト</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relation_aggregate('my_relation','array_agg',</span> <span class="pre">&quot;id&quot;)</span></code> → 'my_relation' リレーションを使用してマッチする子地物の id フィールドの配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../working_with_vector/joins_relations.html#vector-relations"><span class="std std-ref">Setting relations between multiple layers</span></a></p>
</section>
<section id="stdev">
<span id="expression-function-aggregates-stdev"></span><h3><a class="toc-backref" href="#id158" role="doc-backlink"><span class="section-number">13.2.1.22. </span>stdev</a><a class="headerlink" href="#stdev" title="Link to this heading"></a></h3>
<p>フィールドまたは式の標準偏差を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>stdev(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdev(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、population の値の標準偏差</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="sum">
<span id="expression-function-aggregates-sum"></span><h3><a class="toc-backref" href="#id159" role="doc-backlink"><span class="section-number">13.2.1.23. </span>sum</a><a class="headerlink" href="#sum" title="Link to this heading"></a></h3>
<p>フィールドまたは式の合計値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>sum(expression, [group_by], [filter])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 集計する属性（サブ式）</p></li>
<li><p><strong>group_by</strong> - （オプション）集約計算のグループ化に使う式</p></li>
<li><p><strong>filter</strong> - （オプション）集約計算の地物フィルタに用いる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sum(&quot;population&quot;,group_by:=&quot;state&quot;)</span></code> → state フィールドでグループ化された、population の合計値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="array-functions">
<span id="index-2"></span><span id="id3"></span><h2><a class="toc-backref" href="#id110" role="doc-backlink"><span class="section-number">13.2.2. </span>配列関数</a><a class="headerlink" href="#array-functions" title="Link to this heading"></a></h2>
<p>このグループには、配列（リストデータ構造とも呼ばれます）の作成と操作のための関数が含まれています。配列では、値の順序こそが重要です。これは、キーと値のペアの順序は関係なく、値はキーによって識別される <a class="reference internal" href="#maps-functions"><span class="std std-ref">「マップ型」のデータ構造</span></a> とは異なっています。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id4">
<ul class="simple">
<li><p><a class="reference internal" href="#array" id="id160">array</a></p></li>
<li><p><a class="reference internal" href="#array-all" id="id161">array_all</a></p></li>
<li><p><a class="reference internal" href="#array-append" id="id162">array_append</a></p></li>
<li><p><a class="reference internal" href="#array-cat" id="id163">array_cat</a></p></li>
<li><p><a class="reference internal" href="#array-contains" id="id164">array_contains</a></p></li>
<li><p><a class="reference internal" href="#array-count" id="id165">array_count</a></p></li>
<li><p><a class="reference internal" href="#array-distinct" id="id166">array_distinct</a></p></li>
<li><p><a class="reference internal" href="#array-filter" id="id167">array_filter</a></p></li>
<li><p><a class="reference internal" href="#array-find" id="id168">array_find</a></p></li>
<li><p><a class="reference internal" href="#array-first" id="id169">array_first</a></p></li>
<li><p><a class="reference internal" href="#array-foreach" id="id170">array_foreach</a></p></li>
<li><p><a class="reference internal" href="#array-get" id="id171">array_get</a></p></li>
<li><p><a class="reference internal" href="#array-insert" id="id172">array_insert</a></p></li>
<li><p><a class="reference internal" href="#array-intersect" id="id173">array_intersect</a></p></li>
<li><p><a class="reference internal" href="#array-last" id="id174">array_last</a></p></li>
<li><p><a class="reference internal" href="#array-length" id="id175">array_length</a></p></li>
<li><p><a class="reference internal" href="#array-majority" id="id176">array_majority</a></p></li>
<li><p><a class="reference internal" href="#array-max" id="id177">array_max</a></p></li>
<li><p><a class="reference internal" href="#array-mean" id="id178">array_mean</a></p></li>
<li><p><a class="reference internal" href="#array-median" id="id179">array_median</a></p></li>
<li><p><a class="reference internal" href="#array-min" id="id180">array_min</a></p></li>
<li><p><a class="reference internal" href="#array-minority" id="id181">array_minority</a></p></li>
<li><p><a class="reference internal" href="#array-prepend" id="id182">array_prepend</a></p></li>
<li><p><a class="reference internal" href="#array-prioritize" id="id183">array_prioritize</a></p></li>
<li><p><a class="reference internal" href="#array-remove-all" id="id184">array_remove_all</a></p></li>
<li><p><a class="reference internal" href="#array-remove-at" id="id185">array_remove_at</a></p></li>
<li><p><a class="reference internal" href="#array-replace" id="id186">array_replace</a></p></li>
<li><p><a class="reference internal" href="#array-reverse" id="id187">array_reverse</a></p></li>
<li><p><a class="reference internal" href="#array-slice" id="id188">array_slice</a></p></li>
<li><p><a class="reference internal" href="#array-sort" id="id189">array_sort</a></p></li>
<li><p><a class="reference internal" href="#array-sum" id="id190">array_sum</a></p></li>
<li><p><a class="reference internal" href="#array-to-string" id="id191">array_to_string</a></p></li>
<li><p><a class="reference internal" href="#generate-series" id="id192">generate_series</a></p></li>
<li><p><a class="reference internal" href="#geometries-to-array" id="id193">geometries_to_array</a></p></li>
<li><p><a class="reference internal" href="#regexp-matches" id="id194">regexp_matches</a></p></li>
<li><p><a class="reference internal" href="#string-to-array" id="id195">string_to_array</a></p></li>
</ul>
</nav>
</div>
<section id="array">
<span id="expression-function-arrays-array"></span><h3><a class="toc-backref" href="#id160" role="doc-backlink"><span class="section-number">13.2.2.1. </span>array</a><a class="headerlink" href="#array" title="Link to this heading"></a></h3>
<p>パラメータとして渡されたすべての値を含む配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array(value1, value2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array(2,10)</span></code> → [ 2, 10 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array(2,10)[0]</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-all">
<span id="expression-function-arrays-array-all"></span><h3><a class="toc-backref" href="#id161" role="doc-backlink"><span class="section-number">13.2.2.2. </span>array_all</a><a class="headerlink" href="#array-all" title="Link to this heading"></a></h3>
<p>配列が与えられた配列のすべての値を含む場合に TRUE を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_all(array_a, array_b)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array_a</strong> - 配列</p></li>
<li><p><strong>array_b</strong> - 値を検索する配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_all(array(1,2,3),array(2,3))</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_all(array(1,2,3),array(1,2,4))</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-append">
<span id="expression-function-arrays-array-append"></span><h3><a class="toc-backref" href="#id162" role="doc-backlink"><span class="section-number">13.2.2.3. </span>array_append</a><a class="headerlink" href="#array-append" title="Link to this heading"></a></h3>
<p>与えられた値が最後に追加された配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_append(array, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>value</strong> - 追加する値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_append(array(1,2,3),4)</span></code> → [ 1, 2, 3, 4 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-cat">
<span id="expression-function-arrays-array-cat"></span><h3><a class="toc-backref" href="#id163" role="doc-backlink"><span class="section-number">13.2.2.4. </span>array_cat</a><a class="headerlink" href="#array-cat" title="Link to this heading"></a></h3>
<p>与えられたすべての配列を連結して、一つの配列として返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_cat(array1, array2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_cat(array(1,2),array(2,3))</span></code> → [ 1, 2, 2, 3 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-contains">
<span id="expression-function-arrays-array-contains"></span><h3><a class="toc-backref" href="#id164" role="doc-backlink"><span class="section-number">13.2.2.5. </span>array_contains</a><a class="headerlink" href="#array-contains" title="Link to this heading"></a></h3>
<p>配列が与えられた値を含む場合に TRUE を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_contains(array, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>value</strong> - 検索する値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_contains(array(1,2,3),2)</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-count">
<span id="expression-function-arrays-array-count"></span><h3><a class="toc-backref" href="#id165" role="doc-backlink"><span class="section-number">13.2.2.6. </span>array_count</a><a class="headerlink" href="#array-count" title="Link to this heading"></a></h3>
<p>与えられた値が配列内に存在する数をカウントします。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_count(array, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>value</strong> - カウントする値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_count(array('a',</span> <span class="pre">'b',</span> <span class="pre">'c',</span> <span class="pre">'b'),</span> <span class="pre">'b')</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-distinct">
<span id="expression-function-arrays-array-distinct"></span><h3><a class="toc-backref" href="#id166" role="doc-backlink"><span class="section-number">13.2.2.7. </span>array_distinct</a><a class="headerlink" href="#array-distinct" title="Link to this heading"></a></h3>
<p>与えられた配列の値から、相異なる値を含む配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_distinct(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_distinct(array(1,2,3,2,1))</span></code> → [ 1, 2, 3 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-filter">
<span id="expression-function-arrays-array-filter"></span><h3><a class="toc-backref" href="#id167" role="doc-backlink"><span class="section-number">13.2.2.8. </span>array_filter</a><a class="headerlink" href="#array-filter" title="Link to this heading"></a></h3>
<p>式がtrueと判定した要素だけを含む配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_filter(array, expression, [limit=0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>expression</strong> - それぞれの要素に対して評価する式。変数 <cite>&#64;element</cite> が各要素を表します。</p></li>
<li><p><strong>limit</strong> - 戻り値の要素の最大数。0の場合はすべてを返します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_filter(array(1,2,3),&#64;element</span> <span class="pre">&lt;</span> <span class="pre">3)</span></code> → [ 1, 2 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_filter(array(1,2,3),&#64;element</span> <span class="pre">&lt;</span> <span class="pre">3,</span> <span class="pre">1)</span></code> → [ 1 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-find">
<span id="expression-function-arrays-array-find"></span><h3><a class="toc-backref" href="#id168" role="doc-backlink"><span class="section-number">13.2.2.9. </span>array_find</a><a class="headerlink" href="#array-find" title="Link to this heading"></a></h3>
<p>ある値の配列内における最小インデックス（最初は0から数える）を返します。値が配列内で見つからない場合には -1 を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_find(array, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>value</strong> - 検索する値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_find(array('a',</span> <span class="pre">'b',</span> <span class="pre">'c'),</span> <span class="pre">'b')</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_find(array('a',</span> <span class="pre">'b',</span> <span class="pre">'c',</span> <span class="pre">'b'),</span> <span class="pre">'b')</span></code> → 1</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-first">
<span id="expression-function-arrays-array-first"></span><h3><a class="toc-backref" href="#id169" role="doc-backlink"><span class="section-number">13.2.2.10. </span>array_first</a><a class="headerlink" href="#array-first" title="Link to this heading"></a></h3>
<p>配列の最初の値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_first(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_first(array('a','b','c'))</span></code> → 'a'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-foreach">
<span id="expression-function-arrays-array-foreach"></span><h3><a class="toc-backref" href="#id170" role="doc-backlink"><span class="section-number">13.2.2.11. </span>array_foreach</a><a class="headerlink" href="#array-foreach" title="Link to this heading"></a></h3>
<p>配列の各要素を与えられた式で評価した結果を配列として返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_foreach(array, expression)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>expression</strong> - それぞれの要素に対して評価する式。変数 <cite>&#64;element</cite> が各要素を表します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_foreach(array('a','b','c'),upper(&#64;element))</span></code> → [ 'A', 'B', 'C' ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_foreach(array(1,2,3),&#64;element</span> <span class="pre">+</span> <span class="pre">10)</span></code> → [ 11, 12, 13 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-get">
<span id="expression-function-arrays-array-get"></span><h3><a class="toc-backref" href="#id171" role="doc-backlink"><span class="section-number">13.2.2.12. </span>array_get</a><a class="headerlink" href="#array-get" title="Link to this heading"></a></h3>
<p>配列のN番目の値（最初は0から数える）、または最後から -N番目の値（最後は-1 から数える）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_get(array, pos)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>pos</strong> - 取り出すインデックス（最初は0）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_get(array('a','b','c'),1)</span></code> → 'b'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_get(array('a','b','c'),-1)</span></code> → 'c'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="admonition-title">ヒント</p>
<p>配列から値を取得するには <a class="reference internal" href="#expression-function-operators-index"><span class="std std-ref">インデックス演算子 ([])</span></a> も使用できます。</p>
</div>
</section>
<section id="array-insert">
<span id="expression-function-arrays-array-insert"></span><h3><a class="toc-backref" href="#id172" role="doc-backlink"><span class="section-number">13.2.2.13. </span>array_insert</a><a class="headerlink" href="#array-insert" title="Link to this heading"></a></h3>
<p>配列の指定された位置に値が挿入された配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_insert(array, pos, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>pos</strong> - 挿入する位置（最初は0）</p></li>
<li><p><strong>value</strong> - 追加する値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_insert(array(1,2,3),1,100)</span></code> → [ 1, 100, 2, 3 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-intersect">
<span id="expression-function-arrays-array-intersect"></span><h3><a class="toc-backref" href="#id173" role="doc-backlink"><span class="section-number">13.2.2.14. </span>array_intersect</a><a class="headerlink" href="#array-intersect" title="Link to this heading"></a></h3>
<p>array1 の要素が array2 に少なくとも 1 つ存在する場合に TRUE を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_intersect(array1, array2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array1</strong> - 配列</p></li>
<li><p><strong>array2</strong> - 別の配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_intersect(array(1,2,3,4),array(4,0,2,5))</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-last">
<span id="expression-function-arrays-array-last"></span><h3><a class="toc-backref" href="#id174" role="doc-backlink"><span class="section-number">13.2.2.15. </span>array_last</a><a class="headerlink" href="#array-last" title="Link to this heading"></a></h3>
<p>配列の最後の値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_last(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_last(array('a','b','c'))</span></code> → 'c'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-length">
<span id="expression-function-arrays-array-length"></span><h3><a class="toc-backref" href="#id175" role="doc-backlink"><span class="section-number">13.2.2.16. </span>array_length</a><a class="headerlink" href="#array-length" title="Link to this heading"></a></h3>
<p>配列の要素の数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_length(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_length(array(1,2,3))</span></code> → 3</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-majority">
<span id="expression-function-arrays-array-majority"></span><h3><a class="toc-backref" href="#id176" role="doc-backlink"><span class="section-number">13.2.2.17. </span>array_majority</a><a class="headerlink" href="#array-majority" title="Link to this heading"></a></h3>
<p>配列内で最も頻出する値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_majority(array, [option='all'])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>option='all'</strong> - 戻り値の処理を指定する文字列。有効なオプションは次のとおり：</p>
<ul>
<li><p>all: デフォルトの設定で、最頻値すべてを配列形式で返します。</p></li>
<li><p>any: 最頻値の一つを返します。</p></li>
<li><p>median: 最頻値の中央値を返します。非数値は無視されます。</p></li>
<li><p>real_majority: 配列サイズの半数よりも多い値を返します。</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_majority(array(0,1,42,42,43),</span> <span class="pre">'all')</span></code> → [ 42 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_majority(array(0,1,42,42,43,1),</span> <span class="pre">'all')</span></code> → [ 42, 1 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_majority(array(0,1,42,42,43,1),</span> <span class="pre">'any')</span></code> → 1 か 42</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_majority(array(0,1,1,2,2),</span> <span class="pre">'median')</span></code> → 1.5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_majority(array(0,1,42,42,43),</span> <span class="pre">'real_majority')</span></code> → NULL</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_majority(array(0,1,42,42,43,42),</span> <span class="pre">'real_majority')</span></code> → NULL</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_majority(array(0,1,42,42,43,42,42),</span> <span class="pre">'real_majority')</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-max">
<span id="expression-function-arrays-array-max"></span><h3><a class="toc-backref" href="#id177" role="doc-backlink"><span class="section-number">13.2.2.18. </span>array_max</a><a class="headerlink" href="#array-max" title="Link to this heading"></a></h3>
<p>配列の最大値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_max(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_max(array(0,42,4,2))</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-mean">
<span id="expression-function-arrays-array-mean"></span><h3><a class="toc-backref" href="#id178" role="doc-backlink"><span class="section-number">13.2.2.19. </span>array_mean</a><a class="headerlink" href="#array-mean" title="Link to this heading"></a></h3>
<p>配列の算術平均値を返します。配列内の非数値は無視されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_mean(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_mean(array(0,1,7,66.6,135.4))</span></code> → 42</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_mean(array(0,84,'a','b','c'))</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-median">
<span id="expression-function-arrays-array-median"></span><h3><a class="toc-backref" href="#id179" role="doc-backlink"><span class="section-number">13.2.2.20. </span>array_median</a><a class="headerlink" href="#array-median" title="Link to this heading"></a></h3>
<p>配列の中央値を返します。配列内の非数値は無視されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_median(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_median(array(0,1,42,42,43))</span></code> → 42</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_median(array(0,1,2,42,'a','b'))</span></code> → 1.5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-min">
<span id="expression-function-arrays-array-min"></span><h3><a class="toc-backref" href="#id180" role="doc-backlink"><span class="section-number">13.2.2.21. </span>array_min</a><a class="headerlink" href="#array-min" title="Link to this heading"></a></h3>
<p>配列の最小値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_min(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_min(array(43,42,54))</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-minority">
<span id="expression-function-arrays-array-minority"></span><h3><a class="toc-backref" href="#id181" role="doc-backlink"><span class="section-number">13.2.2.22. </span>array_minority</a><a class="headerlink" href="#array-minority" title="Link to this heading"></a></h3>
<p>配列内で最も稀な値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_minority(array, [option='all'])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>option='all'</strong> - 戻り値の処理を指定する文字列。有効なオプションは次のとおり：</p>
<ul>
<li><p>all: デフォルトの設定で、最稀値すべてを配列形式で返します。</p></li>
<li><p>any: 最稀値の一つを返します。</p></li>
<li><p>median: 最稀値の中央値を返します。非数値は無視されます。</p></li>
<li><p>real_minority: 配列サイズの半数以下の値を返します。</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_minority(array(0,42,42),</span> <span class="pre">'all')</span></code> → [ 0 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_minority(array(0,1,42,42),</span> <span class="pre">'all')</span></code> → [ 0, 1 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_minority(array(0,1,42,42,43,1),</span> <span class="pre">'any')</span></code> → 0 か 43</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_minority(array(1,2,3,3),</span> <span class="pre">'median')</span></code> → 1.5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_minority(array(0,1,42,42,43),</span> <span class="pre">'real_minority')</span></code> → [ 42, 43, 0, 1 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_minority(array(0,1,42,42,43,42),</span> <span class="pre">'real_minority')</span></code> → [ 42, 43, 0, 1 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_minority(array(0,1,42,42,43,42,42),</span> <span class="pre">'real_minority')</span></code> → [ 43, 0, 1 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-prepend">
<span id="expression-function-arrays-array-prepend"></span><h3><a class="toc-backref" href="#id182" role="doc-backlink"><span class="section-number">13.2.2.23. </span>array_prepend</a><a class="headerlink" href="#array-prepend" title="Link to this heading"></a></h3>
<p>与えられた値が先頭に追加された配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_prepend(array, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>value</strong> - 追加する値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_prepend(array(1,2,3),0)</span></code> → [ 0, 1, 2, 3 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-prioritize">
<span id="expression-function-arrays-array-prioritize"></span><h3><a class="toc-backref" href="#id183" role="doc-backlink"><span class="section-number">13.2.2.24. </span>array_prioritize</a><a class="headerlink" href="#array-prioritize" title="Link to this heading"></a></h3>
<p>ある配列を別の配列で指定された順序でソートしたものを返します。第1引数の配列にはあり、第2引数の配列には無い値は、結果の配列の末尾に追加されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_prioritize(array, array_prioritize)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>array_prioritize</strong> - 値の優先順で並べられた配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_prioritize(array(1,</span> <span class="pre">8,</span> <span class="pre">2,</span> <span class="pre">5),</span> <span class="pre">array(5,</span> <span class="pre">4,</span> <span class="pre">2,</span> <span class="pre">1,</span> <span class="pre">3,</span> <span class="pre">8))</span></code> → [ 5, 2, 1, 8 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_prioritize(array(5,</span> <span class="pre">4,</span> <span class="pre">2,</span> <span class="pre">1,</span> <span class="pre">3,</span> <span class="pre">8),</span> <span class="pre">array(1,</span> <span class="pre">8,</span> <span class="pre">6,</span> <span class="pre">5))</span></code> → [ 1, 8, 5, 4, 2, 3 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-remove-all">
<span id="expression-function-arrays-array-remove-all"></span><h3><a class="toc-backref" href="#id184" role="doc-backlink"><span class="section-number">13.2.2.25. </span>array_remove_all</a><a class="headerlink" href="#array-remove-all" title="Link to this heading"></a></h3>
<p>配列から指定された値がすべて削除された配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_remove_all(array, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>value</strong> - 削除する値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_remove_all(array('a','b','c','b'),'b')</span></code> → [ 'a', 'c' ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-remove-at">
<span id="expression-function-arrays-array-remove-at"></span><h3><a class="toc-backref" href="#id185" role="doc-backlink"><span class="section-number">13.2.2.26. </span>array_remove_at</a><a class="headerlink" href="#array-remove-at" title="Link to this heading"></a></h3>
<p>与えられたインデックスの項目を取り除いた配列を返します。正のインデックス（最初の要素は0）および負のインデックス（最後の-N番目の値、最後の要素は-1）をサポートします。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_remove_at(array, pos)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>pos</strong> - 削除する位置（最初は0）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_remove_at(array(1,</span> <span class="pre">2,</span> <span class="pre">3),</span> <span class="pre">1)</span></code> → [1, 3 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_remove_at(array(1,</span> <span class="pre">2,</span> <span class="pre">3),</span> <span class="pre">-1)</span></code> → [1, 2 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-replace">
<span id="expression-function-arrays-array-replace"></span><h3><a class="toc-backref" href="#id186" role="doc-backlink"><span class="section-number">13.2.2.27. </span>array_replace</a><a class="headerlink" href="#array-replace" title="Link to this heading"></a></h3>
<p>配列を指定した別の値、配列またはマップ型オブジェクトで置換した配列を返します。</p>
<p><strong>値・配列バージョン</strong></p>
<p>指定された値または値の配列を、別の値または値の配列で置換した配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_replace(array, before, after)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 入力配列</p></li>
<li><p><strong>before</strong> - 置換される値または配列</p></li>
<li><p><strong>after</strong> - 置き換えに使用する値または配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_replace(array('QGIS','SHOULD','ROCK'),'SHOULD','DOES')</span></code> → [ 'QGIS', 'DOES', 'ROCK' ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_replace(array(3,2,1),array(1,2,3),array(7,8,9))</span></code> → [ 9, 8, 7 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_replace(array('Q','G','I','S'),array('Q','S'),'-')</span></code> → [ '-', 'G', 'I', '-' ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>マップ型バージョン</strong></p>
<p>指定されたマップ型のキーを対応する値で置き換えた配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_replace(array, map)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 入力配列</p></li>
<li><p><strong>map</strong> - キーと値のペアを含むマップ型オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_replace(array('APP',</span> <span class="pre">'SHOULD',</span> <span class="pre">'ROCK'),map('APP','QGIS','SHOULD','DOES'))</span></code> → [ 'QGIS', 'DOES', 'ROCK' ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-reverse">
<span id="expression-function-arrays-array-reverse"></span><h3><a class="toc-backref" href="#id187" role="doc-backlink"><span class="section-number">13.2.2.28. </span>array_reverse</a><a class="headerlink" href="#array-reverse" title="Link to this heading"></a></h3>
<p>逆順にした配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_reverse(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_reverse(array(2,4,0,10))</span></code> → [ 10, 0, 4, 2 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-slice">
<span id="expression-function-arrays-array-slice"></span><h3><a class="toc-backref" href="#id188" role="doc-backlink"><span class="section-number">13.2.2.29. </span>array_slice</a><a class="headerlink" href="#array-slice" title="Link to this heading"></a></h3>
<p>配列の一部を返します。スライスは、start_posとend_posの引数で定義されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_slice(array, start_pos, end_pos)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>start_pos</strong> - スライスの開始位置のインデックス（最初は0）。start_posインデックスの値はスライス内に含まれます。start_pos を負の値とした場合、インデックスをリストの最後から数えます（最後の要素は-1）。</p></li>
<li><p><strong>end_pos</strong> - スライスの終了位置のインデックス（最初は0）。end_posインデックスの値はスライス内に含まれます。end_pos を負の値とした場合、インデックスをリストの最後から数えます（最後の要素は-1）。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_slice(array(1,2,3,4,5),0,3)</span></code> → [ 1, 2, 3, 4 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_slice(array(1,2,3,4,5),0,-1)</span></code> → [ 1, 2, 3, 4, 5 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_slice(array(1,2,3,4,5),-5,-1)</span></code> → [ 1, 2, 3, 4, 5 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_slice(array(1,2,3,4,5),0,0)</span></code> → [ 1 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_slice(array(1,2,3,4,5),-2,-1)</span></code> → [ 4, 5 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_slice(array(1,2,3,4,5),-1,-1)</span></code> → [ 5 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_slice(array('Dufour','Valmiera','Chugiak','Brighton'),1,2)</span></code> → [ 'Valmiera', 'Chugiak' ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_slice(array('Dufour','Valmiera','Chugiak','Brighton'),-2,-1)</span></code> → [ 'Chugiak', 'Brighton' ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-sort">
<span id="expression-function-arrays-array-sort"></span><h3><a class="toc-backref" href="#id189" role="doc-backlink"><span class="section-number">13.2.2.30. </span>array_sort</a><a class="headerlink" href="#array-sort" title="Link to this heading"></a></h3>
<p>指定された配列の要素をソートして返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_sort(array, [ascending=true])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
<li><p><strong>ascending</strong> - このパラメータをfalseとすると、配列を降順でソートする</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_sort(array(3,2,1))</span></code> → [ 1, 2, 3 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-sum">
<span id="expression-function-arrays-array-sum"></span><h3><a class="toc-backref" href="#id190" role="doc-backlink"><span class="section-number">13.2.2.31. </span>array_sum</a><a class="headerlink" href="#array-sum" title="Link to this heading"></a></h3>
<p>配列の合計値を返します。配列内の非数値は無視されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_sum(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_sum(array(0,1,39.4,1.6,'a'))</span></code> → 42.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="array-to-string">
<span id="expression-function-arrays-array-to-string"></span><h3><a class="toc-backref" href="#id191" role="doc-backlink"><span class="section-number">13.2.2.32. </span>array_to_string</a><a class="headerlink" href="#array-to-string" title="Link to this heading"></a></h3>
<p>配列の要素を区切り文字で連結した文字列を返します。空の値を置き換える文字列を指定できます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>array_to_string(array, [delimiter=','], [empty_value=''])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - 入力配列</p></li>
<li><p><strong>delimiter</strong> - 連結する配列要素を区切るために使用する区切り文字</p></li>
<li><p><strong>empty_value</strong> - （オプション）空のマッチ（長さゼロ）の代わりに使用する文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(array('1','2','3'))</span></code> → '1,2,3'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(array(1,2,3),'-')</span></code> → '1-2-3'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(array('1','','3'),',','0')</span></code> → '1,0,3'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="generate-series">
<span id="expression-function-arrays-generate-series"></span><h3><a class="toc-backref" href="#id192" role="doc-backlink"><span class="section-number">13.2.2.33. </span>generate_series</a><a class="headerlink" href="#generate-series" title="Link to this heading"></a></h3>
<p>連続した数字からなる配列を作ります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>generate_series(start, stop, [step=1])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>start</strong> - シーケンスの最初の値</p></li>
<li><p><strong>stop</strong> - シーケンスの最後の値</p></li>
<li><p><strong>step</strong> - 増分値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">generate_series(1,5)</span></code> → [ 1, 2, 3, 4, 5 ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generate_series(5,1,-1)</span></code> → [ 5, 4, 3, 2, 1 ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="geometries-to-array">
<span id="expression-function-arrays-geometries-to-array"></span><h3><a class="toc-backref" href="#id193" role="doc-backlink"><span class="section-number">13.2.2.34. </span>geometries_to_array</a><a class="headerlink" href="#geometries-to-array" title="Link to this heading"></a></h3>
<p>ジオメトリをより単純なジオメトリに分割し、配列にします。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>geometries_to_array(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - 入力ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geometries_to_array(geom_from_wkt('GeometryCollection</span> <span class="pre">(Polygon</span> <span class="pre">((5</span> <span class="pre">8,</span> <span class="pre">4</span> <span class="pre">1,</span> <span class="pre">3</span> <span class="pre">2,</span> <span class="pre">5</span> <span class="pre">8)),LineString</span> <span class="pre">(3</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">2))'))</span></code> → ポリゴンとラインジオメトリの配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(geometries_to_array(geom_from_wkt('GeometryCollection</span> <span class="pre">(Polygon</span> <span class="pre">((5</span> <span class="pre">8,</span> <span class="pre">4</span> <span class="pre">1,</span> <span class="pre">3</span> <span class="pre">2,</span> <span class="pre">5</span> <span class="pre">8)),LineString</span> <span class="pre">(3</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">2))'))[0])</span></code> → 'Polygon ((5 8, 4 1, 3 2, 5 8))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geometries_to_array(geom_from_wkt('MULTIPOLYGON(((5</span> <span class="pre">5,0</span> <span class="pre">0,0</span> <span class="pre">10,5</span> <span class="pre">5)),((5</span> <span class="pre">5,10</span> <span class="pre">10,10</span> <span class="pre">0,5</span> <span class="pre">5))'))</span></code> → 二つのポリゴンジオメトリの配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="regexp-matches">
<span id="expression-function-arrays-regexp-matches"></span><h3><a class="toc-backref" href="#id194" role="doc-backlink"><span class="section-number">13.2.2.35. </span>regexp_matches</a><a class="headerlink" href="#regexp-matches" title="Link to this heading"></a></h3>
<p>文字列に対する正規表現でグループが現れた順に、キャプチャグループによってキャプチャされた文字列すべての配列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>regexp_matches(string, regex, [empty_value=''])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 正規表現でグループをキャプチャする対象の文字列</p></li>
<li><p><strong>regex</strong> - グループをキャプチャするために使用する正規表現</p></li>
<li><p><strong>empty_value</strong> - （オプション）空のマッチ（長さゼロ）の代わりに使用する文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_matches('QGIS=&gt;rocks','(.*)=&gt;(.*)')</span></code> → [ 'QGIS', 'rocks' ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_matches('key=&gt;','(.*)=&gt;(.*)','empty</span> <span class="pre">value')</span></code> → [ 'key', 'empty value' ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="string-to-array">
<span id="expression-function-arrays-string-to-array"></span><h3><a class="toc-backref" href="#id195" role="doc-backlink"><span class="section-number">13.2.2.36. </span>string_to_array</a><a class="headerlink" href="#string-to-array" title="Link to this heading"></a></h3>
<p>文字列を指定された区切り文字で配列に分割します。空の値の代わりの文字列を指定するオプションがあります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>string_to_array(string, [delimiter=','], [empty_value=''])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 入力文字列</p></li>
<li><p><strong>delimiter</strong> - 入力文字列を分割するための区切り文字</p></li>
<li><p><strong>empty_value</strong> - （オプション）空のマッチ（長さゼロ）の代わりに使用する文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">string_to_array('1,2,3',',')</span></code> → [ '1', '2', '3' ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string_to_array('1,,3',',','0')</span></code> → [ '1', '0', '3' ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="color-functions">
<h2><a class="toc-backref" href="#id111" role="doc-backlink"><span class="section-number">13.2.3. </span>色関数</a><a class="headerlink" href="#color-functions" title="Link to this heading"></a></h2>
<p>このグループには、色を操作するための関数が含まれています。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id5">
<ul class="simple">
<li><p><a class="reference internal" href="#color-cmyk" id="id196">color_cmyk</a></p></li>
<li><p><a class="reference internal" href="#color-cmyka" id="id197">color_cmyka</a></p></li>
<li><p><a class="reference internal" href="#color-grayscale-average" id="id198">color_grayscale_average</a></p></li>
<li><p><a class="reference internal" href="#color-hsl" id="id199">color_hsl</a></p></li>
<li><p><a class="reference internal" href="#color-hsla" id="id200">color_hsla</a></p></li>
<li><p><a class="reference internal" href="#color-hsv" id="id201">color_hsv</a></p></li>
<li><p><a class="reference internal" href="#color-hsva" id="id202">color_hsva</a></p></li>
<li><p><a class="reference internal" href="#color-mix-rgb" id="id203">color_mix_rgb</a></p></li>
<li><p><a class="reference internal" href="#color-part" id="id204">color_part</a></p></li>
<li><p><a class="reference internal" href="#color-rgb" id="id205">color_rgb</a></p></li>
<li><p><a class="reference internal" href="#color-rgba" id="id206">color_rgba</a></p></li>
<li><p><a class="reference internal" href="#create-ramp" id="id207">create_ramp</a></p></li>
<li><p><a class="reference internal" href="#darker" id="id208">darker</a></p></li>
<li><p><a class="reference internal" href="#lighter" id="id209">lighter</a></p></li>
<li><p><a class="reference internal" href="#project-color" id="id210">project_color</a></p></li>
<li><p><a class="reference internal" href="#ramp-color" id="id211">ramp_color</a></p></li>
<li><p><a class="reference internal" href="#set-color-part" id="id212">set_color_part</a></p></li>
</ul>
</nav>
</div>
<section id="color-cmyk">
<span id="expression-function-color-color-cmyk"></span><h3><a class="toc-backref" href="#id196" role="doc-backlink"><span class="section-number">13.2.3.1. </span>color_cmyk</a><a class="headerlink" href="#color-cmyk" title="Link to this heading"></a></h3>
<p>シアン、マゼンタ、イエロー、ブラック成分に基づいて、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_cmyk(cyan, magenta, yellow, black)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>cyan</strong> - 色のシアン成分。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>magenta</strong> - 色のマゼンタ成分。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>yellow</strong> - 色のイエロー成分。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>black</strong> - 色のブラック成分。0から100までのパーセンテージの整数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_cmyk(100,50,0,10)</span></code> → '0,115,230'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-cmyka">
<span id="expression-function-color-color-cmyka"></span><h3><a class="toc-backref" href="#id197" role="doc-backlink"><span class="section-number">13.2.3.2. </span>color_cmyka</a><a class="headerlink" href="#color-cmyka" title="Link to this heading"></a></h3>
<p>シアン、マゼンタ、イエロー、ブラックおよびアルファ（透明度）成分に基づいて、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_cmyka(cyan, magenta, yellow, black, alpha)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>cyan</strong> - 色のシアン成分。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>magenta</strong> - 色のマゼンタ成分。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>yellow</strong> - 色のイエロー成分。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>black</strong> - 色のブラック成分。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>alpha</strong> - 色のアルファ成分。0（完全に透明）から255（不透明）までの整数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_cmyka(100,50,0,10,200)</span></code> → '0,115,230,200'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-grayscale-average">
<span id="expression-function-color-color-grayscale-average"></span><h3><a class="toc-backref" href="#id198" role="doc-backlink"><span class="section-number">13.2.3.3. </span>color_grayscale_average</a><a class="headerlink" href="#color-grayscale-average" title="Link to this heading"></a></h3>
<p>指定された色にグレースケールフィルタを適用した色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_grayscale_average(color)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>color</strong> - 色を表す文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_grayscale_average('255,100,50')</span></code> → '135,135,135,255'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-hsl">
<span id="expression-function-color-color-hsl"></span><h3><a class="toc-backref" href="#id199" role="doc-backlink"><span class="section-number">13.2.3.4. </span>color_hsl</a><a class="headerlink" href="#color-hsl" title="Link to this heading"></a></h3>
<p>色相、彩度、輝度属性に基づいて、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_hsl(hue, saturation, lightness)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>hue</strong> - 色相。0から360までの整数値</p></li>
<li><p><strong>saturation</strong> - 彩度。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>lightness</strong> - 輝度。0から100までのパーセンテージの整数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_hsl(100,50,70)</span></code> → '166,217,140'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-hsla">
<span id="expression-function-color-color-hsla"></span><h3><a class="toc-backref" href="#id200" role="doc-backlink"><span class="section-number">13.2.3.5. </span>color_hsla</a><a class="headerlink" href="#color-hsla" title="Link to this heading"></a></h3>
<p>色相、彩度、輝度およびアルファ（透明度）属性に基づいて、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_hsla(hue, saturation, lightness, alpha)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>hue</strong> - 色相。0から360までの整数値</p></li>
<li><p><strong>saturation</strong> - 彩度。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>lightness</strong> - 輝度。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>alpha</strong> - 色のアルファ成分。0（完全に透明）から255（不透明）までの整数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_hsla(100,50,70,200)</span></code> → '166,217,140,200'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-hsv">
<span id="expression-function-color-color-hsv"></span><h3><a class="toc-backref" href="#id201" role="doc-backlink"><span class="section-number">13.2.3.6. </span>color_hsv</a><a class="headerlink" href="#color-hsv" title="Link to this heading"></a></h3>
<p>色相、彩度、明度属性に基づいて、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_hsv(hue, saturation, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>hue</strong> - 色相。0から360までの整数値</p></li>
<li><p><strong>saturation</strong> - 彩度。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>value</strong> - 明度。0から100までのパーセンテージの整数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_hsv(40,100,100)</span></code> → '255,170,0'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-hsva">
<span id="expression-function-color-color-hsva"></span><h3><a class="toc-backref" href="#id202" role="doc-backlink"><span class="section-number">13.2.3.7. </span>color_hsva</a><a class="headerlink" href="#color-hsva" title="Link to this heading"></a></h3>
<p>色相、彩度、明度およびアルファ（透明度）属性に基づいて、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_hsva(hue, saturation, value, alpha)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>hue</strong> - 色相。0から360までの整数値</p></li>
<li><p><strong>saturation</strong> - 彩度。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>value</strong> - 明度。0から100までのパーセンテージの整数値</p></li>
<li><p><strong>alpha</strong> - 色のアルファ成分。0（完全に透明）から255（不透明）までの整数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_hsva(40,100,100,200)</span></code> → '255,170,0,200'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-mix-rgb">
<span id="expression-function-color-color-mix-rgb"></span><h3><a class="toc-backref" href="#id203" role="doc-backlink"><span class="section-number">13.2.3.8. </span>color_mix_rgb</a><a class="headerlink" href="#color-mix-rgb" title="Link to this heading"></a></h3>
<p>2つの指定された色の赤、緑、青、アルファ値を、与えられた比率に基づいて混合させた色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_mix_rgb(color1, color2, ratio)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>color1</strong> - 色を表す文字列</p></li>
<li><p><strong>color2</strong> - 色を表す文字列</p></li>
<li><p><strong>ratio</strong> - 混合比率</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_mix_rgb('0,0,0','255,255,255',0.5)</span></code> → '127,127,127,255'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-part">
<span id="expression-function-color-color-part"></span><h3><a class="toc-backref" href="#id204" role="doc-backlink"><span class="section-number">13.2.3.9. </span>color_part</a><a class="headerlink" href="#color-part" title="Link to this heading"></a></h3>
<p>色を表す文字列から、赤色成分やアルファ成分など特定の成分を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_part(color, component)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>color</strong> - 色を表す文字列</p></li>
<li><p><strong>component</strong> - 戻り値となる、色の成分に対応する文字列。有効なオプションは次のとおり：</p>
<ul>
<li><p>red: RGB の赤色成分（0-255）</p></li>
<li><p>green: RGB の緑色成分（0-255）</p></li>
<li><p>blue: RGB の青色成分（0-255）</p></li>
<li><p>alpha: アルファ（透明度）値（0-255）</p></li>
<li><p>hue: HSV の色相（0-360）</p></li>
<li><p>saturation: HSV の彩度（0-100）</p></li>
<li><p>value: HSV の明度（0-100）</p></li>
<li><p>hsl_hue: HSL の色相（0-360）</p></li>
<li><p>hsl_saturation: HSL の彩度（0-100）</p></li>
<li><p>lightness: HSL の輝度（0-100）</p></li>
<li><p>cyan: CMYK のシアン成分（0-100）</p></li>
<li><p>magenta: CMYK のマゼンタ成分（0-100）</p></li>
<li><p>yellow: CMYK のイエロー成分（0-100）</p></li>
<li><p>black: CMYK のブラック成分（0-100）</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_part('200,10,30','green')</span></code> → 10</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-rgb">
<span id="expression-function-color-color-rgb"></span><h3><a class="toc-backref" href="#id205" role="doc-backlink"><span class="section-number">13.2.3.10. </span>color_rgb</a><a class="headerlink" href="#color-rgb" title="Link to this heading"></a></h3>
<p>赤、緑、青成分に基づいて、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_rgb(red, green, blue)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>red</strong> - 赤色成分。0から255までの整数値</p></li>
<li><p><strong>green</strong> - 緑色成分。0から255までの整数値</p></li>
<li><p><strong>blue</strong> - 青色成分。0から255までの整数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_rgb(255,127,0)</span></code> → '255,127,0'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="color-rgba">
<span id="expression-function-color-color-rgba"></span><h3><a class="toc-backref" href="#id206" role="doc-backlink"><span class="section-number">13.2.3.11. </span>color_rgba</a><a class="headerlink" href="#color-rgba" title="Link to this heading"></a></h3>
<p>赤、緑、青およびアルファ（透明度）成分に基づいて、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>color_rgba(red, green, blue, alpha)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>red</strong> - 赤色成分。0から255までの整数値</p></li>
<li><p><strong>green</strong> - 緑色成分。0から255までの整数値</p></li>
<li><p><strong>blue</strong> - 青色成分。0から255までの整数値</p></li>
<li><p><strong>alpha</strong> - 色のアルファ成分。0（完全に透明）から255（不透明）までの整数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">color_rgba(255,127,0,200)</span></code> → '255,127,0,200'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="create-ramp">
<span id="expression-function-color-create-ramp"></span><h3><a class="toc-backref" href="#id207" role="doc-backlink"><span class="section-number">13.2.3.12. </span>create_ramp</a><a class="headerlink" href="#create-ramp" title="Link to this heading"></a></h3>
<p>色文字列とステップのマップ型オブジェクトで定義された、グラデーションランプを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>create_ramp(map, [discrete=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - 色文字列とステップのマップ型オブジェクト</p></li>
<li><p><strong>discrete</strong> - 離散的なカラーマップを作る場合、このパラメータをtrueに設定する</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ramp_color(create_ramp(map(0,'0,0,0',1,'255,0,0')),1)</span></code> → '255,0,0,255'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="darker">
<span id="expression-function-color-darker"></span><h3><a class="toc-backref" href="#id208" role="doc-backlink"><span class="section-number">13.2.3.13. </span>darker</a><a class="headerlink" href="#darker" title="Link to this heading"></a></h3>
<p>指定した色を基準に、より暗い（または明るい）色の色文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>darker(color, factor)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>color</strong> - 色を表す文字列</p></li>
<li><p><strong>factor</strong> - 暗化係数に相当する整数</p>
<ul>
<li><p>係数が100よりも大きい場合には、この関数はより暗い色を返します（例えば、係数を200とすると、輝度が半分の色が返されます）。</p></li>
<li><p>係数が100よりも小さい場合には、戻り値の色はより明るくなります。ただし、この目的では lighter() 関数を使用することを推奨します。</p></li>
<li><p>係数が0または負の値の場合には、戻り値は未定義です。</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">darker('200,10,30',</span> <span class="pre">200)</span></code> → '100,5,15,255'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="#expression-function-color-lighter"><span class="std std-ref">lighter</span></a></p>
</section>
<section id="lighter">
<span id="expression-function-color-lighter"></span><h3><a class="toc-backref" href="#id209" role="doc-backlink"><span class="section-number">13.2.3.14. </span>lighter</a><a class="headerlink" href="#lighter" title="Link to this heading"></a></h3>
<p>指定した色を基準に、より明るい（または暗い）色の色文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>lighter(color, factor)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>color</strong> - 色を表す文字列</p></li>
<li><p><strong>factor</strong> - 明化係数に相当する整数</p>
<ul>
<li><p>係数が100よりも大きい場合には、この関数はより明るい色を返します（例えば、係数を150とすると、50%明るい色が返されます）。</p></li>
<li><p>係数が100よりも小さい場合には、戻り値の色はより暗くなります。ただし、この目的では darker() 関数を使用することを推奨します。</p></li>
<li><p>係数が0または負の値の場合には、戻り値は未定義です。</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lighter('200,10,30',</span> <span class="pre">200)</span></code> → '255,158,168,255'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="#expression-function-color-darker"><span class="std std-ref">darker</span></a></p>
</section>
<section id="project-color">
<span id="expression-function-color-project-color"></span><h3><a class="toc-backref" href="#id210" role="doc-backlink"><span class="section-number">13.2.3.15. </span>project_color</a><a class="headerlink" href="#project-color" title="Link to this heading"></a></h3>
<p>プロジェクトのカラースキーマから色を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>project_color(name)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>name</strong> - 色の名前</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">project_color('Logo</span> <span class="pre">color')</span></code> → '20,140,50'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../introduction/qgis_configuration.html#project-colors"><span class="std std-ref">プロジェクトの色の設定</span></a></p>
</section>
<section id="ramp-color">
<span id="expression-function-color-ramp-color"></span><h3><a class="toc-backref" href="#id211" role="doc-backlink"><span class="section-number">13.2.3.16. </span>ramp_color</a><a class="headerlink" href="#ramp-color" title="Link to this heading"></a></h3>
<p>カラーランプから、色を表す文字列を返します。</p>
<p><strong>保存済みカラーランプバージョン</strong></p>
<p>保存済みカラーランプから、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>ramp_color(ramp_name, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>ramp_name</strong> - カラーランプの名前の文字列。例： 'Spectral'</p></li>
<li><p><strong>value</strong> - ランプ上で色を取得する位置。0と1の間の実数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ramp_color('Spectral',0.3)</span></code> → '253,190,115,255'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>利用可能なカラーランプはQGISのインストール環境によって異なります。異なるインストール環境にQGISプロジェクトを移動した場合、この関数は期待した結果が得られない場合があります。</p>
</div>
<p><strong>式によって定義されたカラーランプバージョン</strong></p>
<p>式によって定義されたカラーランプから、色を表す文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>ramp_color(ramp, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>ramp</strong> - カラーランプ</p></li>
<li><p><strong>value</strong> - ランプ上で色を取得する位置。0と1の間の実数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ramp_color(create_ramp(map(0,'0,0,0',1,'255,0,0')),1)</span></code> → '255,0,0,255'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="../style_library/style_manager.html#color-ramp"><span class="std std-ref">カラーランプの設定</span></a> 、 <a class="reference internal" href="../introduction/general_tools.html#color-ramp-widget"><span class="std std-ref">カラーランプのドロップダウンショートカット</span></a></p>
</section>
<section id="set-color-part">
<span id="expression-function-color-set-color-part"></span><h3><a class="toc-backref" href="#id212" role="doc-backlink"><span class="section-number">13.2.3.17. </span>set_color_part</a><a class="headerlink" href="#set-color-part" title="Link to this heading"></a></h3>
<p>色を表す文字列に対して、赤色成分やアルファ成分など特定の色成分を設定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>set_color_part(color, component, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>color</strong> - 色を表す文字列</p></li>
<li><p><strong>component</strong> - 設定する色の成分に対応する文字列。有効なオプションは次のとおり：</p>
<ul>
<li><p>red: RGB の赤色成分（0-255）</p></li>
<li><p>green: RGB の緑色成分（0-255）</p></li>
<li><p>blue: RGB の青色成分（0-255）</p></li>
<li><p>alpha: アルファ（透明度）値（0-255）</p></li>
<li><p>hue: HSV の色相（0-360）</p></li>
<li><p>saturation: HSV の彩度（0-100）</p></li>
<li><p>value: HSV の明度（0-100）</p></li>
<li><p>hsl_hue: HSL の色相（0-360）</p></li>
<li><p>hsl_saturation: HSL の彩度（0-100）</p></li>
<li><p>lightness: HSL の輝度（0-100）</p></li>
<li><p>cyan: CMYK のシアン成分（0-100）</p></li>
<li><p>magenta: CMYK のマゼンタ成分（0-100）</p></li>
<li><p>yellow: CMYK のイエロー成分（0-100）</p></li>
<li><p>black: CMYK のブラック成分（0-100）</p></li>
</ul>
</li>
<li><p><strong>value</strong> - 色成分の新しい値。上記の値の範囲に従う</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">set_color_part('200,10,30','green',50)</span></code> → '200,50,30,255'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="conditional-functions">
<h2><a class="toc-backref" href="#id112" role="doc-backlink"><span class="section-number">13.2.4. </span>条件関数</a><a class="headerlink" href="#conditional-functions" title="Link to this heading"></a></h2>
<p>このグループには、式の中で条件分けに使う関数があります。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id6">
<ul class="simple">
<li><p><a class="reference internal" href="#case" id="id213">CASE</a></p></li>
<li><p><a class="reference internal" href="#coalesce" id="id214">coalesce</a></p></li>
<li><p><a class="reference internal" href="#if" id="id215">if</a></p></li>
<li><p><a class="reference internal" href="#nullif" id="id216">nullif</a></p></li>
<li><p><a class="reference internal" href="#regexp-match" id="id217">regexp_match</a></p></li>
<li><p><a class="reference internal" href="#try" id="id218">try</a></p></li>
</ul>
</nav>
</div>
<section id="case">
<span id="expression-function-conditionals-case"></span><h3><a class="toc-backref" href="#id213" role="doc-backlink"><span class="section-number">13.2.4.1. </span>CASE</a><a class="headerlink" href="#case" title="Link to this heading"></a></h3>
<p>CASEは、一連の条件を評価し、条件が最初に満たされる結果を返します。条件は上から順に評価され、ある条件がtrueであれば評価を停止し、対応する結果が返されます。どの条件もtrueでない場合は、ELSE節の値が返されます。ELSE節が無く、いずれの条件も満たさない場合には、NULLが返されます。</p>
<p>CASE</p>
<p>WHEN <em>condition</em> THEN <em>result</em></p>
<p>[ …n ]</p>
<p>[ ELSE <em>result</em> ]</p>
<p>END</p>
<p>記号[]は、オプションの引数を意味します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>WHEN condition</strong> - 評価される条件式</p></li>
<li><p><strong>THEN result</strong> - <em>condition</em> 式がtrue の場合、 <em>result</em> 式が評価され、返されます。</p></li>
<li><p><strong>ELSE result</strong> - 上にある条件式がどれもtrueと評価されない場合には、 <em>result</em> 式が評価され、返されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CASE</span> <span class="pre">WHEN</span> <span class="pre">&quot;name&quot;</span> <span class="pre">IS</span> <span class="pre">NULL</span> <span class="pre">THEN</span> <span class="pre">'None'</span> <span class="pre">END</span></code> → &quot;name&quot; フィールドが NULL の場合には、文字列 'None' を返す</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CASE</span> <span class="pre">WHEN</span> <span class="pre">$area</span> <span class="pre">&gt;</span> <span class="pre">10000</span> <span class="pre">THEN</span> <span class="pre">'Big</span> <span class="pre">property'</span> <span class="pre">WHEN</span> <span class="pre">$area</span> <span class="pre">&gt;</span> <span class="pre">5000</span> <span class="pre">THEN</span> <span class="pre">'Medium</span> <span class="pre">property'</span> <span class="pre">ELSE</span> <span class="pre">'Small</span> <span class="pre">property'</span> <span class="pre">END</span></code> → 面積が10000よりも大きい場合には文字列 'Big property' を、面積が5000から10000の場合には文字列 'Medium property' を、それ以外の場合には文字列 'Small property' を返す</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="coalesce">
<span id="expression-function-conditionals-coalesce"></span><h3><a class="toc-backref" href="#id214" role="doc-backlink"><span class="section-number">13.2.4.2. </span>coalesce</a><a class="headerlink" href="#coalesce" title="Link to this heading"></a></h3>
<p>式リストから最初の非NULL値を返します。</p>
<p>この関数は、任意の数の引数をとることができます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>coalesce(expression1, expression2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 型に関わらず、有効な式または値。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">coalesce(NULL,</span> <span class="pre">2)</span></code> → 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coalesce(NULL,</span> <span class="pre">2,</span> <span class="pre">3)</span></code> → 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coalesce(7,</span> <span class="pre">NULL,</span> <span class="pre">3*2)</span></code> → 7</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coalesce(&quot;fieldA&quot;,</span> <span class="pre">&quot;fallbackField&quot;,</span> <span class="pre">'ERROR')</span></code> → fieldA が非NULLの場合には fieldA の値。fieldA がNULLの場合は fallbackField の値。両方ともNULLの場合には、文字列 'ERROR'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="if">
<span id="expression-function-conditionals-if"></span><h3><a class="toc-backref" href="#id215" role="doc-backlink"><span class="section-number">13.2.4.3. </span>if</a><a class="headerlink" href="#if" title="Link to this heading"></a></h3>
<p>条件をテストし、それに応じて異なる結果を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>if(condition, result_when_true, result_when_false)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>condition</strong> - チェックする条件</p></li>
<li><p><strong>result_when_true</strong> - 条件がtrueか、あるいはfalseに変換できない値である場合に返される結果</p></li>
<li><p><strong>result_when_false</strong> - 条件がfalseであるか、0や長さゼロの文字列 ''といったfalseに変換される値である場合に返される結果。NULLもfalseに変換されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">if(</span> <span class="pre">1+1=2,</span> <span class="pre">'Yes',</span> <span class="pre">'No'</span> <span class="pre">)</span></code> → 'Yes'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if(</span> <span class="pre">1+1=3,</span> <span class="pre">'Yes',</span> <span class="pre">'No'</span> <span class="pre">)</span></code> → 'No'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if(</span> <span class="pre">5</span> <span class="pre">&gt;</span> <span class="pre">3,</span> <span class="pre">1,</span> <span class="pre">0)</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if(</span> <span class="pre">'',</span> <span class="pre">'It</span> <span class="pre">is</span> <span class="pre">true</span> <span class="pre">(not</span> <span class="pre">empty)',</span> <span class="pre">'It</span> <span class="pre">is</span> <span class="pre">false</span> <span class="pre">(empty)'</span> <span class="pre">)</span></code> → 'It is false (empty)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if(</span> <span class="pre">'</span> <span class="pre">',</span> <span class="pre">'It</span> <span class="pre">is</span> <span class="pre">true</span> <span class="pre">(not</span> <span class="pre">empty)',</span> <span class="pre">'It</span> <span class="pre">is</span> <span class="pre">false</span> <span class="pre">(empty)'</span> <span class="pre">)</span></code> → 'It is true (not empty)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if(</span> <span class="pre">0,</span> <span class="pre">'One',</span> <span class="pre">'Zero'</span> <span class="pre">)</span></code> → 'Zero'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if(</span> <span class="pre">10,</span> <span class="pre">'One',</span> <span class="pre">'Zero'</span> <span class="pre">)</span></code> → 'One'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="nullif">
<span id="expression-function-conditionals-nullif"></span><h3><a class="toc-backref" href="#id216" role="doc-backlink"><span class="section-number">13.2.4.4. </span>nullif</a><a class="headerlink" href="#nullif" title="Link to this heading"></a></h3>
<p>value1がvalue2と等しい場合にはNULLを返し、そうでない場合にはvalue1を返します。この関数は、条件によって値をNULLに置き換える場合に便利です。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>nullif(value1, value2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value1</strong> - そのまま使われるか、NULLに置き換えられる値</p></li>
<li><p><strong>value2</strong> - NULL置換の基準になる値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nullif('(none)',</span> <span class="pre">'(none)')</span></code> → NULL</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nullif('text',</span> <span class="pre">'(none)')</span></code> → 'text'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nullif(&quot;name&quot;,</span> <span class="pre">'')</span></code> → nameが空文字列（またはNULL）の場合はNULL、そうでない場合はname</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="regexp-match">
<span id="expression-function-conditionals-regexp-match"></span><h3><a class="toc-backref" href="#id217" role="doc-backlink"><span class="section-number">13.2.4.5. </span>regexp_match</a><a class="headerlink" href="#regexp-match" title="Link to this heading"></a></h3>
<p>unicode文字列内で正規表現にマッチする最初の位置を返します。部分文字列が見つからない場合、0を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>regexp_match(input_string, regex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>input_string</strong> - 正規表現に対してテストする文字列</p></li>
<li><p><strong>regex</strong> - テストする正規表現。バックスラッシュは二重にエスケープする必要があります（たとえば、空白文字に一致させる場合は &quot;\\s&quot; 、単語の境界に一致させる場合は &quot;\\b&quot; ）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_match('QGIS</span> <span class="pre">ROCKS','\\sROCKS')</span></code> → 5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_match('Budač','udač\\b')</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="try">
<span id="expression-function-conditionals-try"></span><h3><a class="toc-backref" href="#id218" role="doc-backlink"><span class="section-number">13.2.4.6. </span>try</a><a class="headerlink" href="#try" title="Link to this heading"></a></h3>
<p>式の評価を試し、エラーがなければその値を返します。式がエラーとなる場合には、指定された代替値を返します。指定値がない場合はNULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>try(expression, [alternative])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 評価したい式</p></li>
<li><p><strong>alternative</strong> - 式がエラーを返す場合に返したい値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">try(</span> <span class="pre">to_int(</span> <span class="pre">'1'</span> <span class="pre">),</span> <span class="pre">0</span> <span class="pre">)</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">try(</span> <span class="pre">to_int(</span> <span class="pre">'a'</span> <span class="pre">),</span> <span class="pre">0</span> <span class="pre">)</span></code> → 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">try(</span> <span class="pre">to_date(</span> <span class="pre">'invalid_date'</span> <span class="pre">)</span> <span class="pre">)</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="conversions-functions">
<span id="conversion-functions"></span><h2><a class="toc-backref" href="#id113" role="doc-backlink"><span class="section-number">13.2.5. </span>変換関数</a><a class="headerlink" href="#conversions-functions" title="Link to this heading"></a></h2>
<p>このグループには、あるデータ型を他の型に変換する関数が含まれます（例えば文字列型と整数型の変換、文字列型とバイナリ型の変換、文字列から日付への変換など）。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id7">
<ul class="simple">
<li><p><a class="reference internal" href="#from-base64" id="id219">from_base64</a></p></li>
<li><p><a class="reference internal" href="#hash" id="id220">hash</a></p></li>
<li><p><a class="reference internal" href="#md5" id="id221">md5</a></p></li>
<li><p><a class="reference internal" href="#sha256" id="id222">sha256</a></p></li>
<li><p><a class="reference internal" href="#to-base64" id="id223">to_base64</a></p></li>
<li><p><a class="reference internal" href="#to-date" id="id224">to_date</a></p></li>
<li><p><a class="reference internal" href="#to-datetime" id="id225">to_datetime</a></p></li>
<li><p><a class="reference internal" href="#to-decimal" id="id226">to_decimal</a></p></li>
<li><p><a class="reference internal" href="#to-dm" id="id227">to_dm</a></p></li>
<li><p><a class="reference internal" href="#to-dms" id="id228">to_dms</a></p></li>
<li><p><a class="reference internal" href="#to-int" id="id229">to_int</a></p></li>
<li><p><a class="reference internal" href="#to-interval" id="id230">to_interval</a></p></li>
<li><p><a class="reference internal" href="#to-real" id="id231">to_real</a></p></li>
<li><p><a class="reference internal" href="#to-string" id="id232">to_string</a></p></li>
<li><p><a class="reference internal" href="#to-time" id="id233">to_time</a></p></li>
</ul>
</nav>
</div>
<section id="from-base64">
<span id="expression-function-conversions-from-base64"></span><h3><a class="toc-backref" href="#id219" role="doc-backlink"><span class="section-number">13.2.5.1. </span>from_base64</a><a class="headerlink" href="#from-base64" title="Link to this heading"></a></h3>
<p>Base64エンコードの文字列をバイナリ値にデコードします。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>from_base64(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - デコードする文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from_base64('UUdJUw==')</span></code> → 'QGIS'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="hash">
<span id="expression-function-conversions-hash"></span><h3><a class="toc-backref" href="#id220" role="doc-backlink"><span class="section-number">13.2.5.2. </span>hash</a><a class="headerlink" href="#hash" title="Link to this heading"></a></h3>
<p>指定された方法で文字列からハッシュを作ります。1バイト（8ビット）は16進数2文字で表されるので、 'md4' （16 bytes）では 16 * 2 = 32 文字に、 'keccak_512' （64 bytes）では 64 * 2 = 128 文字になります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>hash(string, method)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - ハッシュ化する文字列</p></li>
<li><p><strong>method</strong> - ハッシュ化方法： 'md4', 'md5', 'sha1', 'sha224', 'sha384', 'sha512', 'sha3_224', 'sha3_256', 'sha3_384', 'sha3_512', 'keccak_224', 'keccak_256', 'keccak_384', 'keccak_512'</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'md4')</span></code> → 'c0fc71c241cdebb6e888cbac0e2b68eb'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'md5')</span></code> → '57470aaa9e22adaefac7f5f342f1c6da'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'sha1')</span></code> → 'f87cfb2b74cdd5867db913237024e7001e62b114'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'sha224')</span></code> → '4093a619ada631c770f44bc643ead18fb393b93d6a6af1861fcfece0'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'sha256')</span></code> → 'eb045cba7a797aaa06ac58830846e40c8e8c780bc0676d3393605fae50c05309'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'sha384')</span></code> → '91c1de038cc3d09fdd512e99f9dd9922efadc39ed21d3922e69a4305cc25506033aee388e554b78714c8734f9cd7e610'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'sha512')</span></code> → 'c2c092f2ab743bf8edbeb6d028a745f30fc720408465ed369421f0a4e20fa5e27f0c90ad72d3f1d836eaa5d25cd39897d4cf77e19984668ef58da6e3159f18ac'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'sha3_224')</span></code> → '467f49a5039e7280d5d42fd433e80d203439e338eaabd701f0d6c17d'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'sha3_256')</span></code> → '540f7354b6b8a6e735f2845250f15f4f3ba4f666c55574d9e9354575de0e980f'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'sha3_384')</span></code> → '96052da1e77679e9a65f60d7ead961b287977823144786386eb43647b0901fd8516fa6f1b9d243fb3f28775e6dde6107'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'sha3_512')</span></code> → '900d079dc69761da113980253aa8ac0414a8bd6d09879a916228f8743707c4758051c98445d6b8945ec854ff90655005e02aceb0a2ffc6a0ebf818745d665349'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'keccak_224')</span></code> → '5b0ce6acef8b0a121d4ac4f3eaa8503c799ad4e26a3392d1fb201478'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'keccak_256')</span></code> → '991c520aa6815392de24087f61b2ae0fd56abbfeee4a8ca019c1011d327c577e'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash('QGIS',</span> <span class="pre">'keccak_384')</span></code> → 'c57a3aed9d856fa04e5eeee9b62b6e027cca81ba574116d3cc1f0d48a1ef9e5886ff463ea8d0fac772ee473bf92f810d'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="md5">
<span id="expression-function-conversions-md5"></span><h3><a class="toc-backref" href="#id221" role="doc-backlink"><span class="section-number">13.2.5.3. </span>md5</a><a class="headerlink" href="#md5" title="Link to this heading"></a></h3>
<p>文字列からmd5ハッシュを作ります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>md5(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - ハッシュ化する文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">md5('QGIS')</span></code> → '57470aaa9e22adaefac7f5f342f1c6da'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="sha256">
<span id="expression-function-conversions-sha256"></span><h3><a class="toc-backref" href="#id222" role="doc-backlink"><span class="section-number">13.2.5.4. </span>sha256</a><a class="headerlink" href="#sha256" title="Link to this heading"></a></h3>
<p>文字列からsha256ハッシュを作ります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>sha256(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - ハッシュ化する文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sha256('QGIS')</span></code> → 'eb045cba7a797aaa06ac58830846e40c8e8c780bc0676d3393605fae50c05309'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-base64">
<span id="expression-function-conversions-to-base64"></span><h3><a class="toc-backref" href="#id223" role="doc-backlink"><span class="section-number">13.2.5.5. </span>to_base64</a><a class="headerlink" href="#to-base64" title="Link to this heading"></a></h3>
<p>バイナリ値をBase64エンコードを使用して文字列にエンコードします。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_base64(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - エンコードするバイナリ値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_base64('QGIS')</span></code> → 'UUdJUw=='</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-date">
<span id="expression-function-conversions-to-date"></span><h3><a class="toc-backref" href="#id224" role="doc-backlink"><span class="section-number">13.2.5.6. </span>to_date</a><a class="headerlink" href="#to-date" title="Link to this heading"></a></h3>
<p>文字列を日付型オブジェクトに変換します。オプションとして、文字列をパースするためのフォーマット文字列を指定できます。フォーマットに関するドキュメントは、 <a class="reference external" href="https://doc.qt.io/qt-5/qdate.html#fromString-2">QDate::fromString</a> または format_date 関数のドキュメントを参照してください。デフォルトでは現在のQGISユーザーのロケールを使用します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_date(string, [format], [language])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 日付を表す文字列</p></li>
<li><p><strong>format</strong> - 文字列を日付型に変換するために使用するフォーマット</p></li>
<li><p><strong>language</strong> - 日付型に変換する文字列の言語（2文字または3文字の小文字、 ISO 639 言語名コード）。デフォルトでは現在のQGISユーザーのロケールを使用します</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_date('2012-05-04')</span></code> → 2012-05-04</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_date('June</span> <span class="pre">29,</span> <span class="pre">2019','MMMM</span> <span class="pre">d,</span> <span class="pre">yyyy')</span></code> → 2019-06-29 （現在のロケールが6番目の月名に 'June' を使用する言語の場合の結果。そうでない場合はエラーが発生します）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_date('29</span> <span class="pre">juin,</span> <span class="pre">2019','d</span> <span class="pre">MMMM,</span> <span class="pre">yyyy','fr')</span></code> → 2019-06-29</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-datetime">
<span id="expression-function-conversions-to-datetime"></span><h3><a class="toc-backref" href="#id225" role="doc-backlink"><span class="section-number">13.2.5.7. </span>to_datetime</a><a class="headerlink" href="#to-datetime" title="Link to this heading"></a></h3>
<p>文字列を日付時刻型オブジェクトに変換します。オプションとして、文字列をパースするためのフォーマット文字列を指定できます。フォーマットに関するドキュメントは、 <a class="reference external" href="https://doc.qt.io/qt-5/qdate.html#fromString-2">QDate::fromString</a> 、 <a class="reference external" href="https://doc.qt.io/qt-5/qtime.html#fromString-1">QTime::fromString</a> または format_date 関数のドキュメントを参照してください。デフォルトでは現在のQGISユーザーのロケールを使用します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_datetime(string, [format], [language])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 日付時刻を表す文字列</p></li>
<li><p><strong>format</strong> - 文字列を日付時刻型に変換するために使用するフォーマット</p></li>
<li><p><strong>language</strong> - 日付時刻型に変換する文字列の言語（2文字または3文字の小文字、 ISO 639 言語名コード）。デフォルトでは現在のQGISユーザーのロケールを使用します</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('2012-05-04</span> <span class="pre">12:50:00')</span></code> → 2012-05-04T12:50:00</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('June</span> <span class="pre">29,</span> <span class="pre">2019</span> <span class="pre">&#64;</span> <span class="pre">12:34','MMMM</span> <span class="pre">d,</span> <span class="pre">yyyy</span> <span class="pre">&#64;</span> <span class="pre">HH:mm')</span></code> → 2019-06-29T12:34（現在のロケールが6番目の月名に 'June' を使用する言語の場合の結果。そうでない場合はエラーが発生します）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('29</span> <span class="pre">juin,</span> <span class="pre">2019</span> <span class="pre">&#64;</span> <span class="pre">12:34','d</span> <span class="pre">MMMM,</span> <span class="pre">yyyy</span> <span class="pre">&#64;</span> <span class="pre">HH:mm','fr')</span></code> → 2019-06-29T12:34</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-decimal">
<span id="expression-function-conversions-to-decimal"></span><h3><a class="toc-backref" href="#id226" role="doc-backlink"><span class="section-number">13.2.5.8. </span>to_decimal</a><a class="headerlink" href="#to-decimal" title="Link to this heading"></a></h3>
<p>度分秒の座標を十進数に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_decimal(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 度分秒の文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_decimal('6°21\'16.445')</span></code> → 6.3545680555</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-dm">
<span id="expression-function-conversions-to-dm"></span><h3><a class="toc-backref" href="#id227" role="doc-backlink"><span class="section-number">13.2.5.9. </span>to_dm</a><a class="headerlink" href="#to-dm" title="Link to this heading"></a></h3>
<p>座標を度、分単位に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_dm(coordinate, axis, precision, [formatting=])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>coordinate</strong> - 緯度または経度の値</p></li>
<li><p><strong>axis</strong> - 座標軸。 'x' または 'y'</p></li>
<li><p><strong>precision</strong> - 小数点以下の桁数</p></li>
<li><p><strong>formatting</strong> - フォーマット型を指定する。NULL（デフォルト値）、 'aligned' または 'suffix'</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_dm(6.1545681,</span> <span class="pre">'x',</span> <span class="pre">3)</span></code> → 6°9.274′</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_dm(6.1545681,</span> <span class="pre">'y',</span> <span class="pre">4,</span> <span class="pre">'aligned')</span></code> → 6°09.2741′N</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_dm(6.1545681,</span> <span class="pre">'y',</span> <span class="pre">4,</span> <span class="pre">'suffix')</span></code> → 6°9.2741′N</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-dms">
<span id="expression-function-conversions-to-dms"></span><h3><a class="toc-backref" href="#id228" role="doc-backlink"><span class="section-number">13.2.5.10. </span>to_dms</a><a class="headerlink" href="#to-dms" title="Link to this heading"></a></h3>
<p>座標を度、分、秒形式に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_dms(coordinate, axis, precision, [formatting=])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>coordinate</strong> - 緯度または経度の値</p></li>
<li><p><strong>axis</strong> - 座標軸。 'x' または 'y'</p></li>
<li><p><strong>precision</strong> - 小数点以下の桁数</p></li>
<li><p><strong>formatting</strong> - フォーマット型を指定する。NULL（デフォルト値）、 'aligned' または 'suffix'</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_dms(6.1545681,</span> <span class="pre">'x',</span> <span class="pre">3)</span></code> → 6°9′16.445″</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_dms(6.1545681,</span> <span class="pre">'y',</span> <span class="pre">4,</span> <span class="pre">'aligned')</span></code> → 6°09′16.4452″N</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_dms(6.1545681,</span> <span class="pre">'y',</span> <span class="pre">4,</span> <span class="pre">'suffix')</span></code> → 6°9′16.4452″N</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-int">
<span id="expression-function-conversions-to-int"></span><h3><a class="toc-backref" href="#id229" role="doc-backlink"><span class="section-number">13.2.5.11. </span>to_int</a><a class="headerlink" href="#to-int" title="Link to this heading"></a></h3>
<p>文字列を整数値に変換します。整数値に変換できない場合は何も返されません（例えば '123asd' は無効な文字列です）。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_int(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 整数値に変換する文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_int('123')</span></code> → 123</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-interval">
<span id="expression-function-conversions-to-interval"></span><h3><a class="toc-backref" href="#id230" role="doc-backlink"><span class="section-number">13.2.5.12. </span>to_interval</a><a class="headerlink" href="#to-interval" title="Link to this heading"></a></h3>
<p>文字列をインターバル型に変換します。日付に日、時間、月などを加減することに利用できます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_interval(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - インターバルを表す文字列。有効なフォーマットには、 {n} days 、 {n} hours 、 {n} months などが含まれます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_interval('1</span> <span class="pre">day</span> <span class="pre">2</span> <span class="pre">hours')</span></code> → 間隔: 1.08333 日</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_interval(</span> <span class="pre">'0.5</span> <span class="pre">hours'</span> <span class="pre">)</span></code> → 間隔: 30 分</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('2012-05-05</span> <span class="pre">12:00:00')</span> <span class="pre">-</span> <span class="pre">to_interval('1</span> <span class="pre">day</span> <span class="pre">2</span> <span class="pre">hours')</span></code> → 2012-05-04T10:00:00</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-real">
<span id="expression-function-conversions-to-real"></span><h3><a class="toc-backref" href="#id231" role="doc-backlink"><span class="section-number">13.2.5.13. </span>to_real</a><a class="headerlink" href="#to-real" title="Link to this heading"></a></h3>
<p>文字列を実数値に変換します。値が実数に変換できない場合は何も返されません（例えば '123.56asd' は無効な文字列です）。フィールドの精度が変換結果の精度より小さい場合には、保存時に数値が丸められます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_real(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 実数値に変換する文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_real('123.45')</span></code> → 123.45</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-string">
<span id="expression-function-conversions-to-string"></span><h3><a class="toc-backref" href="#id232" role="doc-backlink"><span class="section-number">13.2.5.14. </span>to_string</a><a class="headerlink" href="#to-string" title="Link to this heading"></a></h3>
<p>数値を文字列に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_string(number)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>number</strong> - 整数または実数値。文字列に変換する数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_string(123)</span></code> → '123'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-time">
<span id="expression-function-conversions-to-time"></span><h3><a class="toc-backref" href="#id233" role="doc-backlink"><span class="section-number">13.2.5.15. </span>to_time</a><a class="headerlink" href="#to-time" title="Link to this heading"></a></h3>
<p>文字列を時間型オブジェクトに変換します。オプションとして、文字列をパースするためのフォーマット文字列を指定できます。フォーマットに関するドキュメントは、 <a class="reference external" href="https://doc.qt.io/qt-5/qtime.html#fromString-1">QTime::fromString</a> を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_time(string, [format], [language])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 時刻を表す文字列</p></li>
<li><p><strong>format</strong> - 文字列を時間型に変換するために使用するフォーマット</p></li>
<li><p><strong>language</strong> - 時間型に変換する文字列の言語（2文字または3文字の小文字、 ISO 639 言語名コード）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_time('12:30:01')</span></code> → 12:30:01</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_time('12:34','HH:mm')</span></code> → 12:34:00</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_time('12:34','HH:mm','fr')</span></code> → 12:34:00</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="custom-functions">
<h2><a class="toc-backref" href="#id114" role="doc-backlink"><span class="section-number">13.2.6. </span>カスタム関数</a><a class="headerlink" href="#custom-functions" title="Link to this heading"></a></h2>
<p>このグループには、ユーザーが作成した関数が含まれています。詳細については <a class="reference internal" href="expression.html#function-editor"><span class="std std-ref">関数エディタ</span></a> を参照してください。</p>
</section>
<section id="date-and-time-functions">
<h2><a class="toc-backref" href="#id115" role="doc-backlink"><span class="section-number">13.2.7. </span>日付と時刻の関数</a><a class="headerlink" href="#date-and-time-functions" title="Link to this heading"></a></h2>
<p>このグループには、日付や時刻のデータを扱う関数が含まれています。このグループは、 <a class="reference internal" href="#conversion-functions"><span class="std std-ref">変換関数</span></a> （to_date, to_time, to_datetime, to_interval）や <a class="reference internal" href="#string-functions"><span class="std std-ref">文字列関数</span></a> （format_date）グループといくつかの関数を共有しています。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><strong>フィールドに日付、日付時刻、インターバルを格納する</strong></p>
<p><em>日付</em> 、 <em>時間</em> 、 <em>日付時刻</em> の値をフィールドに直接格納できるかは、データソースプロバイダに依存しています（例えば、シェープファイルは <em>日付</em> の形式は可能ですが、 <em>日付時刻</em> や <em>時間</em> の形式は不可です）。以下は、このような制限がある場合に制限を克服するための案です：</p>
<ul class="simple">
<li><p><em>日付</em> 、 <em>日付時刻</em> 、 <em>時間</em> の値は <a class="reference internal" href="#expression-function-date-and-time-format-date"><span class="std std-ref">format_date()</span></a> 関数を使用して変換し、テキスト型のフィールドに格納できます。</p></li>
<li><p><em>インターバル</em> は、日付抽出関数のどれか（例：日単位で表現されたインターバルを取得するには <a class="reference internal" href="#expression-function-date-and-time-day"><span class="std std-ref">day()</span></a> ）を使用した後、整数型または実数型のフィールドに格納できます。</p></li>
</ul>
</div>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id10">
<ul class="simple">
<li><p><a class="reference internal" href="#age" id="id234">age</a></p></li>
<li><p><a class="reference internal" href="#datetime-from-epoch" id="id235">datetime_from_epoch</a></p></li>
<li><p><a class="reference internal" href="#day" id="id236">day</a></p></li>
<li><p><a class="reference internal" href="#day-of-week" id="id237">day_of_week</a></p></li>
<li><p><a class="reference internal" href="#epoch" id="id238">epoch</a></p></li>
<li><p><a class="reference internal" href="#format-date" id="id239">format_date</a></p></li>
<li><p><a class="reference internal" href="#hour" id="id240">hour</a></p></li>
<li><p><a class="reference internal" href="#make-date" id="id241">make_date</a></p></li>
<li><p><a class="reference internal" href="#make-datetime" id="id242">make_datetime</a></p></li>
<li><p><a class="reference internal" href="#make-interval" id="id243">make_interval</a></p></li>
<li><p><a class="reference internal" href="#make-time" id="id244">make_time</a></p></li>
<li><p><a class="reference internal" href="#minute" id="id245">minute</a></p></li>
<li><p><a class="reference internal" href="#month" id="id246">month</a></p></li>
<li><p><a class="reference internal" href="#now" id="id247">now</a></p></li>
<li><p><a class="reference internal" href="#second" id="id248">second</a></p></li>
<li><p><a class="reference internal" href="#expression-function-date-and-time-to-date" id="id249">to_date</a></p></li>
<li><p><a class="reference internal" href="#expression-function-date-and-time-to-datetime" id="id250">to_datetime</a></p></li>
<li><p><a class="reference internal" href="#expression-function-date-and-time-to-interval" id="id251">to_interval</a></p></li>
<li><p><a class="reference internal" href="#expression-function-date-and-time-to-time" id="id252">to_time</a></p></li>
<li><p><a class="reference internal" href="#week" id="id253">week</a></p></li>
<li><p><a class="reference internal" href="#year" id="id254">year</a></p></li>
</ul>
</nav>
</div>
<section id="age">
<span id="expression-function-date-and-time-age"></span><h3><a class="toc-backref" href="#id234" role="doc-backlink"><span class="section-number">13.2.7.1. </span>age</a><a class="headerlink" href="#age" title="Link to this heading"></a></h3>
<p>2つの日付または日付時刻の差を返します。</p>
<p>差は <code class="docutils literal notranslate"><span class="pre">インターバル型</span></code> として返されるため、有用な情報を抽出するためには以下のいずれかの関数と一緒に使用する必要があります。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">year</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">month</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">week</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">day</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hour</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minute</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">second</span></code></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>age(datetime1, datetime2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>datetime1</strong> - 時間的に後の日付を表す文字列、日付型または日付時刻型</p></li>
<li><p><strong>datetime2</strong> - 時間的に前の日付を表す文字列、日付型または日付時刻型</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">day(age('2012-05-12','2012-05-02'))</span></code> → 10</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hour(age('2012-05-12','2012-05-02'))</span></code> → 240</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="datetime-from-epoch">
<span id="expression-function-date-and-time-datetime-from-epoch"></span><h3><a class="toc-backref" href="#id235" role="doc-backlink"><span class="section-number">13.2.7.2. </span>datetime_from_epoch</a><a class="headerlink" href="#datetime-from-epoch" title="Link to this heading"></a></h3>
<p>協定世界時（Qt.UTC） 1970-01-01T00:00:00.000 から msecs ミリ秒数経過した日付時刻を Qt.LocalTime に変換した日付時刻型を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>datetime_from_epoch(int)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>int</strong> - 数値（ミリ秒）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">datetime_from_epoch(1483225200000)</span></code> → 2017-01-01T00:00:00</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="day">
<span id="expression-function-date-and-time-day"></span><h3><a class="toc-backref" href="#id236" role="doc-backlink"><span class="section-number">13.2.7.3. </span>day</a><a class="headerlink" href="#day" title="Link to this heading"></a></h3>
<p>日付型から日を取り出します。インターバル型からは日数を取り出します。</p>
<p><strong>日付型バージョン</strong></p>
<p>日付型または日付時刻型から、日を取り出します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>day(date)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>date</strong> - 日付型または日付時刻型の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">day('2012-05-12')</span></code> → 12</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>インターバル型バージョン</strong></p>
<p>インターバル型の長さを日単位で計算します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>day(interval)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>interval</strong> - 日数を取得するインターバルの値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">day(to_interval('3</span> <span class="pre">days'))</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">day(to_interval('3</span> <span class="pre">weeks</span> <span class="pre">2</span> <span class="pre">days'))</span></code> → 23</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">day(age('2012-01-01','2010-01-01'))</span></code> → 730</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="day-of-week">
<span id="expression-function-date-and-time-day-of-week"></span><h3><a class="toc-backref" href="#id237" role="doc-backlink"><span class="section-number">13.2.7.4. </span>day_of_week</a><a class="headerlink" href="#day-of-week" title="Link to this heading"></a></h3>
<p>指定した日付または日付時刻の曜日を返します。返される値は0から6の範囲で、0が日曜日、6が土曜日に対応します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>day_of_week(date)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>date</strong> - 日付型または日付時刻型の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">day_of_week(to_date('2015-09-21'))</span></code> → 1</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="epoch">
<span id="expression-function-date-and-time-epoch"></span><h3><a class="toc-backref" href="#id238" role="doc-backlink"><span class="section-number">13.2.7.5. </span>epoch</a><a class="headerlink" href="#epoch" title="Link to this heading"></a></h3>
<p>Unixエポックと指定された日付値の間の間隔をミリ秒で返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>epoch(date)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>date</strong> - 日付型または日付時刻型の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">epoch(to_date('2017-01-01'))</span></code> → 1483203600000</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="format-date">
<span id="expression-function-date-and-time-format-date"></span><h3><a class="toc-backref" href="#id239" role="doc-backlink"><span class="section-number">13.2.7.6. </span>format_date</a><a class="headerlink" href="#format-date" title="Link to this heading"></a></h3>
<p>日付型または文字列をカスタム書式文字列でフォーマットします。Qtの date/time フォーマット文字列を使用します。詳細は <a class="reference external" href="https://doc.qt.io/qt-5/qdatetime.html#toString">QDateTime::toString</a> を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>format_date(datetime, format, [language])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul>
<li><p><strong>datetime</strong> - 日付型、時間型または日付時刻型の値</p></li>
<li><p><strong>format</strong> - 文字列の書式設定に使用する文字列テンプレート</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Expression</p></th>
<th class="head"><p>出力</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>d</p></td>
<td><p>十の位のゼロがない日付（1から31）</p></td>
</tr>
<tr class="row-odd"><td><p>dd</p></td>
<td><p>十の位にゼロのある日付（01から31）</p></td>
</tr>
<tr class="row-even"><td><p>ddd</p></td>
<td><p>短縮形のローカル曜日名（例：'月' から '日'）</p></td>
</tr>
<tr class="row-odd"><td><p>dddd</p></td>
<td><p>長いローカル曜日名（例：'月曜日' から '日曜日'）</p></td>
</tr>
<tr class="row-even"><td><p>M</p></td>
<td><p>十の位のゼロがない月（1から12）</p></td>
</tr>
<tr class="row-odd"><td><p>MM</p></td>
<td><p>十の位にゼロのある月（01から12）</p></td>
</tr>
<tr class="row-even"><td><p>MMM</p></td>
<td><p>短縮形のローカル月名（例：'1月' から '12月'）</p></td>
</tr>
<tr class="row-odd"><td><p>MMMM</p></td>
<td><p>長いローカル月名（例：'1月' から '12月'）</p></td>
</tr>
<tr class="row-even"><td><p>yy</p></td>
<td><p>2桁の年（00から99）</p></td>
</tr>
<tr class="row-odd"><td><p>yyyy</p></td>
<td><p>4桁の年</p></td>
</tr>
</tbody>
</table>
<p>以下の式は、書式文字列の時間部分に使用します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Expression</p></th>
<th class="head"><p>出力</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>h</p></td>
<td><p>十の位のゼロなしの時（0から23、AM/PM表示の場合は1から12）</p></td>
</tr>
<tr class="row-odd"><td><p>hh</p></td>
<td><p>十の位のゼロありの時（00から23、AM/PM表示の場合は01から12）</p></td>
</tr>
<tr class="row-even"><td><p>H</p></td>
<td><p>十の位のゼロなしの時（0から23、AM/PM表示の場合も同様）</p></td>
</tr>
<tr class="row-odd"><td><p>HH</p></td>
<td><p>十の位のゼロありの時（00から23、AM/PM表示の場合も同様）</p></td>
</tr>
<tr class="row-even"><td><p>m</p></td>
<td><p>十の位のゼロなしの分（0から59）</p></td>
</tr>
<tr class="row-odd"><td><p>mm</p></td>
<td><p>十の位のゼロありの分（00から59）</p></td>
</tr>
<tr class="row-even"><td><p>s</p></td>
<td><p>十の位のゼロなしの秒（0から59）</p></td>
</tr>
<tr class="row-odd"><td><p>ss</p></td>
<td><p>十の位のゼロありの秒（00から59）</p></td>
</tr>
<tr class="row-even"><td><p>z</p></td>
<td><p>数字の後に付くゼロなしのミリ秒（0 から 999）</p></td>
</tr>
<tr class="row-odd"><td><p>zzz</p></td>
<td><p>数字の後に付くゼロありのミリ秒（000 から 999）</p></td>
</tr>
<tr class="row-even"><td><p>AP または A</p></td>
<td><p>AM/PM 時間として解釈します。 <em>AP</em> は 'AM' または 'PM' のいずれかです。</p></td>
</tr>
<tr class="row-odd"><td><p>ap または a</p></td>
<td><p>AM/PM 時間として解釈します。 <em>ap</em> は 'am' または 'pm' のいずれかです。</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><strong>language</strong> - 日付をカスタム文字列にフォーマットする際に使用する言語（2文字または3文字の小文字、 <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">ISO 639 言語名コード</a> ）。デフォルトでは現在のQGISユーザーのロケールを使用します</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('2012-05-15','dd.MM.yyyy')</span></code> → '15.05.2012'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('2012-05-15','d</span> <span class="pre">MMMM</span> <span class="pre">yyyy','fr')</span></code> → '15 mai 2012'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('2012-05-15','dddd')</span></code> → 'Tuesday' （現在のロケールが English 版の場合の結果）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('2012-05-15</span> <span class="pre">13:54:20','dd.MM.yy')</span></code> → '15.05.12'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('13:54:20','hh:mm</span> <span class="pre">AP')</span></code> → '01:54 午後'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="hour">
<span id="expression-function-date-and-time-hour"></span><h3><a class="toc-backref" href="#id240" role="doc-backlink"><span class="section-number">13.2.7.7. </span>hour</a><a class="headerlink" href="#hour" title="Link to this heading"></a></h3>
<p>時間型または日付時刻型から時の部分を取り出します。インターバル型からは時間数を取り出します。</p>
<p><strong>時間型バージョン</strong></p>
<p>時間型または日付時刻型から時の部分を取り出します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>hour(datetime)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>datetime</strong> - 時間型または日付時刻型の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hour(</span> <span class="pre">to_datetime('2012-07-22</span> <span class="pre">13:24:57')</span> <span class="pre">)</span></code> → 13</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>インターバル型バージョン</strong></p>
<p>インターバル型の長さを時間単位で計算します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>hour(interval)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>interval</strong> - 時間数を取得するインターバルの値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hour(to_interval('3</span> <span class="pre">hours'))</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hour(age('2012-07-22T13:00:00','2012-07-22T10:00:00'))</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hour(age('2012-01-01','2010-01-01'))</span></code> → 17520</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-date">
<span id="expression-function-date-and-time-make-date"></span><h3><a class="toc-backref" href="#id241" role="doc-backlink"><span class="section-number">13.2.7.8. </span>make_date</a><a class="headerlink" href="#make-date" title="Link to this heading"></a></h3>
<p>年、月、日の数字から日付型の値を作ります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_date(year, month, day)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>year</strong> - 年の数字。1から99はそのままの値として解釈される。0年は無効な値</p></li>
<li><p><strong>month</strong> - 月の数字</p></li>
<li><p><strong>day</strong> - 日の数字。1から始まる</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make_date(2020,5,4)</span></code> → date value 2020-05-04</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-datetime">
<span id="expression-function-date-and-time-make-datetime"></span><h3><a class="toc-backref" href="#id242" role="doc-backlink"><span class="section-number">13.2.7.9. </span>make_datetime</a><a class="headerlink" href="#make-datetime" title="Link to this heading"></a></h3>
<p>年、月、日、時、分、秒の数字から日付時刻型の値を作ります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_datetime(year, month, day, hour, minute, second)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>year</strong> - 年の数字。1から99はそのままの値として解釈される。0年は無効な値</p></li>
<li><p><strong>month</strong> - 月の数字</p></li>
<li><p><strong>day</strong> - 日の数字。1から始まる</p></li>
<li><p><strong>hour</strong> - 時間の数字</p></li>
<li><p><strong>minute</strong> - 分の数字</p></li>
<li><p><strong>second</strong> - 秒の数字（小数点以下の数字はミリ秒）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make_datetime(2020,5,4,13,45,30.5)</span></code> → datetime value 2020-05-04 13:45:30.500</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-interval">
<span id="expression-function-date-and-time-make-interval"></span><h3><a class="toc-backref" href="#id243" role="doc-backlink"><span class="section-number">13.2.7.10. </span>make_interval</a><a class="headerlink" href="#make-interval" title="Link to this heading"></a></h3>
<p>年、月、日、時、分、秒の数字からインターバル型の値を作ります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_interval([years=0], [months=0], [weeks=0], [days=0], [hours=0], [minutes=0], [seconds=0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>years</strong> - 年の数（1年の長さを 365.25 日とする）</p></li>
<li><p><strong>months</strong> - 月の数（1月の長さを 30 日とする）</p></li>
<li><p><strong>weeks</strong> - 週の数</p></li>
<li><p><strong>days</strong> - 日の数</p></li>
<li><p><strong>hours</strong> - 時間の数</p></li>
<li><p><strong>minutes</strong> - 分の数</p></li>
<li><p><strong>seconds</strong> - 秒の数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make_interval(hours:=3)</span></code> → 間隔: 3時間</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make_interval(days:=2,</span> <span class="pre">hours:=3)</span></code> → 間隔: 2.125 日</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make_interval(minutes:=0.5,</span> <span class="pre">seconds:=5)</span></code> → 間隔: 35 秒</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-time">
<span id="expression-function-date-and-time-make-time"></span><h3><a class="toc-backref" href="#id244" role="doc-backlink"><span class="section-number">13.2.7.11. </span>make_time</a><a class="headerlink" href="#make-time" title="Link to this heading"></a></h3>
<p>時、分、秒の数字から時間型の値を作ります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_time(hour, minute, second)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>hour</strong> - 時間の数字</p></li>
<li><p><strong>minute</strong> - 分の数字</p></li>
<li><p><strong>second</strong> - 秒の数字（小数点以下の数字はミリ秒）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make_time(13,45,30.5)</span></code> → time value 13:45:30.500</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="minute">
<span id="expression-function-date-and-time-minute"></span><h3><a class="toc-backref" href="#id245" role="doc-backlink"><span class="section-number">13.2.7.12. </span>minute</a><a class="headerlink" href="#minute" title="Link to this heading"></a></h3>
<p>日付時刻型または時間型から分の部分を取り出します。インターバル型からは分数を取り出します。</p>
<p><strong>時間型バージョン</strong></p>
<p>時間型または日付時刻型から分の部分を取り出します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>minute(datetime)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>datetime</strong> - 時間型または日付時刻型の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minute(</span> <span class="pre">to_datetime('2012-07-22</span> <span class="pre">13:24:57')</span> <span class="pre">)</span></code> → 24</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>インターバル型バージョン</strong></p>
<p>インターバル型の長さを分単位で計算します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>minute(interval)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>interval</strong> - 分数を取得するインターバルの値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minute(to_interval('3</span> <span class="pre">minutes'))</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minute(age('2012-07-22T00:20:00','2012-07-22T00:00:00'))</span></code> → 20</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minute(age('2012-01-01','2010-01-01'))</span></code> → 1051200</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="month">
<span id="expression-function-date-and-time-month"></span><h3><a class="toc-backref" href="#id246" role="doc-backlink"><span class="section-number">13.2.7.13. </span>month</a><a class="headerlink" href="#month" title="Link to this heading"></a></h3>
<p>日付型から月を取り出します。インターバル型からは月数を取り出します。</p>
<p><strong>日付型バージョン</strong></p>
<p>日付型または日付時刻型から月の部分を取り出します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>month(date)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>date</strong> - 日付型または日付時刻型の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">month('2012-05-12')</span></code> → 05</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>インターバル型バージョン</strong></p>
<p>インターバル型の長さを月単位で計算します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>month(interval)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>interval</strong> - 月数を取得するインターバルの値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">month(to_interval('3</span> <span class="pre">months'))</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">month(age('2012-01-01','2010-01-01'))</span></code> → 4.03333</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="now">
<span id="expression-function-date-and-time-now"></span><h3><a class="toc-backref" href="#id247" role="doc-backlink"><span class="section-number">13.2.7.14. </span>now</a><a class="headerlink" href="#now" title="Link to this heading"></a></h3>
<p>現在の日付と時刻を返します。この関数は静的で、評価の最中は一貫した結果を返します。返される時刻は、この式が準備されたときの時刻です。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>now()</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">now()</span></code> → 2012-07-22T13:24:57</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="second">
<span id="expression-function-date-and-time-second"></span><h3><a class="toc-backref" href="#id248" role="doc-backlink"><span class="section-number">13.2.7.15. </span>second</a><a class="headerlink" href="#second" title="Link to this heading"></a></h3>
<p>時間型または日付時刻型から秒の部分を取り出します。インターバル型からは秒数を取り出します。</p>
<p><strong>時間型バージョン</strong></p>
<p>時間型または日付時刻型から秒の部分を取り出します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>second(datetime)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>datetime</strong> - 時間型または日付時刻型の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">second(</span> <span class="pre">to_datetime('2012-07-22</span> <span class="pre">13:24:57')</span> <span class="pre">)</span></code> → 57</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>インターバル型バージョン</strong></p>
<p>インターバル型の長さを秒単位で計算します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>second(interval)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>interval</strong> - 秒数を取得するインターバルの値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">second(to_interval('3</span> <span class="pre">minutes'))</span></code> → 180</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">second(age('2012-07-22T00:20:00','2012-07-22T00:00:00'))</span></code> → 1200</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">second(age('2012-01-01','2010-01-01'))</span></code> → 63072000</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-date-and-time-to-date">
<span id="id11"></span><h3><a class="toc-backref" href="#id249" role="doc-backlink"><span class="section-number">13.2.7.16. </span>to_date</a><a class="headerlink" href="#expression-function-date-and-time-to-date" title="Link to this heading"></a></h3>
<p>文字列を日付型オブジェクトに変換します。オプションとして、文字列をパースするためのフォーマット文字列を指定できます。フォーマットに関するドキュメントは、 <a class="reference external" href="https://doc.qt.io/qt-5/qdate.html#fromString-2">QDate::fromString</a> または format_date 関数のドキュメントを参照してください。デフォルトでは現在のQGISユーザーのロケールを使用します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_date(string, [format], [language])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 日付を表す文字列</p></li>
<li><p><strong>format</strong> - 文字列を日付型に変換するために使用するフォーマット</p></li>
<li><p><strong>language</strong> - 日付型に変換する文字列の言語（2文字または3文字の小文字、 ISO 639 言語名コード）。デフォルトでは現在のQGISユーザーのロケールを使用します</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_date('2012-05-04')</span></code> → 2012-05-04</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_date('June</span> <span class="pre">29,</span> <span class="pre">2019','MMMM</span> <span class="pre">d,</span> <span class="pre">yyyy')</span></code> → 2019-06-29 （現在のロケールが6番目の月名に 'June' を使用する言語の場合の結果。そうでない場合はエラーが発生します）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_date('29</span> <span class="pre">juin,</span> <span class="pre">2019','d</span> <span class="pre">MMMM,</span> <span class="pre">yyyy','fr')</span></code> → 2019-06-29</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-date-and-time-to-datetime">
<span id="id13"></span><h3><a class="toc-backref" href="#id250" role="doc-backlink"><span class="section-number">13.2.7.17. </span>to_datetime</a><a class="headerlink" href="#expression-function-date-and-time-to-datetime" title="Link to this heading"></a></h3>
<p>文字列を日付時刻型オブジェクトに変換します。オプションとして、文字列をパースするためのフォーマット文字列を指定できます。フォーマットに関するドキュメントは、 <a class="reference external" href="https://doc.qt.io/qt-5/qdate.html#fromString-2">QDate::fromString</a> 、 <a class="reference external" href="https://doc.qt.io/qt-5/qtime.html#fromString-1">QTime::fromString</a> または format_date 関数のドキュメントを参照してください。デフォルトでは現在のQGISユーザーのロケールを使用します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_datetime(string, [format], [language])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 日付時刻を表す文字列</p></li>
<li><p><strong>format</strong> - 文字列を日付時刻型に変換するために使用するフォーマット</p></li>
<li><p><strong>language</strong> - 日付時刻型に変換する文字列の言語（2文字または3文字の小文字、 ISO 639 言語名コード）。デフォルトでは現在のQGISユーザーのロケールを使用します</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('2012-05-04</span> <span class="pre">12:50:00')</span></code> → 2012-05-04T12:50:00</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('June</span> <span class="pre">29,</span> <span class="pre">2019</span> <span class="pre">&#64;</span> <span class="pre">12:34','MMMM</span> <span class="pre">d,</span> <span class="pre">yyyy</span> <span class="pre">&#64;</span> <span class="pre">HH:mm')</span></code> → 2019-06-29T12:34（現在のロケールが6番目の月名に 'June' を使用する言語の場合の結果。そうでない場合はエラーが発生します）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('29</span> <span class="pre">juin,</span> <span class="pre">2019</span> <span class="pre">&#64;</span> <span class="pre">12:34','d</span> <span class="pre">MMMM,</span> <span class="pre">yyyy</span> <span class="pre">&#64;</span> <span class="pre">HH:mm','fr')</span></code> → 2019-06-29T12:34</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-date-and-time-to-interval">
<span id="id16"></span><h3><a class="toc-backref" href="#id251" role="doc-backlink"><span class="section-number">13.2.7.18. </span>to_interval</a><a class="headerlink" href="#expression-function-date-and-time-to-interval" title="Link to this heading"></a></h3>
<p>文字列をインターバル型に変換します。日付に日、時間、月などを加減することに利用できます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_interval(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - インターバルを表す文字列。有効なフォーマットには、 {n} days 、 {n} hours 、 {n} months などが含まれます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_interval('1</span> <span class="pre">day</span> <span class="pre">2</span> <span class="pre">hours')</span></code> → 間隔: 1.08333 日</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_interval(</span> <span class="pre">'0.5</span> <span class="pre">hours'</span> <span class="pre">)</span></code> → 間隔: 30 分</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('2012-05-05</span> <span class="pre">12:00:00')</span> <span class="pre">-</span> <span class="pre">to_interval('1</span> <span class="pre">day</span> <span class="pre">2</span> <span class="pre">hours')</span></code> → 2012-05-04T10:00:00</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-date-and-time-to-time">
<span id="id17"></span><h3><a class="toc-backref" href="#id252" role="doc-backlink"><span class="section-number">13.2.7.19. </span>to_time</a><a class="headerlink" href="#expression-function-date-and-time-to-time" title="Link to this heading"></a></h3>
<p>文字列を時間型オブジェクトに変換します。オプションとして、文字列をパースするためのフォーマット文字列を指定できます。フォーマットに関するドキュメントは、 <a class="reference external" href="https://doc.qt.io/qt-5/qtime.html#fromString-1">QTime::fromString</a> を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_time(string, [format], [language])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 時刻を表す文字列</p></li>
<li><p><strong>format</strong> - 文字列を時間型に変換するために使用するフォーマット</p></li>
<li><p><strong>language</strong> - 時間型に変換する文字列の言語（2文字または3文字の小文字、 ISO 639 言語名コード）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_time('12:30:01')</span></code> → 12:30:01</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_time('12:34','HH:mm')</span></code> → 12:34:00</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_time('12:34','HH:mm','fr')</span></code> → 12:34:00</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="week">
<span id="expression-function-date-and-time-week"></span><h3><a class="toc-backref" href="#id253" role="doc-backlink"><span class="section-number">13.2.7.20. </span>week</a><a class="headerlink" href="#week" title="Link to this heading"></a></h3>
<p>日付型から週番号を取り出します。インターバル型からは週単位の長さを取り出します。</p>
<p><strong>日付型バージョン</strong></p>
<p>日付型または日付時刻型から週番号を取り出します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>week(date)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>date</strong> - 日付型または日付時刻型の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">week('2012-05-12')</span></code> → 19</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>インターバル型バージョン</strong></p>
<p>インターバル型の長さを週単位で計算します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>week(interval)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>interval</strong> - 月数を取得するインターバルの値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">week(to_interval('3</span> <span class="pre">weeks'))</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">week(age('2012-01-01','2010-01-01'))</span></code> → 104.285</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="year">
<span id="expression-function-date-and-time-year"></span><h3><a class="toc-backref" href="#id254" role="doc-backlink"><span class="section-number">13.2.7.21. </span>year</a><a class="headerlink" href="#year" title="Link to this heading"></a></h3>
<p>日付型から年を取り出します。インターバル型からは年数を取り出します。</p>
<p><strong>日付型バージョン</strong></p>
<p>日付型または日付時刻型から年の部分を取り出します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>year(date)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>date</strong> - 日付型または日付時刻型の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">year('2012-05-12')</span></code> → 2012</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>インターバル型バージョン</strong></p>
<p>インターバル型の長さを年単位で計算します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>year(interval)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>interval</strong> - 年数を取得するインターバルの値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">year(to_interval('3</span> <span class="pre">years'))</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">year(age('2012-01-01','2010-01-01'))</span></code> → 1.9986</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>例</strong></p>
<p>これらの関数に加えて、 <code class="docutils literal notranslate"><span class="pre">-</span></code> （マイナス）演算子を使用して日付型や日付時刻型または時刻型どうしの減算を行うと、インターバル型のデータを返します。</p>
<p><code class="docutils literal notranslate"><span class="pre">+</span></code> （プラス）演算子や <code class="docutils literal notranslate"><span class="pre">-</span></code> （マイナス）演算子を使用して、日付型や日付時刻型、時間型のデータにインターバル型のデータを加算または減算すると、日時時刻型のデータを返します。</p>
<ul>
<li><p>QGIS 3.0リリースまでの日数を取得します。</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">to_date</span><span class="p">(</span><span class="s1">&#39;2017-09-29&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">to_date</span><span class="p">(</span><span class="n">now</span><span class="p">())</span>
<span class="c1">-- Returns &lt;interval: 203 days&gt;</span>
</pre></div>
</div>
</li>
<li><p>リリース時刻も含めて計算します：</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;2017-09-29 12:00:00&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">now</span><span class="p">()</span>
<span class="c1">-- Returns &lt;interval: 202.49 days&gt;</span>
</pre></div>
</div>
</li>
<li><p>今から100日の日時を取得します。</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">now</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">to_interval</span><span class="p">(</span><span class="s1">&#39;100 days&#39;</span><span class="p">)</span>
<span class="c1">-- Returns &lt;datetime: 2017-06-18 01:00:00&gt;</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="fields-and-values">
<span id="fields-values"></span><h2><a class="toc-backref" href="#id116" role="doc-backlink"><span class="section-number">13.2.8. </span>フィールドと値</a><a class="headerlink" href="#fields-and-values" title="Link to this heading"></a></h2>
<p>アクティブレイヤのフィールドのリストと、特別な値を格納します。フィールドのリストには、データセットに格納されているもの、 <a class="reference internal" href="../working_with_vector/attribute_table.html#virtual-field"><span class="std std-ref">virtual</span></a> と <a class="reference internal" href="../working_with_vector/vector_properties.html#vector-auxiliary-storage"><span class="std std-ref">auxiliary</span></a> のもの、 <a class="reference internal" href="../working_with_vector/joins_relations.html#sec-joins"><span class="std std-ref">joins</span></a> のものが含まれます。</p>
<p>フィールド名をダブルクリックすると、そのフィールドが式に追加されます。式への追加は、フィールド名（ダブルクォート囲みを推奨）またはその <a class="reference internal" href="../working_with_vector/vector_properties.html#configure-field"><span class="std std-ref">別名</span></a> を直接入力することでも可能です。</p>
<p>式で使用したいフィールドの値を取得するには、適切なフィールドを選択し、表示されたウィジェットで <span class="guilabel">10個のサンプル</span> または <span class="guilabel">全ユニーク</span> のどちらかのボタンを押します。すると、フィールドの値が表示され、リストの上部にある <span class="guilabel">検索</span> ボックスを使用して結果をフィルタリングできます。サンプル値取得は、フィールド名の上で右クリックしてもアクセスできます。</p>
<p>式に値を追加するには、フィールド値リスト内の値をダブルクリックします。値が文字列型の場合はシングルクォートで囲まれますが、それ以外はクォートで囲みません。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id19">
<ul class="simple">
<li><p><a class="reference internal" href="#null" id="id255">NULL</a></p></li>
</ul>
</nav>
</div>
<section id="null">
<span id="expression-function-fields-and-values-null"></span><h3><a class="toc-backref" href="#id255" role="doc-backlink"><span class="section-number">13.2.8.1. </span>NULL</a><a class="headerlink" href="#null" title="Link to this heading"></a></h3>
<p>NULL に等しい値です。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>NULL</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NULL</span></code> → NULL値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>NULL値かどうかをテストする場合には、 <em>IS NULL</em> 式または <em>IS NOT NULL</em> 式を使用してください。</p>
</div>
</section>
</section>
<section id="files-and-paths-functions">
<h2><a class="toc-backref" href="#id117" role="doc-backlink"><span class="section-number">13.2.9. </span>ファイルとパスの関数</a><a class="headerlink" href="#files-and-paths-functions" title="Link to this heading"></a></h2>
<p>このグループには、ファイルとパス名を操作する関数が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id20">
<ul class="simple">
<li><p><a class="reference internal" href="#base-file-name" id="id256">base_file_name</a></p></li>
<li><p><a class="reference internal" href="#exif" id="id257">exif</a></p></li>
<li><p><a class="reference internal" href="#file-exists" id="id258">file_exists</a></p></li>
<li><p><a class="reference internal" href="#file-name" id="id259">file_name</a></p></li>
<li><p><a class="reference internal" href="#file-path" id="id260">file_path</a></p></li>
<li><p><a class="reference internal" href="#file-size" id="id261">file_size</a></p></li>
<li><p><a class="reference internal" href="#file-suffix" id="id262">file_suffix</a></p></li>
<li><p><a class="reference internal" href="#is-directory" id="id263">is_directory</a></p></li>
<li><p><a class="reference internal" href="#is-file" id="id264">is_file</a></p></li>
</ul>
</nav>
</div>
<section id="base-file-name">
<span id="expression-function-files-and-paths-base-file-name"></span><h3><a class="toc-backref" href="#id256" role="doc-backlink"><span class="section-number">13.2.9.1. </span>base_file_name</a><a class="headerlink" href="#base-file-name" title="Link to this heading"></a></h3>
<p>ディレクトリや拡張子を取り除いた、ファイルのベース名を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>base_file_name(path)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - ファイルパス又はマップレイヤの値。マップレイヤの値が指定された場合は、そのレイヤのファイル元が使われる。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">base_file_name('/home/qgis/data/country_boundaries.shp')</span></code> → 'country_boundaries'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="exif">
<span id="expression-function-files-and-paths-exif"></span><h3><a class="toc-backref" href="#id257" role="doc-backlink"><span class="section-number">13.2.9.2. </span>exif</a><a class="headerlink" href="#exif" title="Link to this heading"></a></h3>
<p>画像ファイルからexifタグの値を取得します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>exif(path, [tag])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - 画像ファイルのパスまたはマップレイヤの値。マップレイヤの値が指定された場合、そのレイヤーのファイルソースが使用されます。</p></li>
<li><p><strong>tag</strong> - 取得したいタグ。指定しない場合には、全てのexifタグの値がマップ型で返ります</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">exif('/my/photo.jpg','Exif.Image.Orientation')</span></code> → 0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="file-exists">
<span id="expression-function-files-and-paths-file-exists"></span><h3><a class="toc-backref" href="#id258" role="doc-backlink"><span class="section-number">13.2.9.3. </span>file_exists</a><a class="headerlink" href="#file-exists" title="Link to this heading"></a></h3>
<p>ファイルパスが存在する場合はTRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>file_exists(path)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - ファイルパス又はマップレイヤの値。マップレイヤの値が指定された場合は、そのレイヤのファイル元が使われる。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file_exists('/home/qgis/data/country_boundaries.shp')</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="file-name">
<span id="expression-function-files-and-paths-file-name"></span><h3><a class="toc-backref" href="#id259" role="doc-backlink"><span class="section-number">13.2.9.4. </span>file_name</a><a class="headerlink" href="#file-name" title="Link to this heading"></a></h3>
<p>（拡張子付きの）ファイル名を返します。ディレクトリは含みません。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>file_name(path)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - ファイルパス又はマップレイヤの値。マップレイヤの値が指定された場合は、そのレイヤのファイル元が使われる。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file_name('/home/qgis/data/country_boundaries.shp')</span></code> → 'country_boundaries.shp'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="file-path">
<span id="expression-function-files-and-paths-file-path"></span><h3><a class="toc-backref" href="#id260" role="doc-backlink"><span class="section-number">13.2.9.5. </span>file_path</a><a class="headerlink" href="#file-path" title="Link to this heading"></a></h3>
<p>ファイルパスのディレクトリ部分を返します。戻り値にはファイル名は含まれません。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>file_path(path)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - ファイルパス又はマップレイヤの値。マップレイヤの値が指定された場合は、そのレイヤのファイル元が使われる。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file_path('/home/qgis/data/country_boundaries.shp')</span></code> → '/home/qgis/data'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="file-size">
<span id="expression-function-files-and-paths-file-size"></span><h3><a class="toc-backref" href="#id261" role="doc-backlink"><span class="section-number">13.2.9.6. </span>file_size</a><a class="headerlink" href="#file-size" title="Link to this heading"></a></h3>
<p>ファイルのサイズを（バイト単位で）返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>file_size(path)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - ファイルパス又はマップレイヤの値。マップレイヤの値が指定された場合は、そのレイヤのファイル元が使われる。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file_size('/home/qgis/data/country_boundaries.geojson')</span></code> → 5674</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="file-suffix">
<span id="expression-function-files-and-paths-file-suffix"></span><h3><a class="toc-backref" href="#id262" role="doc-backlink"><span class="section-number">13.2.9.7. </span>file_suffix</a><a class="headerlink" href="#file-suffix" title="Link to this heading"></a></h3>
<p>ファイルパスから拡張子（末尾部分）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>file_suffix(path)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - ファイルパス又はマップレイヤの値。マップレイヤの値が指定された場合は、そのレイヤのファイル元が使われる。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file_suffix('/home/qgis/data/country_boundaries.shp')</span></code> → 'shp'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="is-directory">
<span id="expression-function-files-and-paths-is-directory"></span><h3><a class="toc-backref" href="#id263" role="doc-backlink"><span class="section-number">13.2.9.8. </span>is_directory</a><a class="headerlink" href="#is-directory" title="Link to this heading"></a></h3>
<p>パスがディレクトリに対応する場合、TRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_directory(path)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - ファイルパス又はマップレイヤの値。マップレイヤの値が指定された場合は、そのレイヤのファイル元が使われる。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_directory('/home/qgis/data/country_boundaries.shp')</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_directory('/home/qgis/data/')</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="is-file">
<span id="expression-function-files-and-paths-is-file"></span><h3><a class="toc-backref" href="#id264" role="doc-backlink"><span class="section-number">13.2.9.9. </span>is_file</a><a class="headerlink" href="#is-file" title="Link to this heading"></a></h3>
<p>パスがファイルに対応する場合、TRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_file(path)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - ファイルパス又はマップレイヤの値。マップレイヤの値が指定された場合は、そのレイヤのファイル元が使われる。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_file('/home/qgis/data/country_boundaries.shp')</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_file('/home/qgis/data/')</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="form-functions">
<h2><a class="toc-backref" href="#id118" role="doc-backlink"><span class="section-number">13.2.10. </span>フォーム関数</a><a class="headerlink" href="#form-functions" title="Link to this heading"></a></h2>
<p>このグループには、属性フォームに関連した式ダイアログのみで利用できる関数が含まれます。例えば、 <a class="reference internal" href="../working_with_vector/vector_properties.html#vector-attributes-menu"><span class="std std-ref">フィールドのウィジェット</span></a> の設定などで利用できます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id21">
<ul class="simple">
<li><p><a class="reference internal" href="#current-parent-value" id="id265">current_parent_value</a></p></li>
<li><p><a class="reference internal" href="#current-value" id="id266">current_value</a></p></li>
</ul>
</nav>
</div>
<section id="current-parent-value">
<span id="expression-function-form-current-parent-value"></span><h3><a class="toc-backref" href="#id265" role="doc-backlink"><span class="section-number">13.2.10.1. </span>current_parent_value</a><a class="headerlink" href="#current-parent-value" title="Link to this heading"></a></h3>
<p>この関数は埋め込みフォームでのみ使用可能で、現在編集中の親フォームの未保存の属性値を返します。これは、親レイヤで編集中または親レイヤに追加前の親地物の実際の値とは異なります。「値のリレーション」ウィジェットのフィルタ式で使用する場合には、フォームが埋め込みフォーム状態で使われない場合にもレイヤから実際の親地物の値を取得できるよう、 'coalesce()' 関数でラップする必要があります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>current_parent_value(field_name)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>field_name</strong> - 現在の親フォームのフィールド名</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">current_parent_value(</span> <span class="pre">'FIELD_NAME'</span> <span class="pre">)</span></code> → 親フォームの 'FIELD_NAME' フィールドの現在の値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="current-value">
<span id="expression-function-form-current-value"></span><h3><a class="toc-backref" href="#id266" role="doc-backlink"><span class="section-number">13.2.10.2. </span>current_value</a><a class="headerlink" href="#current-value" title="Link to this heading"></a></h3>
<p>現在編集中のフォームまたはテーブル行で、現在のフィールドの未保存の値を返します。これは、現在編集中の地物またはまだレイヤに追加されていない地物の実際の属性値とは異なります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>current_value(field_name)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>field_name</strong> - 現在のフォームまたはテーブル行のフィールド名</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">current_value(</span> <span class="pre">'FIELD_NAME'</span> <span class="pre">)</span></code> → 'FIELD_NAME' フィールドの現在の値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="fuzzy-matching-functions">
<h2><a class="toc-backref" href="#id119" role="doc-backlink"><span class="section-number">13.2.11. </span>ファジー・マッチング関数</a><a class="headerlink" href="#fuzzy-matching-functions" title="Link to this heading"></a></h2>
<p>このグループには、値間でファジィ比較をするための関数が含まれています。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id22">
<ul class="simple">
<li><p><a class="reference internal" href="#hamming-distance" id="id267">hamming_distance</a></p></li>
<li><p><a class="reference internal" href="#levenshtein" id="id268">levenshtein</a></p></li>
<li><p><a class="reference internal" href="#longest-common-substring" id="id269">longest_common_substring</a></p></li>
<li><p><a class="reference internal" href="#soundex" id="id270">soundex</a></p></li>
</ul>
</nav>
</div>
<section id="hamming-distance">
<span id="expression-function-fuzzy-matching-hamming-distance"></span><h3><a class="toc-backref" href="#id267" role="doc-backlink"><span class="section-number">13.2.11.1. </span>hamming_distance</a><a class="headerlink" href="#hamming-distance" title="Link to this heading"></a></h3>
<p>2つの文字列間のハミング距離を返します。この距離は、入力文字列の対応する位置にある異なった文字の数です。入力文字列は同じ長さでなければならず、大文字と小文字を区別して比較されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>hamming_distance(string1, string2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string1</strong> - 文字列</p></li>
<li><p><strong>string2</strong> - 文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hamming_distance('abc','xec')</span></code> → 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hamming_distance('abc','ABc')</span></code> → 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hamming_distance(upper('abc'),upper('ABC'))</span></code> → 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hamming_distance('abc','abcd')</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="levenshtein">
<span id="expression-function-fuzzy-matching-levenshtein"></span><h3><a class="toc-backref" href="#id268" role="doc-backlink"><span class="section-number">13.2.11.2. </span>levenshtein</a><a class="headerlink" href="#levenshtein" title="Link to this heading"></a></h3>
<p>2つの文字列間のレーベンシュタイン編集距離を返します。これは、ある文字列を別の文字列に変更するために必要な文字編集（挿入、削除または置換）の最小数に相当します。</p>
<p>レーベンシュタイン距離は、2つの文字列間の類似性の尺度です。距離が小さいほど文字列はより似ており、距離が長いほど文字列が異なっていることを示します。距離は大文字と小文字を区別します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>levenshtein(string1, string2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string1</strong> - 文字列</p></li>
<li><p><strong>string2</strong> - 文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">levenshtein('kittens','mitten')</span></code> → 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">levenshtein('Kitten','kitten')</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">levenshtein(upper('Kitten'),upper('kitten'))</span></code> → 0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="longest-common-substring">
<span id="expression-function-fuzzy-matching-longest-common-substring"></span><h3><a class="toc-backref" href="#id269" role="doc-backlink"><span class="section-number">13.2.11.3. </span>longest_common_substring</a><a class="headerlink" href="#longest-common-substring" title="Link to this heading"></a></h3>
<p>２つの文字列間の最も長い共通部分を返します。例えば、 &quot;ABABC&quot; と &quot;BABCA&quot; の最も長い共通部分は &quot;BABC&quot; です。部分文字列は大文字と小文字を区別します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>longest_common_substring(string1, string2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string1</strong> - 文字列</p></li>
<li><p><strong>string2</strong> - 文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">longest_common_substring('ABABC','BABCA')</span></code> → 'BABC'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">longest_common_substring('abcDeF','abcdef')</span></code> → 'abc'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">longest_common_substring(upper('abcDeF'),upper('abcdex'))</span></code> → 'ABCDE'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="soundex">
<span id="expression-function-fuzzy-matching-soundex"></span><h3><a class="toc-backref" href="#id270" role="doc-backlink"><span class="section-number">13.2.11.4. </span>soundex</a><a class="headerlink" href="#soundex" title="Link to this heading"></a></h3>
<p>文字列のSoundex表現を返します。Soundexは音声マッチングアルゴリズムで、類似した音の文字列は同じSoundexコードで表現されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>soundex(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">soundex('robert')</span></code> → 'R163'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">soundex('rupert')</span></code> → 'R163'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">soundex('rubin')</span></code> → 'R150'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="general-functions">
<h2><a class="toc-backref" href="#id120" role="doc-backlink"><span class="section-number">13.2.12. </span>一般関数</a><a class="headerlink" href="#general-functions" title="Link to this heading"></a></h2>
<p>このグループには、さまざまな汎用関数が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id23">
<ul class="simple">
<li><p><a class="reference internal" href="#env" id="id271">env</a></p></li>
<li><p><a class="reference internal" href="#eval" id="id272">eval</a></p></li>
<li><p><a class="reference internal" href="#eval-template" id="id273">eval_template</a></p></li>
<li><p><a class="reference internal" href="#is-layer-visible" id="id274">is_layer_visible</a></p></li>
<li><p><a class="reference internal" href="#mime-type" id="id275">mime_type</a></p></li>
<li><p><a class="reference internal" href="#var" id="id276">var</a></p></li>
<li><p><a class="reference internal" href="#with-variable" id="id277">with_variable</a></p></li>
</ul>
</nav>
</div>
<section id="env">
<span id="expression-function-general-env"></span><h3><a class="toc-backref" href="#id271" role="doc-backlink"><span class="section-number">13.2.12.1. </span>env</a><a class="headerlink" href="#env" title="Link to this heading"></a></h3>
<p>環境変数を取得し、その内容を文字列として返します。変数が見つからない場合、NULLを返します。この関数は、ドライブ文字やパスプレフィックスなどのシステム固有の設定を取得するために有用です。環境変数の定義はオペレーティングシステムによって異なりますので、システム管理者に確認するかオペレーティングシステムのマニュアルを参照して、環境変数の設定方法を確認してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>env(name)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>name</strong> - 値を取得したい環境変数の名前</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">env(</span> <span class="pre">'LANG'</span> <span class="pre">)</span></code> → 'en_US.UTF-8'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env(</span> <span class="pre">'MY_OWN_PREFIX_VAR'</span> <span class="pre">)</span></code> → 'Z:'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env(</span> <span class="pre">'I_DO_NOT_EXIST'</span> <span class="pre">)</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="eval">
<span id="expression-function-general-eval"></span><h3><a class="toc-backref" href="#id272" role="doc-backlink"><span class="section-number">13.2.12.2. </span>eval</a><a class="headerlink" href="#eval" title="Link to this heading"></a></h3>
<p>文字列で渡された式を評価します。これを使えば、コンテキスト変数またはフィールドとして渡されたパラメータを動的に展開できます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>eval(expression)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>expression</strong> - 式を表す文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">eval('\'nice\'')</span></code> → 'nice'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eval(&#64;expression_var)</span></code> → [&#64;expression_var を評価した結果]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="eval-template">
<span id="expression-function-general-eval-template"></span><h3><a class="toc-backref" href="#id273" role="doc-backlink"><span class="section-number">13.2.12.3. </span>eval_template</a><a class="headerlink" href="#eval-template" title="Link to this heading"></a></h3>
<p>文字列で渡されたテンプレートを評価します。これを使えば、コンテキスト変数またはフィールドとして渡されたパラメータを動的に展開できます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>eval_template(template)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>template</strong> - テンプレート文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">eval_template('QGIS</span> <span class="pre">[%</span> <span class="pre">upper(\'rocks\')</span> <span class="pre">%]')</span></code> → QGIS ROCKS</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="is-layer-visible">
<span id="expression-function-general-is-layer-visible"></span><h3><a class="toc-backref" href="#id274" role="doc-backlink"><span class="section-number">13.2.12.4. </span>is_layer_visible</a><a class="headerlink" href="#is-layer-visible" title="Link to this heading"></a></h3>
<p>指定されたレイヤが表示されているならTRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_layer_visible(layer)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - レイヤ名かレイヤIDのどちらかを表す文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_layer_visible('baseraster')</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="mime-type">
<span id="expression-function-general-mime-type"></span><h3><a class="toc-backref" href="#id275" role="doc-backlink"><span class="section-number">13.2.12.5. </span>mime_type</a><a class="headerlink" href="#mime-type" title="Link to this heading"></a></h3>
<p>バイナリデータのMIMEタイプを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>mime_type(bytes)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>bytes</strong> - バイナリデータ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mime_type('&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;')</span></code> → text/html</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mime_type(from_base64('R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAIAOw=='))</span></code> → image/gif</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="var">
<span id="expression-function-general-var"></span><h3><a class="toc-backref" href="#id276" role="doc-backlink"><span class="section-number">13.2.12.6. </span>var</a><a class="headerlink" href="#var" title="Link to this heading"></a></h3>
<p>指定された変数に格納された値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>var(name)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>name</strong> - 変数名</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">var('qgis_version')</span></code> → '2.12'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目：デフォルトの <a class="reference internal" href="#expression-variables"><span class="std std-ref">変数</span></a> のリスト</p>
</section>
<section id="with-variable">
<span id="expression-function-general-with-variable"></span><h3><a class="toc-backref" href="#id277" role="doc-backlink"><span class="section-number">13.2.12.7. </span>with_variable</a><a class="headerlink" href="#with-variable" title="Link to this heading"></a></h3>
<p>この関数は、第3引数の式で使われる変数を設定します。同じ計算結果を別の場所で繰り返し使用する必要があるような、複雑な式を構成する際に使われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>with_variable(name, value, expression)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>name</strong> - 設定する変数の名前</p></li>
<li><p><strong>value</strong> - 設定する値</p></li>
<li><p><strong>expression</strong> - 変数が使用できる式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">with_variable('my_sum',</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">+</span> <span class="pre">3,</span> <span class="pre">&#64;my_sum</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">+</span> <span class="pre">&#64;my_sum</span> <span class="pre">*</span> <span class="pre">5)</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="geometry-functions">
<span id="id24"></span><h2><a class="toc-backref" href="#id121" role="doc-backlink"><span class="section-number">13.2.13. </span>ジオメトリ関数</a><a class="headerlink" href="#geometry-functions" title="Link to this heading"></a></h2>
<p>このグループは、ジオメトリオブジェクトを操作する関数（例えば buffer、 transform、 $area など）が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id25">
<ul class="simple">
<li><p><a class="reference internal" href="#affine-transform" id="id278">affine_transform</a></p></li>
<li><p><a class="reference internal" href="#angle-at-vertex" id="id279">angle_at_vertex</a></p></li>
<li><p><a class="reference internal" href="#apply-dash-pattern" id="id280">apply_dash_pattern</a></p></li>
<li><p><a class="reference internal" href="#area" id="id281">$area</a></p></li>
<li><p><a class="reference internal" href="#id26" id="id282">area</a></p></li>
<li><p><a class="reference internal" href="#azimuth" id="id283">azimuth</a></p></li>
<li><p><a class="reference internal" href="#bearing" id="id284">bearing</a></p></li>
<li><p><a class="reference internal" href="#boundary" id="id285">boundary</a></p></li>
<li><p><a class="reference internal" href="#bounds" id="id286">bounds</a></p></li>
<li><p><a class="reference internal" href="#bounds-height" id="id287">bounds_height</a></p></li>
<li><p><a class="reference internal" href="#bounds-width" id="id288">bounds_width</a></p></li>
<li><p><a class="reference internal" href="#buffer" id="id289">buffer</a></p></li>
<li><p><a class="reference internal" href="#buffer-by-m" id="id290">buffer_by_m</a></p></li>
<li><p><a class="reference internal" href="#centroid" id="id291">centroid</a></p></li>
<li><p><a class="reference internal" href="#close-line" id="id292">close_line</a></p></li>
<li><p><a class="reference internal" href="#closest-point" id="id293">closest_point</a></p></li>
<li><p><a class="reference internal" href="#collect-geometries" id="id294">collect_geometries</a></p></li>
<li><p><a class="reference internal" href="#combine" id="id295">combine</a></p></li>
<li><p><a class="reference internal" href="#concave-hull" id="id296">concave_hull</a></p></li>
<li><p><a class="reference internal" href="#contains" id="id297">contains</a></p></li>
<li><p><a class="reference internal" href="#convex-hull" id="id298">convex_hull</a></p></li>
<li><p><a class="reference internal" href="#crosses" id="id299">crosses</a></p></li>
<li><p><a class="reference internal" href="#densify-by-count" id="id300">densify_by_count</a></p></li>
<li><p><a class="reference internal" href="#densify-by-distance" id="id301">densify_by_distance</a></p></li>
<li><p><a class="reference internal" href="#difference" id="id302">difference</a></p></li>
<li><p><a class="reference internal" href="#disjoint" id="id303">disjoint</a></p></li>
<li><p><a class="reference internal" href="#distance" id="id304">distance</a></p></li>
<li><p><a class="reference internal" href="#distance-to-vertex" id="id305">distance_to_vertex</a></p></li>
<li><p><a class="reference internal" href="#end-point" id="id306">end_point</a></p></li>
<li><p><a class="reference internal" href="#exif-geotag" id="id307">exif_geotag</a></p></li>
<li><p><a class="reference internal" href="#extend" id="id308">extend</a></p></li>
<li><p><a class="reference internal" href="#exterior-ring" id="id309">exterior_ring</a></p></li>
<li><p><a class="reference internal" href="#extrude" id="id310">extrude</a></p></li>
<li><p><a class="reference internal" href="#flip-coordinates" id="id311">flip_coordinates</a></p></li>
<li><p><a class="reference internal" href="#force-polygon-ccw" id="id312">force_polygon_ccw</a></p></li>
<li><p><a class="reference internal" href="#force-polygon-cw" id="id313">force_polygon_cw</a></p></li>
<li><p><a class="reference internal" href="#force-rhr" id="id314">force_rhr</a></p></li>
<li><p><a class="reference internal" href="#geom-from-gml" id="id315">geom_from_gml</a></p></li>
<li><p><a class="reference internal" href="#geom-from-wkb" id="id316">geom_from_wkb</a></p></li>
<li><p><a class="reference internal" href="#geom-from-wkt" id="id317">geom_from_wkt</a></p></li>
<li><p><a class="reference internal" href="#geom-to-wkb" id="id318">geom_to_wkb</a></p></li>
<li><p><a class="reference internal" href="#geom-to-wkt" id="id319">geom_to_wkt</a></p></li>
<li><p><a class="reference internal" href="#geometry" id="id320">$geometry</a></p></li>
<li><p><a class="reference internal" href="#id28" id="id321">geometry</a></p></li>
<li><p><a class="reference internal" href="#geometry-n" id="id322">geometry_n</a></p></li>
<li><p><a class="reference internal" href="#geometry-type" id="id323">geometry_type</a></p></li>
<li><p><a class="reference internal" href="#hausdorff-distance" id="id324">hausdorff_distance</a></p></li>
<li><p><a class="reference internal" href="#inclination" id="id325">inclination</a></p></li>
<li><p><a class="reference internal" href="#interior-ring-n" id="id326">interior_ring_n</a></p></li>
<li><p><a class="reference internal" href="#intersection" id="id327">intersection</a></p></li>
<li><p><a class="reference internal" href="#intersects" id="id328">intersects</a></p></li>
<li><p><a class="reference internal" href="#intersects-bbox" id="id329">intersects_bbox</a></p></li>
<li><p><a class="reference internal" href="#is-closed" id="id330">is_closed</a></p></li>
<li><p><a class="reference internal" href="#is-empty" id="id331">is_empty</a></p></li>
<li><p><a class="reference internal" href="#is-empty-or-null" id="id332">is_empty_or_null</a></p></li>
<li><p><a class="reference internal" href="#is-multipart" id="id333">is_multipart</a></p></li>
<li><p><a class="reference internal" href="#is-valid" id="id334">is_valid</a></p></li>
<li><p><a class="reference internal" href="#length" id="id335">$length</a></p></li>
<li><p><a class="reference internal" href="#id30" id="id336">length</a></p></li>
<li><p><a class="reference internal" href="#length3d" id="id337">length3D</a></p></li>
<li><p><a class="reference internal" href="#line-interpolate-angle" id="id338">line_interpolate_angle</a></p></li>
<li><p><a class="reference internal" href="#line-interpolate-point" id="id339">line_interpolate_point</a></p></li>
<li><p><a class="reference internal" href="#line-locate-point" id="id340">line_locate_point</a></p></li>
<li><p><a class="reference internal" href="#line-merge" id="id341">line_merge</a></p></li>
<li><p><a class="reference internal" href="#line-substring" id="id342">line_substring</a></p></li>
<li><p><a class="reference internal" href="#m" id="id343">m</a></p></li>
<li><p><a class="reference internal" href="#m-at" id="id344">m_at</a></p></li>
<li><p><a class="reference internal" href="#m-max" id="id345">m_max</a></p></li>
<li><p><a class="reference internal" href="#m-min" id="id346">m_min</a></p></li>
<li><p><a class="reference internal" href="#main-angle" id="id347">main_angle</a></p></li>
<li><p><a class="reference internal" href="#make-circle" id="id348">make_circle</a></p></li>
<li><p><a class="reference internal" href="#make-ellipse" id="id349">make_ellipse</a></p></li>
<li><p><a class="reference internal" href="#make-line" id="id350">make_line</a></p></li>
<li><p><a class="reference internal" href="#make-point" id="id351">make_point</a></p></li>
<li><p><a class="reference internal" href="#make-point-m" id="id352">make_point_m</a></p></li>
<li><p><a class="reference internal" href="#make-polygon" id="id353">make_polygon</a></p></li>
<li><p><a class="reference internal" href="#make-rectangle-3points" id="id354">make_rectangle_3points</a></p></li>
<li><p><a class="reference internal" href="#make-regular-polygon" id="id355">make_regular_polygon</a></p></li>
<li><p><a class="reference internal" href="#make-square" id="id356">make_square</a></p></li>
<li><p><a class="reference internal" href="#make-triangle" id="id357">make_triangle</a></p></li>
<li><p><a class="reference internal" href="#make-valid" id="id358">make_valid</a></p></li>
<li><p><a class="reference internal" href="#minimal-circle" id="id359">minimal_circle</a></p></li>
<li><p><a class="reference internal" href="#nodes-to-points" id="id360">nodes_to_points</a></p></li>
<li><p><a class="reference internal" href="#num-geometries" id="id361">num_geometries</a></p></li>
<li><p><a class="reference internal" href="#num-interior-rings" id="id362">num_interior_rings</a></p></li>
<li><p><a class="reference internal" href="#num-points" id="id363">num_points</a></p></li>
<li><p><a class="reference internal" href="#num-rings" id="id364">num_rings</a></p></li>
<li><p><a class="reference internal" href="#offset-curve" id="id365">offset_curve</a></p></li>
<li><p><a class="reference internal" href="#order-parts" id="id366">order_parts</a></p></li>
<li><p><a class="reference internal" href="#oriented-bbox" id="id367">oriented_bbox</a></p></li>
<li><p><a class="reference internal" href="#overlaps" id="id368">overlaps</a></p></li>
<li><p><a class="reference internal" href="#overlay-contains" id="id369">overlay_contains</a></p></li>
<li><p><a class="reference internal" href="#overlay-crosses" id="id370">overlay_crosses</a></p></li>
<li><p><a class="reference internal" href="#overlay-disjoint" id="id371">overlay_disjoint</a></p></li>
<li><p><a class="reference internal" href="#overlay-equals" id="id372">overlay_equals</a></p></li>
<li><p><a class="reference internal" href="#overlay-intersects" id="id373">overlay_intersects</a></p></li>
<li><p><a class="reference internal" href="#overlay-nearest" id="id374">overlay_nearest</a></p></li>
<li><p><a class="reference internal" href="#overlay-touches" id="id375">overlay_touches</a></p></li>
<li><p><a class="reference internal" href="#overlay-within" id="id376">overlay_within</a></p></li>
<li><p><a class="reference internal" href="#perimeter" id="id377">$perimeter</a></p></li>
<li><p><a class="reference internal" href="#id32" id="id378">perimeter</a></p></li>
<li><p><a class="reference internal" href="#point-n" id="id379">point_n</a></p></li>
<li><p><a class="reference internal" href="#point-on-surface" id="id380">point_on_surface</a></p></li>
<li><p><a class="reference internal" href="#pole-of-inaccessibility" id="id381">pole_of_inaccessibility</a></p></li>
<li><p><a class="reference internal" href="#project" id="id382">project</a></p></li>
<li><p><a class="reference internal" href="#relate" id="id383">relate</a></p></li>
<li><p><a class="reference internal" href="#reverse" id="id384">reverse</a></p></li>
<li><p><a class="reference internal" href="#rotate" id="id385">rotate</a></p></li>
<li><p><a class="reference internal" href="#roundness" id="id386">roundness</a></p></li>
<li><p><a class="reference internal" href="#scale" id="id387">scale</a></p></li>
<li><p><a class="reference internal" href="#segments-to-lines" id="id388">segments_to_lines</a></p></li>
<li><p><a class="reference internal" href="#shared-paths" id="id389">shared_paths</a></p></li>
<li><p><a class="reference internal" href="#shortest-line" id="id390">shortest_line</a></p></li>
<li><p><a class="reference internal" href="#simplify" id="id391">simplify</a></p></li>
<li><p><a class="reference internal" href="#simplify-vw" id="id392">simplify_vw</a></p></li>
<li><p><a class="reference internal" href="#single-sided-buffer" id="id393">single_sided_buffer</a></p></li>
<li><p><a class="reference internal" href="#sinuosity" id="id394">sinuosity</a></p></li>
<li><p><a class="reference internal" href="#smooth" id="id395">smooth</a></p></li>
<li><p><a class="reference internal" href="#square-wave" id="id396">square_wave</a></p></li>
<li><p><a class="reference internal" href="#square-wave-randomized" id="id397">square_wave_randomized</a></p></li>
<li><p><a class="reference internal" href="#start-point" id="id398">start_point</a></p></li>
<li><p><a class="reference internal" href="#straight-distance-2d" id="id399">straight_distance_2d</a></p></li>
<li><p><a class="reference internal" href="#sym-difference" id="id400">sym_difference</a></p></li>
<li><p><a class="reference internal" href="#tapered-buffer" id="id401">tapered_buffer</a></p></li>
<li><p><a class="reference internal" href="#touches" id="id402">touches</a></p></li>
<li><p><a class="reference internal" href="#transform" id="id403">transform</a></p></li>
<li><p><a class="reference internal" href="#translate" id="id404">translate</a></p></li>
<li><p><a class="reference internal" href="#triangular-wave" id="id405">triangular_wave</a></p></li>
<li><p><a class="reference internal" href="#triangular-wave-randomized" id="id406">triangular_wave_randomized</a></p></li>
<li><p><a class="reference internal" href="#union" id="id407">union</a></p></li>
<li><p><a class="reference internal" href="#wave" id="id408">wave</a></p></li>
<li><p><a class="reference internal" href="#wave-randomized" id="id409">wave_randomized</a></p></li>
<li><p><a class="reference internal" href="#wedge-buffer" id="id410">wedge_buffer</a></p></li>
<li><p><a class="reference internal" href="#within" id="id411">within</a></p></li>
<li><p><a class="reference internal" href="#x" id="id412">$x</a></p></li>
<li><p><a class="reference internal" href="#id34" id="id413">x</a></p></li>
<li><p><a class="reference internal" href="#x-at" id="id414">$x_at</a></p></li>
<li><p><a class="reference internal" href="#id36" id="id415">x_at</a></p></li>
<li><p><a class="reference internal" href="#x-max" id="id416">x_max</a></p></li>
<li><p><a class="reference internal" href="#x-min" id="id417">x_min</a></p></li>
<li><p><a class="reference internal" href="#y" id="id418">$y</a></p></li>
<li><p><a class="reference internal" href="#id38" id="id419">y</a></p></li>
<li><p><a class="reference internal" href="#y-at" id="id420">$y_at</a></p></li>
<li><p><a class="reference internal" href="#id40" id="id421">y_at</a></p></li>
<li><p><a class="reference internal" href="#y-max" id="id422">y_max</a></p></li>
<li><p><a class="reference internal" href="#y-min" id="id423">y_min</a></p></li>
<li><p><a class="reference internal" href="#z" id="id424">$z</a></p></li>
<li><p><a class="reference internal" href="#id42" id="id425">z</a></p></li>
<li><p><a class="reference internal" href="#z-at" id="id426">z_at</a></p></li>
<li><p><a class="reference internal" href="#z-max" id="id427">z_max</a></p></li>
<li><p><a class="reference internal" href="#z-min" id="id428">z_min</a></p></li>
</ul>
</nav>
</div>
<section id="affine-transform">
<span id="expression-function-geometrygroup-affine-transform"></span><h3><a class="toc-backref" href="#id278" role="doc-backlink"><span class="section-number">13.2.13.1. </span>affine_transform</a><a class="headerlink" href="#affine-transform" title="Link to this heading"></a></h3>
<p>アフィン変換後のジオメトリを返します。計算はこのジオメトリの空間参照系で行われます。変換操作は、スケーリング、回転、平行移動の順で行われます。Z座標やM値のオフセットが指定されているものの、ジオメトリの座標がZ座標やM値を持たない場合には、これらがジオメトリ座標に追加されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>affine_transform(geometry, delta_x, delta_y, rotation_z, scale_x, scale_y, [delta_z=0], [delta_m=0], [scale_z=1], [scale_m=1])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>delta_x</strong> - x軸方向移動量</p></li>
<li><p><strong>delta_y</strong> - y軸方向移動量</p></li>
<li><p><strong>rotation_z</strong> - z軸まわりの回転量（度単位、反時計回り）</p></li>
<li><p><strong>scale_x</strong> - x軸方向スケーリング係数</p></li>
<li><p><strong>scale_y</strong> - y軸方向スケーリング係数</p></li>
<li><p><strong>delta_z</strong> - z軸方向移動量</p></li>
<li><p><strong>delta_m</strong> - m値の増分</p></li>
<li><p><strong>scale_z</strong> - z軸方向スケーリング係数</p></li>
<li><p><strong>scale_m</strong> - m値のスケーリング係数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(affine_transform(geom_from_wkt('LINESTRING(1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2)'),</span> <span class="pre">2,</span> <span class="pre">2,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">1))</span></code> → 'LineString (3 3, 4 4)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(affine_transform(geom_from_wkt('POLYGON((0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">3,</span> <span class="pre">2</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">0))'),</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">-90,</span> <span class="pre">1,</span> <span class="pre">2))</span></code> → 'Polygon ((0 0, 6 0, 4 -2, 0 0))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(affine_transform(geom_from_wkt('POINT(3</span> <span class="pre">1)'),</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">5,</span> <span class="pre">0))</span></code> → 'PointZ (3 1 5)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id82">
<a class="reference internal image-reference" href="../../../_images/affinetransform.png"><img alt="../../../_images/affinetransform.png" src="../../../_images/affinetransform.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.4 </span><span class="caption-text">アフィン変換（平行移動）する前（左）と後（右）のベクタポイントレイヤ（緑色の点）。</span><a class="headerlink" href="#id82" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="angle-at-vertex">
<span id="expression-function-geometrygroup-angle-at-vertex"></span><h3><a class="toc-backref" href="#id279" role="doc-backlink"><span class="section-number">13.2.13.2. </span>angle_at_vertex</a><a class="headerlink" href="#angle-at-vertex" title="Link to this heading"></a></h3>
<p>ラインストリングジオメトリ上の指定された頂点について、ジオメトリの二分角（平均角度）を返します。角度は度単位で、北から時計回りで測ります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>angle_at_vertex(geometry, vertex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインストリングジオメトリ</p></li>
<li><p><strong>vertex</strong> - 頂点のインデックスで、最初の点は0から数える。負の値の場合には、全体の頂点数からその絶対値を引いたインデックスの頂点が選択される</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">angle_at_vertex(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">10)'),vertex:=1)</span></code> → 45.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="apply-dash-pattern">
<span id="expression-function-geometrygroup-apply-dash-pattern"></span><h3><a class="toc-backref" href="#id280" role="doc-backlink"><span class="section-number">13.2.13.3. </span>apply_dash_pattern</a><a class="headerlink" href="#apply-dash-pattern" title="Link to this heading"></a></h3>
<p>ジオメトリにダッシュパターンを適用し、入力ジオメトリを指定されたパターンで各線/リングに沿ってストロークさせた MultiLineString ジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>apply_dash_pattern(geometry, pattern, [start_rule=no_rule], [end_rule=no_rule], [adjustment=both], [pattern_offset=0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ（ (multi)linestrings 又は (multi)polygons を受け付けます）。</p></li>
<li><p><strong>pattern</strong> - ダッシュパターン。ダッシュとギャップの長さを表す数値の配列です。偶数個の要素を含む必要があります。</p></li>
<li><p><strong>start_rule</strong> - パターンの開始を制約するためのオプションのルールです。有効な値は 'no_rule', 'full_dash', 'half_dash', 'full_gap', 'half_gap' です。</p></li>
<li><p><strong>end_rule</strong> - パターンの終わりを制約するためのオプションのルールです。有効な値は 'no_rule', 'full_dash', 'half_dash', 'full_gap', 'half_gap' です。</p></li>
<li><p><strong>adjustment</strong> - 求めるパターンルールに合わせるために、パターンのどの部分を調整するかを指定するオプションのルールです。有効な値は 'both'、'dash'、'gap' です。</p></li>
<li><p><strong>pattern_offset</strong> - パターンに沿った特定の距離で開始することを指定するオプションの距離です。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(apply_dash_pattern(geom_from_wkt('LINESTRING(1</span> <span class="pre">1,</span> <span class="pre">10</span> <span class="pre">1)'),</span> <span class="pre">array(3,</span> <span class="pre">1)))</span></code> → MultiLineString ((1 1, 4 1),(5 1, 8 1),(9 1, 10 1, 10 1))</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(apply_dash_pattern(geom_from_wkt('LINESTRING(1</span> <span class="pre">1,</span> <span class="pre">10</span> <span class="pre">1)'),</span> <span class="pre">array(3,</span> <span class="pre">1),</span> <span class="pre">start_rule:='half_dash'))</span></code> → MultiLineString ((1 1, 2.5 1),(3.5 1, 6.5 1),(7.5 1, 10 1, 10 1))</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="area">
<span id="expression-function-geometrygroup-area"></span><h3><a class="toc-backref" href="#id281" role="doc-backlink"><span class="section-number">13.2.13.4. </span>$area</a><a class="headerlink" href="#area" title="Link to this heading"></a></h3>
<p>地物の面積を返します。この関数で計算される面積には、現在のプロジェクトの楕円体設定と面積単位設定の両方が反映されます。例えば、プロジェクトに回転楕円体が設定されている場合、楕円体面積になり、設定されていない場合、平面上の面積になります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$area</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$area</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id26">
<span id="id27"></span><h3><a class="toc-backref" href="#id282" role="doc-backlink"><span class="section-number">13.2.13.5. </span>area</a><a class="headerlink" href="#id26" title="Link to this heading"></a></h3>
<p>ポリゴンオブジェクトのジオメトリの面積を返します。面積はこのジオメトリの空間参照系（SRS）で常に平面的に計算され、面積の単位は空間参照系の単位と一致します。この面積は、プロジェクトの楕円体と面積単位設定にもとづいた楕円体計算が行われる $area 関数による面積とは異なります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>area(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ポリゴンジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">area(geom_from_wkt('POLYGON((0</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">0))'))</span></code> → 8.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="azimuth">
<span id="expression-function-geometrygroup-azimuth"></span><h3><a class="toc-backref" href="#id283" role="doc-backlink"><span class="section-number">13.2.13.6. </span>azimuth</a><a class="headerlink" href="#azimuth" title="Link to this heading"></a></h3>
<p>北を基準して時計回りに測定された point_a から point_b への方位角をラジアン単位で返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>azimuth(point_a, point_b)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>point_a</strong> - ポイントジオメトリ</p></li>
<li><p><strong>point_b</strong> - ポイントジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">degrees(</span> <span class="pre">azimuth(</span> <span class="pre">make_point(25,</span> <span class="pre">45),</span> <span class="pre">make_point(75,</span> <span class="pre">100)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 42.273689</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">degrees(</span> <span class="pre">azimuth(</span> <span class="pre">make_point(75,</span> <span class="pre">100),</span> <span class="pre">make_point(25,45)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 222.273689</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="bearing">
<span id="expression-function-geometrygroup-bearing"></span><h3><a class="toc-backref" href="#id284" role="doc-backlink"><span class="section-number">13.2.13.7. </span>bearing</a><a class="headerlink" href="#bearing" title="Link to this heading"></a></h3>
<p>北を基準とした方位を、point_a上の鉛直線からpoint_bへ楕円体の時計回りに測ったラジアン単位の角度で返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>bearing(point_a, point_b, [source_crs], [ellipsoid])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>point_a</strong> - ポイントジオメトリ</p></li>
<li><p><strong>point_b</strong> - ポイントジオメトリ</p></li>
<li><p><strong>source_crs</strong> - ポイントのソースCRSを表すオプションの文字列。デフォルトでは、現在のレイヤのCRSが使われます。</p></li>
<li><p><strong>ellipsoid</strong> - 方位を測る楕円体の頭字語または authority:ID (例: 'EPSG:7030')を表すオプションの文字列。デフォルトでは、現在のプロジェクトの楕円体設定が使われます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">degrees(</span> <span class="pre">bearing(</span> <span class="pre">make_point(16198544,</span> <span class="pre">-4534850),</span> <span class="pre">make_point(18736872,</span> <span class="pre">-1877769),</span> <span class="pre">'EPSG:3857',</span> <span class="pre">'EPSG:7030')</span> <span class="pre">)</span></code> → 49.980071</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">degrees(</span> <span class="pre">bearing(</span> <span class="pre">make_point(18736872,</span> <span class="pre">-1877769),</span> <span class="pre">make_point(16198544,</span> <span class="pre">-4534850),</span> <span class="pre">'EPSG:3857',</span> <span class="pre">'WGS84')</span> <span class="pre">)</span></code> → 219.282386</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="boundary">
<span id="expression-function-geometrygroup-boundary"></span><h3><a class="toc-backref" href="#id285" role="doc-backlink"><span class="section-number">13.2.13.8. </span>boundary</a><a class="headerlink" href="#boundary" title="Link to this heading"></a></h3>
<p>ジオメトリの組み合わせ的境界のクロージャ（すなわちジオメトリの位相的境界）を返します。例えば、ポリゴンジオメトリには、ポリゴンの各リングのラインストリングからなる境界があります。ポイントやジオメトリコレクションのように、定義された境界を持たないジオメトリについては、NULLが返されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>boundary(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(boundary(geom_from_wkt('Polygon((1</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">-1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1))')))</span></code> → 'LineString(1 1,0 0,-1 1,1 1)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(boundary(geom_from_wkt('LineString(1</span> <span class="pre">1,0</span> <span class="pre">0,-1</span> <span class="pre">1)')))</span></code> → 'MultiPoint ((1 1),(-1 1))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id83">
<a class="reference internal image-reference" href="../../../_images/boundary_polygon.png"><img alt="../../../_images/boundary_polygon.png" src="../../../_images/boundary_polygon.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.5 </span><span class="caption-text">ソースポリゴンレイヤの境界（黒色の破線）</span><a class="headerlink" href="#id83" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisboundary"><span class="std std-ref">トポロジカル境界</span></a> アルゴリズム</p>
</section>
<section id="bounds">
<span id="expression-function-geometrygroup-bounds"></span><h3><a class="toc-backref" href="#id286" role="doc-backlink"><span class="section-number">13.2.13.9. </span>bounds</a><a class="headerlink" href="#bounds" title="Link to this heading"></a></h3>
<p>入力ジオメトリのバウンディングボックスを表すジオメトリを返します。計算はこのジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>bounds(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bounds(&#64;geometry)</span></code> → 現在の地物のジオメトリのバウンディングボックス</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(bounds(geom_from_wkt('Polygon((1</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">-1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1))')))</span></code> → 'Polygon ((-1 0, 1 0, 1 1, -1 1, -1 0))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id84">
<a class="reference internal image-reference" href="../../../_images/bounding_box.png"><img alt="../../../_images/bounding_box.png" src="../../../_images/bounding_box.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.6 </span><span class="caption-text">黒色のラインは各ポリゴン地物のバウンディングボックスを表す</span><a class="headerlink" href="#id84" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisboundingboxes"><span class="std std-ref">BBoxの出力</span></a> アルゴリズム</p>
</section>
<section id="bounds-height">
<span id="expression-function-geometrygroup-bounds-height"></span><h3><a class="toc-backref" href="#id287" role="doc-backlink"><span class="section-number">13.2.13.10. </span>bounds_height</a><a class="headerlink" href="#bounds-height" title="Link to this heading"></a></h3>
<p>ジオメトリのバウンディングボックスの高さを返します。計算はこのジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>bounds_height(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bounds_height(&#64;geometry)</span></code> → 現在の地物のジオメトリのバウンディングボックスの高さ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bounds_height(geom_from_wkt('Polygon((1</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">-1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1))'))</span></code> → 1</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="bounds-width">
<span id="expression-function-geometrygroup-bounds-width"></span><h3><a class="toc-backref" href="#id288" role="doc-backlink"><span class="section-number">13.2.13.11. </span>bounds_width</a><a class="headerlink" href="#bounds-width" title="Link to this heading"></a></h3>
<p>ジオメトリのバウンディングボックスの幅を返します。計算はこのジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>bounds_width(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bounds_width(&#64;geometry)</span></code> → 現在の地物のジオメトリのバウンディングボックスの幅</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bounds_width(geom_from_wkt('Polygon((1</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">-1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1))'))</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="buffer">
<span id="expression-function-geometrygroup-buffer"></span><h3><a class="toc-backref" href="#id289" role="doc-backlink"><span class="section-number">13.2.13.12. </span>buffer</a><a class="headerlink" href="#buffer" title="Link to this heading"></a></h3>
<p>ジオメトリからの距離がある距離以下のすべてのポイントを表すジオメトリを返します。計算はこのジオメトリの空間参照系で行なわれます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>buffer(geometry, distance, [segments=8], [cap='round'], [join='round'], [miter_limit=2])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>distance</strong> - レイヤの単位で表したバッファ距離</p></li>
<li><p><strong>segments</strong> - 継ぎ目スタイルにroundを使用する場合に、円の四分の一を表現するのに使用するセグメントの数。数値が大きいほど、より多数のノードからなる、滑らかなバッファが生成されます。</p></li>
<li><p><strong>cap</strong> - バッファの終端スタイル。有効な値は 'round'、 'flat' または 'square' です</p></li>
<li><p><strong>join</strong> - バッファの結合スタイル。有効な値は 'round'、 'bevel' または 'miter' です</p></li>
<li><p><strong>miter_limit</strong> - miter距離の上限値（結合スタイルに 'miter' を設定した場合に使用）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">buffer(&#64;geometry,</span> <span class="pre">10.5)</span></code> → 現在の地物ジオメトリから 10.5 単位でバッファリングされたポリゴン</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id85">
<a class="reference internal image-reference" href="../../../_images/buffer1.png"><img alt="../../../_images/buffer1.png" src="../../../_images/buffer1.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.7 </span><span class="caption-text">バッファ（黄色）。正のバッファを持ったポイント、ライン、ポリゴン及び負のバッファを持ったポリゴン</span><a class="headerlink" href="#id85" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisbuffer"><span class="std std-ref">バッファ（buffer）</span></a> アルゴリズム</p>
</section>
<section id="buffer-by-m">
<span id="expression-function-geometrygroup-buffer-by-m"></span><h3><a class="toc-backref" href="#id290" role="doc-backlink"><span class="section-number">13.2.13.13. </span>buffer_by_m</a><a class="headerlink" href="#buffer-by-m" title="Link to this heading"></a></h3>
<p>ラインジオメトリに沿ってバッファを作成します。バッファの直径は、ラインの頂点のm値に従って変化します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>buffer_by_m(geometry, [segments=8])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - 入力ジオメトリ。m値を持った（マルチ）ラインジオメトリである必要があります。</p></li>
<li><p><strong>segments</strong> - バッファの四分円を近似するセグメント数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">buffer_by_m(geometry:=geom_from_wkt('LINESTRINGM(1</span> <span class="pre">2</span> <span class="pre">0.5,</span> <span class="pre">4</span> <span class="pre">2</span> <span class="pre">0.2)'),segments:=8)</span></code> → ラインストリングジオメトリに沿って、直径が0.5から0.2に変化する可変幅バッファ</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id86">
<a class="reference internal image-reference" href="../../../_images/variable_buffer_m.png"><img alt="../../../_images/variable_buffer_m.png" src="../../../_images/variable_buffer_m.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.8 </span><span class="caption-text">頂点上のm値を使用したライン地物のバッファ</span><a class="headerlink" href="#id86" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisbufferbym"><span class="std std-ref">可変幅バッファ（M値使用）</span></a> アルゴリズム</p>
</section>
<section id="centroid">
<span id="expression-function-geometrygroup-centroid"></span><h3><a class="toc-backref" href="#id291" role="doc-backlink"><span class="section-number">13.2.13.14. </span>centroid</a><a class="headerlink" href="#centroid" title="Link to this heading"></a></h3>
<p>ジオメトリの重心を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>centroid(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">centroid(&#64;geometry)</span></code> → ポイントジオメトリ</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id87">
<a class="reference internal image-reference" href="../../../_images/centroids1.png"><img alt="../../../_images/centroids1.png" src="../../../_images/centroids1.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.9 </span><span class="caption-text">赤色の星印は入力レイヤの各地物の重心を表す</span><a class="headerlink" href="#id87" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgiscentroids"><span class="std std-ref">重心</span></a> アルゴリズム</p>
</section>
<section id="close-line">
<span id="expression-function-geometrygroup-close-line"></span><h3><a class="toc-backref" href="#id292" role="doc-backlink"><span class="section-number">13.2.13.15. </span>close_line</a><a class="headerlink" href="#close-line" title="Link to this heading"></a></h3>
<p>入力されたラインストリングが閉じていない場合には、最初の点を行末に追加して、閉じたラインストリングを返します。ジオメトリがラインストリングまたはマルチラインストリングでない場合、結果は NULL になります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>close_line(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインストリングジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(close_line(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1)')))</span></code> → 'LineString (0 0, 1 0, 1 1, 0 0)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(close_line(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">0)')))</span></code> → 'LineString (0 0, 1 0, 1 1, 0 0)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="closest-point">
<span id="expression-function-geometrygroup-closest-point"></span><h3><a class="toc-backref" href="#id293" role="doc-backlink"><span class="section-number">13.2.13.16. </span>closest_point</a><a class="headerlink" href="#closest-point" title="Link to this heading"></a></h3>
<p>geometry2 に最も近い、geometry1 上の点を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>closest_point(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - 検索対象のジオメトリ</p></li>
<li><p><strong>geometry2</strong> - 基準となるジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(closest_point(geom_from_wkt('LINESTRING</span> <span class="pre">(20</span> <span class="pre">80,</span> <span class="pre">98</span> <span class="pre">190,</span> <span class="pre">110</span> <span class="pre">180,</span> <span class="pre">50</span> <span class="pre">75</span> <span class="pre">)'),geom_from_wkt('POINT(100</span> <span class="pre">100)')))</span></code> → 'Point(73.0769 115.384)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="collect-geometries">
<span id="expression-function-geometrygroup-collect-geometries"></span><h3><a class="toc-backref" href="#id294" role="doc-backlink"><span class="section-number">13.2.13.17. </span>collect_geometries</a><a class="headerlink" href="#collect-geometries" title="Link to this heading"></a></h3>
<p>ジオメトリを集約したマルチパートのジオメトリを返します。</p>
<p><strong>引数バージョン</strong></p>
<p>ジオメトリのパーツは、関数の引数として個別に指定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>collect_geometries(geometry1, geometry2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(collect_geometries(make_point(1,2),</span> <span class="pre">make_point(3,4),</span> <span class="pre">make_point(5,6)))</span></code> → 'MultiPoint ((1 2),(3 4),(5 6))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>配列バージョン</strong></p>
<p>ジオメトリのパーツは、ジオメトリパーツの配列として指定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>collect_geometries(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - ジオメトリオブジェクトの配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(collect_geometries(array(make_point(1,2),</span> <span class="pre">make_point(3,4),</span> <span class="pre">make_point(5,6))))</span></code> → 'MultiPoint ((1 2),(3 4),(5 6))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgiscollect"><span class="std std-ref">シングルパートをマルチパートに集約</span></a> アルゴリズム</p>
</section>
<section id="combine">
<span id="expression-function-geometrygroup-combine"></span><h3><a class="toc-backref" href="#id295" role="doc-backlink"><span class="section-number">13.2.13.18. </span>combine</a><a class="headerlink" href="#combine" title="Link to this heading"></a></h3>
<p>２つのジオメトリの結合を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>combine(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">combine(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">2</span> <span class="pre">1)'</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'MULTILINESTRING((4 4, 2 1), (3 3, 4 4), (4 4, 5 5))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">combine(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">6</span> <span class="pre">6,</span> <span class="pre">2</span> <span class="pre">1)'</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'LINESTRING(3 3, 4 4, 6 6, 2 1)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="concave-hull">
<span id="expression-function-geometrygroup-concave-hull"></span><h3><a class="toc-backref" href="#id296" role="doc-backlink"><span class="section-number">13.2.13.19. </span>concave_hull</a><a class="headerlink" href="#concave-hull" title="Link to this heading"></a></h3>
<p>ジオメトリのすべてのポイントを含む、凹型のポリゴンを返します</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>concave_hull(geometry, target_percent, [allow_holes=False])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>target_percent</strong> - 解が凸包に近づこうとする面積の割合。target_percent が 1 の場合、凸包と同じ結果になります。target_percent を 0 から 0.99 の間に設定すると、凸包よりも面積が小さくなる結果が得られます。</p></li>
<li><p><strong>allow_holes</strong> - 出力ジオメトリに穴を許すかどうかを指定するオプションの引数です。デフォルトはFALSEで、出力ジオメトリに穴を含めないようにするにはTRUEに設定します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(concave_hull(geom_from_wkt('MULTILINESTRING((106</span> <span class="pre">164,30</span> <span class="pre">112,74</span> <span class="pre">70,82</span> <span class="pre">112,130</span> <span class="pre">94,130</span> <span class="pre">62,122</span> <span class="pre">40,156</span> <span class="pre">32,162</span> <span class="pre">76,172</span> <span class="pre">88),(132</span> <span class="pre">178,134</span> <span class="pre">148,128</span> <span class="pre">136,96</span> <span class="pre">128,132</span> <span class="pre">108,150</span> <span class="pre">130,170</span> <span class="pre">142,174</span> <span class="pre">110,156</span> <span class="pre">96,158</span> <span class="pre">90,158</span> <span class="pre">88),(22</span> <span class="pre">64,66</span> <span class="pre">28,94</span> <span class="pre">38,94</span> <span class="pre">68,114</span> <span class="pre">76,112</span> <span class="pre">30,132</span> <span class="pre">10,168</span> <span class="pre">18,178</span> <span class="pre">34,186</span> <span class="pre">52,184</span> <span class="pre">74,190</span> <span class="pre">100,190</span> <span class="pre">122,182</span> <span class="pre">148,178</span> <span class="pre">170,176</span> <span class="pre">184,156</span> <span class="pre">164,146</span> <span class="pre">178,132</span> <span class="pre">186,92</span> <span class="pre">182,56</span> <span class="pre">158,36</span> <span class="pre">150,62</span> <span class="pre">150,76</span> <span class="pre">128,88</span> <span class="pre">118))'),</span> <span class="pre">0.99))</span></code> → 'Polygon ((30 112, 36 150, 92 182, 132 186, 176 184, 190 122, 190 100, 186 52, 178 34, 168 18, 132 10, 112 30, 66 28, 22 64, 30 112))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Further reading: <a class="reference internal" href="#expression-function-geometrygroup-convex-hull"><span class="std std-ref">convex_hull</span></a></p>
</section>
<section id="contains">
<span id="expression-function-geometrygroup-contains"></span><h3><a class="toc-backref" href="#id297" role="doc-backlink"><span class="section-number">13.2.13.20. </span>contains</a><a class="headerlink" href="#contains" title="Link to this heading"></a></h3>
<p>あるジオメトリが他のものを含むかどうかを判定します。ジオメトリ1の外側にジオメトリ2の点がなく、かつジオメトリ2の内側の少なくとも1点がジオメトリ1の内側にある場合にのみ、TRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>contains(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">contains(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POLYGON((0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0))'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(0.5</span> <span class="pre">0.5</span> <span class="pre">)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contains(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POLYGON((0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0))'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="#expression-function-geometrygroup-overlay-contains"><span class="std std-ref">overlay_contains</span></a></p>
</section>
<section id="convex-hull">
<span id="expression-function-geometrygroup-convex-hull"></span><h3><a class="toc-backref" href="#id298" role="doc-backlink"><span class="section-number">13.2.13.21. </span>convex_hull</a><a class="headerlink" href="#convex-hull" title="Link to this heading"></a></h3>
<p>ジオメトリの凸包を返します。これは、セット内のすべてのジオメトリを囲む、最小の凸多角形のジオメトリです。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>convex_hull(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">convex_hull(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">4</span> <span class="pre">10)'</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'POLYGON((3 3, 4 10, 4 4, 3 3))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="#expression-function-geometrygroup-concave-hull"><span class="std std-ref">concave_hull</span></a>, <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisconvexhull"><span class="std std-ref">凸包（convex hull）</span></a> アルゴリズム</p>
</section>
<section id="crosses">
<span id="expression-function-geometrygroup-crosses"></span><h3><a class="toc-backref" href="#id299" role="doc-backlink"><span class="section-number">13.2.13.22. </span>crosses</a><a class="headerlink" href="#crosses" title="Link to this heading"></a></h3>
<p>あるジオメトリが他のジオメトリと交差しているかどうかを判定します。与えられたジオメトリが、すべてではないが、内側の点をいくつか共有している場合、TRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>crosses(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">crosses(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">5,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">3)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">crosses(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="#expression-function-geometrygroup-overlay-crosses"><span class="std std-ref">overlay_crosses</span></a></p>
</section>
<section id="densify-by-count">
<span id="expression-function-geometrygroup-densify-by-count"></span><h3><a class="toc-backref" href="#id300" role="doc-backlink"><span class="section-number">13.2.13.23. </span>densify_by_count</a><a class="headerlink" href="#densify-by-count" title="Link to this heading"></a></h3>
<p>ポリゴンまたはラインレイヤのジオメトリを受け取り、元のジオメトリよりも頂点数が多いジオメトリを新たに生成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>densify_by_count(geometry, vertices)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ（ (multi)linestrings 又は (multi)polygons を受け付けます）。</p></li>
<li><p><strong>vertices</strong> - （セグメント毎に）追加する頂点の数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(densify_by_count(geom_from_wkt('LINESTRING(1</span> <span class="pre">1,</span> <span class="pre">10</span> <span class="pre">1)'),</span> <span class="pre">3))</span></code> → LineString (1 1, 3.25 1, 5.5 1, 7.75 1, 10 1)</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id88">
<a class="reference internal image-reference" href="../../../_images/densify_geometry.png"><img alt="../../../_images/densify_geometry.png" src="../../../_images/densify_geometry.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.10 </span><span class="caption-text">頂点の高密度化の実行前後。赤色の点は頂点を表す</span><a class="headerlink" href="#id88" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisdensifygeometries"><span class="std std-ref">頂点の高密度化（個数ベース）</span></a> アルゴリズム</p>
</section>
<section id="densify-by-distance">
<span id="expression-function-geometrygroup-densify-by-distance"></span><h3><a class="toc-backref" href="#id301" role="doc-backlink"><span class="section-number">13.2.13.24. </span>densify_by_distance</a><a class="headerlink" href="#densify-by-distance" title="Link to this heading"></a></h3>
<p>ポリゴン又はラインレイヤのジオメトリを受け取り、指定された間隔を最大距離とするように辺に頂点を追加することにより、ジオメトリを高密度化した新しいものを生成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>densify_by_distance(geometry, distance)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ（ (multi)linestrings 又は (multi)polygons を受け付けます）。</p></li>
<li><p><strong>distance</strong> - 出力ジオメトリの頂点間の最大間隔</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(densify_by_distance(geom_from_wkt('LINESTRING(1</span> <span class="pre">1,</span> <span class="pre">10</span> <span class="pre">1)'),</span> <span class="pre">4))</span></code> → LineString (1 1, 4 1, 7 1, 10 1)</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id89">
<a class="reference internal image-reference" href="../../../_images/densify_geometry_interval.png"><img alt="../../../_images/densify_geometry_interval.png" src="../../../_images/densify_geometry_interval.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.11 </span><span class="caption-text">指定した間隔によるジオメトリの高密度化</span><a class="headerlink" href="#id89" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisdensifygeometriesgivenaninterval"><span class="std std-ref">間隔による高密度化</span></a> アルゴリズム</p>
</section>
<section id="difference">
<span id="expression-function-geometrygroup-difference"></span><h3><a class="toc-backref" href="#id302" role="doc-backlink"><span class="section-number">13.2.13.25. </span>difference</a><a class="headerlink" href="#difference" title="Link to this heading"></a></h3>
<p>geometry1のうち、geometry2と交差（intersect）しない部分を表すジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>difference(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">difference(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4)'</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'LINESTRING(4 4, 5 5)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectoroverlay.html#qgisdifference"><span class="std std-ref">差分</span></a> アルゴリズム</p>
</section>
<section id="disjoint">
<span id="expression-function-geometrygroup-disjoint"></span><h3><a class="toc-backref" href="#id303" role="doc-backlink"><span class="section-number">13.2.13.26. </span>disjoint</a><a class="headerlink" href="#disjoint" title="Link to this heading"></a></h3>
<p>ジオメトリが空間的に交差しないかどうかを判定します。ジオメトリが空間を共有していない場合はTRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>disjoint(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">disjoint(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POLYGON((0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">))'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">disjoint(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">4)'</span> <span class="pre">))</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="#expression-function-geometrygroup-overlay-disjoint"><span class="std std-ref">overlay_disjoint</span></a></p>
</section>
<section id="distance">
<span id="expression-function-geometrygroup-distance"></span><h3><a class="toc-backref" href="#id304" role="doc-backlink"><span class="section-number">13.2.13.27. </span>distance</a><a class="headerlink" href="#distance" title="Link to this heading"></a></h3>
<p>2つのジオメトリ間の最小距離（空間参照に基づく）を投影法の単位で返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>distance(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">distance(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">4)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">8)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 4</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="distance-to-vertex">
<span id="expression-function-geometrygroup-distance-to-vertex"></span><h3><a class="toc-backref" href="#id305" role="doc-backlink"><span class="section-number">13.2.13.28. </span>distance_to_vertex</a><a class="headerlink" href="#distance-to-vertex" title="Link to this heading"></a></h3>
<p>インデックスで指定した点までの、ジオメトリに沿った距離を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>distance_to_vertex(geometry, vertex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインストリングジオメトリ</p></li>
<li><p><strong>vertex</strong> - 頂点のインデックスで、最初の点は0から数える。負の値の場合には、全体の頂点数からその絶対値を引いたインデックスの頂点が選択される</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">distance_to_vertex(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">10)'),vertex:=1)</span></code> → 10.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="end-point">
<span id="expression-function-geometrygroup-end-point"></span><h3><a class="toc-backref" href="#id306" role="doc-backlink"><span class="section-number">13.2.13.29. </span>end_point</a><a class="headerlink" href="#end-point" title="Link to this heading"></a></h3>
<p>ジオメトリの最後のノードを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>end_point(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(end_point(geom_from_wkt('LINESTRING(4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2)')))</span></code> → 'Point (0 2)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisextractspecificvertices"><span class="std std-ref">特定の点を抽出</span></a> アルゴリズム</p>
</section>
<section id="exif-geotag">
<span id="expression-function-geometrygroup-exif-geotag"></span><h3><a class="toc-backref" href="#id307" role="doc-backlink"><span class="section-number">13.2.13.30. </span>exif_geotag</a><a class="headerlink" href="#exif-geotag" title="Link to this heading"></a></h3>
<p>画像ファイルの exif ジオタグからポイントジオメトリを作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>exif_geotag(path)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>path</strong> - 画像ファイルのパスまたはマップレイヤの値。マップレイヤの値が指定された場合、そのレイヤーのファイルソースが使用されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(exif_geotag('/my/photo.jpg'))</span></code> → 'Point (2 4)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="extend">
<span id="expression-function-geometrygroup-extend"></span><h3><a class="toc-backref" href="#id308" role="doc-backlink"><span class="section-number">13.2.13.31. </span>extend</a><a class="headerlink" href="#extend" title="Link to this heading"></a></h3>
<p>ラインストリングジオメトリの始点と終点を指定量だけ延長します。最初と最後のセグメントを、その方向を使用して延長します。距離の単位はこのジオメトリの空間参照系を使います。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>extend(geometry, start_distance, end_distance)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - （マルチ）ラインストリングジオメトリ</p></li>
<li><p><strong>start_distance</strong> - 始点の延長距離</p></li>
<li><p><strong>end_distance</strong> - 終点の延長距離</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(extend(geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1)'),1,2))</span></code> → 'LineString (-1 0, 1 0, 1 3)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(extend(geom_from_wkt('MultiLineString((0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1),</span> <span class="pre">(2</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">5))'),1,2))</span></code> → 'MultiLineString ((-1 0, 1 0, 1 3),(3 2, 0 2, 0 7))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisextendlines"><span class="std std-ref">線の延長</span></a> アルゴリズム</p>
</section>
<section id="exterior-ring">
<span id="expression-function-geometrygroup-exterior-ring"></span><h3><a class="toc-backref" href="#id309" role="doc-backlink"><span class="section-number">13.2.13.32. </span>exterior_ring</a><a class="headerlink" href="#exterior-ring" title="Link to this heading"></a></h3>
<p>ポリゴンジオメトリの外側のリングを表すラインストリングを返します。ジオメトリがポリゴンではない場合には、結果はNULLになります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>exterior_ring(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ポリゴンジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(exterior_ring(geom_from_wkt('POLYGON((-1</span> <span class="pre">-1,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">-1</span> <span class="pre">-1),(</span> <span class="pre">0.1</span> <span class="pre">0.1,</span> <span class="pre">0.1</span> <span class="pre">0.2,</span> <span class="pre">0.2</span> <span class="pre">0.2,</span> <span class="pre">0.2,</span> <span class="pre">0.1,</span> <span class="pre">0.1</span> <span class="pre">0.1))')))</span></code> → 'LineString (-1 -1, 4 0, 4 2, 0 2, -1 -1)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="extrude">
<span id="expression-function-geometrygroup-extrude"></span><h3><a class="toc-backref" href="#id310" role="doc-backlink"><span class="section-number">13.2.13.33. </span>extrude</a><a class="headerlink" href="#extrude" title="Link to this heading"></a></h3>
<p>（マルチ）カーブまたは（マルチ）ラインストリングジオメトリを、xとyで指定した押し出し量だけ並行移動させてできるポリゴンを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>extrude(geometry, x, y)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - カーブジオメトリまたはラインストリングジオメトリ</p></li>
<li><p><strong>x</strong> - x 方向の押し出し量の数値</p></li>
<li><p><strong>y</strong> - y 方向の押し出し量の数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(extrude(geom_from_wkt('LineString(1</span> <span class="pre">2,</span> <span class="pre">3</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">3)'),</span> <span class="pre">1,</span> <span class="pre">2))</span></code> → 'Polygon ((1 2, 3 2, 4 3, 5 5, 4 4, 2 4, 1 2))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(extrude(geom_from_wkt('MultiLineString((1</span> <span class="pre">2,</span> <span class="pre">3</span> <span class="pre">2),</span> <span class="pre">(4</span> <span class="pre">3,</span> <span class="pre">8</span> <span class="pre">3))'),</span> <span class="pre">1,</span> <span class="pre">2))</span></code> → 'MultiPolygon (((1 2, 3 2, 4 4, 2 4, 1 2)),((4 3, 8 3, 9 5, 5 5, 4 3)))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="flip-coordinates">
<span id="expression-function-geometrygroup-flip-coordinates"></span><h3><a class="toc-backref" href="#id311" role="doc-backlink"><span class="section-number">13.2.13.34. </span>flip_coordinates</a><a class="headerlink" href="#flip-coordinates" title="Link to this heading"></a></h3>
<p>X座標とY座標を入れ替えたジオメトリのコピーを返します。緯度と経度を逆にしてしまったジオメトリを修復する際に便利です。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>flip_coordinates(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(flip_coordinates(make_point(1,</span> <span class="pre">2)))</span></code> → 'Point (2 1)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(flip_coordinates(geom_from_wkt('LineString(0</span> <span class="pre">2,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">6)')))</span></code> → 'LineString (2 0, 0 1, 6 1)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisswapxy"><span class="std std-ref">座標のXY入れ替え</span></a> アルゴリズム</p>
</section>
<section id="force-polygon-ccw">
<span id="expression-function-geometrygroup-force-polygon-ccw"></span><h3><a class="toc-backref" href="#id312" role="doc-backlink"><span class="section-number">13.2.13.35. </span>force_polygon_ccw</a><a class="headerlink" href="#force-polygon-ccw" title="Link to this heading"></a></h3>
<p>外側のリングは反時計回り、内側のリングは時計回りになるようにジオメトリを強制的に設定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>force_polygon_ccw(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ。ポリゴンではないジオメトリはそのまま返します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(force_polygon_ccw(geometry:=geom_from_wkt('Polygon</span> <span class="pre">((-1</span> <span class="pre">-1,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">-1</span> <span class="pre">-1))')))</span></code> → 'Polygon ((-1 -1, 4 0, 4 2, 0 2, -1 -1))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-force-polygon-cw"><span class="std std-ref">force_polygon_cw</span></a>, <a class="reference internal" href="#expression-function-geometrygroup-force-rhr"><span class="std std-ref">force_rhr</span></a></p>
</section>
<section id="force-polygon-cw">
<span id="expression-function-geometrygroup-force-polygon-cw"></span><h3><a class="toc-backref" href="#id313" role="doc-backlink"><span class="section-number">13.2.13.36. </span>force_polygon_cw</a><a class="headerlink" href="#force-polygon-cw" title="Link to this heading"></a></h3>
<p>外側のリングは時計回り、内側のリングは反時計回りになるようにジオメトリを強制的に設定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>force_polygon_cw(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ。ポリゴンではないジオメトリはそのまま返します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(force_polygon_cw(geometry:=geom_from_wkt('POLYGON((-1</span> <span class="pre">-1,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">-1</span> <span class="pre">-1))')))</span></code> → 'Polygon ((-1 -1, 0 2, 4 2, 4 0, -1 -1))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-force-polygon-ccw"><span class="std std-ref">force_polygon_ccw</span></a>, <a class="reference internal" href="#expression-function-geometrygroup-force-rhr"><span class="std std-ref">force_rhr</span></a></p>
</section>
<section id="force-rhr">
<span id="expression-function-geometrygroup-force-rhr"></span><h3><a class="toc-backref" href="#id314" role="doc-backlink"><span class="section-number">13.2.13.37. </span>force_rhr</a><a class="headerlink" href="#force-rhr" title="Link to this heading"></a></h3>
<p>ポリゴンで囲まれる区域が境界の右側にある、「右手ルール」を尊重するようにジオメトリを強制的に設定します。特に、外側のリングは時計回りに、内側のリングは反時計回りに向きを変えます。右手ルールの定義は文脈によって不一致があるため、代わりに明白なforce_polygon_cw関数を使用することが推奨されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>force_rhr(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ。ポリゴンではないジオメトリはそのまま返します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(force_rhr(geometry:=geom_from_wkt('POLYGON((-1</span> <span class="pre">-1,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">-1</span> <span class="pre">-1))')))</span></code> → 'Polygon ((-1 -1, 0 2, 4 2, 4 0, -1 -1))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisforcerhr"><span class="std std-ref">右手ルールを強制</span></a> アルゴリズム、 <a class="reference internal" href="#expression-function-geometrygroup-force-polygon-ccw"><span class="std std-ref">force_polygon_ccw</span></a>, <a class="reference internal" href="#expression-function-geometrygroup-force-polygon-cw"><span class="std std-ref">force_polygon_cw</span></a></p>
</section>
<section id="geom-from-gml">
<span id="expression-function-geometrygroup-geom-from-gml"></span><h3><a class="toc-backref" href="#id315" role="doc-backlink"><span class="section-number">13.2.13.38. </span>geom_from_gml</a><a class="headerlink" href="#geom-from-gml" title="Link to this heading"></a></h3>
<p>ジオメトリのGML表現文字列からジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>geom_from_gml(gml)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>gml</strong> - ジオメトリのGML表現の文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_from_gml('&lt;gml:LineString</span> <span class="pre">srsName=&quot;EPSG:4326&quot;&gt;&lt;gml:coordinates&gt;4,4</span> <span class="pre">5,5</span> <span class="pre">6,6&lt;/gml:coordinates&gt;&lt;/gml:LineString&gt;')</span></code> → ラインジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="geom-from-wkb">
<span id="expression-function-geometrygroup-geom-from-wkb"></span><h3><a class="toc-backref" href="#id316" role="doc-backlink"><span class="section-number">13.2.13.39. </span>geom_from_wkb</a><a class="headerlink" href="#geom-from-wkb" title="Link to this heading"></a></h3>
<p>Well-Known Binary（WKB）表現から作成されたジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>geom_from_wkb(binary)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>binary</strong> - ジオメトリのWell-Known Binary（WKB）表現（バイナリのblob）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_from_wkb(</span> <span class="pre">geom_to_wkb(</span> <span class="pre">make_point(4,5)</span> <span class="pre">)</span> <span class="pre">)</span></code> → ポイントジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="geom-from-wkt">
<span id="expression-function-geometrygroup-geom-from-wkt"></span><h3><a class="toc-backref" href="#id317" role="doc-backlink"><span class="section-number">13.2.13.40. </span>geom_from_wkt</a><a class="headerlink" href="#geom-from-wkt" title="Link to this heading"></a></h3>
<p>Well-Known Text（WKT）表現から作成されたジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>geom_from_wkt(text)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>text</strong> - ジオメトリのWell-Known Text（WKT）表現</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">5)'</span> <span class="pre">)</span></code> → ジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="geom-to-wkb">
<span id="expression-function-geometrygroup-geom-to-wkb"></span><h3><a class="toc-backref" href="#id318" role="doc-backlink"><span class="section-number">13.2.13.41. </span>geom_to_wkb</a><a class="headerlink" href="#geom-to-wkb" title="Link to this heading"></a></h3>
<p>ジオメトリの Well-Known Binary（WKB）表現を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>geom_to_wkb(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkb(</span> <span class="pre">&#64;geometry</span> <span class="pre">)</span></code> → ジオメトリオブジェクトを含むバイナリblob</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="geom-to-wkt">
<span id="expression-function-geometrygroup-geom-to-wkt"></span><h3><a class="toc-backref" href="#id319" role="doc-backlink"><span class="section-number">13.2.13.42. </span>geom_to_wkt</a><a class="headerlink" href="#geom-to-wkt" title="Link to this heading"></a></h3>
<p>ジオメトリのWell-known text（WKT）表現をSRIDメタデータなしで返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>geom_to_wkt(geometry, [precision=8])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>precision</strong> - 数値精度</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">make_point(6,</span> <span class="pre">50)</span> <span class="pre">)</span></code> → 'POINT(6 50)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(centroid(geom_from_wkt('Polygon((1</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">-1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1))')))</span></code> → 'POINT(0 0.66666667)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(centroid(geom_from_wkt('Polygon((1</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">-1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1))')),</span> <span class="pre">2)</span></code> → 'POINT(0 0.67)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="geometry">
<span id="expression-function-geometrygroup-geometry"></span><h3><a class="toc-backref" href="#id320" role="doc-backlink"><span class="section-number">13.2.13.43. </span>$geometry</a><a class="headerlink" href="#geometry" title="Link to this heading"></a></h3>
<p>現在の地物のジオメトリを返します。他の関数での処理に使用することができます。<strong>警告：この関数は非推奨です。代わりに&#64;geometry変数を使用することをお勧めします。</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$geometry</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">$geometry</span> <span class="pre">)</span></code> → 'POINT(6 50)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id28">
<span id="id29"></span><h3><a class="toc-backref" href="#id321" role="doc-backlink"><span class="section-number">13.2.13.44. </span>geometry</a><a class="headerlink" href="#id28" title="Link to this heading"></a></h3>
<p>地物のジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>geometry(feature)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>feature</strong> - 地物オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geometry(</span> <span class="pre">&#64;feature</span> <span class="pre">)</span></code> → 現在の地物のジオメトリ。 &#64;geometry の使用が推奨される</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">geometry(</span> <span class="pre">get_feature_by_id(</span> <span class="pre">'streets',</span> <span class="pre">1</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → &quot;streets&quot; レイヤ内でid が1の地物のジオメトリのWKT表現。例えば 'POINT(6 50)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intersects(</span> <span class="pre">&#64;geometry,</span> <span class="pre">geometry(</span> <span class="pre">get_feature(</span> <span class="pre">'streets',</span> <span class="pre">'name',</span> <span class="pre">'Main</span> <span class="pre">St.'</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 現在の地物が &quot;streets&quot; レイヤの 'Main St.' という名前の地物と空間的に交差している場合はTRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="geometry-n">
<span id="expression-function-geometrygroup-geometry-n"></span><h3><a class="toc-backref" href="#id322" role="doc-backlink"><span class="section-number">13.2.13.45. </span>geometry_n</a><a class="headerlink" href="#geometry-n" title="Link to this heading"></a></h3>
<p>ジオメトリコレクションから特定のジオメトリを返し、入力ジオメトリがコレクションでない場合はNULLを返します。また、マルチパートジオメトリから部分を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>geometry_n(geometry, index)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリコレクション</p></li>
<li><p><strong>index</strong> - 戻り値となるジオメトリのインデックス。コレクションの最初のジオメトリは1</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(geometry_n(geom_from_wkt('GEOMETRYCOLLECTION(POINT(0</span> <span class="pre">1),</span> <span class="pre">POINT(0</span> <span class="pre">0),</span> <span class="pre">POINT(1</span> <span class="pre">0),</span> <span class="pre">POINT(1</span> <span class="pre">1))'),3))</span></code> → 'Point (1 0)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="geometry-type">
<span id="expression-function-geometrygroup-geometry-type"></span><h3><a class="toc-backref" href="#id323" role="doc-backlink"><span class="section-number">13.2.13.46. </span>geometry_type</a><a class="headerlink" href="#geometry-type" title="Link to this heading"></a></h3>
<p>ジオメトリの種類を表す文字列値（Point、Line または Polygon）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>geometry_type(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geometry_type(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(2</span> <span class="pre">5,</span> <span class="pre">3</span> <span class="pre">6,</span> <span class="pre">4</span> <span class="pre">8)')</span> <span class="pre">)</span></code> → 'Line'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geometry_type(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'MULTILINESTRING((2</span> <span class="pre">5,</span> <span class="pre">3</span> <span class="pre">6,</span> <span class="pre">4</span> <span class="pre">8),</span> <span class="pre">(1</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">0))')</span> <span class="pre">)</span></code> → 'Line'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geometry_type(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(2</span> <span class="pre">5)')</span> <span class="pre">)</span></code> → 'Point'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geometry_type(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POLYGON((-1</span> <span class="pre">-1,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">-1</span> <span class="pre">-1))')</span> <span class="pre">)</span></code> → 'Polygon'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="hausdorff-distance">
<span id="expression-function-geometrygroup-hausdorff-distance"></span><h3><a class="toc-backref" href="#id324" role="doc-backlink"><span class="section-number">13.2.13.47. </span>hausdorff_distance</a><a class="headerlink" href="#hausdorff-distance" title="Link to this heading"></a></h3>
<p>2つのジオメトリ間のハウスドルフ距離を返します。これは基本的に、2つのジオメトリがどれほど類似しているか、類似していないかを測る指標であり、距離が小さいほど類似したジオメトリであることを示します。</p>
<p>この関数はオプションとして、稠密化比率を引数で与えて実行できます。これが指定されていない場合は、標準的なハウスドルフ距離の近似値が使用されます。この近似は有用なケースの大部分では正確か、十分に近いものです。例えば、</p>
<ul class="simple">
<li><p>ほぼ互いに平行でほぼ同じ長さのラインストリング間の類似性を計算する場合。これは線形ネットワークのマッチングで使用します。</p></li>
<li><p>ジオメトリの類似性をテストする場合。</p></li>
</ul>
<p>この関数のデフォルトの近似値では不十分な場合、オプションで稠密化比率を引数に指定します。この引数を指定すると、離散ハウスドルフ距離を計算する前にセグメントの稠密化が実行されます。このパラメータは、各セグメントを緻密化する比率を設定します。各セグメントはこの比率で等しい長さのサブセグメントに分割されます。稠密化比率のパラメータを小さくすれば、返される距離は真のハウスドルフ距離に近づきます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>hausdorff_distance(geometry1, geometry2, [densify_fraction])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
<li><p><strong>densify_fraction</strong> - 稠密化比率</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hausdorff_distance(</span> <span class="pre">geometry1:=</span> <span class="pre">geom_from_wkt('LINESTRING</span> <span class="pre">(0</span> <span class="pre">0,</span> <span class="pre">2</span> <span class="pre">1)'),geometry2:=geom_from_wkt('LINESTRING</span> <span class="pre">(0</span> <span class="pre">0,</span> <span class="pre">2</span> <span class="pre">0)'))</span></code> → 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hausdorff_distance(</span> <span class="pre">geom_from_wkt('LINESTRING</span> <span class="pre">(130</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">150)'),geom_from_wkt('LINESTRING</span> <span class="pre">(10</span> <span class="pre">10,</span> <span class="pre">10</span> <span class="pre">150,</span> <span class="pre">130</span> <span class="pre">10)'))</span></code> → 14.142135623</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hausdorff_distance(</span> <span class="pre">geom_from_wkt('LINESTRING</span> <span class="pre">(130</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">150)'),geom_from_wkt('LINESTRING</span> <span class="pre">(10</span> <span class="pre">10,</span> <span class="pre">10</span> <span class="pre">150,</span> <span class="pre">130</span> <span class="pre">10)'),0.5)</span></code> → 70.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="inclination">
<span id="expression-function-geometrygroup-inclination"></span><h3><a class="toc-backref" href="#id325" role="doc-backlink"><span class="section-number">13.2.13.48. </span>inclination</a><a class="headerlink" href="#inclination" title="Link to this heading"></a></h3>
<p>point_a に対する point_b の傾斜角を、天頂（0度）から天底（180度）までの角度で返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>inclination(point_a, point_b)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>point_a</strong> - ポイントジオメトリ</p></li>
<li><p><strong>point_b</strong> - ポイントジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">inclination(</span> <span class="pre">make_point(</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">0</span> <span class="pre">),</span> <span class="pre">make_point(</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">5</span> <span class="pre">)</span> <span class="pre">)</span></code> → 0.0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inclination(</span> <span class="pre">make_point(</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">0</span> <span class="pre">),</span> <span class="pre">make_point(</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">0</span> <span class="pre">)</span> <span class="pre">)</span></code> → 90.0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inclination(</span> <span class="pre">make_point(</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">0</span> <span class="pre">),</span> <span class="pre">make_point(</span> <span class="pre">50,</span> <span class="pre">100,</span> <span class="pre">0</span> <span class="pre">)</span> <span class="pre">)</span></code> → 90.0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inclination(</span> <span class="pre">make_point(</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">0</span> <span class="pre">),</span> <span class="pre">make_point(</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">-5</span> <span class="pre">)</span> <span class="pre">)</span></code> → 180.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="interior-ring-n">
<span id="expression-function-geometrygroup-interior-ring-n"></span><h3><a class="toc-backref" href="#id326" role="doc-backlink"><span class="section-number">13.2.13.49. </span>interior_ring_n</a><a class="headerlink" href="#interior-ring-n" title="Link to this heading"></a></h3>
<p>ポリゴンジオメトリから指定した内側のリングを返します。ジオメトリがポリゴンではない場合、NULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>interior_ring_n(geometry, index)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ポリゴンジオメトリ</p></li>
<li><p><strong>index</strong> - 戻り値となる内側のリングのインデックス。最初の内側リングが1</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(interior_ring_n(geom_from_wkt('POLYGON((-1</span> <span class="pre">-1,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">-1</span> <span class="pre">-1),(-0.1</span> <span class="pre">-0.1,</span> <span class="pre">0.4</span> <span class="pre">0,</span> <span class="pre">0.4</span> <span class="pre">0.2,</span> <span class="pre">0</span> <span class="pre">0.2,</span> <span class="pre">-0.1</span> <span class="pre">-0.1),(-1</span> <span class="pre">-1,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">-1</span> <span class="pre">-1))'),1))</span></code> → 'LineString (-0.1 -0.1, 0.4 0, 0.4 0.2, 0 0.2, -0.1 -0.1))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="intersection">
<span id="expression-function-geometrygroup-intersection"></span><h3><a class="toc-backref" href="#id327" role="doc-backlink"><span class="section-number">13.2.13.50. </span>intersection</a><a class="headerlink" href="#intersection" title="Link to this heading"></a></h3>
<p>2つのジオメトリの共有部分を表すジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>intersection(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">intersection(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4)'</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'LINESTRING(3 3, 4 4)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">intersection(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'MULTIPOINT(3.5</span> <span class="pre">3.5,</span> <span class="pre">4</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'POINT(3.5 3.5)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectoroverlay.html#qgisintersection"><span class="std std-ref">交差</span></a> アルゴリズム</p>
</section>
<section id="intersects">
<span id="expression-function-geometrygroup-intersects"></span><h3><a class="toc-backref" href="#id328" role="doc-backlink"><span class="section-number">13.2.13.51. </span>intersects</a><a class="headerlink" href="#intersects" title="Link to this heading"></a></h3>
<p>あるジオメトリが他のジオメトリと交差しているかどうかを判定します。ジオメトリが空間的に交差している（空間の任意の部分を共有している）場合はTRUE、交差していない場合はFALSEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>intersects(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">intersects(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">4)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intersects(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="#expression-function-geometrygroup-overlay-intersects"><span class="std std-ref">overlay_intersects</span></a></p>
</section>
<section id="intersects-bbox">
<span id="expression-function-geometrygroup-intersects-bbox"></span><h3><a class="toc-backref" href="#id329" role="doc-backlink"><span class="section-number">13.2.13.52. </span>intersects_bbox</a><a class="headerlink" href="#intersects-bbox" title="Link to this heading"></a></h3>
<p>ジオメトリのバウンディングボックスが他のジオメトリのバウンディングボックスに重なるかどうかをテストします。ジオメトリが定義されたバウンディングボックスと空間的に交差している場合はTRUE、交差していない場合はFALSEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>intersects_bbox(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">intersects_bbox(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intersects_bbox(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(6</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POLYGON((3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5,</span> <span class="pre">3</span> <span class="pre">3))'</span> <span class="pre">)</span> <span class="pre">)</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="is-closed">
<span id="expression-function-geometrygroup-is-closed"></span><h3><a class="toc-backref" href="#id330" role="doc-backlink"><span class="section-number">13.2.13.53. </span>is_closed</a><a class="headerlink" href="#is-closed" title="Link to this heading"></a></h3>
<p>ラインストリングが閉じている（始点と終点が一致している）場合はTRUE、閉じていない場合はFALSEを返します。ジオメトリがラインストリングでない場合、結果はNULLとなります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_closed(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインストリングジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_closed(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2)'))</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_closed(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">0)'))</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="is-empty">
<span id="expression-function-geometrygroup-is-empty"></span><h3><a class="toc-backref" href="#id331" role="doc-backlink"><span class="section-number">13.2.13.54. </span>is_empty</a><a class="headerlink" href="#is-empty" title="Link to this heading"></a></h3>
<p>ジオメトリが空（座標なし）の場合は TRUE、ジオメトリが空でない場合は false、ジオメトリが存在しない場合は NULL を返します。is_empty_or_null も参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_empty(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2)'))</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty(geom_from_wkt('LINESTRING</span> <span class="pre">EMPTY'))</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty(geom_from_wkt('POINT(7</span> <span class="pre">4)'))</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty(geom_from_wkt('POINT</span> <span class="pre">EMPTY'))</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-is-empty-or-null"><span class="std std-ref">is_empty_or_null</span></a></p>
</section>
<section id="is-empty-or-null">
<span id="expression-function-geometrygroup-is-empty-or-null"></span><h3><a class="toc-backref" href="#id332" role="doc-backlink"><span class="section-number">13.2.13.55. </span>is_empty_or_null</a><a class="headerlink" href="#is-empty-or-null" title="Link to this heading"></a></h3>
<p>ジオメトリがNULLか空（座標値を持たない）の場合はTRUE、それ以外ならfalseを返します。この関数は、式 <a class="reference external" href="mailto:'&#37;&#52;&#48;geometry">'<span>&#64;</span>geometry</a> IS NULL or is_empty(&#64;geometry)' と同様です</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_empty_or_null(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty_or_null(NULL)</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty_or_null(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2)'))</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty_or_null(geom_from_wkt('LINESTRING</span> <span class="pre">EMPTY'))</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty_or_null(geom_from_wkt('POINT(7</span> <span class="pre">4)'))</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty_or_null(geom_from_wkt('POINT</span> <span class="pre">EMPTY'))</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-is-empty"><span class="std std-ref">is_empty</span></a>, <a class="reference internal" href="#expression-function-fields-and-values-null"><span class="std std-ref">NULL</span></a></p>
</section>
<section id="is-multipart">
<span id="expression-function-geometrygroup-is-multipart"></span><h3><a class="toc-backref" href="#id333" role="doc-backlink"><span class="section-number">13.2.13.56. </span>is_multipart</a><a class="headerlink" href="#is-multipart" title="Link to this heading"></a></h3>
<p>マルチタイプのジオメトリならばTRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_multipart(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_multipart(geom_from_wkt('MULTIPOINT</span> <span class="pre">((0</span> <span class="pre">0),(1</span> <span class="pre">1),(2</span> <span class="pre">2))'))</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_multipart(geom_from_wkt('POINT</span> <span class="pre">(0</span> <span class="pre">0)'))</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="is-valid">
<span id="expression-function-geometrygroup-is-valid"></span><h3><a class="toc-backref" href="#id334" role="doc-backlink"><span class="section-number">13.2.13.57. </span>is_valid</a><a class="headerlink" href="#is-valid" title="Link to this heading"></a></h3>
<p>ジオメトリが有効な場合、つまりOGCの規約に従って正しく作成された2Dジオメトリである場合にはTRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_valid(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_valid(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">0)'))</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_valid(geom_from_wkt('LINESTRING(0</span> <span class="pre">0)'))</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-make-valid"><span class="std std-ref">make_valid</span></a>, <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgischeckvalidity"><span class="std std-ref">有効性チェック</span></a> algorithm</p>
</section>
<section id="length">
<span id="expression-function-geometrygroup-length"></span><h3><a class="toc-backref" href="#id335" role="doc-backlink"><span class="section-number">13.2.13.58. </span>$length</a><a class="headerlink" href="#length" title="Link to this heading"></a></h3>
<p>ラインストリングの長さを返します。ポリゴンの境界の長さを求める場合には、代わりに $perimeter を使用してください。この関数で計算される長さは、現在のプロジェクトの楕円体の設定と距離単位の設定の両方が影響します。例えば、プロジェクトに楕円体が設定されている場合、長さは楕円体長になり、楕円体が設定されていない場合は、長さは平面的に計算されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$length</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$length</span></code> → 42.4711</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id30">
<span id="id31"></span><h3><a class="toc-backref" href="#id336" role="doc-backlink"><span class="section-number">13.2.13.59. </span>length</a><a class="headerlink" href="#id30" title="Link to this heading"></a></h3>
<p>文字列の文字数、またはラインストリングジオメトリの長さを返します。</p>
<p><strong>文字列バージョン</strong></p>
<p>文字列の文字数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>length(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 文字数を数える文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">length('hello')</span></code> → 5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>ジオメトリバージョン</strong></p>
<p>ラインジオメトリオブジェクトの長さを返します。計算は常にこのジオメトリの空間参照系（SRS）で平面的に計算され、長さの単位はSRSの単位と一致します。これは、プロジェクトの楕円体と距離単位設定にもとづいた楕円体計算が行われる $length 関数とは異なります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>length(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">length(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">0)'))</span></code> → 4.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-straight-distance-2d"><span class="std std-ref">straight_distance_2d</span></a></p>
</section>
<section id="length3d">
<span id="expression-function-geometrygroup-length3d"></span><h3><a class="toc-backref" href="#id337" role="doc-backlink"><span class="section-number">13.2.13.60. </span>length3D</a><a class="headerlink" href="#length3d" title="Link to this heading"></a></h3>
<p>ラインオブジェクトのジオメトリの3次元的な長さを返します。ジオメトリが3次元ラインオブジェクトでない場合は、2次元的な長さを返します。この計算は、常にこのジオメトリの空間参照系（SRS）で平面的に計算され、長さの単位はSRSの単位と一致します。この値は、プロジェクトの楕円体と距離単位設定にもとづいた楕円体計算が行われる $length 関数とは異なります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>length3D(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">length3D(geom_from_wkt('LINESTRINGZ(0</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">3</span> <span class="pre">0</span> <span class="pre">4)'))</span></code> → 5.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="line-interpolate-angle">
<span id="expression-function-geometrygroup-line-interpolate-angle"></span><h3><a class="toc-backref" href="#id338" role="doc-backlink"><span class="section-number">13.2.13.61. </span>line_interpolate_angle</a><a class="headerlink" href="#line-interpolate-angle" title="Link to this heading"></a></h3>
<p>ラインストリングジオメトリに沿って指定された距離にある点における、ジオメトリに平行な角度を返します。角度は度単位で、北から時計回りで測ります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>line_interpolate_angle(geometry, distance)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインストリングジオメトリ</p></li>
<li><p><strong>distance</strong> - 角度を内挿したい地点の、線に沿った距離</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">line_interpolate_angle(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),distance:=5)</span></code> → 90.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="line-interpolate-point">
<span id="expression-function-geometrygroup-line-interpolate-point"></span><h3><a class="toc-backref" href="#id339" role="doc-backlink"><span class="section-number">13.2.13.62. </span>line_interpolate_point</a><a class="headerlink" href="#line-interpolate-point" title="Link to this heading"></a></h3>
<p>ラインストリングジオメトリに沿って指定された距離にある点を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>line_interpolate_point(geometry, distance)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインストリングジオメトリ</p></li>
<li><p><strong>distance</strong> - 位置を内挿したい地点の、線に沿った距離</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(line_interpolate_point(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">8</span> <span class="pre">0)'),</span> <span class="pre">distance:=5))</span></code> → 'Point (5 0)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(line_interpolate_point(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">0)'),</span> <span class="pre">distance:=2.1))</span></code> → 'Point (1.48492424 0.51507576)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(line_interpolate_point(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">0)'),</span> <span class="pre">distance:=2))</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id90">
<a class="reference internal image-reference" href="../../../_images/interpolated_point.png"><img alt="../../../_images/interpolated_point.png" src="../../../_images/interpolated_point.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.12 </span><span class="caption-text">ラインの始点から500mの位置に補間された点</span><a class="headerlink" href="#id90" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisinterpolatepoint"><span class="std std-ref">線上の等間隔点</span></a> アルゴリズム</p>
</section>
<section id="line-locate-point">
<span id="expression-function-geometrygroup-line-locate-point"></span><h3><a class="toc-backref" href="#id340" role="doc-backlink"><span class="section-number">13.2.13.63. </span>line_locate_point</a><a class="headerlink" href="#line-locate-point" title="Link to this heading"></a></h3>
<p>指定されたポイントジオメトリに最も近い位置に対応するラインストリング上の地点の、ラインストリングに沿った距離を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>line_locate_point(geometry, point)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインストリングジオメトリ</p></li>
<li><p><strong>point</strong> - ラインストリング上の最も近い点を探すポイントジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">line_locate_point(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),point:=geom_from_wkt('Point(5</span> <span class="pre">0)'))</span></code> → 5.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="line-merge">
<span id="expression-function-geometrygroup-line-merge"></span><h3><a class="toc-backref" href="#id341" role="doc-backlink"><span class="section-number">13.2.13.64. </span>line_merge</a><a class="headerlink" href="#line-merge" title="Link to this heading"></a></h3>
<p>入力されたジオメトリのうち、接続されているラインストリングをすべて単一のラインストリングにマージしたラインストリングまたはマルチラインストリングジオメトリを返します。引数にラインストリングやマルチラインストリング以外のジオメトリが渡された場合、この関数はNULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>line_merge(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインストリング/マルチラインストリングジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(line_merge(geom_from_wkt('MULTILINESTRING((0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1),(1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2))')))</span></code> → 'LineString(0 0,1 1,2 2)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(line_merge(geom_from_wkt('MULTILINESTRING((0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1),(11</span> <span class="pre">1,</span> <span class="pre">21</span> <span class="pre">2))')))</span></code> → 'MultiLineString((0 0, 1 1),(11 1, 21 2)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="line-substring">
<span id="expression-function-geometrygroup-line-substring"></span><h3><a class="toc-backref" href="#id342" role="doc-backlink"><span class="section-number">13.2.13.65. </span>line_substring</a><a class="headerlink" href="#line-substring" title="Link to this heading"></a></h3>
<p>（ラインの始点から測った）指定された開始距離と終了距離の間にあるライン（またはカーブ）ジオメトリの部分を返します。Z値とM値は既存の値から線形内挿されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>line_substring(geometry, start_distance, end_distance)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインストリングまたはカーブジオメトリ</p></li>
<li><p><strong>start_distance</strong> - 切り出しの開始距離</p></li>
<li><p><strong>end_distance</strong> - 切り出しの終了距離</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(line_substring(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),start_distance:=2,end_distance:=6))</span></code> → 'LineString (2 0,6 0)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id91">
<a class="reference internal image-reference" href="../../../_images/substring.png"><img alt="../../../_images/substring.png" src="../../../_images/substring.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.13 </span><span class="caption-text">開始距離を0m、終了距離を250mに設定して切り出されたラインの一部分</span><a class="headerlink" href="#id91" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgislinesubstring"><span class="std std-ref">ラインの一部の切り出し</span></a> アルゴリズム</p>
</section>
<section id="m">
<span id="expression-function-geometrygroup-m"></span><h3><a class="toc-backref" href="#id343" role="doc-backlink"><span class="section-number">13.2.13.66. </span>m</a><a class="headerlink" href="#m" title="Link to this heading"></a></h3>
<p>ポイントジオメトリのm値 (measure) を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>m(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ポイントジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINTM(2</span> <span class="pre">5</span> <span class="pre">4)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 4</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="m-at">
<span id="expression-function-geometrygroup-m-at"></span><h3><a class="toc-backref" href="#id344" role="doc-backlink"><span class="section-number">13.2.13.67. </span>m_at</a><a class="headerlink" href="#m-at" title="Link to this heading"></a></h3>
<p>ジオメトリのm座標を取得します。ジオメトリがm値を持たない場合はNULLになります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>m_at(geometry, vertex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリオブジェクト</p></li>
<li><p><strong>頂点</strong> - ジオメトリの頂点のインデックス（インデックスは0から始まります; 負の値は-1を最後のインデックスとして逆順で数えます）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_at(geom_from_wkt('LineStringZM(0</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">10</span> <span class="pre">0</span> <span class="pre">5,</span> <span class="pre">10</span> <span class="pre">10</span> <span class="pre">0</span> <span class="pre">0)'),</span> <span class="pre">1)</span></code> → 5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="m-max">
<span id="expression-function-geometrygroup-m-max"></span><h3><a class="toc-backref" href="#id345" role="doc-backlink"><span class="section-number">13.2.13.68. </span>m_max</a><a class="headerlink" href="#m-max" title="Link to this heading"></a></h3>
<p>ジオメトリのm値（measure）の最大値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>m_max(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - m値を持つジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_max(</span> <span class="pre">make_point_m(</span> <span class="pre">0,0,1</span> <span class="pre">)</span> <span class="pre">)</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_max(make_line(</span> <span class="pre">make_point_m(</span> <span class="pre">0,0,1</span> <span class="pre">),</span> <span class="pre">make_point_m(</span> <span class="pre">-1,-1,2</span> <span class="pre">),</span> <span class="pre">make_point_m(</span> <span class="pre">-2,-2,0</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="m-min">
<span id="expression-function-geometrygroup-m-min"></span><h3><a class="toc-backref" href="#id346" role="doc-backlink"><span class="section-number">13.2.13.69. </span>m_min</a><a class="headerlink" href="#m-min" title="Link to this heading"></a></h3>
<p>ジオメトリのm値（measure）の最小値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>m_min(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - m値を持つジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_min(</span> <span class="pre">make_point_m(</span> <span class="pre">0,0,1</span> <span class="pre">)</span> <span class="pre">)</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_min(make_line(</span> <span class="pre">make_point_m(</span> <span class="pre">0,0,1</span> <span class="pre">),</span> <span class="pre">make_point_m(</span> <span class="pre">-1,-1,2</span> <span class="pre">),</span> <span class="pre">make_point_m(</span> <span class="pre">-2,-2,0</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="main-angle">
<span id="expression-function-geometrygroup-main-angle"></span><h3><a class="toc-backref" href="#id347" role="doc-backlink"><span class="section-number">13.2.13.70. </span>main_angle</a><a class="headerlink" href="#main-angle" title="Link to this heading"></a></h3>
<p>ジオメトリを完全にカバーする最小の回転長方形の長軸の角度（北を0度として時計回り）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>main_angle(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">main_angle(geom_from_wkt('Polygon</span> <span class="pre">((321577</span> <span class="pre">129614,</span> <span class="pre">321581</span> <span class="pre">129618,</span> <span class="pre">321585</span> <span class="pre">129615,</span> <span class="pre">321581</span> <span class="pre">129610,</span> <span class="pre">321577</span> <span class="pre">129614))'))</span></code> → 38.66</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-circle">
<span id="expression-function-geometrygroup-make-circle"></span><h3><a class="toc-backref" href="#id348" role="doc-backlink"><span class="section-number">13.2.13.71. </span>make_circle</a><a class="headerlink" href="#make-circle" title="Link to this heading"></a></h3>
<p>円形のポリゴンを作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_circle(center, radius, [segments=36])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>center</strong> - 円の中心点</p></li>
<li><p><strong>radius</strong> - 円の半径</p></li>
<li><p><strong>segments</strong> - ポリゴンのセグメント数に関するオプション引数。デフォルト値は36</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_circle(make_point(10,10),</span> <span class="pre">5,</span> <span class="pre">4))</span></code> → 'Polygon ((10 15, 15 10, 10 5, 5 10, 10 15))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_circle(make_point(10,10,5),</span> <span class="pre">5,</span> <span class="pre">4))</span></code> → 'PolygonZ ((10 15 5, 15 10 5, 10 5 5, 5 10 5, 10 15 5))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_circle(make_point(10,10,5,30),</span> <span class="pre">5,</span> <span class="pre">4))</span></code> → 'PolygonZM ((10 15 5 30, 15 10 5 30, 10 5 5 30, 5 10 5 30, 10 15 5 30))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-ellipse">
<span id="expression-function-geometrygroup-make-ellipse"></span><h3><a class="toc-backref" href="#id349" role="doc-backlink"><span class="section-number">13.2.13.72. </span>make_ellipse</a><a class="headerlink" href="#make-ellipse" title="Link to this heading"></a></h3>
<p>楕円形のポリゴンを作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_ellipse(center, semi_major_axis, semi_minor_axis, azimuth, [segments=36])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>center</strong> - 楕円の中心点</p></li>
<li><p><strong>semi_major_axis</strong> - 楕円の半長軸</p></li>
<li><p><strong>semi_minor_axis</strong> - 楕円の半短軸</p></li>
<li><p><strong>azimuth</strong> - 楕円の向き</p></li>
<li><p><strong>segments</strong> - ポリゴンのセグメント数に関するオプション引数。デフォルト値は36</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_ellipse(make_point(10,10),</span> <span class="pre">5,</span> <span class="pre">2,</span> <span class="pre">90,</span> <span class="pre">4))</span></code> → 'Polygon ((15 10, 10 8, 5 10, 10 12, 15 10))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_ellipse(make_point(10,10,5),</span> <span class="pre">5,</span> <span class="pre">2,</span> <span class="pre">90,</span> <span class="pre">4))</span></code> → 'PolygonZ ((15 10 5, 10 8 5, 5 10 5, 10 12 5, 15 10 5))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_ellipse(make_point(10,10,5,30),</span> <span class="pre">5,</span> <span class="pre">2,</span> <span class="pre">90,</span> <span class="pre">4))</span></code> → 'PolygonZM ((15 10 5 30, 10 8 5 30, 5 10 5 30, 10 12 5 30, 15 10 5 30))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-line">
<span id="expression-function-geometrygroup-make-line"></span><h3><a class="toc-backref" href="#id350" role="doc-backlink"><span class="section-number">13.2.13.73. </span>make_line</a><a class="headerlink" href="#make-line" title="Link to this heading"></a></h3>
<p>一連のポイントジオメトリからラインジオメトリを作成します。</p>
<p><strong>引数バージョン</strong></p>
<p>ラインの頂点は、関数の引数として個別に指定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_line(point1, point2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>point</strong> - ポイントジオメトリ（またはポイントの配列）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_line(make_point(2,4),make_point(3,5)))</span></code> → 'LineString (2 4, 3 5)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_line(make_point(2,4),make_point(3,5),make_point(9,7)))</span></code> → 'LineString (2 4, 3 5, 9 7)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>配列バージョン</strong></p>
<p>線の頂点は、ポイントの配列として指定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_line(array)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>array</strong> - ポイントの配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_line(array(make_point(2,4),make_point(3,5),make_point(9,7))))</span></code> → 'LineString (2 4, 3 5, 9 7)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-point">
<span id="expression-function-geometrygroup-make-point"></span><h3><a class="toc-backref" href="#id351" role="doc-backlink"><span class="section-number">13.2.13.74. </span>make_point</a><a class="headerlink" href="#make-point" title="Link to this heading"></a></h3>
<p>xとyの値（とオプションでz値とm値）を指定して、ポイントジオメトリを作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_point(x, y, [z], [m])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>x</strong> - ポイントのx座標</p></li>
<li><p><strong>y</strong> - ポイントのy座標</p></li>
<li><p><strong>z</strong> - （オプション）ポイントのz座標</p></li>
<li><p><strong>m</strong> - （オプション）ポイントのm値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_point(2,4))</span></code> → 'Point (2 4)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_point(2,4,6))</span></code> → 'PointZ (2 4 6)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_point(2,4,6,8))</span></code> → 'PointZM (2 4 6 8)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-point-m">
<span id="expression-function-geometrygroup-make-point-m"></span><h3><a class="toc-backref" href="#id352" role="doc-backlink"><span class="section-number">13.2.13.75. </span>make_point_m</a><a class="headerlink" href="#make-point-m" title="Link to this heading"></a></h3>
<p>x, y座標およびm値からポイントジオメトリを作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_point_m(x, y, m)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>x</strong> - ポイントのx座標</p></li>
<li><p><strong>y</strong> - ポイントのy座標</p></li>
<li><p><strong>m</strong> - ポイントのm値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_point_m(2,4,6))</span></code> → 'PointM (2 4 6)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-polygon">
<span id="expression-function-geometrygroup-make-polygon"></span><h3><a class="toc-backref" href="#id353" role="doc-backlink"><span class="section-number">13.2.13.76. </span>make_polygon</a><a class="headerlink" href="#make-polygon" title="Link to this heading"></a></h3>
<p>外側のリングジオメトリおよび一連の内側リングジオメトリ（オプション）から、ポリゴンジオメトリを作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_polygon(outerRing, [innerRing1], [innerRing2], ...)</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>outerRing</strong> - ポリゴンの外側リングとなる閉じたラインジオメトリ</p></li>
<li><p><strong>innerRing</strong> - （オプション）内側リングとなる閉じたラインジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_polygon(geom_from_wkt('LINESTRING(</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">)')))</span></code> → 'Polygon ((0 0, 0 1, 1 1, 1 0, 0 0))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_polygon(geom_from_wkt('LINESTRING(</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">)'),geom_from_wkt('LINESTRING(</span> <span class="pre">0.1</span> <span class="pre">0.1,</span> <span class="pre">0.1</span> <span class="pre">0.2,</span> <span class="pre">0.2</span> <span class="pre">0.2,</span> <span class="pre">0.2</span> <span class="pre">0.1,</span> <span class="pre">0.1</span> <span class="pre">0.1</span> <span class="pre">)'),geom_from_wkt('LINESTRING(</span> <span class="pre">0.8</span> <span class="pre">0.8,</span> <span class="pre">0.8</span> <span class="pre">0.9,</span> <span class="pre">0.9</span> <span class="pre">0.9,</span> <span class="pre">0.9</span> <span class="pre">0.8,</span> <span class="pre">0.8</span> <span class="pre">0.8</span> <span class="pre">)')))</span></code> → 'Polygon ((0 0, 0 1, 1 1, 1 0, 0 0),(0.1 0.1, 0.1 0.2, 0.2 0.2, 0.2 0.1, 0.1 0.1),(0.8 0.8, 0.8 0.9, 0.9 0.9, 0.9 0.8, 0.8 0.8))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-rectangle-3points">
<span id="expression-function-geometrygroup-make-rectangle-3points"></span><h3><a class="toc-backref" href="#id354" role="doc-backlink"><span class="section-number">13.2.13.77. </span>make_rectangle_3points</a><a class="headerlink" href="#make-rectangle-3points" title="Link to this heading"></a></h3>
<p>３点を指定して長方形を作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_rectangle_3points(point1, point2, point3, [option=0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>point1</strong> - 第1点</p></li>
<li><p><strong>point2</strong> - 第2点</p></li>
<li><p><strong>point3</strong> - 第3点</p></li>
<li><p><strong>option</strong> - 長方形を作成するためのオプション引数。デフォルト値は0。値は 0（距離モード）か1（投影モード）をとる。距離モードの場合、第二距離は第2点と第3点の距離に等しくなります。投影モードの場合、第二距離は第3点をセグメントまたはその延長線上に垂直投影した距離に等しくなります。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_rectangle_3points(make_point(0,</span> <span class="pre">0),</span> <span class="pre">make_point(0,5),</span> <span class="pre">make_point(5,</span> <span class="pre">5),</span> <span class="pre">0))</span></code> → 'Polygon ((0 0, 0 5, 5 5, 5 0, 0 0))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_rectangle_3points(make_point(0,</span> <span class="pre">0),</span> <span class="pre">make_point(0,5),</span> <span class="pre">make_point(5,</span> <span class="pre">3),</span> <span class="pre">1))</span></code> → 'Polygon ((0 0, 0 5, 5 5, 5 0, 0 0))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-regular-polygon">
<span id="expression-function-geometrygroup-make-regular-polygon"></span><h3><a class="toc-backref" href="#id355" role="doc-backlink"><span class="section-number">13.2.13.78. </span>make_regular_polygon</a><a class="headerlink" href="#make-regular-polygon" title="Link to this heading"></a></h3>
<p>正多角形を作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_regular_polygon(center, radius, number_sides, [circle=0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>center</strong> - 正多角形の中心点</p></li>
<li><p><strong>radius</strong> - 2番目の点。内接モードの場合は、最初の頂点です。外接モードの場合は、最初の辺の中間点です。</p></li>
<li><p><strong>number_sides</strong> - 正多角形の辺/エッジの数</p></li>
<li><p><strong>circle</strong> - （オプション）正多角形を作成するモードに関する引数。デフォルトは0。値は0 （内接モード）または1（外接モード）をとる</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_regular_polygon(make_point(0,0),</span> <span class="pre">make_point(0,5),</span> <span class="pre">5))</span></code> → 'Polygon ((0 5, 4.76 1.55, 2.94 -4.05, -2.94 -4.05, -4.76 1.55, 0 5))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_regular_polygon(make_point(0,0),</span> <span class="pre">project(make_point(0,0),</span> <span class="pre">4.0451,</span> <span class="pre">radians(36)),</span> <span class="pre">5))</span></code> → 'Polygon ((0 5, 4.76 1.55, 2.94 -4.05, -2.94 -4.05, -4.76 1.55, 0 5))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-square">
<span id="expression-function-geometrygroup-make-square"></span><h3><a class="toc-backref" href="#id356" role="doc-backlink"><span class="section-number">13.2.13.79. </span>make_square</a><a class="headerlink" href="#make-square" title="Link to this heading"></a></h3>
<p>対角線を指定して正方形を作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_square(point1, point2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>point1</strong> - 対角線の第1点</p></li>
<li><p><strong>point2</strong> - 対角線の第2点</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_square(</span> <span class="pre">make_point(0,0),</span> <span class="pre">make_point(5,5)))</span></code> → 'Polygon ((0 0, -0 5, 5 5, 5 0, 0 0))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_square(</span> <span class="pre">make_point(5,0),</span> <span class="pre">make_point(5,5)))</span></code> → 'Polygon ((5 0, 2.5 2.5, 5 5, 7.5 2.5, 5 0))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-triangle">
<span id="expression-function-geometrygroup-make-triangle"></span><h3><a class="toc-backref" href="#id357" role="doc-backlink"><span class="section-number">13.2.13.80. </span>make_triangle</a><a class="headerlink" href="#make-triangle" title="Link to this heading"></a></h3>
<p>三角形のポリゴンを作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_triangle(point1, point2, point3)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>point1</strong> - 三角形の第1点</p></li>
<li><p><strong>point2</strong> - 三角形の第2点</p></li>
<li><p><strong>point3</strong> - 三角形の第3点</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_triangle(make_point(0,0),</span> <span class="pre">make_point(5,5),</span> <span class="pre">make_point(0,10)))</span></code> → 'Triangle ((0 0, 5 5, 0 10, 0 0))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(boundary(make_triangle(make_point(0,0),</span> <span class="pre">make_point(5,5),</span> <span class="pre">make_point(0,10))))</span></code> → 'LineString (0 0, 5 5, 0 10, 0 0)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="make-valid">
<span id="expression-function-geometrygroup-make-valid"></span><h3><a class="toc-backref" href="#id358" role="doc-backlink"><span class="section-number">13.2.13.81. </span>make_valid</a><a class="headerlink" href="#make-valid" title="Link to this heading"></a></h3>
<p>有効なジオメトリ、またはジオメトリを有効にできない場合は空のジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>make_valid(geometry, [method=structure], [keep_collapsed=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>method</strong> - 修復アルゴリズム。「structure」または「linework」のいずれかを指定します。「linework」オプションは、すべてのリングをノード化されたラインのセットに結合し、そのラインワークから有効なポリゴンを抽出します。「structure」メソッドでは、まずすべてのリングを有効なものにし、次にシェルをマージし、シェルからホールを引いて有効な結果を生成します。ホールとシェルが正しく分類されていることを前提とします。</p></li>
<li><p><strong>keep_collapsed</strong> - trueに設定すると、低い次元に折りたたまれた要素が保持されます。例えば、リングが折りたたまれて線になったり、線が折りたたまれて点になったりするような場合です。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_valid(geom_from_wkt('POLYGON((3</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">1,</span> <span class="pre">5</span> <span class="pre">8,</span> <span class="pre">3</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">2))')))</span></code> → 'Polygon ((3 2, 5 8, 4 1, 3 2))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_valid(geom_from_wkt('POLYGON((3</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">1,</span> <span class="pre">5</span> <span class="pre">8,</span> <span class="pre">3</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">2))'),</span> <span class="pre">'linework'))</span></code> → 'GeometryCollection (Polygon ((5 8, 4 1, 3 2, 5 8)),LineString (3 2, 4 2))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(make_valid(geom_from_wkt('POLYGON((3</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">1,</span> <span class="pre">5</span> <span class="pre">8))'),</span> <span class="pre">method:='linework'))</span></code> → 'Polygon ((3 2, 4 1, 5 8, 3 2))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make_valid(geom_from_wkt('LINESTRING(0</span> <span class="pre">0)'))</span></code> → 空のジオメトリ</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-is-valid"><span class="std std-ref">is_valid</span></a>, <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisfixgeometries"><span class="std std-ref">ジオメトリを修復</span></a> アルゴリズム</p>
</section>
<section id="minimal-circle">
<span id="expression-function-geometrygroup-minimal-circle"></span><h3><a class="toc-backref" href="#id359" role="doc-backlink"><span class="section-number">13.2.13.82. </span>minimal_circle</a><a class="headerlink" href="#minimal-circle" title="Link to this heading"></a></h3>
<p>ジオメトリの最小包囲円を返します。すべてのジオメトリを包み込む最小の円を表します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>minimal_circle(geometry, [segments=36])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>segments</strong> - ポリゴンのセグメント数に関するオプション引数。デフォルト値は36</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">minimal_circle(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(0</span> <span class="pre">5,</span> <span class="pre">0</span> <span class="pre">-5,</span> <span class="pre">2</span> <span class="pre">1)'</span> <span class="pre">),</span> <span class="pre">4</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'Polygon ((0 5, 5 -0, -0 -5, -5 0, 0 5))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">minimal_circle(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'MULTIPOINT(1</span> <span class="pre">2,</span> <span class="pre">3</span> <span class="pre">4,</span> <span class="pre">3</span> <span class="pre">2)'</span> <span class="pre">),</span> <span class="pre">4</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'Polygon ((3 4, 3 2, 1 2, 1 4, 3 4))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisminimumenclosingcircle"><span class="std std-ref">最小包含円</span></a> アルゴリズム</p>
</section>
<section id="nodes-to-points">
<span id="expression-function-geometrygroup-nodes-to-points"></span><h3><a class="toc-backref" href="#id360" role="doc-backlink"><span class="section-number">13.2.13.83. </span>nodes_to_points</a><a class="headerlink" href="#nodes-to-points" title="Link to this heading"></a></h3>
<p>入力ジオメトリのすべてのノードからなるマルチポイントジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>nodes_to_points(geometry, [ignore_closing_nodes=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリオブジェクト</p></li>
<li><p><strong>ignore_closing_nodes</strong> - （オプション）ラインやポリゴンのリングを閉じる重複ノードを戻り値に含めないかどうかを指定します。デフォルトはfalseです。アウトプットのコレクションに重複ノードを含めないようにするには、trueを指定します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(nodes_to_points(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2)')))</span></code> → 'MultiPoint ((0 0),(1 1),(2 2))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(nodes_to_points(geom_from_wkt('POLYGON((-1</span> <span class="pre">-1,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">-1</span> <span class="pre">-1))'),true))</span></code> → 'MultiPoint ((-1 -1),(4 0),(4 2),(0 2))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisextractvertices"><span class="std std-ref">頂点を抽出</span></a> アルゴリズム</p>
</section>
<section id="num-geometries">
<span id="expression-function-geometrygroup-num-geometries"></span><h3><a class="toc-backref" href="#id361" role="doc-backlink"><span class="section-number">13.2.13.84. </span>num_geometries</a><a class="headerlink" href="#num-geometries" title="Link to this heading"></a></h3>
<p>ジオメトリコレクションに含まれるジオメトリの数、またはマルチパーツジオメトリに含まれるパーツの数を返します。入力ジオメトリがコレクションでない場合、この関数はNULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>num_geometries(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリコレクションまたはマルチパートジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">num_geometries(geom_from_wkt('GEOMETRYCOLLECTION(POINT(0</span> <span class="pre">1),</span> <span class="pre">POINT(0</span> <span class="pre">0),</span> <span class="pre">POINT(1</span> <span class="pre">0),</span> <span class="pre">POINT(1</span> <span class="pre">1))'))</span></code> → 4</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_geometries(geom_from_wkt('MULTIPOINT((0</span> <span class="pre">1),</span> <span class="pre">(0</span> <span class="pre">0),</span> <span class="pre">(1</span> <span class="pre">0))'))</span></code> → 3</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="num-interior-rings">
<span id="expression-function-geometrygroup-num-interior-rings"></span><h3><a class="toc-backref" href="#id362" role="doc-backlink"><span class="section-number">13.2.13.85. </span>num_interior_rings</a><a class="headerlink" href="#num-interior-rings" title="Link to this heading"></a></h3>
<p>ポリゴンまたはジオメトリコレクション中の内側のリングの数を返します。ポリゴンでもジオメトリコレクションでもない場合、NULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>num_interior_rings(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - 入力ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">num_interior_rings(geom_from_wkt('POLYGON((-1</span> <span class="pre">-1,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">-1</span> <span class="pre">-1),(-0.1</span> <span class="pre">-0.1,</span> <span class="pre">0.4</span> <span class="pre">0,</span> <span class="pre">0.4</span> <span class="pre">0.2,</span> <span class="pre">0</span> <span class="pre">0.2,</span> <span class="pre">-0.1</span> <span class="pre">-0.1))'))</span></code> → 1</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="num-points">
<span id="expression-function-geometrygroup-num-points"></span><h3><a class="toc-backref" href="#id363" role="doc-backlink"><span class="section-number">13.2.13.86. </span>num_points</a><a class="headerlink" href="#num-points" title="Link to this heading"></a></h3>
<p>ジオメトリの頂点数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>num_points(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">num_points(&#64;geometry)</span></code> → 現在の地物のジオメトリの頂点数</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="num-rings">
<span id="expression-function-geometrygroup-num-rings"></span><h3><a class="toc-backref" href="#id364" role="doc-backlink"><span class="section-number">13.2.13.87. </span>num_rings</a><a class="headerlink" href="#num-rings" title="Link to this heading"></a></h3>
<p>ポリゴンまたはジオメトリコレクション中のリング（外側のリングを含む）の数を返します。ポリゴンでもジオメトリコレクションでもない場合、NULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>num_rings(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - 入力ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">num_rings(geom_from_wkt('POLYGON((-1</span> <span class="pre">-1,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">-1</span> <span class="pre">-1),(-0.1</span> <span class="pre">-0.1,</span> <span class="pre">0.4</span> <span class="pre">0,</span> <span class="pre">0.4</span> <span class="pre">0.2,</span> <span class="pre">0</span> <span class="pre">0.2,</span> <span class="pre">-0.1</span> <span class="pre">-0.1))'))</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="offset-curve">
<span id="expression-function-geometrygroup-offset-curve"></span><h3><a class="toc-backref" href="#id365" role="doc-backlink"><span class="section-number">13.2.13.88. </span>offset_curve</a><a class="headerlink" href="#offset-curve" title="Link to this heading"></a></h3>
<p>ラインストリングジオメトリを側面方向にオフセットさせたジオメトリを返します。距離はこのジオメトリの空間参照系の単位です。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>offset_curve(geometry, distance, [segments=8], [join=1], [miter_limit=2.0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - （マルチ）ラインストリングジオメトリ</p></li>
<li><p><strong>distance</strong> - オフセット距離。正の値はラインの左側にバッファされ、負の値は右にバッファされます</p></li>
<li><p><strong>segments</strong> - 継ぎ目スタイルにroundを使用する場合に、円の四分の一を表現するのに使用するセグメントの数。数値が大きいほど、より多数のノードからなる、滑らかなラインが生成されます。</p></li>
<li><p><strong>join</strong> - 角の継ぎ目スタイル。1 は round、2 は miter 、3 は bevel</p></li>
<li><p><strong>miter_limit</strong> - 非常に鋭い角に使用されるmiter比の制限（miter継ぎ目の場合のみ）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">offset_curve(&#64;geometry,</span> <span class="pre">10.5)</span></code> → 左に10.5単位オフセットしたライン</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset_curve(&#64;geometry,</span> <span class="pre">-10.5)</span></code> → 右に10.5単位オフセットしたライン</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset_curve(&#64;geometry,</span> <span class="pre">10.5,</span> <span class="pre">segments:=16,</span> <span class="pre">join:=1)</span></code> → 左に10.5単位オフセットしたラインで、より多くのセグメントを使った滑らかな曲線</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset_curve(&#64;geometry,</span> <span class="pre">10.5,</span> <span class="pre">join:=3)</span></code> → 左に10.5単位オフセットしたラインで、bebel 継ぎ目を使用</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id92">
<a class="reference internal image-reference" href="../../../_images/offset_lines.png"><img alt="../../../_images/offset_lines.png" src="../../../_images/offset_lines.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.14 </span><span class="caption-text">青色ラインはソースレイヤ、赤色ラインはオフセットしたもの</span><a class="headerlink" href="#id92" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisoffsetline"><span class="std std-ref">オフセット線</span></a> アルゴリズム</p>
</section>
<section id="order-parts">
<span id="expression-function-geometrygroup-order-parts"></span><h3><a class="toc-backref" href="#id366" role="doc-backlink"><span class="section-number">13.2.13.89. </span>order_parts</a><a class="headerlink" href="#order-parts" title="Link to this heading"></a></h3>
<p>与えられた基準によってマルチジオメトリのパートを並べ替えます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>order_parts(geometry, orderby, [ascending=true])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - マルチタイプのジオメトリ</p></li>
<li><p><strong>orderby</strong> - 順序の基準を定義する式</p></li>
<li><p><strong>ascending</strong> - ブール値。True ならば昇順で、Falseならば降順で並べる</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(order_parts(geom_from_wkt('MultiPolygon</span> <span class="pre">(((1</span> <span class="pre">1,</span> <span class="pre">5</span> <span class="pre">1,</span> <span class="pre">5</span> <span class="pre">5,</span> <span class="pre">1</span> <span class="pre">5,</span> <span class="pre">1</span> <span class="pre">1)),((1</span> <span class="pre">1,</span> <span class="pre">9</span> <span class="pre">1,</span> <span class="pre">9</span> <span class="pre">9,</span> <span class="pre">1</span> <span class="pre">9,</span> <span class="pre">1</span> <span class="pre">1)))'),</span> <span class="pre">'area(&#64;geometry)',</span> <span class="pre">False))</span></code> → 'MultiPolygon (((1 1, 9 1, 9 9, 1 9, 1 1)),((1 1, 5 1, 5 5, 1 5, 1 1)))'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(order_parts(geom_from_wkt('LineString(1</span> <span class="pre">2,</span> <span class="pre">3</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">3)'),</span> <span class="pre">'1',</span> <span class="pre">True))</span></code> → 'LineString(1 2, 3 2, 4 3)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="oriented-bbox">
<span id="expression-function-geometrygroup-oriented-bbox"></span><h3><a class="toc-backref" href="#id367" role="doc-backlink"><span class="section-number">13.2.13.90. </span>oriented_bbox</a><a class="headerlink" href="#oriented-bbox" title="Link to this heading"></a></h3>
<p>入力ジオメトリに対して最小となる回転バウンディングボックスのジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>oriented_bbox(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">oriented_bbox(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'MULTIPOINT(1</span> <span class="pre">2,</span> <span class="pre">3</span> <span class="pre">4,</span> <span class="pre">3</span> <span class="pre">2)'</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'Polygon ((3 2, 3 4, 1 4, 1 2, 3 2))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id93">
<a class="reference internal image-reference" href="../../../_images/oriented_minimum_bounding_box.png"><img alt="../../../_images/oriented_minimum_bounding_box.png" src="../../../_images/oriented_minimum_bounding_box.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.15 </span><span class="caption-text">最小の回転長方形</span><a class="headerlink" href="#id93" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisorientedminimumboundingbox"><span class="std std-ref">最小の回転長方形</span></a> アルゴリズム</p>
</section>
<section id="overlaps">
<span id="expression-function-geometrygroup-overlaps"></span><h3><a class="toc-backref" href="#id368" role="doc-backlink"><span class="section-number">13.2.13.91. </span>overlaps</a><a class="headerlink" href="#overlaps" title="Link to this heading"></a></h3>
<p>あるジオメトリがもう一つのジオメトリにオーバーラップするかどうかをテストします。ジオメトリが空間を共有していて、同じ次元であり、かつ、互いが完全に含まれない場合にTRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>overlaps(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">overlaps(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">5,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5,</span> <span class="pre">5</span> <span class="pre">3)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlaps(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="overlay-contains">
<span id="expression-function-geometrygroup-overlay-contains"></span><h3><a class="toc-backref" href="#id369" role="doc-backlink"><span class="section-number">13.2.13.92. </span>overlay_contains</a><a class="headerlink" href="#overlay-contains" title="Link to this heading"></a></h3>
<p>現在の地物が対象レイヤの少なくとも1つの地物を空間的に含んでいるかどうか、または、現在の地物に含まれる対象レイヤの地物に関するQGIS式の結果の配列を返します。</p>
<p>この関数の基礎となるGEOSの &quot;Contains&quot; 述語については、PostGISの <a class="reference external" href="https://postgis.net/docs/ST_Contains.html">ST_Contains</a> 関数の説明を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>overlay_contains(layer, [expression], [filter], [limit], [cache=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - オーバーレイがチェックされるレイヤ</p></li>
<li><p><strong>expression</strong> - （オプション）対象レイヤの地物を評価する式。設定されていない場合には、この関数は一つ以上のマッチがあるかどうかを示すブール値を返します。</p></li>
<li><p><strong>filter</strong> - （オプション）チェック対象地物をフィルタリングするための式。設定されていない場合、全ての地物をチェックします。</p></li>
<li><p><strong>limit</strong> - （オプション）マッチする地物の上限数。設定されていない場合、マッチする全ての地物を返します。</p></li>
<li><p><strong>cache</strong> - この引数をtrueに設定すると、ローカルな空間インデックスを作成します（特に遅いデータプロバイダで作業していない限りは、ほとんどの場合でこれは不要です）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_contains('regions')</span></code> → 現在の地物がregions の地物を空間的に含む場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_contains('regions',</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000)</span></code> → 現在の地物がpopulation が10000より大きいregions の地物を空間的に含む場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_contains('regions',</span> <span class="pre">name)</span></code> → 現在の地物に含まれるregions の地物の名前の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(overlay_contains('regions',</span> <span class="pre">name))</span></code> → 現在の地物に含まれるregions の地物の名前をコンマ区切りで並べた文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_sort(overlay_contains(layer:='regions',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000))</span></code> → 現在の地物に含まれる、population が10000よりも大きな値を持つregions の地物の名前をソートした配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_contains(layer:='regions',</span> <span class="pre">expression:=</span> <span class="pre">geom_to_wkt(&#64;geometry),</span> <span class="pre">limit:=2)</span></code> → 現在の地物に含まれる2つまでのregionsのジオメトリ（WKT形式）の配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-contains"><span class="std std-ref">contains</span></a> 、 <a class="reference internal" href="#array-functions"><span class="std std-ref">配列関数</span></a> 、 <a class="reference internal" href="../processing_algs/qgis/vectorselection.html#qgisselectbylocation"><span class="std std-ref">場所による選択</span></a> アルゴリズム</p>
</section>
<section id="overlay-crosses">
<span id="expression-function-geometrygroup-overlay-crosses"></span><h3><a class="toc-backref" href="#id370" role="doc-backlink"><span class="section-number">13.2.13.93. </span>overlay_crosses</a><a class="headerlink" href="#overlay-crosses" title="Link to this heading"></a></h3>
<p>現在の地物が対象レイヤの少なくとも1つの地物と空間的にクロスしているかどうか、または、現在の地物とクロスする対象レイヤの地物に関するQGIS式の結果の配列を返します。</p>
<p>この関数の基礎となるGEOSの &quot;Crosses&quot; 述語については、PostGISの <a class="reference external" href="https://postgis.net/docs/ST_Crosses.html">ST_Crosses</a> 関数の説明を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>overlay_crosses(layer, [expression], [filter], [limit], [cache=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - オーバーレイがチェックされるレイヤ</p></li>
<li><p><strong>expression</strong> - （オプション）対象レイヤの地物を評価する式。設定されていない場合には、この関数は一つ以上のマッチがあるかどうかを示すブール値を返します。</p></li>
<li><p><strong>filter</strong> - （オプション）チェック対象地物をフィルタリングするための式。設定されていない場合、全ての地物をチェックします。</p></li>
<li><p><strong>limit</strong> - （オプション）マッチする地物の上限数。設定されていない場合、マッチする全ての地物を返します。</p></li>
<li><p><strong>cache</strong> - この引数をtrueに設定すると、ローカルな空間インデックスを作成します（特に遅いデータプロバイダで作業していない限りは、ほとんどの場合でこれは不要です）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_crosses('regions')</span></code> → 現在の地物がregionと空間的にクロスする場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_crosses('regions',</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000)</span></code> → 現在の地物がpopulationが10000を超えるregionと空間的にクロスする場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_crosses('regions',</span> <span class="pre">name)</span></code> → 現在の地物とクロスするregions の地物の名前の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(overlay_crosses('regions',</span> <span class="pre">name))</span></code> → 現在の地物とクロスするregions の地物の名前をコンマ区切りで並べた文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_sort(overlay_crosses(layer:='regions',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000))</span></code> → 現在の地物とクロスする、population が10000よりも大きな値を持つregions の地物の名前をソートした配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_crosses(layer:='regions',</span> <span class="pre">expression:=</span> <span class="pre">geom_to_wkt(&#64;geometry),</span> <span class="pre">limit:=2)</span></code> → 現在の地物とクロスする2つまでのregionsのジオメトリ（WKT形式）の配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-crosses"><span class="std std-ref">crosses</span></a> 、 <a class="reference internal" href="#array-functions"><span class="std std-ref">配列関数</span></a> 、 <a class="reference internal" href="../processing_algs/qgis/vectorselection.html#qgisselectbylocation"><span class="std std-ref">場所による選択</span></a> アルゴリズム</p>
</section>
<section id="overlay-disjoint">
<span id="expression-function-geometrygroup-overlay-disjoint"></span><h3><a class="toc-backref" href="#id371" role="doc-backlink"><span class="section-number">13.2.13.94. </span>overlay_disjoint</a><a class="headerlink" href="#overlay-disjoint" title="Link to this heading"></a></h3>
<p>現在の地物が対象レイヤのすべての地物と空間的に非接続であるかどうか、または、現在の地物と非接続な対象レイヤの地物に関するQGIS式の結果の配列を返します。</p>
<p>この関数の基礎となるGEOSの &quot;Disjoint&quot; 述語については、PostGISの <a class="reference external" href="https://postgis.net/docs/ST_Disjoint.html">ST_Disjoint</a> 関数の説明を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>overlay_disjoint(layer, [expression], [filter], [limit], [cache=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - オーバーレイがチェックされるレイヤ</p></li>
<li><p><strong>expression</strong> - （オプション）対象レイヤの地物を評価する式。設定されていない場合には、この関数は一つ以上のマッチがあるかどうかを示すブール値を返します。</p></li>
<li><p><strong>filter</strong> - （オプション）チェック対象地物をフィルタリングするための式。設定されていない場合、全ての地物をチェックします。</p></li>
<li><p><strong>limit</strong> - （オプション）マッチする地物の上限数。設定されていない場合、マッチする全ての地物を返します。</p></li>
<li><p><strong>cache</strong> - この引数をtrueに設定すると、ローカルな空間インデックスを作成します（特に遅いデータプロバイダで作業していない限りは、ほとんどの場合でこれは不要です）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_disjoint('regions')</span></code> → 現在の地物がregions のすべての地物と空間的に非接続である場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_disjoint('regions',</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000)</span></code> → 現在の地物がpopulation が10000より大きいregions の地物すべてと空間的に非接続である場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_disjoint('regions',</span> <span class="pre">name)</span></code> → 現在の地物と空間的に非接続なregions の地物の名前の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(overlay_disjoint('regions',</span> <span class="pre">name))</span></code> → 現在の地物と空間的に非接続なregions の地物の名前をコンマ区切りで並べた文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_sort(overlay_disjoint(layer:='regions',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000))</span></code> → 現在の地物と空間的に非接続な、population が10000よりも大きな値を持つregions の地物の名前をソートした配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_disjoint(layer:='regions',</span> <span class="pre">expression:=</span> <span class="pre">geom_to_wkt($geometry),</span> <span class="pre">limit:=2)</span></code> → 現在の地物と空間的に非接続な2つまでのregionsのジオメトリ（WKT形式）の配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-disjoint"><span class="std std-ref">disjoint</span></a> 、 <a class="reference internal" href="#array-functions"><span class="std std-ref">配列関数</span></a> 、 <a class="reference internal" href="../processing_algs/qgis/vectorselection.html#qgisselectbylocation"><span class="std std-ref">場所による選択</span></a> アルゴリズム</p>
</section>
<section id="overlay-equals">
<span id="expression-function-geometrygroup-overlay-equals"></span><h3><a class="toc-backref" href="#id372" role="doc-backlink"><span class="section-number">13.2.13.95. </span>overlay_equals</a><a class="headerlink" href="#overlay-equals" title="Link to this heading"></a></h3>
<p>現在の地物が対象レイヤの少なくとも1つの地物と空間的に同じかどうか、または、現在の地物と空間的に同じ対象レイヤの地物に関するQGIS式の結果の配列を返します。</p>
<p>この関数の基礎となるGEOSの &quot;Equals&quot; 述語については、PostGISの <a class="reference external" href="https://postgis.net/docs/ST_Equals.html">ST_Equals</a> 関数の説明を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>overlay_equals(layer, [expression], [filter], [limit], [cache=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - オーバーレイがチェックされるレイヤ</p></li>
<li><p><strong>expression</strong> - （オプション）対象レイヤの地物を評価する式。設定されていない場合には、この関数は一つ以上のマッチがあるかどうかを示すブール値を返します。</p></li>
<li><p><strong>filter</strong> - （オプション）チェック対象地物をフィルタリングするための式。設定されていない場合、全ての地物をチェックします。</p></li>
<li><p><strong>limit</strong> - （オプション）マッチする地物の上限数。設定されていない場合、マッチする全ての地物を返します。</p></li>
<li><p><strong>cache</strong> - この引数をtrueに設定すると、ローカルな空間インデックスを作成します（特に遅いデータプロバイダで作業していない限りは、ほとんどの場合でこれは不要です）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_equals('regions')</span></code> → 現在の地物がregions と空間的に等しい場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_equals('regions',</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000)</span></code> → 現在の地物がpopulation が10000より大きいregions の地物と空間的に同じ場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_equals('regions',</span> <span class="pre">name)</span></code> → 現在の地物と空間的に同じregions の地物の名前の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(overlay_equals('regions',</span> <span class="pre">name))</span></code> → 現在の地物と空間的に同じregions の地物の名前をコンマ区切りで並べた文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_sort(overlay_equals(layer:='regions',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000))</span></code> → 現在の地物と空間的に同じ、population が10000よりも大きな値を持つregions の地物の名前をソートした配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_equals(layer:='regions',</span> <span class="pre">expression:=</span> <span class="pre">geom_to_wkt(&#64;geometry),</span> <span class="pre">limit:=2)</span></code> → 現在の地物と空間的に等しい２つまでのregionsのジオメトリ（WKT形式）の配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#array-functions"><span class="std std-ref">配列関数</span></a> 、 <a class="reference internal" href="../processing_algs/qgis/vectorselection.html#qgisselectbylocation"><span class="std std-ref">場所による選択</span></a> アルゴリズム</p>
</section>
<section id="overlay-intersects">
<span id="expression-function-geometrygroup-overlay-intersects"></span><h3><a class="toc-backref" href="#id373" role="doc-backlink"><span class="section-number">13.2.13.96. </span>overlay_intersects</a><a class="headerlink" href="#overlay-intersects" title="Link to this heading"></a></h3>
<p>現在の地物が対象レイヤの少なくとも1つの地物と空間的に交差しているかどうか、または、現在の地物と交差する対象レイヤの地物に関するQGIS式の結果の配列を返します。</p>
<p>この関数の基礎となるGEOSの &quot;Intersects&quot; 述語については、PostGISの <a class="reference external" href="https://postgis.net/docs/ST_Intersects.html">ST_Intersects</a> 関数の説明を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>overlay_intersects(layer, [expression], [filter], [limit], [cache=false], [min_overlap], [min_inscribed_circle_radius], [return_details], [sort_by_intersection_size])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul>
<li><p><strong>layer</strong> - オーバーレイがチェックされるレイヤ</p></li>
<li><p><strong>expression</strong> - （オプション）対象レイヤの地物を評価する式。設定されていない場合には、この関数は一つ以上のマッチがあるかどうかを示すブール値を返します。</p></li>
<li><p><strong>filter</strong> - （オプション）チェック対象地物をフィルタリングするための式。設定されていない場合、全ての地物をチェックします。</p></li>
<li><p><strong>limit</strong> - （オプション）マッチする地物の上限数。設定されていない場合、マッチする全ての地物を返します。</p></li>
<li><p><strong>cache</strong> - この引数をtrueに設定すると、ローカルな空間インデックスを作成します（特に遅いデータプロバイダで作業していない限りは、ほとんどの場合でこれは不要です）</p></li>
<li><p><strong>min_overlap</strong> - （オプション）除外フィルタを定義します:</p>
<ul class="simple">
<li><p>ポリゴンの場合は、現在の地物の平方単位による交差の最小面積。交差が複数のポリゴンで構成されている場合、そのうち少なくとも1つのポリゴンの面積がこの値以上であれば、交差が返されます。</p></li>
<li><p>ラインの場合、現在の地物の単位による最小の長さ。交差が複数のラインになる場合、そのうち少なくとも1つのラインの長さがこの値以上であれば、交差が返されます。</p></li>
</ul>
</li>
<li><p><strong>min_inscribed_circle_radius</strong> - オプションの除外フィルター（ポリゴンのみ）を定義します：現在の地物の単位による交差の最大内接円の最小半径。交差が複数のポリゴンからなる場合、ポリゴンの少なくとも1つが最大内接円の半径がこの値以上であれば、交差が返されます。</p>
<p>この関数の基礎となるGEOSの述語については、PostGIS <a class="reference external" href="https://postgis.net/docs/ST_MaximumInscribedCircle.html">ST_MaximumInscribedCircle</a> 関数の説明を参照してください。</p>
<p>この引数はGEOS &gt;= 3.9を必要とします。</p>
</li>
<li><p><strong>return_details</strong> - trueに設定すると、地物'id'、式の'result'、'overlap'の値を含むマップのリストを返します（キー名は引用符で囲む）。また、対象レイヤーがポリゴンの場合、最大内接円の'radius'も返されます。expressionパラメータと併用した場合のみ有効</p></li>
<li><p><strong>sort_by_intersection_size</strong> - 式と一緒に使用した場合のみ有効です。この値を 'des' に設定すると、オーバーラップ値で降順に、 'asc' に設定すると昇順に結果を返します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_intersects('regions')</span></code> → 現在の地物がregions の地物と空間的に交差する場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_intersects('regions',</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000)</span></code> → 現在の地物がpopulation が10000より大きいregions の地物と空間的に交差する場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_intersects('regions',</span> <span class="pre">name)</span></code> → 現在の地物と交差するregions の地物の名前の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(overlay_intersects('regions',</span> <span class="pre">name))</span></code> → 現在の地物と交差するregions の地物の名前をコンマ区切りで並べた文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_sort(overlay_intersects(layer:='regions',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000))</span></code> → 現在の地物と交差する、population が10000よりも大きな値を持つregions の地物の名前をソートした配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_intersects(layer:='regions',</span> <span class="pre">expression:=</span> <span class="pre">geom_to_wkt(&#64;geometry),</span> <span class="pre">limit:=2)</span></code> → 現在の地物と交差する２つまでのregionsのジオメトリ（WKT形式）の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_intersects(layer:='regions',</span> <span class="pre">min_overlap:=0.54)</span></code> → 現在の地物がregionと空間的に交差し、その（マルチポリゴンの場合は少なくとも1つの部分の）交差する面積が0.54以上であればTRUE。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_intersects(layer:='regions',</span> <span class="pre">min_inscribed_circle_radius:=0.54)</span></code> → 現在の地物が空間的にregionと交差し、交差する区域の最大内接円の半径（マルチパートの場合、少なくとも１つのパートの半径）が 0.54 以上の場合に TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_intersects(layer:='regions',</span> <span class="pre">expression:=</span> <span class="pre">geom_to_wkt(&#64;geometry),</span> <span class="pre">return_details:=true)</span></code> → 'id', 'result', 'overlap' と 'radius' を含むマップの配列。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_intersects(layer:='regions',</span> <span class="pre">expression:=</span> <span class="pre">geom_to_wkt(&#64;geometry),</span> <span class="pre">sort_by_intersection_size:='des')</span></code> → オーバーラップ値の降順で並べられた（WKTによる）ジオメトリの配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-intersects"><span class="std std-ref">intersects</span></a> 、 <a class="reference internal" href="#array-functions"><span class="std std-ref">配列関数</span></a> 、 <a class="reference internal" href="../processing_algs/qgis/vectorselection.html#qgisselectbylocation"><span class="std std-ref">場所による選択</span></a> アルゴリズム</p>
</section>
<section id="overlay-nearest">
<span id="expression-function-geometrygroup-overlay-nearest"></span><h3><a class="toc-backref" href="#id374" role="doc-backlink"><span class="section-number">13.2.13.97. </span>overlay_nearest</a><a class="headerlink" href="#overlay-nearest" title="Link to this heading"></a></h3>
<p>現在の地物が対象レイヤの地物と指定された距離以内にあるかどうか、または、現在の地物から指定された距離以内にある対象レイヤの地物に関するQGIS式の結果の配列を返します。</p>
<p>注意: この関数は、巨大なレイヤに対しては遅く、大量のメモリを消費することがあります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>overlay_nearest(layer, [expression], [filter], [limit=1], [max_distance], [cache=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - 対象レイヤ</p></li>
<li><p><strong>expression</strong> - （オプション）対象レイヤの地物を評価する式。設定されていない場合には、この関数は一つ以上のマッチがあるかどうかを示すブール値を返します。</p></li>
<li><p><strong>filter</strong> - （オプション）チェック対象地物をフィルタリングするための式。設定されていない場合、 対象レイヤの全ての地物をチェックします。</p></li>
<li><p><strong>limit</strong> - （オプション）マッチする地物の上限数。設定されていない場合、最近傍の地物のみを返します。-1を設定した場合、マッチする全ての地物を返します。</p></li>
<li><p><strong>max_distance</strong> - （オプション）マッチする地物の検索を制限するための距離。設定されていない場合、対象レイヤの全ての地物を検索に使用します。</p></li>
<li><p><strong>cache</strong> - この引数をtrueに設定すると、ローカルな空間インデックスを作成します（特に遅いデータプロバイダで作業していない限りは、ほとんどの場合でこれは不要です）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_nearest('airports')</span></code> → &quot;airports&quot; レイヤに少なくとも1つ地物がある場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_nearest('airports',</span> <span class="pre">max_distance:=</span> <span class="pre">5000)</span></code> → 現在の地物から距離5000地図単位以内に airportsの地物がある場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_nearest('airports',</span> <span class="pre">name)</span></code> → 現在の地物から最も近いairports の地物の名前の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(overlay_nearest('airports',</span> <span class="pre">name))</span></code> → 現在の地物から最も近いairports の地物の名前の文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_nearest(layer:='airports',</span> <span class="pre">expression:=</span> <span class="pre">name,</span> <span class="pre">max_distance:=</span> <span class="pre">5000)</span></code> → 現在の地物から距離5000地図単位以内にある airports の地物のうち、最も近いものの名前の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_nearest(layer:='airports',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">filter:=</span> <span class="pre">&quot;Use&quot;='Civilian',</span> <span class="pre">limit:=3)</span></code> → 現在の地物から最も近い最大3つの民間空港の名前を距離でソートした配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_nearest(layer:='airports',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">limit:=</span> <span class="pre">-1,</span> <span class="pre">max_distance:=</span> <span class="pre">5000)</span></code> → 現在の地物から距離5000地図単位以内にあるすべての airports の地物の名前を距離順でソートした配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#array-functions"><span class="std std-ref">配列関数</span></a> 、 <a class="reference internal" href="../processing_algs/qgis/vectorgeneral.html#qgisjoinbynearest"><span class="std std-ref">属性の最近傍結合</span></a> アルゴリズム</p>
</section>
<section id="overlay-touches">
<span id="expression-function-geometrygroup-overlay-touches"></span><h3><a class="toc-backref" href="#id375" role="doc-backlink"><span class="section-number">13.2.13.98. </span>overlay_touches</a><a class="headerlink" href="#overlay-touches" title="Link to this heading"></a></h3>
<p>現在の地物が対象レイヤの少なくとも1つの地物と空間的に接触しているかどうか、または、現在の地物と接触する対象レイヤの地物に関するQGIS式の結果の配列を返します。</p>
<p>この関数の基礎となるGEOSの &quot;Touches&quot; 述語については、PostGISの <a class="reference external" href="https://postgis.net/docs/ST_Touches.html">ST_Touches</a> 関数の説明を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>overlay_touches(layer, [expression], [filter], [limit], [cache=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - オーバーレイがチェックされるレイヤ</p></li>
<li><p><strong>expression</strong> - （オプション）対象レイヤの地物を評価する式。設定されていない場合には、この関数は一つ以上のマッチがあるかどうかを示すブール値を返します。</p></li>
<li><p><strong>filter</strong> - （オプション）チェック対象地物をフィルタリングするための式。設定されていない場合、全ての地物をチェックします。</p></li>
<li><p><strong>limit</strong> - （オプション）マッチする地物の上限数。設定されていない場合、マッチする全ての地物を返します。</p></li>
<li><p><strong>cache</strong> - この引数をtrueに設定すると、ローカルな空間インデックスを作成します（特に遅いデータプロバイダで作業していない限りは、ほとんどの場合でこれは不要です）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_touches('regions')</span></code> → 現在の地物がregions の地物と空間的に接触する場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_touches('regions',</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000)</span></code> → 現在の地物がpopulation が10000より大きいregions の地物と空間的に接触する場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_touches('regions',</span> <span class="pre">name)</span></code> → 現在の地物と接触するregions の地物の名前の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(overlay_touches('regions',</span> <span class="pre">name))</span></code> → 現在の地物と接触するregions の地物の名前をコンマ区切りで並べた文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_sort(overlay_touches(layer:='regions',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000))</span></code> → 現在の地物と接触する、population が10000よりも大きな値を持つregions の地物の名前をソートした配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_touches(layer:='regions',</span> <span class="pre">expression:=</span> <span class="pre">geom_to_wkt(&#64;geometry),</span> <span class="pre">limit:=2)</span></code> → 現在の地物と接触する2つまでのregionsのジオメトリ（WKT形式）の配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-touches"><span class="std std-ref">touches</span></a> 、 <a class="reference internal" href="#array-functions"><span class="std std-ref">配列関数</span></a> 、 <a class="reference internal" href="../processing_algs/qgis/vectorselection.html#qgisselectbylocation"><span class="std std-ref">場所による選択</span></a> アルゴリズム</p>
</section>
<section id="overlay-within">
<span id="expression-function-geometrygroup-overlay-within"></span><h3><a class="toc-backref" href="#id376" role="doc-backlink"><span class="section-number">13.2.13.99. </span>overlay_within</a><a class="headerlink" href="#overlay-within" title="Link to this heading"></a></h3>
<p>現在の地物が対象レイヤの少なくとも1つの地物に空間的に含まれているかどうか、または、現在の地物を含んでいる対象レイヤの地物に関するQGIS式の結果の配列を返します。</p>
<p>この関数の基礎となるGEOSの &quot;Within&quot; 述語については、PostGISの <a class="reference external" href="https://postgis.net/docs/ST_Within.html">ST_Within</a> 関数の説明を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>overlay_within(layer, [expression], [filter], [limit], [cache=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - オーバーレイがチェックされるレイヤ</p></li>
<li><p><strong>expression</strong> - （オプション）対象レイヤの地物を評価する式。設定されていない場合には、この関数は一つ以上のマッチがあるかどうかを示すブール値を返します。</p></li>
<li><p><strong>filter</strong> - （オプション）チェック対象地物をフィルタリングするための式。設定されていない場合、全ての地物をチェックします。</p></li>
<li><p><strong>limit</strong> - （オプション）マッチする地物の上限数。設定されていない場合、マッチする全ての地物を返します。</p></li>
<li><p><strong>cache</strong> - この引数をtrueに設定すると、ローカルな空間インデックスを作成します（特に遅いデータプロバイダで作業していない限りは、ほとんどの場合でこれは不要です）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_within('regions')</span></code> → 現在の地物がregions の地物によって空間的に含まれる場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_within('regions',</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000)</span></code> → 現在の地物がpopulation が10000より大きいregions の地物によって空間的に含まれる場合にTRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_within('regions',</span> <span class="pre">name)</span></code> → 現在の地物を含むregions の地物の名前の配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(overlay_within('regions',</span> <span class="pre">name))</span></code> → 現在の地物を含むregions の地物の名前をコンマ区切りで並べた文字列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_sort(overlay_within(layer:='regions',</span> <span class="pre">expression:=&quot;name&quot;,</span> <span class="pre">filter:=</span> <span class="pre">population</span> <span class="pre">&gt;</span> <span class="pre">10000))</span></code> → 現在の地物を含む、population が10000よりも大きな値を持つregions の地物の名前をソートした配列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overlay_within(layer:='regions',</span> <span class="pre">expression:=</span> <span class="pre">geom_to_wkt(&#64;geometry),</span> <span class="pre">limit:=2)</span></code> → 現在の地物を含んでいる2つまでのregionsのジオメトリ（WKT形式）の配列</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-within"><span class="std std-ref">within</span></a> 、 <a class="reference internal" href="#array-functions"><span class="std std-ref">配列関数</span></a> 、 <a class="reference internal" href="../processing_algs/qgis/vectorselection.html#qgisselectbylocation"><span class="std std-ref">場所による選択</span></a> アルゴリズム</p>
</section>
<section id="perimeter">
<span id="expression-function-geometrygroup-perimeter"></span><h3><a class="toc-backref" href="#id377" role="doc-backlink"><span class="section-number">13.2.13.100. </span>$perimeter</a><a class="headerlink" href="#perimeter" title="Link to this heading"></a></h3>
<p>現在の地物の周長を返します。この関数で計算される周長は、現在のプロジェクトの楕円体の設定と距離単位の設定の両方が反映されます。例えば、プロジェクトに回転楕円体が設定されている場合は、計算された周長は楕円体長となり、楕円が設定されていない場合には、計算された周長は平面上の長さになります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$perimeter</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$perimeter</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id32">
<span id="id33"></span><h3><a class="toc-backref" href="#id378" role="doc-backlink"><span class="section-number">13.2.13.101. </span>perimeter</a><a class="headerlink" href="#id32" title="Link to this heading"></a></h3>
<p>ポリゴンオブジェクトのジオメトリの周長を返します。周長はこのジオメトリの空間参照系（SRS）で常に平面的に計算され、周長の単位は空間参照系の単位と一致します。この周長は、プロジェクトの楕円体と距離単位設定にもとづいた楕円体計算が行われる $perimeter 関数による面積とは異なります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>perimeter(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ポリゴンジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">perimeter(geom_from_wkt('POLYGON((0</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">0))'))</span></code> → 12.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="point-n">
<span id="expression-function-geometrygroup-point-n"></span><h3><a class="toc-backref" href="#id379" role="doc-backlink"><span class="section-number">13.2.13.102. </span>point_n</a><a class="headerlink" href="#point-n" title="Link to this heading"></a></h3>
<p>ジオメトリの特定のノードを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>point_n(geometry, index)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリオブジェクト</p></li>
<li><p><strong>index</strong> - ノードのインデックス。1は最初のノードです。値が負の場合には、全体の頂点数からその絶対値を引いたインデックスの頂点が選択される</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(point_n(geom_from_wkt('POLYGON((0</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">0))'),2))</span></code> → 'Point (4 0)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisextractspecificvertices"><span class="std std-ref">特定の点を抽出</span></a> アルゴリズム</p>
</section>
<section id="point-on-surface">
<span id="expression-function-geometrygroup-point-on-surface"></span><h3><a class="toc-backref" href="#id380" role="doc-backlink"><span class="section-number">13.2.13.103. </span>point_on_surface</a><a class="headerlink" href="#point-on-surface" title="Link to this heading"></a></h3>
<p>ジオメトリの表面上に存在することが保証される点を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>point_on_surface(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">point_on_surface(&#64;geometry)</span></code> → ポイントジオメトリ</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgispointonsurface"><span class="std std-ref">内部保証点（point on surface）</span></a> アルゴリズム</p>
</section>
<section id="pole-of-inaccessibility">
<span id="expression-function-geometrygroup-pole-of-inaccessibility"></span><h3><a class="toc-backref" href="#id381" role="doc-backlink"><span class="section-number">13.2.13.104. </span>pole_of_inaccessibility</a><a class="headerlink" href="#pole-of-inaccessibility" title="Link to this heading"></a></h3>
<p>ポリゴンの境界から最も離れた内部点である、ポリゴンの近似的な到達不能極を計算します。この関数は、指定された許容範囲内で真の到達不能極をみつけることが保証されている反復的手法である 'polylabel' アルゴリズム（Vladimir Agafonkin, 2016）を使用します。許容範囲を厳しくすると、より多くの反復計算が必要となり、計算時間がかかります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>pole_of_inaccessibility(geometry, tolerance)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>tolerance</strong> - 真の極位置と関数戻り値のポイントの間に許容する最大距離</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(pole_of_inaccessibility(</span> <span class="pre">geom_from_wkt('POLYGON((0</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">9,</span> <span class="pre">3</span> <span class="pre">10,</span> <span class="pre">3</span> <span class="pre">3,</span> <span class="pre">10</span> <span class="pre">3,</span> <span class="pre">10</span> <span class="pre">1,</span> <span class="pre">0</span> <span class="pre">1))'),</span> <span class="pre">0.1))</span></code> → 'Point(1.546875 2.546875)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id94">
<a class="reference internal image-reference" href="../../../_images/pole_inaccessibility.png"><img alt="../../../_images/pole_inaccessibility.png" src="../../../_images/pole_inaccessibility.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.16 </span><span class="caption-text">到達不能極（PIA）</span><a class="headerlink" href="#id94" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgispoleofinaccessibility"><span class="std std-ref">到達不能極（PIA）</span></a> アルゴリズム</p>
</section>
<section id="project">
<span id="expression-function-geometrygroup-project"></span><h3><a class="toc-backref" href="#id382" role="doc-backlink"><span class="section-number">13.2.13.105. </span>project</a><a class="headerlink" href="#project" title="Link to this heading"></a></h3>
<p>距離と、方向（方位角）および仰角をラジアン単位で指定して、始点から投影された点を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>project(point, distance, azimuth, [elevation])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>point</strong> - 起点</p></li>
<li><p><strong>distance</strong> - 投影距離</p></li>
<li><p><strong>azimuth</strong> - 北を0として時計回りで測ったラジアン単位の方位角</p></li>
<li><p><strong>elevation</strong> - ラジアン単位の傾斜角</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(project(make_point(1,</span> <span class="pre">2),</span> <span class="pre">3,</span> <span class="pre">radians(270)))</span></code> → 'Point(-2, 2)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisprojectpointcartesian"><span class="std std-ref">投影点（デカルト座標）</span></a> アルゴリズム</p>
</section>
<section id="relate">
<span id="expression-function-geometrygroup-relate"></span><h3><a class="toc-backref" href="#id383" role="doc-backlink"><span class="section-number">13.2.13.106. </span>relate</a><a class="headerlink" href="#relate" title="Link to this heading"></a></h3>
<p>2つのジオメトリ間の関係の Dimensional Extended 9 Intersection Model（DE-9IM）表現を返します。</p>
<p><strong>リレーションバージョン</strong></p>
<p>2つのジオメトリ間の関係の Dimensional Extended 9 Intersection Model（DE-9IM）表現を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>relate(geometry, geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">relate(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(40</span> <span class="pre">40,120</span> <span class="pre">120)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(40</span> <span class="pre">40,60</span> <span class="pre">120)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'FF1F00102'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>パターンマッチバージョン</strong></p>
<p>2つのジオメトリ間のDE-9IM関係が、指定パターンに一致するかどうかをテストします。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>relate(geometry, geometry, pattern)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>pattern</strong> - マッチさせるDE-9IMパターン</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">relate(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(40</span> <span class="pre">40,120</span> <span class="pre">120)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(40</span> <span class="pre">40,60</span> <span class="pre">120)'</span> <span class="pre">),</span> <span class="pre">'**1F001**'</span> <span class="pre">)</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="reverse">
<span id="expression-function-geometrygroup-reverse"></span><h3><a class="toc-backref" href="#id384" role="doc-backlink"><span class="section-number">13.2.13.107. </span>reverse</a><a class="headerlink" href="#reverse" title="Link to this heading"></a></h3>
<p>頂点の順序を逆にすることによってラインストリングの方向を反転させます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>reverse(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(reverse(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2)')))</span></code> → 'LINESTRING(2 2, 1 1, 0 0)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id95">
<a class="reference internal image-reference" href="../../../_images/reverse_line.png"><img alt="../../../_images/reverse_line.png" src="../../../_images/reverse_line.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.17 </span><span class="caption-text">線の向きを反転する</span><a class="headerlink" href="#id95" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisreverselinedirection"><span class="std std-ref">線の向きの反転</span></a> アルゴリズム</p>
</section>
<section id="rotate">
<span id="expression-function-geometrygroup-rotate"></span><h3><a class="toc-backref" href="#id385" role="doc-backlink"><span class="section-number">13.2.13.108. </span>rotate</a><a class="headerlink" href="#rotate" title="Link to this heading"></a></h3>
<p>回転したジオメトリを返します。計算はジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>rotate(geometry, rotation, [center=NULL], [per_part=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>rotation</strong> - 時計回りの度単位の回転量</p></li>
<li><p><strong>center</strong> - 回転の中心。指定しない場合はバウンディングボックスの中心を使用します</p></li>
<li><p><strong>per_part</strong> - パーツごとに回転を適用します。trueを指定すると、入力ジオメトリがマルチパートで、明示的な回転中心点が指定されていない場合、各パーツのバウンディングボックスの中心を中心に回転が適用されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rotate(&#64;geometry,</span> <span class="pre">45,</span> <span class="pre">make_point(4,</span> <span class="pre">5))</span></code> → 点（4, 5）を中心に時計回りに45度回転させたジオメトリ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotate(&#64;geometry,</span> <span class="pre">45)</span></code> → バウンディングボックスの中央を中心に時計回りに45度回転させたジオメトリ</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id96">
<a class="reference internal image-reference" href="../../../_images/rotate.gif"><img alt="../../../_images/rotate.gif" src="../../../_images/rotate.gif" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.18 </span><span class="caption-text">地物の回転</span><a class="headerlink" href="#id96" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="roundness">
<span id="expression-function-geometrygroup-roundness"></span><h3><a class="toc-backref" href="#id386" role="doc-backlink"><span class="section-number">13.2.13.109. </span>roundness</a><a class="headerlink" href="#roundness" title="Link to this heading"></a></h3>
<p>ポリゴン形状が円にどれだけ近いかを計算します。この関数は、ポリゴン形状が完全な円である場合に TRUE を、完全に平坦である場合に 0 を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>roundness(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ポリゴン</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">round(roundness(geom_from_wkt('POLYGON((</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0))')),</span> <span class="pre">3)</span></code> → 0.785</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">round(roundness(geom_from_wkt('POLYGON((</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0.1,</span> <span class="pre">1</span> <span class="pre">0.1,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0))')),</span> <span class="pre">3)</span></code> → 0.260</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisroundness"><span class="std std-ref">丸み係数</span></a> アルゴリズム</p>
</section>
<section id="scale">
<span id="expression-function-geometrygroup-scale"></span><h3><a class="toc-backref" href="#id387" role="doc-backlink"><span class="section-number">13.2.13.110. </span>scale</a><a class="headerlink" href="#scale" title="Link to this heading"></a></h3>
<p>拡大縮小したジオメトリを返します。計算はジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>scale(geometry, x_scale, y_scale, [center])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>scale_x</strong> - x軸方向スケーリング係数</p></li>
<li><p><strong>scale_y</strong> - y軸方向スケーリング係数</p></li>
<li><p><strong>center</strong> - 拡大縮小の中心。指定しない場合はジオメトリのバウンディングボックスの中心を使用します</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scale(&#64;geometry,</span> <span class="pre">2,</span> <span class="pre">0.5,</span> <span class="pre">make_point(4,</span> <span class="pre">5))</span></code> → (4, 5) の点を中心に、水平方向に2倍、垂直方向に半分に拡大縮小されたジオメトリ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale(&#64;geometry,</span> <span class="pre">2,</span> <span class="pre">0.5)</span></code> → そのバウンディングボックスの中央を中心に、水平方向に2倍、垂直方向に半分にしたジオメトリ</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="segments-to-lines">
<span id="expression-function-geometrygroup-segments-to-lines"></span><h3><a class="toc-backref" href="#id388" role="doc-backlink"><span class="section-number">13.2.13.111. </span>segments_to_lines</a><a class="headerlink" href="#segments-to-lines" title="Link to this heading"></a></h3>
<p>入力ジオメトリのすべてのセグメントからなるマルチラインジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>segments_to_lines(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(segments_to_lines(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">2)')))</span></code> → 'MultiLineString ((0 0, 1 1),(1 1, 2 2))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisexplodelines"><span class="std std-ref">線をセグメントに分解</span></a> アルゴリズム</p>
</section>
<section id="shared-paths">
<span id="expression-function-geometrygroup-shared-paths"></span><h3><a class="toc-backref" href="#id389" role="doc-backlink"><span class="section-number">13.2.13.112. </span>shared_paths</a><a class="headerlink" href="#shared-paths" title="Link to this heading"></a></h3>
<p>2つの入力ジオメトリが共有するパスを含むコレクションを返します。同じ方向に進むものはコレクションの最初の要素に、反対方向に進むものは2番目の要素にあります。パスそのものは、最初のジオメトリの方向で与えられます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>shared_paths(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ラインストリング/マルチラインストリングジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ラインストリング/マルチラインストリングジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(shared_paths(geom_from_wkt('MULTILINESTRING((26</span> <span class="pre">125,26</span> <span class="pre">200,126</span> <span class="pre">200,126</span> <span class="pre">125,26</span> <span class="pre">125),(51</span> <span class="pre">150,101</span> <span class="pre">150,76</span> <span class="pre">175,51</span> <span class="pre">150)))'),geom_from_wkt('LINESTRING(151</span> <span class="pre">100,126</span> <span class="pre">156.25,126</span> <span class="pre">125,90</span> <span class="pre">161,</span> <span class="pre">76</span> <span class="pre">175)')))</span></code> → 'GeometryCollection (MultiLineString ((126 156.25, 126 125),(101 150, 90 161),(90 161, 76 175)),MultiLineString EMPTY)'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(shared_paths(geom_from_wkt('LINESTRING(76</span> <span class="pre">175,90</span> <span class="pre">161,126</span> <span class="pre">125,126</span> <span class="pre">156.25,151</span> <span class="pre">100)'),geom_from_wkt('MULTILINESTRING((26</span> <span class="pre">125,26</span> <span class="pre">200,126</span> <span class="pre">200,126</span> <span class="pre">125,26</span> <span class="pre">125),(51</span> <span class="pre">150,101</span> <span class="pre">150,76</span> <span class="pre">175,51</span> <span class="pre">150))')))</span></code> → 'GeometryCollection (MultiLineString EMPTY,MultiLineString ((76 175, 90 161),(90 161, 101 150),(126 125, 126 156.25)))'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="shortest-line">
<span id="expression-function-geometrygroup-shortest-line"></span><h3><a class="toc-backref" href="#id390" role="doc-backlink"><span class="section-number">13.2.13.113. </span>shortest_line</a><a class="headerlink" href="#shortest-line" title="Link to this heading"></a></h3>
<p>geometry1とgeometry2を結合する最短のラインを返します。向きは、geometry1を始点とし、geometry2を終点とします。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>shortest_line(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - 始点側のジオメトリ</p></li>
<li><p><strong>geometry2</strong> - 終点側のジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(shortest_line(geom_from_wkt('LINESTRING</span> <span class="pre">(20</span> <span class="pre">80,</span> <span class="pre">98</span> <span class="pre">190,</span> <span class="pre">110</span> <span class="pre">180,</span> <span class="pre">50</span> <span class="pre">75</span> <span class="pre">)'),geom_from_wkt('POINT(100</span> <span class="pre">100)')))</span></code> → 'LineString(73.0769 115.384, 100 100)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="simplify">
<span id="expression-function-geometrygroup-simplify"></span><h3><a class="toc-backref" href="#id391" role="doc-backlink"><span class="section-number">13.2.13.114. </span>simplify</a><a class="headerlink" href="#simplify" title="Link to this heading"></a></h3>
<p>距離の閾値を使用してノードを削除し、ジオメトリを単純化します（Douglas Peuckerアルゴリズム）。このアルゴリズムは、ジオメトリの大きな変動は維持し、ほぼ直線のセグメント上にある頂点を減らします。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>simplify(geometry, tolerance)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>tolerance</strong> - 除去される点を決定するための、直線セグメントからの最大偏差</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(simplify(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">5</span> <span class="pre">0.1,</span> <span class="pre">10</span> <span class="pre">0)'),tolerance:=5))</span></code> → 'LineString(0 0, 10 0)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id97">
<a class="reference internal image-reference" href="../../../_images/simplify_geometries.png"><img alt="../../../_images/simplify_geometries.png" src="../../../_images/simplify_geometries.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.19 </span><span class="caption-text">From left to right, source layer and increasing simplification tolerances</span><a class="headerlink" href="#id97" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgissimplifygeometries"><span class="std std-ref">ジオメトリの簡素化</span></a> アルゴリズム</p>
</section>
<section id="simplify-vw">
<span id="expression-function-geometrygroup-simplify-vw"></span><h3><a class="toc-backref" href="#id392" role="doc-backlink"><span class="section-number">13.2.13.115. </span>simplify_vw</a><a class="headerlink" href="#simplify-vw" title="Link to this heading"></a></h3>
<p>面積の閾値を使ってノードを削除し、ジオメトリを単純化します（Visvalingam-Whyattアルゴリズム）。このアルゴリズムは、細長いスパイクやほぼ直線上にあるセグメントなど、非常に小さな面積を生み出す頂点を削除します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>simplify_vw(geometry, tolerance)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>tolerance</strong> -除去されるノードを決定するための、ノードによって形成される面積の最小値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(simplify_vw(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">5</span> <span class="pre">0,</span> <span class="pre">5.01</span> <span class="pre">10,</span> <span class="pre">5.02</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),tolerance:=5))</span></code> → 'LineString(0 0, 10 0)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgissimplifygeometries"><span class="std std-ref">ジオメトリの簡素化</span></a> アルゴリズム</p>
</section>
<section id="single-sided-buffer">
<span id="expression-function-geometrygroup-single-sided-buffer"></span><h3><a class="toc-backref" href="#id393" role="doc-backlink"><span class="section-number">13.2.13.116. </span>single_sided_buffer</a><a class="headerlink" href="#single-sided-buffer" title="Link to this heading"></a></h3>
<p>ラインストリングの片側だけにバッファを作ったジオメトリを返します。距離単位はこのジオメトリの空間参照系の単位です。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>single_sided_buffer(geometry, distance, [segments=8], [join=1], [miter_limit=2.0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - （マルチ）ラインストリングジオメトリ</p></li>
<li><p><strong>distance</strong> - バッファ距離。正の値はラインの左側に、負の値はラインの右側にバッファを作成します</p></li>
<li><p><strong>segments</strong> - 継ぎ目スタイルにroundを使用する場合に、円の四分の一を表現するのに使用するセグメントの数。数値が大きいほど、より多数のノードからなる、滑らかなバッファが生成されます。</p></li>
<li><p><strong>join</strong> - 角の継ぎ目スタイル。1 は round、2 は miter 、3 は bevel</p></li>
<li><p><strong>miter_limit</strong> - 非常に鋭い角に使用されるmiter比の制限（miter継ぎ目の場合のみ）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">single_sided_buffer(&#64;geometry,</span> <span class="pre">10.5)</span></code> → 10.5 単位左にバッファされたライン</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">single_sided_buffer(&#64;geometry,</span> <span class="pre">-10.5)</span></code> → 10.5 単位右にのバッファされたライン</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">single_sided_buffer(&#64;geometry,</span> <span class="pre">10.5,</span> <span class="pre">segments:=16,</span> <span class="pre">join:=1)</span></code> → より滑らかなバッファになるように、より多くのセグメントを使って10.5単位左にバッファされたライン</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">single_sided_buffer($geometry,</span> <span class="pre">10.5,</span> <span class="pre">join:=3)</span></code> → bebel 継ぎ目を使い、10.5単位左にバッファされたライン</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id98">
<a class="reference internal image-reference" href="../../../_images/single_side_buffer.png"><img alt="../../../_images/single_side_buffer.png" src="../../../_images/single_side_buffer.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.20 </span><span class="caption-text">同じベクタラインレイヤに対する左側バッファと右側バッファ</span><a class="headerlink" href="#id98" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgissinglesidedbuffer"><span class="std std-ref">片側バッファ</span></a> アルゴリズム</p>
</section>
<section id="sinuosity">
<span id="expression-function-geometrygroup-sinuosity"></span><h3><a class="toc-backref" href="#id394" role="doc-backlink"><span class="section-number">13.2.13.117. </span>sinuosity</a><a class="headerlink" href="#sinuosity" title="Link to this heading"></a></h3>
<p>曲線の湾曲率、すなわち曲線の両端の（平面的な）直線距離に対する曲線長さの比率を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>sinuosity(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - 入力の曲線（円形ストリング、ラインストリング）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">round(sinuosity(geom_from_wkt('LINESTRING(2</span> <span class="pre">0,</span> <span class="pre">2</span> <span class="pre">2,</span> <span class="pre">3</span> <span class="pre">2,</span> <span class="pre">3</span> <span class="pre">3)')),</span> <span class="pre">3)</span></code> → 1.265</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sinuosity(geom_from_wkt('LINESTRING(</span> <span class="pre">3</span> <span class="pre">1,</span> <span class="pre">5</span> <span class="pre">1)'))</span></code> → 1.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="smooth">
<span id="expression-function-geometrygroup-smooth"></span><h3><a class="toc-backref" href="#id395" role="doc-backlink"><span class="section-number">13.2.13.118. </span>smooth</a><a class="headerlink" href="#smooth" title="Link to this heading"></a></h3>
<p>ノードを追加して角を丸め、ジオメトリを滑らかにしたものを返します。入力ジオメトリにZ値またはM値が含まれている場合には、これらの値も同様に平滑化され、出力ジオメトリは入力ジオメトリと同じ次元を保ちます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>smooth(geometry, [iterations=1], [offset=0.25], [min_length=-1], [max_angle=180])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>iterations</strong> - 適用するスムージングの反復回数。数値が大きいほど、より滑らかになりますが、ジオメトリは複雑になります。</p></li>
<li><p><strong>offset</strong> - 0から0.5までの値で、滑らかにしたジオメトリが元のジオメトリにどれくらい従っているかを制御します。値を小さくすると元ジオメトリによりきつく追従したスムージングとなり、値を大きくすると追従の緩いスムージングとなります。</p></li>
<li><p><strong>min_length</strong> - スムージングを適用するセグメントの長さの下限。このパラメータは、ジオメトリの短いセグメントに余分なノードを追加することを避けるために使用されます。</p></li>
<li><p><strong>max_angle</strong> - 平滑化を適用するノードの最大角度（0〜180）。最大角度を小さくすると、鋭角を維持することができます。例えば、80度とすると、ジオメトリの直角部分は維持されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(smooth(geometry:=geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">5</span> <span class="pre">0,</span> <span class="pre">5</span> <span class="pre">5)'),iterations:=1,offset:=0.2,min_length:=-1,max_angle:=180))</span></code> → 'LineString (0 0, 4 0, 5 1, 5 5)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id99">
<a class="reference internal image-reference" href="../../../_images/smooth_geometry_1.png"><img alt="../../../_images/smooth_geometry_1.png" src="../../../_images/smooth_geometry_1.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.21 </span><span class="caption-text">反復回数を増加させるとジオメトリはより滑らかになる</span><a class="headerlink" href="#id99" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgissmoothgeometry"><span class="std std-ref">スムージング</span></a> アルゴリズム</p>
</section>
<section id="square-wave">
<span id="expression-function-geometrygroup-square-wave"></span><h3><a class="toc-backref" href="#id396" role="doc-backlink"><span class="section-number">13.2.13.119. </span>square_wave</a><a class="headerlink" href="#square-wave" title="Link to this heading"></a></h3>
<p>ジオメトリの境界に沿って方形波/矩形波を構築します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>square_wave(geometry, wavelength, amplitude, [strict=False])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>wavelength</strong> - 方形波の波長</p></li>
<li><p><strong>amplitude</strong> - 矩形波の振幅</p></li>
<li><p><strong>strict</strong> - デフォルトでは、波長の引数は「最大波長」として扱われ、実際の波長はジオメトリの境界に沿って正確な数の矩形波が作成されるように動的に調整されます。strict引数をtrueに設定すると、波長が正確に使用され、最終的な波形に不完全なパターンが使用される可能性があります。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">square_wave(geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),</span> <span class="pre">3,</span> <span class="pre">1)</span></code> → ラインストリングに沿った波長3、振幅1の方形波</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id100">
<a class="reference internal image-reference" href="../../../_images/square_wave.png"><img alt="../../../_images/square_wave.png" src="../../../_images/square_wave.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.22 </span><span class="caption-text">Symbolizing features with square waves</span><a class="headerlink" href="#id100" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="square-wave-randomized">
<span id="expression-function-geometrygroup-square-wave-randomized"></span><h3><a class="toc-backref" href="#id397" role="doc-backlink"><span class="section-number">13.2.13.120. </span>square_wave_randomized</a><a class="headerlink" href="#square-wave-randomized" title="Link to this heading"></a></h3>
<p>ジオメトリの境界に沿ってランダムな方形波／矩形波を構築します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>square_wave_randomized(geometry, min_wavelength, max_wavelength, min_amplitude, max_amplitude, [seed=0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>min_wavelength</strong> - 最小の波長</p></li>
<li><p><strong>max_wavelength</strong> - 最大の波長</p></li>
<li><p><strong>min_amplitude</strong> - 最小の振幅</p></li>
<li><p><strong>max_amplitude</strong> - 最大の振幅</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>seed**は、波を生成するための乱数の根を指定します。seedを0にすると、完全にランダムな波のセットが生成されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">square_wave_randomized(geom_from_wkt('LineString(0</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">0.1,</span> <span class="pre">0.2)</span></code> → ラインストリングに沿った、波長が2～3、振幅が0.1～0.2のランダムなサイズの方形波</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id101">
<a class="reference internal image-reference" href="../../../_images/square_wave_randomized.png"><img alt="../../../_images/square_wave_randomized.png" src="../../../_images/square_wave_randomized.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.23 </span><span class="caption-text">Symbolizing features with square randomized waves</span><a class="headerlink" href="#id101" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="start-point">
<span id="expression-function-geometrygroup-start-point"></span><h3><a class="toc-backref" href="#id398" role="doc-backlink"><span class="section-number">13.2.13.121. </span>start_point</a><a class="headerlink" href="#start-point" title="Link to this heading"></a></h3>
<p>ジオメトリの最初のノードを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>start_point(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(start_point(geom_from_wkt('LINESTRING(4</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">2,</span> <span class="pre">0</span> <span class="pre">2)')))</span></code> → 'Point (4 0)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目： <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgisextractspecificvertices"><span class="std std-ref">特定の点を抽出</span></a> アルゴリズム</p>
</section>
<section id="straight-distance-2d">
<span id="expression-function-geometrygroup-straight-distance-2d"></span><h3><a class="toc-backref" href="#id399" role="doc-backlink"><span class="section-number">13.2.13.122. </span>straight_distance_2d</a><a class="headerlink" href="#straight-distance-2d" title="Link to this heading"></a></h3>
<p>ジオメトリの始点と終点の間の直線距離（ユークリッド距離）を返します。ジオメトリは曲線（円形ストリングまたはラインストリング）でなければなりません。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>straight_distance_2d(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">straight_distance_2d(geom_from_wkt('LINESTRING(1</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">1)'))</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">round(straight_distance_2d(geom_from_wkt('LINESTRING(1</span> <span class="pre">4,</span> <span class="pre">3</span> <span class="pre">5,</span> <span class="pre">5</span> <span class="pre">0)')),</span> <span class="pre">3)</span></code> → 5.657</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#id30"><span class="std std-ref">length</span></a></p>
</section>
<section id="sym-difference">
<span id="expression-function-geometrygroup-sym-difference"></span><h3><a class="toc-backref" href="#id400" role="doc-backlink"><span class="section-number">13.2.13.123. </span>sym_difference</a><a class="headerlink" href="#sym-difference" title="Link to this heading"></a></h3>
<p>2つのジオメトリの、交差しない部分を表すジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>sym_difference(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">sym_difference(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">8</span> <span class="pre">8)'</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'LINESTRING(5 5, 8 8)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectoroverlay.html#qgissymmetricaldifference"><span class="std std-ref">対称差</span></a> アルゴリズム</p>
</section>
<section id="tapered-buffer">
<span id="expression-function-geometrygroup-tapered-buffer"></span><h3><a class="toc-backref" href="#id401" role="doc-backlink"><span class="section-number">13.2.13.124. </span>tapered_buffer</a><a class="headerlink" href="#tapered-buffer" title="Link to this heading"></a></h3>
<p>ラインジオメトリに沿って、バッファの直径が均等に変化していくバッファを作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>tapered_buffer(geometry, start_width, end_width, [segments=8])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - 入力ジオメトリ。（マルチ）ラインジオメトリである必要があります。</p></li>
<li><p><strong>start_width</strong> - 始点のバッファ幅</p></li>
<li><p><strong>end_width</strong> - 終点のバッファ幅</p></li>
<li><p><strong>segments</strong> - バッファの四分円を近似するセグメント数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tapered_buffer(geometry:=geom_from_wkt('LINESTRING(1</span> <span class="pre">2,</span> <span class="pre">4</span> <span class="pre">2)'),start_width:=1,end_width:=2,segments:=8)</span></code> → ラインストリングジオメトリに沿って、直径1で始まり、直径2で終わるテーパードバッファ</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id102">
<a class="reference internal image-reference" href="../../../_images/tapered_buffer.png"><img alt="../../../_images/tapered_buffer.png" src="../../../_images/tapered_buffer.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.24 </span><span class="caption-text">ライン地物に対するテーパードバッファ</span><a class="headerlink" href="#id102" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgistaperedbuffer"><span class="std std-ref">テイパードバッファ</span></a> アルゴリズム</p>
</section>
<section id="touches">
<span id="expression-function-geometrygroup-touches"></span><h3><a class="toc-backref" href="#id402" role="doc-backlink"><span class="section-number">13.2.13.125. </span>touches</a><a class="headerlink" href="#touches" title="Link to this heading"></a></h3>
<p>あるジオメトリがもう一つのジオメトリに接するかどうかをテストします。ジオメトリが共通の点を持ち、かつ内部が交差しない場合、TRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>touches(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">touches(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(5</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(3</span> <span class="pre">3,</span> <span class="pre">4</span> <span class="pre">4,</span> <span class="pre">5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">touches(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">4)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(5</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-overlay-touches"><span class="std std-ref">overlay_touches</span></a></p>
</section>
<section id="transform">
<span id="expression-function-geometrygroup-transform"></span><h3><a class="toc-backref" href="#id403" role="doc-backlink"><span class="section-number">13.2.13.126. </span>transform</a><a class="headerlink" href="#transform" title="Link to this heading"></a></h3>
<p>変換元CRSから変換先CRSに変換されたジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>transform(geometry, source_auth_id, dest_auth_id)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>source_auth_id</strong> - 変換元のCRSのID</p></li>
<li><p><strong>dest_auth_id</strong> - 変換先のCRSのID</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">transform(</span> <span class="pre">make_point(488995.53240249,</span> <span class="pre">7104473.38600835),</span> <span class="pre">'EPSG:2154',</span> <span class="pre">'EPSG:4326'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'POINT(0 51)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeneral.html#qgisreprojectlayer"><span class="std std-ref">レイヤの再投影</span></a> アルゴリズム</p>
</section>
<section id="translate">
<span id="expression-function-geometrygroup-translate"></span><h3><a class="toc-backref" href="#id404" role="doc-backlink"><span class="section-number">13.2.13.127. </span>translate</a><a class="headerlink" href="#translate" title="Link to this heading"></a></h3>
<p>平行移動させたジオメトリを返します。計算はジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>translate(geometry, dx, dy)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>dx</strong> - x方向の移動量</p></li>
<li><p><strong>dy</strong> - y方向の移動量</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">translate(&#64;geometry,</span> <span class="pre">5,</span> <span class="pre">10)</span></code> → 入力ジオメトリと同じタイプのジオメトリ</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id103">
<a class="reference internal image-reference" href="../../../_images/translate_geometry.png"><img alt="../../../_images/translate_geometry.png" src="../../../_images/translate_geometry.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.25 </span><span class="caption-text">地物の平行移動</span><a class="headerlink" href="#id103" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgistranslategeometry"><span class="std std-ref">平行移動（translate）</span></a> アルゴリズム</p>
</section>
<section id="triangular-wave">
<span id="expression-function-geometrygroup-triangular-wave"></span><h3><a class="toc-backref" href="#id405" role="doc-backlink"><span class="section-number">13.2.13.128. </span>triangular_wave</a><a class="headerlink" href="#triangular-wave" title="Link to this heading"></a></h3>
<p>ジオメトリの境界に沿って三角波を構築します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>triangular_wave(geometry, wavelength, amplitude, [strict=False])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>wavelength</strong> - 三角波の波長</p></li>
<li><p><strong>amplitude</strong> - 三角波の振幅</p></li>
<li><p><strong>strict</strong> - デフォルトでは、波長の引数は「最大波長」として扱われ、実際の波長はジオメトリの境界に沿って正確な数の三角波が作成されるように動的に調整されます。strict引数をtrueに設定すると、波長が正確に使用され、最終的な波形に不完全なパターンが使用される可能性があります。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">triangular_wave(geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),</span> <span class="pre">3,</span> <span class="pre">1)</span></code> → ラインストリングに沿った波長3、振幅1の三角波</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id104">
<a class="reference internal image-reference" href="../../../_images/triangular_wave.png"><img alt="../../../_images/triangular_wave.png" src="../../../_images/triangular_wave.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.26 </span><span class="caption-text">Symbolizing features with triangular waves</span><a class="headerlink" href="#id104" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="triangular-wave-randomized">
<span id="expression-function-geometrygroup-triangular-wave-randomized"></span><h3><a class="toc-backref" href="#id406" role="doc-backlink"><span class="section-number">13.2.13.129. </span>triangular_wave_randomized</a><a class="headerlink" href="#triangular-wave-randomized" title="Link to this heading"></a></h3>
<p>ジオメトリの境界に沿ってランダムな三角波を構築します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>triangular_wave_randomized(geometry, min_wavelength, max_wavelength, min_amplitude, max_amplitude, [seed=0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>min_wavelength</strong> - 最小の波長</p></li>
<li><p><strong>max_wavelength</strong> - 最大の波長</p></li>
<li><p><strong>min_amplitude</strong> - 最小の振幅</p></li>
<li><p><strong>max_amplitude</strong> - 最大の振幅</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>seed**は、波を生成するための乱数の根を指定します。seedを0にすると、完全にランダムな波のセットが生成されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">triangular_wave_randomized(geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">0.1,</span> <span class="pre">0.2)</span></code> → ラインストリングに沿った、波長が2～3、振幅が0.1～0.2のランダムなサイズの三角波</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id105">
<a class="reference internal image-reference" href="../../../_images/triangular_wave_randomized.png"><img alt="../../../_images/triangular_wave_randomized.png" src="../../../_images/triangular_wave_randomized.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.27 </span><span class="caption-text">Symbolizing features with triangular randomized waves</span><a class="headerlink" href="#id105" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="union">
<span id="expression-function-geometrygroup-union"></span><h3><a class="toc-backref" href="#id407" role="doc-backlink"><span class="section-number">13.2.13.130. </span>union</a><a class="headerlink" href="#union" title="Link to this heading"></a></h3>
<p>ジオメトリのポイントの和集合を表すジオメトリを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>union(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">union(</span> <span class="pre">make_point(4,</span> <span class="pre">4),</span> <span class="pre">make_point(5,</span> <span class="pre">5)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'MULTIPOINT(4 4, 5 5)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="wave">
<span id="expression-function-geometrygroup-wave"></span><h3><a class="toc-backref" href="#id408" role="doc-backlink"><span class="section-number">13.2.13.131. </span>wave</a><a class="headerlink" href="#wave" title="Link to this heading"></a></h3>
<p>ジオメトリの境界に沿って丸みを帯びた（正弦のような）波を構築します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>wave(geometry, wavelength, amplitude, [strict=False])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>wavelength</strong> - 正弦のような波の波長</p></li>
<li><p><strong>amplitude</strong> - 正弦のような波の振幅</p></li>
<li><p><strong>strict</strong> - デフォルトでは、波長の引数は「最大波長」として扱われ、実際の波長はジオメトリの境界に沿って正確な数の波が作成されるように動的に調整されます。strict引数をtrueに設定すると、波長が正確に使用され、最終的な波形に不完全なパターンが使用される可能性があります。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wave(geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),</span> <span class="pre">3,</span> <span class="pre">1)</span></code> → ラインストリングに沿った、波長3、振幅1の正弦のような波</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id106">
<a class="reference internal image-reference" href="../../../_images/wave.png"><img alt="../../../_images/wave.png" src="../../../_images/wave.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.28 </span><span class="caption-text">Symbolizing features with waves</span><a class="headerlink" href="#id106" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="wave-randomized">
<span id="expression-function-geometrygroup-wave-randomized"></span><h3><a class="toc-backref" href="#id409" role="doc-backlink"><span class="section-number">13.2.13.132. </span>wave_randomized</a><a class="headerlink" href="#wave-randomized" title="Link to this heading"></a></h3>
<p>ジオメトリの境界に沿ってランダムな曲線（正弦のような）波を構築します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>wave_randomized(geometry, min_wavelength, max_wavelength, min_amplitude, max_amplitude, [seed=0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
<li><p><strong>min_wavelength</strong> - 最小の波長</p></li>
<li><p><strong>max_wavelength</strong> - 最大の波長</p></li>
<li><p><strong>min_amplitude</strong> - 最小の振幅</p></li>
<li><p><strong>max_amplitude</strong> - 最大の振幅</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>seed**は、波を生成するための乱数の根を指定します。seedを0にすると、完全にランダムな波のセットが生成されます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wave_randomized(geom_from_wkt('LineString(0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">0)'),</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">0.1,</span> <span class="pre">0.2)</span></code> → ラインストリングに沿った、波長が2～3、振幅が0.1～0.2のランダムなサイズの丸まった波</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id107">
<a class="reference internal image-reference" href="../../../_images/wave_randomized.png"><img alt="../../../_images/wave_randomized.png" src="../../../_images/wave_randomized.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.29 </span><span class="caption-text">Symbolizing features with randomized waves</span><a class="headerlink" href="#id107" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="wedge-buffer">
<span id="expression-function-geometrygroup-wedge-buffer"></span><h3><a class="toc-backref" href="#id410" role="doc-backlink"><span class="section-number">13.2.13.133. </span>wedge_buffer</a><a class="headerlink" href="#wedge-buffer" title="Link to this heading"></a></h3>
<p>ポイントジオメトリを起点とするくさび形のバッファを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>wedge_buffer(center, azimuth, width, outer_radius, [inner_radius=0.0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>center</strong> - バッファの中心点（起点）。ポイントジオメトリでなければなりません。</p></li>
<li><p><strong>azimuth</strong> - くさび形の中央を指す角度（単位は度）</p></li>
<li><p><strong>width</strong> - バッファ幅（度）。くさび形は、方位角の方向にバッファ幅の半分の大きさで両側に伸びることに注意してください。</p></li>
<li><p><strong>outer_radius</strong> - バッファの外側半径</p></li>
<li><p><strong>inner_radius</strong> - （オプション）バッファの内側半径</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wedge_buffer(center:=geom_from_wkt('POINT(1</span> <span class="pre">2)'),azimuth:=90,width:=180,outer_radius:=1)</span></code> → 向きは東向き、角度の幅は180度、外側半径は1の、点（1,2）を中心とするくさび形バッファ</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id108">
<a class="reference internal image-reference" href="../../../_images/wedge_buffers.png"><img alt="../../../_images/wedge_buffers.png" src="../../../_images/wedge_buffers.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">図 13.30 </span><span class="caption-text">Wedge buffering features</span><a class="headerlink" href="#id108" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>関係する項目: <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgiswedgebuffers"><span class="std std-ref">ウェッジバッファを作成</span></a> アルゴリズム</p>
</section>
<section id="within">
<span id="expression-function-geometrygroup-within"></span><h3><a class="toc-backref" href="#id411" role="doc-backlink"><span class="section-number">13.2.13.134. </span>within</a><a class="headerlink" href="#within" title="Link to this heading"></a></h3>
<p>ジオメトリが別のジオメトリの内部にあるかどうかをテストします。geometry1が完全にgeoemtry2の内部にある場合、TRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>within(geometry1, geometry2)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry1</strong> - ジオメトリ</p></li>
<li><p><strong>geometry2</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">within(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(</span> <span class="pre">0.5</span> <span class="pre">0.5)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POLYGON((0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0))'</span> <span class="pre">)</span> <span class="pre">)</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">within(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(</span> <span class="pre">5</span> <span class="pre">5</span> <span class="pre">)'</span> <span class="pre">),</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POLYGON((0</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">1,</span> <span class="pre">1</span> <span class="pre">0,</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">))'</span> <span class="pre">)</span> <span class="pre">)</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-geometrygroup-overlay-within"><span class="std std-ref">overlay_within</span></a></p>
</section>
<section id="x">
<span id="expression-function-geometrygroup-x"></span><h3><a class="toc-backref" href="#id412" role="doc-backlink"><span class="section-number">13.2.13.135. </span>$x</a><a class="headerlink" href="#x" title="Link to this heading"></a></h3>
<p>現在のポイント地物のx座標を返します。地物がマルチポイント地物の場合は、最初のポイントの x 座標が返されます。<strong>警告: この関数は非推奨です。代わりに後継のx()関数を&#64;geometry変数で使うことをお勧めします。</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$x</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$x</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#id34"><span class="std std-ref">x</span></a></p>
</section>
<section id="id34">
<span id="id35"></span><h3><a class="toc-backref" href="#id413" role="doc-backlink"><span class="section-number">13.2.13.136. </span>x</a><a class="headerlink" href="#id34" title="Link to this heading"></a></h3>
<p>ポイントジオメトリのx座標を返します。ポイントジオメトリではない場合には、重心のx座標を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>x(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(2</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x(</span> <span class="pre">&#64;geometry</span> <span class="pre">)</span></code> → 現在の地物の重心のx座標</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="x-at">
<span id="expression-function-geometrygroup-x-at"></span><h3><a class="toc-backref" href="#id414" role="doc-backlink"><span class="section-number">13.2.13.137. </span>$x_at</a><a class="headerlink" href="#x-at" title="Link to this heading"></a></h3>
<p>現在の地物のジオメトリの x 座標を取得します。<strong>警告: この関数は非推奨です。代わりに、後継のx_at 関数を&#64;geometry 変数で使うことをお勧めします。</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$x_at(vertex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>頂点</strong> - 現在のジオメトリの頂点のインデックス（インデックスは0から始まります; 負の値は-1を最後のインデックスとして逆順で数えます）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$x_at(1)</span></code> → 5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#id36"><span class="std std-ref">x_at</span></a></p>
</section>
<section id="id36">
<span id="id37"></span><h3><a class="toc-backref" href="#id415" role="doc-backlink"><span class="section-number">13.2.13.138. </span>x_at</a><a class="headerlink" href="#id36" title="Link to this heading"></a></h3>
<p>ジオメトリのx座標を取得します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>x_at(geometry, vertex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリオブジェクト</p></li>
<li><p><strong>頂点</strong> - ジオメトリの頂点のインデックス（インデックスは0から始まります; 負の値は-1を最後のインデックスとして逆順で数えます）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x_at(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">0</span> <span class="pre">)</span></code> → 4</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="x-max">
<span id="expression-function-geometrygroup-x-max"></span><h3><a class="toc-backref" href="#id416" role="doc-backlink"><span class="section-number">13.2.13.139. </span>x_max</a><a class="headerlink" href="#x-max" title="Link to this heading"></a></h3>
<p>ジオメトリのx座標の最大値を返します。計算はこのジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>x_max(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x_max(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(2</span> <span class="pre">5,</span> <span class="pre">3</span> <span class="pre">6,</span> <span class="pre">4</span> <span class="pre">8)')</span> <span class="pre">)</span></code> → 4</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="x-min">
<span id="expression-function-geometrygroup-x-min"></span><h3><a class="toc-backref" href="#id417" role="doc-backlink"><span class="section-number">13.2.13.140. </span>x_min</a><a class="headerlink" href="#x-min" title="Link to this heading"></a></h3>
<p>ジオメトリのx座標の最小値を返します。計算はこのジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>x_min(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x_min(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(2</span> <span class="pre">5,</span> <span class="pre">3</span> <span class="pre">6,</span> <span class="pre">4</span> <span class="pre">8)')</span> <span class="pre">)</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="y">
<span id="expression-function-geometrygroup-y"></span><h3><a class="toc-backref" href="#id418" role="doc-backlink"><span class="section-number">13.2.13.141. </span>$y</a><a class="headerlink" href="#y" title="Link to this heading"></a></h3>
<p>現在のポイント地物のy座標を返します。地物がマルチポイント地物の場合は、最初のポイントの y 座標が返されます。<strong>警告: この関数は非推奨です。代わりに後継のy()関数を&#64;geometry変数で使うことをお勧めします。</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$y</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$y</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#id38"><span class="std std-ref">y</span></a></p>
</section>
<section id="id38">
<span id="id39"></span><h3><a class="toc-backref" href="#id419" role="doc-backlink"><span class="section-number">13.2.13.142. </span>y</a><a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<p>ポイントジオメトリのy座標を返します。ポイントジオメトリではない場合には、重心のy座標を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>y(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">y(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(2</span> <span class="pre">5)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y(</span> <span class="pre">&#64;geometry</span> <span class="pre">)</span></code> → 現在の地物の重心のy座標</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="y-at">
<span id="expression-function-geometrygroup-y-at"></span><h3><a class="toc-backref" href="#id420" role="doc-backlink"><span class="section-number">13.2.13.143. </span>$y_at</a><a class="headerlink" href="#y-at" title="Link to this heading"></a></h3>
<p>現在の地物のジオメトリの y 座標を取得します。<strong>警告: この関数は非推奨です。代わりに、後継のy_at 関数を&#64;geometry 変数で使うことをお勧めします。</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$y_at(vertex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>頂点</strong> - 現在のジオメトリの頂点のインデックス（インデックスは0から始まります; 負の値は-1を最後のインデックスとして逆順で数えます）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$y_at(1)</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#id40"><span class="std std-ref">y_at</span></a></p>
</section>
<section id="id40">
<span id="id41"></span><h3><a class="toc-backref" href="#id421" role="doc-backlink"><span class="section-number">13.2.13.144. </span>y_at</a><a class="headerlink" href="#id40" title="Link to this heading"></a></h3>
<p>ジオメトリのy座標を取得します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>y_at(geometry, vertex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリオブジェクト</p></li>
<li><p><strong>頂点</strong> - ジオメトリの頂点のインデックス（インデックスは0から始まります; 負の値は-1を最後のインデックスとして逆順で数えます）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">y_at(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT(4</span> <span class="pre">5)'</span> <span class="pre">),</span> <span class="pre">0</span> <span class="pre">)</span></code> → 5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="y-max">
<span id="expression-function-geometrygroup-y-max"></span><h3><a class="toc-backref" href="#id422" role="doc-backlink"><span class="section-number">13.2.13.145. </span>y_max</a><a class="headerlink" href="#y-max" title="Link to this heading"></a></h3>
<p>ジオメトリのy座標の最大値を返します。計算はこのジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>y_max(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">y_max(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(2</span> <span class="pre">5,</span> <span class="pre">3</span> <span class="pre">6,</span> <span class="pre">4</span> <span class="pre">8)')</span> <span class="pre">)</span></code> → 8</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="y-min">
<span id="expression-function-geometrygroup-y-min"></span><h3><a class="toc-backref" href="#id423" role="doc-backlink"><span class="section-number">13.2.13.146. </span>y_min</a><a class="headerlink" href="#y-min" title="Link to this heading"></a></h3>
<p>ジオメトリのy座標の最小値を返します。計算はこのジオメトリの空間参照系で行われます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>y_min(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">y_min(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(2</span> <span class="pre">5,</span> <span class="pre">3</span> <span class="pre">6,</span> <span class="pre">4</span> <span class="pre">8)')</span> <span class="pre">)</span></code> → 5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="z">
<span id="expression-function-geometrygroup-z"></span><h3><a class="toc-backref" href="#id424" role="doc-backlink"><span class="section-number">13.2.13.147. </span>$z</a><a class="headerlink" href="#z" title="Link to this heading"></a></h3>
<p>現在のポイント地物が3Dの場合、そのz値を返します。地物がマルチポイント地物の場合は、最初のポイントの z 値が返されます。<strong>警告: この関数は非推奨です。代わりに後継のz()関数を&#64;geometry変数で使うことをお勧めします。</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$z</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$z</span></code> → 123</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id42">
<span id="id43"></span><h3><a class="toc-backref" href="#id425" role="doc-backlink"><span class="section-number">13.2.13.148. </span>z</a><a class="headerlink" href="#id42" title="Link to this heading"></a></h3>
<p>ポイントジオメトリのz座標を返します。ジオメトリがz座標値を持たない場合、NULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>z(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ポイントジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">z(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINTZ(2</span> <span class="pre">5</span> <span class="pre">7)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 7</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="z-at">
<span id="expression-function-geometrygroup-z-at"></span><h3><a class="toc-backref" href="#id426" role="doc-backlink"><span class="section-number">13.2.13.149. </span>z_at</a><a class="headerlink" href="#z-at" title="Link to this heading"></a></h3>
<p>ジオメトリのz座標を取得します。ジオメトリがz値を持たない場合、NULLになります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>z_at(geometry, vertex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ジオメトリオブジェクト</p></li>
<li><p><strong>頂点</strong> - ジオメトリの頂点のインデックス（インデックスは0から始まります; 負の値は-1を最後のインデックスとして逆順で数えます）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">z_at(geom_from_wkt('LineStringZ(0</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">10</span> <span class="pre">10</span> <span class="pre">5,</span> <span class="pre">10</span> <span class="pre">10</span> <span class="pre">0)'),</span> <span class="pre">1)</span></code> → 5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="z-max">
<span id="expression-function-geometrygroup-z-max"></span><h3><a class="toc-backref" href="#id427" role="doc-backlink"><span class="section-number">13.2.13.150. </span>z_max</a><a class="headerlink" href="#z-max" title="Link to this heading"></a></h3>
<p>ジオメトリのz座標の最大値を返します。z座標値を持たない場合、NULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>z_max(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - z座標を持つジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">z_max(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT</span> <span class="pre">(</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">1</span> <span class="pre">)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z_max(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'MULTIPOINT</span> <span class="pre">(</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">1</span> <span class="pre">,</span> <span class="pre">1</span> <span class="pre">1</span> <span class="pre">3</span> <span class="pre">)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z_max(</span> <span class="pre">make_line(</span> <span class="pre">make_point(</span> <span class="pre">0,0,0</span> <span class="pre">),</span> <span class="pre">make_point(</span> <span class="pre">-1,-1,-2</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z_max(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">1</span> <span class="pre">1</span> <span class="pre">-1</span> <span class="pre">)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z_max(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT</span> <span class="pre">(</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="z-min">
<span id="expression-function-geometrygroup-z-min"></span><h3><a class="toc-backref" href="#id428" role="doc-backlink"><span class="section-number">13.2.13.151. </span>z_min</a><a class="headerlink" href="#z-min" title="Link to this heading"></a></h3>
<p>ジオメトリのz座標の最小値を返します。z座標値を持たない場合、NULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>z_min(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - z座標を持つジオメトリ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">z_min(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT</span> <span class="pre">(</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">1</span> <span class="pre">)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z_min(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'MULTIPOINT</span> <span class="pre">(</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">1</span> <span class="pre">,</span> <span class="pre">1</span> <span class="pre">1</span> <span class="pre">3</span> <span class="pre">)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z_min(</span> <span class="pre">make_line(</span> <span class="pre">make_point(</span> <span class="pre">0,0,0</span> <span class="pre">),</span> <span class="pre">make_point(</span> <span class="pre">-1,-1,-2</span> <span class="pre">)</span> <span class="pre">)</span> <span class="pre">)</span></code> → -2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z_min(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'LINESTRING(</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">0,</span> <span class="pre">1</span> <span class="pre">0</span> <span class="pre">2,</span> <span class="pre">1</span> <span class="pre">1</span> <span class="pre">-1</span> <span class="pre">)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → -1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z_min(</span> <span class="pre">geom_from_wkt(</span> <span class="pre">'POINT</span> <span class="pre">(</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">)'</span> <span class="pre">)</span> <span class="pre">)</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="layout-functions">
<h2><a class="toc-backref" href="#id122" role="doc-backlink"><span class="section-number">13.2.14. </span>レイアウト関数</a><a class="headerlink" href="#layout-functions" title="Link to this heading"></a></h2>
<p>このグループには、印刷レイアウトアイテムのプロパティを操作する関数が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id44">
<ul class="simple">
<li><p><a class="reference internal" href="#item-variables" id="id429">item_variables</a></p></li>
<li><p><a class="reference internal" href="#map-credits" id="id430">map_credits</a></p></li>
</ul>
</nav>
</div>
<section id="item-variables">
<span id="expression-function-layout-item-variables"></span><h3><a class="toc-backref" href="#id429" role="doc-backlink"><span class="section-number">13.2.14.1. </span>item_variables</a><a class="headerlink" href="#item-variables" title="Link to this heading"></a></h3>
<p>この印刷レイアウト内にあるレイアウトアイテムから、変数をマップ型オブジェクトとして返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>item_variables(id)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>id</strong> - レイアウトアイテムのID</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_get(</span> <span class="pre">item_variables('Map</span> <span class="pre">0'),</span> <span class="pre">'map_scale')</span></code> → 現在の印刷レイアウト内にある 'Map 0' アイテムの縮尺</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目：デフォルトの <a class="reference internal" href="#expression-variables"><span class="std std-ref">変数</span></a> のリスト</p>
</section>
<section id="map-credits">
<span id="expression-function-layout-map-credits"></span><h3><a class="toc-backref" href="#id430" role="doc-backlink"><span class="section-number">13.2.14.2. </span>map_credits</a><a class="headerlink" href="#map-credits" title="Link to this heading"></a></h3>
<p>レイアウトまたは特定のレイアウトマップアイテムに表示されているレイヤのクレジット（使用権）文字列のリストを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_credits([id], [include_layer_names=false], [layer_name_separator=': '])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>id</strong> - マップアイテムID。指定されないときは、レイアウトにある全てのマップのレイヤが使われます。</p></li>
<li><p><strong>include_layer_names</strong> - trueに設定すると、クレジット文字列の前にレイヤ名を含めます</p></li>
<li><p><strong>layer_name_separator</strong> - include_layer_names が true の場合に、レイヤ名とクレジット文字列の間に挿入される文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(</span> <span class="pre">map_credits()</span> <span class="pre">)</span></code> →  レイアウトにある全てのマップアイテム内に表示されている全てのレイヤのレイヤクレジットのコンマ区切りリスト。例： 'CC-BY-NC, CC-BY-SA'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(</span> <span class="pre">map_credits(</span> <span class="pre">'Main</span> <span class="pre">Map'</span> <span class="pre">)</span> <span class="pre">)</span></code> →  'Main Map' レイアウトアイテム内に表示されているレイヤのクレジットのコンマ区切りリスト。例： 'CC-BY-NC, CC-BY-SA'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array_to_string(</span> <span class="pre">map_credits(</span> <span class="pre">'Main</span> <span class="pre">Map',</span> <span class="pre">include_layer_names</span> <span class="pre">:=</span> <span class="pre">true,</span> <span class="pre">layer_name_separator</span> <span class="pre">:=</span> <span class="pre">':</span> <span class="pre">'</span> <span class="pre">)</span> <span class="pre">)</span></code> → 'Main Map' レイアウトアイテム内に表示されているレイヤの名前とそのクレジットのコンマ区切りリスト。例： 'Railway lines: CC-BY-NC, Basemap: CC-BY-SA'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>この関数は、レイヤの <a class="reference internal" href="../introduction/general_tools.html#metadatamenu"><span class="std std-ref">「アクセス」メタデータプロパティ</span></a> が入力されていることを必要とします。</p>
</section>
</section>
<section id="map-layers">
<h2><a class="toc-backref" href="#id123" role="doc-backlink"><span class="section-number">13.2.15. </span>地図レイヤ</a><a class="headerlink" href="#map-layers" title="Link to this heading"></a></h2>
<p>このグループには、現在のプロジェクトで利用可能なレイヤーのリストと、各レイヤーのフィールド（データセットに格納されているもの、仮想または補助的なもの、および結合によるもの）が含まれます。フィールドは <a class="reference internal" href="#fields-values"><span class="std std-ref">フィールドと値</span></a> で述べたのと同じように操作することができます。ただし、ダブルクリックすると、フィールドの参照としてではなく、文字列（シングルクォート）として式に追加されます（アクティブレイヤに属さないため）。これは、 <a class="reference internal" href="#aggregates-function"><span class="std std-ref">aggregates</span></a>、 <a class="reference internal" href="#record-attributes"><span class="std std-ref">attribute</span></a>、 <a class="reference internal" href="#geometry-functions"><span class="std std-ref">spatial</span></a> のクエリを実行するときなど、異なるレイヤーを参照する式を書くのに便利な方法となります。</p>
<p>また、このグループにはレイヤを操作するための便利な関数もあります。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id45">
<ul class="simple">
<li><p><a class="reference internal" href="#decode-uri" id="id431">decode_uri</a></p></li>
<li><p><a class="reference internal" href="#layer-property" id="id432">layer_property</a></p></li>
<li><p><a class="reference internal" href="#load-layer" id="id433">load_layer</a></p></li>
</ul>
</nav>
</div>
<section id="decode-uri">
<span id="expression-function-map-layers-decode-uri"></span><h3><a class="toc-backref" href="#id431" role="doc-backlink"><span class="section-number">13.2.15.1. </span>decode_uri</a><a class="headerlink" href="#decode-uri" title="Link to this heading"></a></h3>
<p>レイヤを引数にとり、元のデータプロバイダのuriをデコードします。どのデータが利用できるかは、データプロバイダに依存します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>decode_uri(layer, [part])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - uri をデコードするレイヤ</p></li>
<li><p><strong>part</strong> - uriの一部。指定しない場合は、uri全体をマップ型としたものが返ります。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">decode_uri(&#64;layer)</span></code> → {'layerId': '0', 'layerName': '', 'path': '/home/qgis/shapefile.shp'}</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">decode_uri(&#64;layer)</span></code> → {'layerId': NULL, 'layerName': 'layer', 'path': '/home/qgis/geopackage.gpkg'}</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">decode_uri(&#64;layer,</span> <span class="pre">'path')</span></code> → 'C:\my_data\qgis\shape.shp'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="layer-property">
<span id="expression-function-map-layers-layer-property"></span><h3><a class="toc-backref" href="#id432" role="doc-backlink"><span class="section-number">13.2.15.2. </span>layer_property</a><a class="headerlink" href="#layer-property" title="Link to this heading"></a></h3>
<p>該当するレイヤのプロパティまたはメタデータの値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>layer_property(layer, property)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - レイヤ名かレイヤIDのどちらかを表す文字列</p></li>
<li><p><strong>property</strong> - 戻り値となるプロパティに対応する文字列。有効なオプションは次のとおり：</p>
<ul>
<li><p>name: レイヤ名</p></li>
<li><p>id: レイヤID</p></li>
<li><p>title: メタデータのタイトル文字列</p></li>
<li><p>abstract: メタデータの要約文字列</p></li>
<li><p>keywords: メタデータのキーワード</p></li>
<li><p>data_url: メタデータのURL</p></li>
<li><p>attribution: メタデータの帰属文字列</p></li>
<li><p>attribution_url: メタデータの帰属URL</p></li>
<li><p>source: レイヤのソース</p></li>
<li><p>min_scale: レイヤの最小表示縮尺</p></li>
<li><p>max_scale: レイヤの最大表示縮尺</p></li>
<li><p>is_editable: レイヤが編集モードに入っているか否か</p></li>
<li><p>crs: レイヤのCRS</p></li>
<li><p>crs_definition: レイヤのCRSのProj4定義文字列</p></li>
<li><p>crs_description: レイヤのCRSの名前</p></li>
<li><p>crs_ellipsoid: レイヤCRS楕円体の頭字語</p></li>
<li><p>extent: レイヤの範囲（戻り値はジオメトリオブジェクト）</p></li>
<li><p>distance_units: レイヤの距離単位</p></li>
<li><p>type: レイヤの種類、すなわち「ベクタ」または「ラスタ」</p></li>
<li><p>storage_type: 保存形式（ベクタレイヤのみ）</p></li>
<li><p>geometry_type: ジオメトリの種類。例えば「Point 」など（ベクタレイヤのみ）</p></li>
<li><p>feature_count: レイヤの地物数の概算値（ベクタレイヤのみ）</p></li>
<li><p>path: レイヤのデータソースへのファイルパス。ファイル形式のレイヤのみ利用可</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">layer_property('streets','title')</span></code> → 'Basemap Streets'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layer_property('airports','feature_count')</span></code> → 120</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layer_property('landsat','crs')</span></code> → 'EPSG:4326'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../working_with_vector/vector_properties.html#vectorinformationmenu"><span class="std std-ref">ベクタ</span></a> 、 <a class="reference internal" href="../working_with_raster/raster_properties.html#raster-information"><span class="std std-ref">ラスタ</span></a> 、 <a class="reference internal" href="../working_with_mesh/mesh.html#meshinformation"><span class="std std-ref">メッシュ</span></a> レイヤのプロパティ</p>
</section>
<section id="load-layer">
<span id="expression-function-map-layers-load-layer"></span><h3><a class="toc-backref" href="#id433" role="doc-backlink"><span class="section-number">13.2.15.3. </span>load_layer</a><a class="headerlink" href="#load-layer" title="Link to this heading"></a></h3>
<p>ソースURIとプロバイダ名を使ってレイヤを読み込みます</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>load_layer(uri, provider)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>uri</strong> - レイヤのソースURI文字列</p></li>
<li><p><strong>provider</strong> - レイヤのデータプロバイダ名</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">layer_property(load_layer('c:/data/roads.shp',</span> <span class="pre">'ogr'),</span> <span class="pre">'feature_count')</span></code> → c:/data/roads.shp ベクタレイヤからの地物の数</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="maps-functions">
<span id="index-3"></span><span id="id46"></span><h2><a class="toc-backref" href="#id124" role="doc-backlink"><span class="section-number">13.2.16. </span>マップ関数</a><a class="headerlink" href="#maps-functions" title="Link to this heading"></a></h2>
<p>このグループには、キーと値によるマップ型のデータ構造（辞書オブジェクト、キー・バリューのペア、連想配列とも呼ばれます）の作成と操作のための関数が含まれます。値の順序が重要な <a class="reference internal" href="#array-functions"><span class="std std-ref">リストデータ構造</span></a> とは異なり、マップ型オブジェクトにおけるキーと値のペアの順番は重要ではなく、値はそのキーによって識別されます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id47">
<ul class="simple">
<li><p><a class="reference internal" href="#from-json" id="id434">from_json</a></p></li>
<li><p><a class="reference internal" href="#hstore-to-map" id="id435">hstore_to_map</a></p></li>
<li><p><a class="reference internal" href="#map" id="id436">map</a></p></li>
<li><p><a class="reference internal" href="#map-akeys" id="id437">map_akeys</a></p></li>
<li><p><a class="reference internal" href="#map-avals" id="id438">map_avals</a></p></li>
<li><p><a class="reference internal" href="#map-concat" id="id439">map_concat</a></p></li>
<li><p><a class="reference internal" href="#map-delete" id="id440">map_delete</a></p></li>
<li><p><a class="reference internal" href="#map-exist" id="id441">map_exist</a></p></li>
<li><p><a class="reference internal" href="#map-get" id="id442">map_get</a></p></li>
<li><p><a class="reference internal" href="#map-insert" id="id443">map_insert</a></p></li>
<li><p><a class="reference internal" href="#map-prefix-keys" id="id444">map_prefix_keys</a></p></li>
<li><p><a class="reference internal" href="#map-to-hstore" id="id445">map_to_hstore</a></p></li>
<li><p><a class="reference internal" href="#map-to-html-dl" id="id446">map_to_html_dl</a></p></li>
<li><p><a class="reference internal" href="#map-to-html-table" id="id447">map_to_html_table</a></p></li>
<li><p><a class="reference internal" href="#to-json" id="id448">to_json</a></p></li>
<li><p><a class="reference internal" href="#url-encode" id="id449">url_encode</a></p></li>
</ul>
</nav>
</div>
<section id="from-json">
<span id="expression-function-maps-from-json"></span><h3><a class="toc-backref" href="#id434" role="doc-backlink"><span class="section-number">13.2.16.1. </span>from_json</a><a class="headerlink" href="#from-json" title="Link to this heading"></a></h3>
<p>JSON 形式の文字列を読み込みます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>from_json(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - JSON文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from_json('{&quot;qgis&quot;:&quot;rocks&quot;}')</span></code> → { 'qgis': 'rocks' }</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_json('[1,2,3]')</span></code> → [1,2,3]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="hstore-to-map">
<span id="expression-function-maps-hstore-to-map"></span><h3><a class="toc-backref" href="#id435" role="doc-backlink"><span class="section-number">13.2.16.2. </span>hstore_to_map</a><a class="headerlink" href="#hstore-to-map" title="Link to this heading"></a></h3>
<p>hstore形式の文字列をマップ型オブジェクトに変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>hstore_to_map(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 入力文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hstore_to_map('qgis=&gt;rocks')</span></code> → { 'qgis': 'rocks' }</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map">
<span id="expression-function-maps-map"></span><h3><a class="toc-backref" href="#id436" role="doc-backlink"><span class="section-number">13.2.16.3. </span>map</a><a class="headerlink" href="#map" title="Link to this heading"></a></h3>
<p>パラメータのペアとして渡された、すべてのキーと値のマップ型オブジェクトを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map(key1, value1, key2, value2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>key</strong> - キー（文字列）</p></li>
<li><p><strong>value</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map('1','one','2',</span> <span class="pre">'two')</span></code> → { '1': 'one', '2': 'two' }</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map('1','one','2',</span> <span class="pre">'two')['1']</span></code> → 'one'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-akeys">
<span id="expression-function-maps-map-akeys"></span><h3><a class="toc-backref" href="#id437" role="doc-backlink"><span class="section-number">13.2.16.4. </span>map_akeys</a><a class="headerlink" href="#map-akeys" title="Link to this heading"></a></h3>
<p>マップ型オブジェクトのすべてのキーを、配列として返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_akeys(map)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_akeys(map('1','one','2','two'))</span></code> → [ '1', '2' ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-avals">
<span id="expression-function-maps-map-avals"></span><h3><a class="toc-backref" href="#id438" role="doc-backlink"><span class="section-number">13.2.16.5. </span>map_avals</a><a class="headerlink" href="#map-avals" title="Link to this heading"></a></h3>
<p>マップ型オブジェクトのすべての値を、配列として返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_avals(map)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_avals(map('1','one','2','two'))</span></code> → [ 'one', 'two' ]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-concat">
<span id="expression-function-maps-map-concat"></span><h3><a class="toc-backref" href="#id439" role="doc-backlink"><span class="section-number">13.2.16.6. </span>map_concat</a><a class="headerlink" href="#map-concat" title="Link to this heading"></a></h3>
<p>与えられたマップ型の全てのエントリを含むマップ型オブジェクトを返します。2つのマップ型オブジェクトに同じキーが含まれている場合、値は後者のマップ型のものが採用されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_concat(map1, map2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_concat(map('1','one',</span> <span class="pre">'2','overridden'),map('2','two',</span> <span class="pre">'3','three'))</span></code> → { '1': 'one', '2': 'two', '3': 'three' }</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-delete">
<span id="expression-function-maps-map-delete"></span><h3><a class="toc-backref" href="#id440" role="doc-backlink"><span class="section-number">13.2.16.7. </span>map_delete</a><a class="headerlink" href="#map-delete" title="Link to this heading"></a></h3>
<p>指定されたキーとこれに対応する値が削除されたマップ型オブジェクトを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_delete(map, key)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
<li><p><strong>key</strong> - 削除するキー</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_delete(map('1','one','2','two'),'2')</span></code> → { '1': 'one' }</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-exist">
<span id="expression-function-maps-map-exist"></span><h3><a class="toc-backref" href="#id441" role="doc-backlink"><span class="section-number">13.2.16.8. </span>map_exist</a><a class="headerlink" href="#map-exist" title="Link to this heading"></a></h3>
<p>指定されたキーがマップ型オブジェクトに存在する場合、TRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_exist(map, key)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
<li><p><strong>key</strong> - 調べたいキー</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_exist(map('1','one','2','two'),'3')</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-get">
<span id="expression-function-maps-map-get"></span><h3><a class="toc-backref" href="#id442" role="doc-backlink"><span class="section-number">13.2.16.9. </span>map_get</a><a class="headerlink" href="#map-get" title="Link to this heading"></a></h3>
<p>マップ型オブジェクトのキーで指定された値を返します。存在しないキーの場合はNULLを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_get(map, key)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
<li><p><strong>key</strong> - 調べたいキー</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_get(map('1','one','2','two'),'2')</span></code> → 'two'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map_get(</span> <span class="pre">item_variables('Map</span> <span class="pre">0'),</span> <span class="pre">'map_scale')</span></code> → （存在する場合には）現在の印刷レイアウト内にある 'Map 0' アイテムの縮尺</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="admonition-title">ヒント</p>
<p>マップ型から値を取得するには <a class="reference internal" href="#expression-function-operators-index"><span class="std std-ref">インデックス演算子 ([])</span></a> も使用できます。</p>
</div>
</section>
<section id="map-insert">
<span id="expression-function-maps-map-insert"></span><h3><a class="toc-backref" href="#id443" role="doc-backlink"><span class="section-number">13.2.16.10. </span>map_insert</a><a class="headerlink" href="#map-insert" title="Link to this heading"></a></h3>
<p>キーと値が追加されたマップ型オブジェクトを返します。キーが既に存在する場合は、その値が上書きされます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_insert(map, key, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
<li><p><strong>key</strong> - 追加するキー</p></li>
<li><p><strong>value</strong> - 追加する値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_insert(map('1','one'),'3','three')</span></code> → { '1': 'one', '3': 'three' }</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map_insert(map('1','one','2','overridden'),'2','two')</span></code> → { '1': 'one', '2': 'two' }</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-prefix-keys">
<span id="expression-function-maps-map-prefix-keys"></span><h3><a class="toc-backref" href="#id444" role="doc-backlink"><span class="section-number">13.2.16.11. </span>map_prefix_keys</a><a class="headerlink" href="#map-prefix-keys" title="Link to this heading"></a></h3>
<p>すべてのキーが与えられた文字列でプリフィックスされたマップを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_prefix_keys(map, prefix)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
<li><p><strong>prefix</strong> - 文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_prefix_keys(map('1','one','2','two'),</span> <span class="pre">'prefix-')</span></code> → { 'prefix-1': 'one', 'prefix-2': 'two' }</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-to-hstore">
<span id="expression-function-maps-map-to-hstore"></span><h3><a class="toc-backref" href="#id445" role="doc-backlink"><span class="section-number">13.2.16.12. </span>map_to_hstore</a><a class="headerlink" href="#map-to-hstore" title="Link to this heading"></a></h3>
<p>地図要素をhstore形式の文字列に結合します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_to_hstore(map)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_to_hstore(map('qgis','rocks'))</span></code> → '&quot;qgis&quot;=&gt;&quot;rocks&quot;'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-to-html-dl">
<span id="expression-function-maps-map-to-html-dl"></span><h3><a class="toc-backref" href="#id446" role="doc-backlink"><span class="section-number">13.2.16.13. </span>map_to_html_dl</a><a class="headerlink" href="#map-to-html-dl" title="Link to this heading"></a></h3>
<p>地図要素をHTML定義リスト文字列に結合します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_to_html_dl(map)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_to_html_dl(map('qgis','rocks'))</span></code> → &lt;dl&gt;&lt;dt&gt;qgis&lt;/dt&gt;&lt;dd&gt;rocks&lt;/dd&gt;&lt;/dl&gt;</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="map-to-html-table">
<span id="expression-function-maps-map-to-html-table"></span><h3><a class="toc-backref" href="#id447" role="doc-backlink"><span class="section-number">13.2.16.14. </span>map_to_html_table</a><a class="headerlink" href="#map-to-html-table" title="Link to this heading"></a></h3>
<p>地図要素をHTMLテーブル文字列に結合します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>map_to_html_table(map)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ型オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_to_html_table(map('qgis','rocks'))</span></code> → &lt;table&gt;&lt;thead&gt;&lt;th&gt;qgis&lt;/th&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;rocks&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="to-json">
<span id="expression-function-maps-to-json"></span><h3><a class="toc-backref" href="#id448" role="doc-backlink"><span class="section-number">13.2.16.15. </span>to_json</a><a class="headerlink" href="#to-json" title="Link to this heading"></a></h3>
<p>マップ型オブジェクトや配列、その他の値などから、JSON文字列を作成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_json(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 入力値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_json(map('qgis','rocks'))</span></code> → {&quot;qgis&quot;:&quot;rocks&quot;}</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_json(array(1,2,3))</span></code> → [1,2,3]</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="url-encode">
<span id="expression-function-maps-url-encode"></span><h3><a class="toc-backref" href="#id449" role="doc-backlink"><span class="section-number">13.2.16.16. </span>url_encode</a><a class="headerlink" href="#url-encode" title="Link to this heading"></a></h3>
<p>マップから URL エンコードされた文字列を返します。すべての文字を適切にエンコードした形で変換し、完全準拠のクエリ文字列を生成します。</p>
<p>プラス記号 '+' は変換されないことに注意してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>url_encode(map)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>map</strong> - マップ。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">url_encode(map('a&amp;+b',</span> <span class="pre">'a</span> <span class="pre">and</span> <span class="pre">plus</span> <span class="pre">b',</span> <span class="pre">'a=b',</span> <span class="pre">'a</span> <span class="pre">equals</span> <span class="pre">b'))</span></code> → 'a%26+b=a%20and%20plus%20b&amp;a%3Db=a%20equals%20b'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="mathematical-functions">
<h2><a class="toc-backref" href="#id125" role="doc-backlink"><span class="section-number">13.2.17. </span>数学関数</a><a class="headerlink" href="#mathematical-functions" title="Link to this heading"></a></h2>
<p>このグループには、数学関数（例えば平方根や sin、cosなど）が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id48">
<ul class="simple">
<li><p><a class="reference internal" href="#abs" id="id450">abs</a></p></li>
<li><p><a class="reference internal" href="#acos" id="id451">acos</a></p></li>
<li><p><a class="reference internal" href="#asin" id="id452">asin</a></p></li>
<li><p><a class="reference internal" href="#atan" id="id453">atan</a></p></li>
<li><p><a class="reference internal" href="#atan2" id="id454">atan2</a></p></li>
<li><p><a class="reference internal" href="#ceil" id="id455">ceil</a></p></li>
<li><p><a class="reference internal" href="#clamp" id="id456">clamp</a></p></li>
<li><p><a class="reference internal" href="#cos" id="id457">cos</a></p></li>
<li><p><a class="reference internal" href="#degrees" id="id458">degrees</a></p></li>
<li><p><a class="reference internal" href="#exp" id="id459">exp</a></p></li>
<li><p><a class="reference internal" href="#floor" id="id460">floor</a></p></li>
<li><p><a class="reference internal" href="#ln" id="id461">ln</a></p></li>
<li><p><a class="reference internal" href="#log" id="id462">log</a></p></li>
<li><p><a class="reference internal" href="#log10" id="id463">log10</a></p></li>
<li><p><a class="reference internal" href="#max" id="id464">max</a></p></li>
<li><p><a class="reference internal" href="#min" id="id465">min</a></p></li>
<li><p><a class="reference internal" href="#pi" id="id466">pi</a></p></li>
<li><p><a class="reference internal" href="#radians" id="id467">radians</a></p></li>
<li><p><a class="reference internal" href="#rand" id="id468">rand</a></p></li>
<li><p><a class="reference internal" href="#randf" id="id469">randf</a></p></li>
<li><p><a class="reference internal" href="#round" id="id470">round</a></p></li>
<li><p><a class="reference internal" href="#scale-exponential" id="id471">scale_exponential</a></p></li>
<li><p><a class="reference internal" href="#scale-linear" id="id472">scale_linear</a></p></li>
<li><p><a class="reference internal" href="#scale-polynomial" id="id473">scale_polynomial</a></p></li>
<li><p><a class="reference internal" href="#sin" id="id474">sin</a></p></li>
<li><p><a class="reference internal" href="#sqrt" id="id475">sqrt</a></p></li>
<li><p><a class="reference internal" href="#tan" id="id476">tan</a></p></li>
</ul>
</nav>
</div>
<section id="abs">
<span id="expression-function-math-abs"></span><h3><a class="toc-backref" href="#id450" role="doc-backlink"><span class="section-number">13.2.17.1. </span>abs</a><a class="headerlink" href="#abs" title="Link to this heading"></a></h3>
<p>数値の絶対値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>abs(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">abs(-2)</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="acos">
<span id="expression-function-math-acos"></span><h3><a class="toc-backref" href="#id451" role="doc-backlink"><span class="section-number">13.2.17.2. </span>acos</a><a class="headerlink" href="#acos" title="Link to this heading"></a></h3>
<p>逆余弦（アークコサイン）をラジアンで返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>acos(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 角度の余弦</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">acos(0.5)</span></code> → 1.0471975511966</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="asin">
<span id="expression-function-math-asin"></span><h3><a class="toc-backref" href="#id452" role="doc-backlink"><span class="section-number">13.2.17.3. </span>asin</a><a class="headerlink" href="#asin" title="Link to this heading"></a></h3>
<p>逆正弦（アークサイン）をラジアンで返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>asin(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 角度の正弦</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">asin(1.0)</span></code> → 1.5707963267949</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="atan">
<span id="expression-function-math-atan"></span><h3><a class="toc-backref" href="#id453" role="doc-backlink"><span class="section-number">13.2.17.4. </span>atan</a><a class="headerlink" href="#atan" title="Link to this heading"></a></h3>
<p>逆正接（アークタンジェント）をラジアンで返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>atan(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 角度の正接</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">atan(0.5)</span></code> → 0.463647609000806</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="atan2">
<span id="expression-function-math-atan2"></span><h3><a class="toc-backref" href="#id454" role="doc-backlink"><span class="section-number">13.2.17.5. </span>atan2</a><a class="headerlink" href="#atan2" title="Link to this heading"></a></h3>
<p>2つの引数の符号を用いて象限を決定し、dy/dxの逆正接（アークタンジェント）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>atan2(dy, dx)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>dy</strong> - y座標の差</p></li>
<li><p><strong>dx</strong> - x座標の差</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">atan2(1.0,</span> <span class="pre">1.732)</span></code> → 0.523611477769969</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="ceil">
<span id="expression-function-math-ceil"></span><h3><a class="toc-backref" href="#id455" role="doc-backlink"><span class="section-number">13.2.17.6. </span>ceil</a><a class="headerlink" href="#ceil" title="Link to this heading"></a></h3>
<p>数値を上に丸めた値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>ceil(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ceil(4.9)</span></code> → 5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ceil(-4.9)</span></code> → -4</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="clamp">
<span id="expression-function-math-clamp"></span><h3><a class="toc-backref" href="#id456" role="doc-backlink"><span class="section-number">13.2.17.7. </span>clamp</a><a class="headerlink" href="#clamp" title="Link to this heading"></a></h3>
<p>入力値を指定の範囲に制限した値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>clamp(minimum, input, maximum)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>minimum</strong> - <em>input</em> が取りうる最小値</p></li>
<li><p><strong>input</strong> - <em>minimum</em> と <em>maximum</em> で指定される範囲に制限される値</p></li>
<li><p><strong>maximum</strong> - <em>input</em> が取りうる最大値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">clamp(1,5,10)</span></code> → 5</p>
<p><em>input</em> は 1 と 10 の間にあるので、そのまま返します。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">clamp(1,0,10)</span></code> → 1</p>
<p><em>input</em> は最小値の1より小さいので、関数は1を返します。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">clamp(1,11,10)</span></code> → 10</p>
<p><em>input</em> は最大値の10より大きいので、関数は10を返します。</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="cos">
<span id="expression-function-math-cos"></span><h3><a class="toc-backref" href="#id457" role="doc-backlink"><span class="section-number">13.2.17.8. </span>cos</a><a class="headerlink" href="#cos" title="Link to this heading"></a></h3>
<p>角度の余弦（コサイン）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>cos(angle)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>angle</strong> - ラジアン単位の角度</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cos(1.571)</span></code> → 0.000796326710733263</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="degrees">
<span id="expression-function-math-degrees"></span><h3><a class="toc-backref" href="#id458" role="doc-backlink"><span class="section-number">13.2.17.9. </span>degrees</a><a class="headerlink" href="#degrees" title="Link to this heading"></a></h3>
<p>ラジアンから度に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>degrees(radians)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>radians</strong> - 数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">degrees(3.14159)</span></code> → 180</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">degrees(1)</span></code> → 57.2958</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="exp">
<span id="expression-function-math-exp"></span><h3><a class="toc-backref" href="#id459" role="doc-backlink"><span class="section-number">13.2.17.10. </span>exp</a><a class="headerlink" href="#exp" title="Link to this heading"></a></h3>
<p>自然対数の底（ネイピア数）のべき乗を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>exp(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 指数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">exp(1.0)</span></code> → 2.71828182845905</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="floor">
<span id="expression-function-math-floor"></span><h3><a class="toc-backref" href="#id460" role="doc-backlink"><span class="section-number">13.2.17.11. </span>floor</a><a class="headerlink" href="#floor" title="Link to this heading"></a></h3>
<p>数値を下に丸めた値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>floor(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">floor(4.9)</span></code> → 4</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">floor(-4.9)</span></code> → -5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="ln">
<span id="expression-function-math-ln"></span><h3><a class="toc-backref" href="#id461" role="doc-backlink"><span class="section-number">13.2.17.12. </span>ln</a><a class="headerlink" href="#ln" title="Link to this heading"></a></h3>
<p>自然対数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>ln(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ln(1)</span></code> → 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ln(2.7182818284590452354)</span></code> → 1</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="log">
<span id="expression-function-math-log"></span><h3><a class="toc-backref" href="#id462" role="doc-backlink"><span class="section-number">13.2.17.13. </span>log</a><a class="headerlink" href="#log" title="Link to this heading"></a></h3>
<p>指定した底の対数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>log(base, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>base</strong> - 正の数</p></li>
<li><p><strong>value</strong> - 正の数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">log(2,</span> <span class="pre">32)</span></code> → 5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log(0.5,</span> <span class="pre">32)</span></code> → -5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="log10">
<span id="expression-function-math-log10"></span><h3><a class="toc-backref" href="#id463" role="doc-backlink"><span class="section-number">13.2.17.14. </span>log10</a><a class="headerlink" href="#log10" title="Link to this heading"></a></h3>
<p>10を底とする、常用対数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>log10(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 正の数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">log10(1)</span></code> → 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log10(100)</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="max">
<span id="expression-function-math-max"></span><h3><a class="toc-backref" href="#id464" role="doc-backlink"><span class="section-number">13.2.17.15. </span>max</a><a class="headerlink" href="#max" title="Link to this heading"></a></h3>
<p>最大値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>max(value1, value2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">max(2,10.2,5.5)</span></code> → 10.2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max(20.5,NULL,6.2)</span></code> → 20.5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="min">
<span id="expression-function-math-min"></span><h3><a class="toc-backref" href="#id465" role="doc-backlink"><span class="section-number">13.2.17.16. </span>min</a><a class="headerlink" href="#min" title="Link to this heading"></a></h3>
<p>最小値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>min(value1, value2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">min(20.5,10,6.2)</span></code> → 6.2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min(2,-10.3,NULL)</span></code> → -10.3</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="pi">
<span id="expression-function-math-pi"></span><h3><a class="toc-backref" href="#id466" role="doc-backlink"><span class="section-number">13.2.17.17. </span>pi</a><a class="headerlink" href="#pi" title="Link to this heading"></a></h3>
<p>円周率を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>pi()</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pi()</span></code> → 3.14159265358979</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="radians">
<span id="expression-function-math-radians"></span><h3><a class="toc-backref" href="#id467" role="doc-backlink"><span class="section-number">13.2.17.18. </span>radians</a><a class="headerlink" href="#radians" title="Link to this heading"></a></h3>
<p>角度をラジアンに変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>radians(degrees)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>degrees</strong> - 数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">radians(180)</span></code> → 3.14159</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">radians(57.2958)</span></code> → 1</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="rand">
<span id="expression-function-math-rand"></span><h3><a class="toc-backref" href="#id468" role="doc-backlink"><span class="section-number">13.2.17.19. </span>rand</a><a class="headerlink" href="#rand" title="Link to this heading"></a></h3>
<p>最小値と最大値の引数で指定された範囲内（境界値を含む）の、ランダムな整数を返します。乱数のシードを指定する場合、値はシードに応じて常に同じ値となります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>rand(min, max, [seed=NULL])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>min</strong> - 乱数の下限値の整数</p></li>
<li><p><strong>max</strong> - 乱数の上限値の整数</p></li>
<li><p><strong>seed</strong> - 乱数のシードとして使用する任意の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rand(1,</span> <span class="pre">10)</span></code> → 8</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="randf">
<span id="expression-function-math-randf"></span><h3><a class="toc-backref" href="#id469" role="doc-backlink"><span class="section-number">13.2.17.20. </span>randf</a><a class="headerlink" href="#randf" title="Link to this heading"></a></h3>
<p>最小値と最大値の引数で指定された範囲内（境界値を含む）の、ランダムな浮動小数点数を返します。乱数のシードを指定する場合、値はシードに応じて常に同じ値となります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>randf([min=0.0], [max=1.0], [seed=NULL])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>min</strong> - 乱数の下限値の浮動小数点数</p></li>
<li><p><strong>max</strong> - 乱数の上限値の浮動小数点数</p></li>
<li><p><strong>seed</strong> - 乱数のシードとして使用する任意の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">randf(1,</span> <span class="pre">10)</span></code> → 4.59258286403147</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="round">
<span id="expression-function-math-round"></span><h3><a class="toc-backref" href="#id470" role="doc-backlink"><span class="section-number">13.2.17.21. </span>round</a><a class="headerlink" href="#round" title="Link to this heading"></a></h3>
<p>指定した小数点以下の桁数になるように四捨五入した数値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>round(value, [places=0])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 丸められる数値</p></li>
<li><p><strong>places</strong> - （オプション）数値を丸める桁を表す整数。負の値も可。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">round(1234.567,</span> <span class="pre">2)</span></code> → 1234.57</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">round(1234.567)</span></code> → 1235</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">round(1234.567,</span> <span class="pre">-1)</span></code> → 1230</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="scale-exponential">
<span id="expression-function-math-scale-exponential"></span><h3><a class="toc-backref" href="#id471" role="doc-backlink"><span class="section-number">13.2.17.22. </span>scale_exponential</a><a class="headerlink" href="#scale-exponential" title="Link to this heading"></a></h3>
<p>指数曲線を用いて、与えられた値を入力範囲から出力範囲に変換します。この関数は、指定された出力範囲へ値をイージングするために使用します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>scale_exponential(value, domain_min, domain_max, range_min, range_max, exponent)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 入力範囲内の値。関数は出力範囲でスケーリングされた対応する値を返します。</p></li>
<li><p><strong>domain_min</strong> - 入力範囲の最小値を指定します。入力値が取りうる最小値です。</p></li>
<li><p><strong>domain_max</strong> - 入力範囲の最大値を指定します。入力値が取りうる最大値です。</p></li>
<li><p><strong>range_min</strong> - 出力範囲の最小値を指定します。関数による出力の最小値です。</p></li>
<li><p><strong>range_max</strong> - 出力範囲の最大値を指定します。関数による出力の最大値です。</p></li>
<li><p><strong>exponent</strong> - 入力値を出力範囲へマッピングする方法を決定する正の値（0より大きな値）。指数が大きいと出力値は 'ease in' され、出力値の増加はゆっくりと始まって、入力値が入力範囲の最大値に近づくにつれて増加が加速します。指数が小さい（1よりも小さい）と出力値は 'ease out' され、値の増加は早く始まり、入力範囲の最大値に近づくにつれて増加は減速します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_exp(5,0,10,0,100,2)</span></code> → 25</p>
<p>指数2を使用した easing in</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_exp(3,0,10,0,100,0.5)</span></code> → 54.772</p>
<p>指数0.5を使用した easing out</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="scale-linear">
<span id="expression-function-math-scale-linear"></span><h3><a class="toc-backref" href="#id472" role="doc-backlink"><span class="section-number">13.2.17.23. </span>scale_linear</a><a class="headerlink" href="#scale-linear" title="Link to this heading"></a></h3>
<p>線形補間を用いて、与えられた値を入力範囲から出力範囲に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>scale_linear(value, domain_min, domain_max, range_min, range_max)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 入力範囲内の値。関数は出力範囲でスケーリングされた対応する値を返します。</p></li>
<li><p><strong>domain_min</strong> - 入力範囲の最小値を指定します。入力値が取りうる最小値です。</p></li>
<li><p><strong>domain_max</strong> - 入力範囲の最大値を指定します。入力値が取りうる最大値です。</p></li>
<li><p><strong>range_min</strong> - 出力範囲の最小値を指定します。関数による出力の最小値です。</p></li>
<li><p><strong>range_max</strong> - 出力範囲の最大値を指定します。関数による出力の最大値です。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_linear(5,0,10,0,100)</span></code> → 50</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_linear(0.2,0,1,0,360)</span></code> → 72</p>
<p>0から1までの値を、0から360までの角度に変換します</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_linear(1500,1000,10000,9,20)</span></code> → 9.6111111</p>
<p>1000から10000まで変化する人口を9から20のフォントサイズにスケーリングします。</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="scale-polynomial">
<span id="expression-function-math-scale-polynomial"></span><h3><a class="toc-backref" href="#id473" role="doc-backlink"><span class="section-number">13.2.17.24. </span>scale_polynomial</a><a class="headerlink" href="#scale-polynomial" title="Link to this heading"></a></h3>
<p>Transforms a given value from an input domain to an output range using a polynomial curve. This function can be used to ease values in or out of the specified output range.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>scale_polynomial(value, domain_min, domain_max, range_min, range_max, exponent)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 入力範囲内の値。関数は出力範囲でスケーリングされた対応する値を返します。</p></li>
<li><p><strong>domain_min</strong> - 入力範囲の最小値を指定します。入力値が取りうる最小値です。</p></li>
<li><p><strong>domain_max</strong> - 入力範囲の最大値を指定します。入力値が取りうる最大値です。</p></li>
<li><p><strong>range_min</strong> - 出力範囲の最小値を指定します。関数による出力の最小値です。</p></li>
<li><p><strong>range_max</strong> - 出力範囲の最大値を指定します。関数による出力の最大値です。</p></li>
<li><p><strong>exponent</strong> - 入力値を出力範囲へマッピングする方法を決定する正の値（0より大きな値）。指数が大きいと出力値は 'ease in' され、出力値の増加はゆっくりと始まって、入力値が入力範囲の最大値に近づくにつれて増加が加速します。指数が小さい（1よりも小さい）と出力値は 'ease out' され、値の増加は早く始まり、入力範囲の最大値に近づくにつれて増加は減速します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_polynomial(5,0,10,0,100,2)</span></code> → 25</p>
<p>指数2を使用した easing in</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_polynomial(3,0,10,0,100,0.5)</span></code> → 54.772</p>
<p>指数0.5を使用した easing out</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="sin">
<span id="expression-function-math-sin"></span><h3><a class="toc-backref" href="#id474" role="doc-backlink"><span class="section-number">13.2.17.25. </span>sin</a><a class="headerlink" href="#sin" title="Link to this heading"></a></h3>
<p>角度の正弦（サイン）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>sin(angle)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>angle</strong> - ラジアン単位の角度</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sin(1.571)</span></code> → 0.999999682931835</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="sqrt">
<span id="expression-function-math-sqrt"></span><h3><a class="toc-backref" href="#id475" role="doc-backlink"><span class="section-number">13.2.17.26. </span>sqrt</a><a class="headerlink" href="#sqrt" title="Link to this heading"></a></h3>
<p>平方根を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>sqrt(value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sqrt(9)</span></code> → 3</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="tan">
<span id="expression-function-math-tan"></span><h3><a class="toc-backref" href="#id476" role="doc-backlink"><span class="section-number">13.2.17.27. </span>tan</a><a class="headerlink" href="#tan" title="Link to this heading"></a></h3>
<p>角度の正接（タンジェント）を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>tan(angle)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>angle</strong> - ラジアン単位の角度</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tan(1.0)</span></code> → 1.5574077246549</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="meshes-functions">
<span id="expression-function-meshes"></span><h2><a class="toc-backref" href="#id126" role="doc-backlink"><span class="section-number">13.2.18. </span>メッシュ関数</a><a class="headerlink" href="#meshes-functions" title="Link to this heading"></a></h2>
<p>このグループには、メッシュに関連した値を計算したり返したりする関数が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id49">
<ul class="simple">
<li><p><a class="reference internal" href="#face-area" id="id477">$face_area</a></p></li>
<li><p><a class="reference internal" href="#face-index" id="id478">$face_index</a></p></li>
<li><p><a class="reference internal" href="#vertex-as-point" id="id479">$vertex_as_point</a></p></li>
<li><p><a class="reference internal" href="#vertex-index" id="id480">$vertex_index</a></p></li>
<li><p><a class="reference internal" href="#vertex-x" id="id481">$vertex_x</a></p></li>
<li><p><a class="reference internal" href="#vertex-y" id="id482">$vertex_y</a></p></li>
<li><p><a class="reference internal" href="#vertex-z" id="id483">$vertex_z</a></p></li>
</ul>
</nav>
</div>
<section id="face-area">
<span id="expression-function-meshes-face-area"></span><h3><a class="toc-backref" href="#id477" role="doc-backlink"><span class="section-number">13.2.18.1. </span>$face_area</a><a class="headerlink" href="#face-area" title="Link to this heading"></a></h3>
<p>現在のメッシュ面の面積を返します。この関数で計算される面積には、現在のプロジェクトの楕円体設定と面積単位設定の両方が反映されます。例えば、プロジェクトに回転楕円体が設定されている場合、楕円体面積になり、設定されていない場合、平面上の面積になります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$face_area</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$face_area</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="face-index">
<span id="expression-function-meshes-face-index"></span><h3><a class="toc-backref" href="#id478" role="doc-backlink"><span class="section-number">13.2.18.2. </span>$face_index</a><a class="headerlink" href="#face-index" title="Link to this heading"></a></h3>
<p>現在のメッシュ面のインデックスを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$face_index</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$face_index</span></code> → 4581</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="vertex-as-point">
<span id="expression-function-meshes-vertex-as-point"></span><h3><a class="toc-backref" href="#id479" role="doc-backlink"><span class="section-number">13.2.18.3. </span>$vertex_as_point</a><a class="headerlink" href="#vertex-as-point" title="Link to this heading"></a></h3>
<p>現在の頂点をポイントジオメトリとして返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$vertex_as_point</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_to_wkt(</span> <span class="pre">$vertex_as_point</span> <span class="pre">)</span></code> → 'POINT(800 1500 41)'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="vertex-index">
<span id="expression-function-meshes-vertex-index"></span><h3><a class="toc-backref" href="#id480" role="doc-backlink"><span class="section-number">13.2.18.4. </span>$vertex_index</a><a class="headerlink" href="#vertex-index" title="Link to this heading"></a></h3>
<p>現在のメッシュ頂点のインデックスを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$vertex_index</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$vertex_index</span></code> → 9874</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="vertex-x">
<span id="expression-function-meshes-vertex-x"></span><h3><a class="toc-backref" href="#id481" role="doc-backlink"><span class="section-number">13.2.18.5. </span>$vertex_x</a><a class="headerlink" href="#vertex-x" title="Link to this heading"></a></h3>
<p>現在のメッシュ頂点のx座標を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$vertex_x</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$vertex_x</span></code> → 42.12</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="vertex-y">
<span id="expression-function-meshes-vertex-y"></span><h3><a class="toc-backref" href="#id482" role="doc-backlink"><span class="section-number">13.2.18.6. </span>$vertex_y</a><a class="headerlink" href="#vertex-y" title="Link to this heading"></a></h3>
<p>現在のメッシュ頂点のy座標を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$vertex_y</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$vertex_y</span></code> → 12.24</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="vertex-z">
<span id="expression-function-meshes-vertex-z"></span><h3><a class="toc-backref" href="#id483" role="doc-backlink"><span class="section-number">13.2.18.7. </span>$vertex_z</a><a class="headerlink" href="#vertex-z" title="Link to this heading"></a></h3>
<p>現在のメッシュ頂点のz座標を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$vertex_z</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$vertex_z</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="operators">
<h2><a class="toc-backref" href="#id127" role="doc-backlink"><span class="section-number">13.2.19. </span>演算子</a><a class="headerlink" href="#operators" title="Link to this heading"></a></h2>
<p>このグループには演算子が含まれています（例えば、+、 - 、*）。以下の数学関数のほとんどについて、入力の一つがNULLである場合は結果はNULLであることに注意してください。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id50">
<ul class="simple">
<li><p><a class="reference internal" href="#expression-function-operators-modulo" id="id484">%</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-asterisk" id="id485">*</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-plus" id="id486">+</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-minus" id="id487">-</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-div" id="id488">/</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-floordiv" id="id489">//</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-lt" id="id490">&lt;</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-le" id="id491">&lt;=</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-ne" id="id492">&lt;&gt;</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-eq" id="id493">=</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-gt" id="id494">&gt;</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-ge" id="id495">&gt;=</a></p></li>
<li><p><a class="reference internal" href="#and" id="id496">AND</a></p></li>
<li><p><a class="reference internal" href="#between" id="id497">BETWEEN</a></p></li>
<li><p><a class="reference internal" href="#ilike" id="id498">ILIKE</a></p></li>
<li><p><a class="reference internal" href="#in" id="id499">IN</a></p></li>
<li><p><a class="reference internal" href="#is" id="id500">IS</a></p></li>
<li><p><a class="reference internal" href="#is-not" id="id501">IS NOT</a></p></li>
<li><p><a class="reference internal" href="#like" id="id502">LIKE</a></p></li>
<li><p><a class="reference internal" href="#not" id="id503">NOT</a></p></li>
<li><p><a class="reference internal" href="#not-between" id="id504">NOT BETWEEN</a></p></li>
<li><p><a class="reference internal" href="#or" id="id505">OR</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-index" id="id506">[]</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-exp" id="id507">^</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-concat" id="id508">||</a></p></li>
<li><p><a class="reference internal" href="#expression-function-operators-regex" id="id509">~</a></p></li>
</ul>
</nav>
</div>
<section id="expression-function-operators-modulo">
<span id="id51"></span><h3><a class="toc-backref" href="#id484" role="doc-backlink"><span class="section-number">13.2.19.1. </span>%</a><a class="headerlink" href="#expression-function-operators-modulo" title="Link to this heading"></a></h3>
<p>除算の余り。被除数の符号をとる。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a % b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">9</span> <span class="pre">%</span> <span class="pre">2</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">9</span> <span class="pre">%</span> <span class="pre">-2</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-9</span> <span class="pre">%</span> <span class="pre">2</span></code> → -1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">%</span> <span class="pre">NULL</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-asterisk">
<span id="id52"></span><h3><a class="toc-backref" href="#id485" role="doc-backlink"><span class="section-number">13.2.19.2. </span>*</a><a class="headerlink" href="#expression-function-operators-asterisk" title="Link to this heading"></a></h3>
<p>2つの値の乗算</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a * b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">*</span> <span class="pre">4</span></code> → 20</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">*</span> <span class="pre">NULL</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-plus">
<span id="id53"></span><h3><a class="toc-backref" href="#id486" role="doc-backlink"><span class="section-number">13.2.19.3. </span>+</a><a class="headerlink" href="#expression-function-operators-plus" title="Link to this heading"></a></h3>
<p>2つの値の加算。いずれかの値がNULLの場合、結果はNULLになります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a + b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">+</span> <span class="pre">4</span></code> → 9</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">+</span> <span class="pre">NULL</span></code> → NULL</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'QGIS</span> <span class="pre">'</span> <span class="pre">+</span> <span class="pre">'ROCKS'</span></code> → 'QGIS ROCKS'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('2020-08-01</span> <span class="pre">12:00:00')</span> <span class="pre">+</span> <span class="pre">'1</span> <span class="pre">day</span> <span class="pre">2</span> <span class="pre">hours'</span></code> → 2020-08-02T14:00:00</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-string-concat"><span class="std std-ref">concat</span></a> 、 <a class="reference internal" href="#expression-function-operators-concat"><span class="std std-ref">||</span></a></p>
</section>
<section id="expression-function-operators-minus">
<span id="id54"></span><h3><a class="toc-backref" href="#id487" role="doc-backlink"><span class="section-number">13.2.19.4. </span>-</a><a class="headerlink" href="#expression-function-operators-minus" title="Link to this heading"></a></h3>
<p>2つの値の減算。いずれかの値がNULLの場合、結果はNULLになります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a - b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">-</span> <span class="pre">4</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">-</span> <span class="pre">NULL</span></code> → NULL</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_datetime('2012-05-05</span> <span class="pre">12:00:00')</span> <span class="pre">-</span> <span class="pre">to_interval('1</span> <span class="pre">day</span> <span class="pre">2</span> <span class="pre">hours')</span></code> → 2012-05-04T10:00:00</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-div">
<span id="id55"></span><h3><a class="toc-backref" href="#id488" role="doc-backlink"><span class="section-number">13.2.19.5. </span>/</a><a class="headerlink" href="#expression-function-operators-div" title="Link to this heading"></a></h3>
<p>2つの値の除算</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a / b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">/</span> <span class="pre">4</span></code> → 1.25</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">/</span> <span class="pre">NULL</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-floordiv">
<span id="id56"></span><h3><a class="toc-backref" href="#id489" role="doc-backlink"><span class="section-number">13.2.19.6. </span>//</a><a class="headerlink" href="#expression-function-operators-floordiv" title="Link to this heading"></a></h3>
<p>Floor division of two values</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a // b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">9</span> <span class="pre">//</span> <span class="pre">2</span></code> → 4</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-lt">
<span id="id57"></span><h3><a class="toc-backref" href="#id490" role="doc-backlink"><span class="section-number">13.2.19.7. </span>&lt;</a><a class="headerlink" href="#expression-function-operators-lt" title="Link to this heading"></a></h3>
<p>2つの値を比較し、左の値が右の値より小さい場合、1 と評価されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a &lt; b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&lt;</span> <span class="pre">4</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&lt;</span> <span class="pre">5</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">&lt;</span> <span class="pre">5</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-le">
<span id="id58"></span><h3><a class="toc-backref" href="#id491" role="doc-backlink"><span class="section-number">13.2.19.8. </span>&lt;=</a><a class="headerlink" href="#expression-function-operators-le" title="Link to this heading"></a></h3>
<p>2つの値を比較し、左の値が右の値より小さいか等しい場合、1 と評価されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a &lt;= b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&lt;=</span> <span class="pre">4</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&lt;=</span> <span class="pre">5</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">&lt;=</span> <span class="pre">5</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-ne">
<span id="id59"></span><h3><a class="toc-backref" href="#id492" role="doc-backlink"><span class="section-number">13.2.19.9. </span>&lt;&gt;</a><a class="headerlink" href="#expression-function-operators-ne" title="Link to this heading"></a></h3>
<p>2つの値を比較し、両者が等しくない場合、1 と評価されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a &lt;&gt; b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&lt;&gt;</span> <span class="pre">4</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">&lt;&gt;</span> <span class="pre">4</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&lt;&gt;</span> <span class="pre">NULL</span></code> → NULL</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NULL</span> <span class="pre">&lt;&gt;</span> <span class="pre">NULL</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-eq">
<span id="id60"></span><h3><a class="toc-backref" href="#id493" role="doc-backlink"><span class="section-number">13.2.19.10. </span>=</a><a class="headerlink" href="#expression-function-operators-eq" title="Link to this heading"></a></h3>
<p>2つの値を比較し、両者が等しい場合、1 と評価されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a = b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">=</span> <span class="pre">4</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">=</span> <span class="pre">4</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">=</span> <span class="pre">NULL</span></code> → NULL</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NULL</span> <span class="pre">=</span> <span class="pre">NULL</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-gt">
<span id="id61"></span><h3><a class="toc-backref" href="#id494" role="doc-backlink"><span class="section-number">13.2.19.11. </span>&gt;</a><a class="headerlink" href="#expression-function-operators-gt" title="Link to this heading"></a></h3>
<p>2つの値を比較し、左の値が右の値より大きい場合、1 と評価されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a &gt; b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&gt;</span> <span class="pre">4</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&gt;</span> <span class="pre">5</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">&gt;</span> <span class="pre">5</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-ge">
<span id="id62"></span><h3><a class="toc-backref" href="#id495" role="doc-backlink"><span class="section-number">13.2.19.12. </span>&gt;=</a><a class="headerlink" href="#expression-function-operators-ge" title="Link to this heading"></a></h3>
<p>2つの値を比較し、左の値が右の値より大きいか等しい場合、1 と評価されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a &gt;= b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&gt;=</span> <span class="pre">4</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">&gt;=</span> <span class="pre">5</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">&gt;=</span> <span class="pre">5</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="and">
<span id="expression-function-operators-and"></span><h3><a class="toc-backref" href="#id496" role="doc-backlink"><span class="section-number">13.2.19.13. </span>AND</a><a class="headerlink" href="#and" title="Link to this heading"></a></h3>
<p>条件式 a と条件式 b がともに true である場合に TRUE を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a AND b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 条件式</p></li>
<li><p><strong>b</strong> - 条件式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TRUE</span> <span class="pre">AND</span> <span class="pre">TRUE</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TRUE</span> <span class="pre">AND</span> <span class="pre">FALSE</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">=</span> <span class="pre">2+2</span> <span class="pre">AND</span> <span class="pre">1</span> <span class="pre">=</span> <span class="pre">1</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">=</span> <span class="pre">2+2</span> <span class="pre">AND</span> <span class="pre">1</span> <span class="pre">=</span> <span class="pre">2</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="between">
<span id="expression-function-operators-between"></span><h3><a class="toc-backref" href="#id497" role="doc-backlink"><span class="section-number">13.2.19.14. </span>BETWEEN</a><a class="headerlink" href="#between" title="Link to this heading"></a></h3>
<p>値が指定された範囲内にあるとき、TRUE を返します。範囲は、境界を含むとみなされます。除外を調べるには、NOT BETWEENを使うことができます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>value BETWEEN lower_bound AND higher_bound</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 範囲と比較する値。文字列、数字または日付です。</p></li>
<li><p><strong>lower_bound AND higher_bound</strong> - 範囲</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'B'</span> <span class="pre">BETWEEN</span> <span class="pre">'A'</span> <span class="pre">AND</span> <span class="pre">'C'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">BETWEEN</span> <span class="pre">1</span> <span class="pre">AND</span> <span class="pre">3</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">BETWEEN</span> <span class="pre">2</span> <span class="pre">AND</span> <span class="pre">3</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'B'</span> <span class="pre">BETWEEN</span> <span class="pre">'a'</span> <span class="pre">AND</span> <span class="pre">'c'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lower('B')</span> <span class="pre">BETWEEN</span> <span class="pre">'a'</span> <span class="pre">AND</span> <span class="pre">'b'</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><em>value BETWEEN lower_bound AND higher_bound</em> は &quot;<em>value &gt;= lower_bound AND value &lt;= higher_bound</em>&quot; と同じです。</p>
</div>
<p>関係する項目: <a class="reference internal" href="#expression-function-operators-not-between"><span class="std std-ref">NOT BETWEEN</span></a></p>
</section>
<section id="ilike">
<span id="expression-function-operators-ilike"></span><h3><a class="toc-backref" href="#id498" role="doc-backlink"><span class="section-number">13.2.19.15. </span>ILIKE</a><a class="headerlink" href="#ilike" title="Link to this heading"></a></h3>
<p>最初の引数が与えられたパターンと大文字・小文字を区別せずに一致する場合に TRUE を返します。マッチングで大文字・小文字を区別する場合には、ILIKE の代わりに LIKE を使用してください。数値にも対応しています。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>string/number ILIKE pattern</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string/number</strong> - 検索する文字列</p></li>
<li><p><strong>pattern</strong> - 検索するパターン。 '%' をワイルドカードとして、 '_' を任意の1文字として、 '\\' をこれらの特殊文字のエスケープとして利用できます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">ILIKE</span> <span class="pre">'A'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">ILIKE</span> <span class="pre">'a'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">ILIKE</span> <span class="pre">'B'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABC'</span> <span class="pre">ILIKE</span> <span class="pre">'b'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABC'</span> <span class="pre">ILIKE</span> <span class="pre">'B'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABC'</span> <span class="pre">ILIKE</span> <span class="pre">'_b_'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABC'</span> <span class="pre">ILIKE</span> <span class="pre">'_B_'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">ILIKE</span> <span class="pre">'_b_'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">ILIKE</span> <span class="pre">'_B_'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">ILIKE</span> <span class="pre">'_b%'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">ILIKE</span> <span class="pre">'_B%'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">ILIKE</span> <span class="pre">'%b%'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">ILIKE</span> <span class="pre">'%B%'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD%'</span> <span class="pre">ILIKE</span> <span class="pre">'abcd\\%'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">ILIKE</span> <span class="pre">'%B\\%'</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="in">
<span id="expression-function-operators-in"></span><h3><a class="toc-backref" href="#id499" role="doc-backlink"><span class="section-number">13.2.19.16. </span>IN</a><a class="headerlink" href="#in" title="Link to this heading"></a></h3>
<p>リストの中に値が見つかった場合に TRUE を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a IN b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値のリスト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">IN</span> <span class="pre">('A','B')</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">IN</span> <span class="pre">('C','B')</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="is">
<span id="expression-function-operators-is"></span><h3><a class="toc-backref" href="#id500" role="doc-backlink"><span class="section-number">13.2.19.17. </span>IS</a><a class="headerlink" href="#is" title="Link to this heading"></a></h3>
<p>a と b が同じ場合に TRUE を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a IS b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 任意の値</p></li>
<li><p><strong>b</strong> - 任意の値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">IS</span> <span class="pre">'A'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">IS</span> <span class="pre">'a'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">IS</span> <span class="pre">4</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">IS</span> <span class="pre">2+2</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">IS</span> <span class="pre">2</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;geometry</span> <span class="pre">IS</span> <span class="pre">NULL</span></code> → ジオメトリがNULLでない場合は0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="is-not">
<span id="expression-function-operators-is-not"></span><h3><a class="toc-backref" href="#id501" role="doc-backlink"><span class="section-number">13.2.19.18. </span>IS NOT</a><a class="headerlink" href="#is-not" title="Link to this heading"></a></h3>
<p>a と b が同じではない場合に TRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a IS NOT b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'a'</span> <span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">'b'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'a'</span> <span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">'a'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">2+2</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="like">
<span id="expression-function-operators-like"></span><h3><a class="toc-backref" href="#id502" role="doc-backlink"><span class="section-number">13.2.19.19. </span>LIKE</a><a class="headerlink" href="#like" title="Link to this heading"></a></h3>
<p>最初の引数が与えられたパターンと一致する場合に TRUEを返します。数値にも対応しています。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>string/number LIKE pattern</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string/number</strong> - 値</p></li>
<li><p><strong>pattern</strong> - 値と比較するパターン。 '%' をワイルドカードとして、 '_' を任意の1文字として、 '\\' をこれらの特殊文字のエスケープとして利用できます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">LIKE</span> <span class="pre">'A'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">LIKE</span> <span class="pre">'a'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span> <span class="pre">LIKE</span> <span class="pre">'B'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABC'</span> <span class="pre">LIKE</span> <span class="pre">'B'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABC'</span> <span class="pre">LIKE</span> <span class="pre">'_B_'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">LIKE</span> <span class="pre">'_B_'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">LIKE</span> <span class="pre">'_B%'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ABCD'</span> <span class="pre">LIKE</span> <span class="pre">'%B%'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'1%'</span> <span class="pre">LIKE</span> <span class="pre">'1\\%'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'1_'</span> <span class="pre">LIKE</span> <span class="pre">'1\\%'</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="not">
<span id="expression-function-operators-not"></span><h3><a class="toc-backref" href="#id503" role="doc-backlink"><span class="section-number">13.2.19.20. </span>NOT</a><a class="headerlink" href="#not" title="Link to this heading"></a></h3>
<p>条件式の否定を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>NOT a</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 条件式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">1</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">0</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="not-between">
<span id="expression-function-operators-not-between"></span><h3><a class="toc-backref" href="#id504" role="doc-backlink"><span class="section-number">13.2.19.21. </span>NOT BETWEEN</a><a class="headerlink" href="#not-between" title="Link to this heading"></a></h3>
<p>値が指定された範囲内にない場合、TRUE を返します。範囲は、境界を含むとみなされます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>value NOT BETWEEN lower_bound AND higher_bound</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 範囲と比較する値。文字列、数字または日付です。</p></li>
<li><p><strong>lower_bound AND higher_bound</strong> - 範囲</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'B'</span> <span class="pre">NOT</span> <span class="pre">BETWEEN</span> <span class="pre">'A'</span> <span class="pre">AND</span> <span class="pre">'C'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1.0</span> <span class="pre">NOT</span> <span class="pre">BETWEEN</span> <span class="pre">1.1</span> <span class="pre">AND</span> <span class="pre">1.2</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">NOT</span> <span class="pre">BETWEEN</span> <span class="pre">2</span> <span class="pre">AND</span> <span class="pre">3</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'B'</span> <span class="pre">NOT</span> <span class="pre">BETWEEN</span> <span class="pre">'a'</span> <span class="pre">AND</span> <span class="pre">'c'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lower('B')</span> <span class="pre">NOT</span> <span class="pre">BETWEEN</span> <span class="pre">'a'</span> <span class="pre">AND</span> <span class="pre">'b'</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><em>value NOT BETWEEN lower_bound AND higher_bound</em> は &quot;<em>value &lt; lower_bound OR value &gt; higher_bound</em>&quot; と同じです。</p>
</div>
<p>関係する項目: <a class="reference internal" href="#expression-function-operators-between"><span class="std std-ref">BETWEEN</span></a></p>
</section>
<section id="or">
<span id="expression-function-operators-or"></span><h3><a class="toc-backref" href="#id505" role="doc-backlink"><span class="section-number">13.2.19.22. </span>OR</a><a class="headerlink" href="#or" title="Link to this heading"></a></h3>
<p>条件式 a、条件式 b のいずれかが true である場合に TRUE を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a OR b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 条件式</p></li>
<li><p><strong>b</strong> - 条件式</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">=</span> <span class="pre">2+2</span> <span class="pre">OR</span> <span class="pre">1</span> <span class="pre">=</span> <span class="pre">1</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">=</span> <span class="pre">2+2</span> <span class="pre">OR</span> <span class="pre">1</span> <span class="pre">=</span> <span class="pre">2</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">=</span> <span class="pre">2</span>&#160;&#160; <span class="pre">OR</span> <span class="pre">1</span> <span class="pre">=</span> <span class="pre">2</span></code> → FALSE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-index">
<span id="id63"></span><h3><a class="toc-backref" href="#id506" role="doc-backlink"><span class="section-number">13.2.19.23. </span>[]</a><a class="headerlink" href="#expression-function-operators-index" title="Link to this heading"></a></h3>
<p>インデックス演算子です。配列の要素やマップ型の値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>[index]</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>index</strong> - 配列のインデックスまたはマップ型のキー</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">array(1,2,3)[0]</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array(1,2,3)[2]</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array(1,2,3)[-1]</span></code> → 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map('a',1,'b',2)['a']</span></code> → 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map('a',1,'b',2)['b']</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-arrays-array-get"><span class="std std-ref">array_get</span></a> 、 <a class="reference internal" href="#expression-function-maps-map-get"><span class="std std-ref">map_get</span></a></p>
</section>
<section id="expression-function-operators-exp">
<span id="id64"></span><h3><a class="toc-backref" href="#id507" role="doc-backlink"><span class="section-number">13.2.19.24. </span>^</a><a class="headerlink" href="#expression-function-operators-exp" title="Link to this heading"></a></h3>
<p>2つの値の累乗。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a ^ b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">^</span> <span class="pre">4</span></code> → 625</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">^</span> <span class="pre">NULL</span></code> → NULL</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-operators-concat">
<span id="id65"></span><h3><a class="toc-backref" href="#id508" role="doc-backlink"><span class="section-number">13.2.19.25. </span>||</a><a class="headerlink" href="#expression-function-operators-concat" title="Link to this heading"></a></h3>
<p>2つの値を連結して文字列にします。</p>
<p>いずれかの値がNULLの場合、結果はNULLになります。動作が異なるconcat 関数についても参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>a || b</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>a</strong> - 値</p></li>
<li><p><strong>b</strong> - 値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'Here'</span> <span class="pre">||</span> <span class="pre">'</span> <span class="pre">and</span> <span class="pre">'</span> <span class="pre">||</span> <span class="pre">'there'</span></code> → 'Here and there'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Nothing'</span> <span class="pre">||</span> <span class="pre">NULL</span></code> → NULL</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Dia:</span> <span class="pre">'</span> <span class="pre">||</span> <span class="pre">&quot;Diameter&quot;</span></code> → 'Dia: 25'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">||</span> <span class="pre">2</span></code> → '12'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-string-concat"><span class="std std-ref">concat</span></a> 、 <a class="reference internal" href="#expression-function-operators-plus"><span class="std std-ref">+</span></a></p>
</section>
<section id="expression-function-operators-regex">
<span id="id66"></span><h3><a class="toc-backref" href="#id509" role="doc-backlink"><span class="section-number">13.2.19.26. </span>~</a><a class="headerlink" href="#expression-function-operators-regex" title="Link to this heading"></a></h3>
<p>文字列に対して正規表現のマッチングを実行します。バックスラッシュ文字は二重にエスケープする必要があります（例：空白文字に一致させるには &quot;\\s&quot; ）</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>string ~ regex</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 文字列</p></li>
<li><p><strong>regex</strong> - 正規表現。バックスラッシュにはエスケープが必要です。例： \\d.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'hello'</span> <span class="pre">~</span> <span class="pre">'ll'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'hello'</span> <span class="pre">~</span> <span class="pre">'^ll'</span></code> → FALSE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'hello'</span> <span class="pre">~</span> <span class="pre">'llo$'</span></code> → TRUE</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'abc123'</span> <span class="pre">~</span> <span class="pre">'\\d+'</span></code> → TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-string-regexp-match"><span class="std std-ref">regexp_match</span></a></p>
</section>
</section>
<section id="processing-functions">
<span id="id67"></span><h2><a class="toc-backref" href="#id128" role="doc-backlink"><span class="section-number">13.2.20. </span>プロセシング関数</a><a class="headerlink" href="#processing-functions" title="Link to this heading"></a></h2>
<p>このグループには、プロセシングアルゴリズムで使用できる関数が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id68">
<ul class="simple">
<li><p><a class="reference internal" href="#parameter" id="id510">parameter</a></p></li>
</ul>
</nav>
</div>
<section id="parameter">
<span id="expression-function-processing-parameter"></span><h3><a class="toc-backref" href="#id510" role="doc-backlink"><span class="section-number">13.2.20.1. </span>parameter</a><a class="headerlink" href="#parameter" title="Link to this heading"></a></h3>
<p>プロセシングアルゴリズムの入力パラメータの値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>parameter(name)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>name</strong> - 対応する入力パラメータの名前</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parameter('BUFFER_SIZE')</span></code> → 5.6</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="rasters-functions">
<span id="raster-functions"></span><h2><a class="toc-backref" href="#id129" role="doc-backlink"><span class="section-number">13.2.21. </span>ラスタ関数</a><a class="headerlink" href="#rasters-functions" title="Link to this heading"></a></h2>
<p>このグループには、ラスタレイヤを操作するための関数が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id69">
<ul class="simple">
<li><p><a class="reference internal" href="#raster-attributes" id="id511">raster_attributes</a></p></li>
<li><p><a class="reference internal" href="#raster-statistic" id="id512">raster_statistic</a></p></li>
<li><p><a class="reference internal" href="#raster-value" id="id513">raster_value</a></p></li>
</ul>
</nav>
</div>
<section id="raster-attributes">
<span id="expression-function-rasters-raster-attributes"></span><h3><a class="toc-backref" href="#id511" role="doc-backlink"><span class="section-number">13.2.21.1. </span>raster_attributes</a><a class="headerlink" href="#raster-attributes" title="Link to this heading"></a></h3>
<p>Returns a map with the fields names as keys and the raster attribute table values as values from the attribute table entry that matches the given raster value.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>raster_attributes(layer, band, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - ラスタレイヤの名前またはid</p></li>
<li><p><strong>band</strong> - the band number for the associated attribute table lookup.</p></li>
<li><p><strong>value</strong> - ラスタ値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">raster_attributes('vegetation',</span> <span class="pre">1,</span> <span class="pre">raster_value('vegetation',</span> <span class="pre">1,</span> <span class="pre">make_point(1,1)))</span></code> → {'class': 'Vegetated', 'subclass': 'Trees'}</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="raster-statistic">
<span id="expression-function-rasters-raster-statistic"></span><h3><a class="toc-backref" href="#id512" role="doc-backlink"><span class="section-number">13.2.21.2. </span>raster_statistic</a><a class="headerlink" href="#raster-statistic" title="Link to this heading"></a></h3>
<p>ラスタレイヤの統計値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>raster_statistic(layer, band, property)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - ラスタレイヤ名またはレイヤIDを表す文字列</p></li>
<li><p><strong>band</strong> - 1から始まる、ラスタレイヤのバンド番号を表す整数</p></li>
<li><p><strong>property</strong> - 戻り値となるプロパティに対応する文字列。有効なオプションは次のとおり：</p>
<ul>
<li><p>min: 最小値</p></li>
<li><p>max: 最大値</p></li>
<li><p>avg: 平均値</p></li>
<li><p>stdev: 標準偏差</p></li>
<li><p>range: 値の範囲（max - min）</p></li>
<li><p>sum: ラスタの値の合計値</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">raster_statistic('lc',1,'avg')</span></code> → 'lc' ラスタレイヤのバンド1の平均値</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raster_statistic('ac2010',3,'min')</span></code> → 'ac2010' ラスタレイヤのバンド3の最小値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="raster-value">
<span id="expression-function-rasters-raster-value"></span><h3><a class="toc-backref" href="#id513" role="doc-backlink"><span class="section-number">13.2.21.3. </span>raster_value</a><a class="headerlink" href="#raster-value" title="Link to this heading"></a></h3>
<p>指定された点のラスタ値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>raster_value(layer, band, point)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - ラスタレイヤの名前またはid</p></li>
<li><p><strong>band</strong> - 値をサンプリングするバンド番号</p></li>
<li><p><strong>point</strong> - ポイントジオメトリ（2つ以上のパートを持つマルチパートジオメトリの場合には、NULLを返します）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">raster_value('dem',</span> <span class="pre">1,</span> <span class="pre">make_point(1,1))</span></code> → 25</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="record-and-attributes-functions">
<span id="record-attributes"></span><h2><a class="toc-backref" href="#id130" role="doc-backlink"><span class="section-number">13.2.22. </span>レコードと属性関数</a><a class="headerlink" href="#record-and-attributes-functions" title="Link to this heading"></a></h2>
<p>このグループには、レコード識別子を操作する関数が含まれます。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id70">
<ul class="simple">
<li><p><a class="reference internal" href="#attribute" id="id514">attribute</a></p></li>
<li><p><a class="reference internal" href="#attributes" id="id515">attributes</a></p></li>
<li><p><a class="reference internal" href="#currentfeature" id="id516">$currentfeature</a></p></li>
<li><p><a class="reference internal" href="#display-expression" id="id517">display_expression</a></p></li>
<li><p><a class="reference internal" href="#feature-id" id="id518">feature_id</a></p></li>
<li><p><a class="reference internal" href="#get-feature" id="id519">get_feature</a></p></li>
<li><p><a class="reference internal" href="#get-feature-by-id" id="id520">get_feature_by_id</a></p></li>
<li><p><a class="reference internal" href="#expression-function-record-and-attributes-id" id="id521">$id</a></p></li>
<li><p><a class="reference internal" href="#is-attribute-valid" id="id522">is_attribute_valid</a></p></li>
<li><p><a class="reference internal" href="#is-feature-valid" id="id523">is_feature_valid</a></p></li>
<li><p><a class="reference internal" href="#is-selected" id="id524">is_selected</a></p></li>
<li><p><a class="reference internal" href="#maptip" id="id525">maptip</a></p></li>
<li><p><a class="reference internal" href="#num-selected" id="id526">num_selected</a></p></li>
<li><p><a class="reference internal" href="#represent-attributes" id="id527">represent_attributes</a></p></li>
<li><p><a class="reference internal" href="#represent-value" id="id528">represent_value</a></p></li>
<li><p><a class="reference internal" href="#sqlite-fetch-and-increment" id="id529">sqlite_fetch_and_increment</a></p></li>
<li><p><a class="reference internal" href="#uuid" id="id530">uuid</a></p></li>
</ul>
</nav>
</div>
<section id="attribute">
<span id="expression-function-record-and-attributes-attribute"></span><h3><a class="toc-backref" href="#id514" role="doc-backlink"><span class="section-number">13.2.22.1. </span>attribute</a><a class="headerlink" href="#attribute" title="Link to this heading"></a></h3>
<p>地物の属性を返します。</p>
<p><strong>バージョン1</strong></p>
<p>現在の地物の属性値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>attribute(attribute_name)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>attribute_name</strong> - 返される属性名</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">attribute(</span> <span class="pre">'name'</span> <span class="pre">)</span></code> → 現在の地物の 'name' 属性に格納されている値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>バージョン2</strong></p>
<p>指定された地物の属性値を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>attribute(feature, attribute_name)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>feature</strong> - 地物</p></li>
<li><p><strong>attribute_name</strong> - 返される属性名</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">attribute(</span> <span class="pre">&#64;atlas_feature,</span> <span class="pre">'name'</span> <span class="pre">)</span></code> → 現在の地図帳地物の 'name' 属性に格納されている値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="attributes">
<span id="expression-function-record-and-attributes-attributes"></span><h3><a class="toc-backref" href="#id515" role="doc-backlink"><span class="section-number">13.2.22.2. </span>attributes</a><a class="headerlink" href="#attributes" title="Link to this heading"></a></h3>
<p>属性名をキーとする、地物のすべての属性を含むマップ型オブジェクトを返します。</p>
<p><strong>バージョン1</strong></p>
<p>現在の地物の全属性をマップ型オブジェクトとして返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>attributes()</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">attributes()['name']</span></code> → 現在の地物の 'name' 属性に格納されている値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>バージョン2</strong></p>
<p>ターゲットとする地物を指定できます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>attributes(feature)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>feature</strong> - 地物</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">attributes(</span> <span class="pre">&#64;atlas_feature</span> <span class="pre">)['name']</span></code> → 現在の地図帳地物の 'name' 属性に格納されている値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#maps-functions"><span class="std std-ref">マップ関数</span></a></p>
</section>
<section id="currentfeature">
<span id="expression-function-record-and-attributes-currentfeature"></span><h3><a class="toc-backref" href="#id516" role="doc-backlink"><span class="section-number">13.2.22.3. </span>$currentfeature</a><a class="headerlink" href="#currentfeature" title="Link to this heading"></a></h3>
<p>現在評価されている地物を返します。'attribute' 関数と併用することで、現在の地物から属性値を評価することができます。<strong>警告: この関数は非推奨です。代わりに&#64;feature変数を使うことをお勧めします。</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$currentfeature</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">attribute(</span> <span class="pre">$currentfeature,</span> <span class="pre">'name'</span> <span class="pre">)</span></code> → 現在の地物の 'name' 属性に格納されている値</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="display-expression">
<span id="expression-function-record-and-attributes-display-expression"></span><h3><a class="toc-backref" href="#id517" role="doc-backlink"><span class="section-number">13.2.22.4. </span>display_expression</a><a class="headerlink" href="#display-expression" title="Link to this heading"></a></h3>
<p>指定された地物の表示式を返します。式はデフォルトで評価されます。0個、1個、または2個以上の引数をとることができ、詳しくは以下の通りです。</p>
<p><strong>引数なしバージョン</strong></p>
<p>引数なしで関数を呼んだ場合、関数は現在のレイヤの現在の地物の表示式を評価します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>display_expression()</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">display_expression()</span></code> → 現在のレイヤの現在の地物の表示式</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>引数が地物1つのバージョン</strong></p>
<p>地物だけを引数として関数を呼んだ場合、関数は現在のレイヤの指定された地物の表示式を評価します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>display_expression(feature)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>feature</strong> - 表示式を評価したい地物</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">display_expression(&#64;atlas_feature)</span></code> → 現在の地図帳地物の表示式</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>レイヤと地物の引数バージョン</strong></p>
<p>レイヤと地物の両方を引数にとって関数を呼んだ場合、関数は指定されたレイヤの指定された地物の表示式を評価します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>display_expression(layer, feature, [evaluate=true])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - レイヤ（IDまたは名前）</p></li>
<li><p><strong>feature</strong> - 表示式を評価したい地物</p></li>
<li><p><strong>evaluate</strong> - 表示式が評価される必要があるかどうかを指定します。falseとすると、表示式は文字列リテラルで返されるだけです（後で 'eval' 関数を使用して評価する必要があります）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">display_expression(</span> <span class="pre">'streets',</span> <span class="pre">get_feature_by_id('streets',</span> <span class="pre">1))</span></code> → 'streets' レイヤの、IDが1の地物の表示式</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">display_expression('a_layer_id',</span> <span class="pre">&#64;feature,</span> <span class="pre">'False')</span></code> → The display expression of the given feature not evaluated.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="feature-id">
<span id="expression-function-record-and-attributes-feature-id"></span><h3><a class="toc-backref" href="#id518" role="doc-backlink"><span class="section-number">13.2.22.5. </span>feature_id</a><a class="headerlink" href="#feature-id" title="Link to this heading"></a></h3>
<p>Returns a feature's unique ID, or NULL if the feature is not valid.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>feature_id(feature)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>feature</strong> - 地物オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">feature_id(</span> <span class="pre">&#64;feature</span> <span class="pre">)</span></code> → 現在の地物のID</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-record-and-attributes-get-feature-by-id"><span class="std std-ref">get_feature_by_id</span></a></p>
</section>
<section id="get-feature">
<span id="expression-function-record-and-attributes-get-feature"></span><h3><a class="toc-backref" href="#id519" role="doc-backlink"><span class="section-number">13.2.22.6. </span>get_feature</a><a class="headerlink" href="#get-feature" title="Link to this heading"></a></h3>
<p>指定された属性値にマッチした最初の地物を返します。</p>
<p><strong>単独の値のバージョン</strong></p>
<p>レイヤID、および、ひとつの列と値を指定します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>get_feature(layer, attribute, value)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - レイヤ名またはID</p></li>
<li><p><strong>attribute</strong> - マッチに使う属性名</p></li>
<li><p><strong>value</strong> - マッチさせたい属性値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_feature('streets','name','main</span> <span class="pre">st')</span></code> → &quot;name&quot; フィールドの値が &quot;main st&quot; となっている、 &quot;streets&quot; レイヤで最初に見つかった地物</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>マップ型バージョン</strong></p>
<p>レイヤID、および、使用する列（キー）とその値を含むマップ</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>get_feature(layer, attribute)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - レイヤ名またはID</p></li>
<li><p><strong>attribute</strong> - 使用する列と値のペアを含んでいるマップ</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_feature('streets',map('name','main</span> <span class="pre">st','lane_num','4'))</span></code> → &quot;name&quot;フィールドの値が&quot;main st&quot;、&quot;lane_num&quot;フィールドの値が&quot;4&quot;である、&quot;streets&quot;レイヤの最初の地物</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="get-feature-by-id">
<span id="expression-function-record-and-attributes-get-feature-by-id"></span><h3><a class="toc-backref" href="#id520" role="doc-backlink"><span class="section-number">13.2.22.7. </span>get_feature_by_id</a><a class="headerlink" href="#get-feature-by-id" title="Link to this heading"></a></h3>
<p>IDで指定した地物を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>get_feature_by_id(layer, feature_id)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - レイヤ名またはレイヤID</p></li>
<li><p><strong>feature_id</strong> - 戻り値として取得したい地物のID</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_feature_by_id('streets',</span> <span class="pre">1)</span></code> → &quot;streets&quot; レイヤのIDが1の地物</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-record-and-attributes-feature-id"><span class="std std-ref">feature_id</span></a></p>
</section>
<section id="expression-function-record-and-attributes-id">
<span id="id"></span><h3><a class="toc-backref" href="#id521" role="doc-backlink"><span class="section-number">13.2.22.8. </span>$id</a><a class="headerlink" href="#expression-function-record-and-attributes-id" title="Link to this heading"></a></h3>
<p>現在の行の地物IDを返します。<strong>警告: この関数は非推奨です。代わりに&#64;id変数を使うことをお勧めします。</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>$id</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$id</span></code> → 42</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-record-and-attributes-feature-id"><span class="std std-ref">feature_id</span></a>, <a class="reference internal" href="#expression-function-record-and-attributes-get-feature-by-id"><span class="std std-ref">get_feature_by_id</span></a></p>
</section>
<section id="is-attribute-valid">
<span id="expression-function-record-and-attributes-is-attribute-valid"></span><h3><a class="toc-backref" href="#id522" role="doc-backlink"><span class="section-number">13.2.22.9. </span>is_attribute_valid</a><a class="headerlink" href="#is-attribute-valid" title="Link to this heading"></a></h3>
<p>Returns TRUE if a specific feature attribute meets all constraints.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_attribute_valid(attribute, [feature], [layer], [strength])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>attribute</strong> - 属性名</p></li>
<li><p><strong>feature</strong> - 地物。セットされないときは、現在の地物が使われます。</p></li>
<li><p><strong>layer</strong> - ベクタレイヤ。セットされないときは、現在のレイヤが使われます。</p></li>
<li><p><strong>strength</strong> - Set to 'hard' or 'soft' to narrow down to a specific constraint type. If not set, the function will return FALSE if either a hard or a soft constraint fails.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_attribute_valid('HECTARES')</span></code> → TRUE if the current feature's value in the &quot;HECTARES&quot; field meets all constraints.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_attribute_valid('HOUSES',get_feature('my_layer',</span> <span class="pre">'FID',</span> <span class="pre">10),</span> <span class="pre">'my_layer')</span></code> → FALSE if the value in the &quot;HOUSES&quot; field from the feature with &quot;FID&quot;=10 in 'my_layer' fails to meet all constraints.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../working_with_vector/vector_properties.html#constraints"><span class="std std-ref">制約</span></a></p>
</section>
<section id="is-feature-valid">
<span id="expression-function-record-and-attributes-is-feature-valid"></span><h3><a class="toc-backref" href="#id523" role="doc-backlink"><span class="section-number">13.2.22.10. </span>is_feature_valid</a><a class="headerlink" href="#is-feature-valid" title="Link to this heading"></a></h3>
<p>Returns TRUE if a feature meets all field constraints.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_feature_valid([feature], [layer], [strength])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>feature</strong> - 地物。セットされないときは、現在の地物が使われます。</p></li>
<li><p><strong>layer</strong> - ベクタレイヤ。セットされないときは、現在のレイヤが使われます。</p></li>
<li><p><strong>strength</strong> - Set to 'hard' or 'soft' to narrow down to a specific constraint type. If not set, the function will return FALSE if either a hard or a soft constraint fails.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_feature_valid(strength:='hard')</span></code> → TRUE if all fields from the current feature meet their hard constraints.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_feature_valid(get_feature('my_layer',</span> <span class="pre">'FID',</span> <span class="pre">10),</span> <span class="pre">'my_layer')</span></code> → FALSE if all fields from feature with &quot;FID&quot;=10 in 'my_layer' fails to meet all constraints.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../working_with_vector/vector_properties.html#constraints"><span class="std std-ref">制約</span></a></p>
</section>
<section id="is-selected">
<span id="expression-function-record-and-attributes-is-selected"></span><h3><a class="toc-backref" href="#id524" role="doc-backlink"><span class="section-number">13.2.22.11. </span>is_selected</a><a class="headerlink" href="#is-selected" title="Link to this heading"></a></h3>
<p>地物が選択されている場合にTRUEを返します。0個、1個、または2個の引数をとることができ、詳しくは以下の通りです。</p>
<p><strong>引数なしバージョン</strong></p>
<p>引数なしで関数を呼んだ場合、関数は現在のレイヤの現在の地物が選択されている場合にTRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_selected()</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_selected()</span></code> → 現在のレイヤの現在の地物が選択されている場合、TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>引数が地物1つのバージョン</strong></p>
<p>'feature' だけを引数として関数を呼んだ場合、関数は現在のレイヤの指定された地物が選択されている場合にTRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_selected(feature)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>feature</strong> - 選択されているかどうかを確認したい地物</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_selected(&#64;atlas_feature)</span></code> → 現在の地図帳地物が選択されている場合、TRUE。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_selected(get_feature('streets',</span> <span class="pre">'name',</span> <span class="pre">'Main</span> <span class="pre">St.')))</span></code> →アクティブな &quot;streets&quot; レイヤで地物に一意に名前が付けられ、その中で &quot;Main St.&quot; 地物が選択されている場合に TRUE。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_selected(get_feature_by_id('streets',</span> <span class="pre">1))</span></code> → アクティブな &quot;streets&quot; レイヤでid=1 の地物が選択されている場合に TRUE</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>引数が2つのバージョン</strong></p>
<p>レイヤと地物の両方を引数にとって関数を呼んだ場合、関数は指定されたレイヤの指定された地物が選択されている場合にTRUEを返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>is_selected(layer, feature)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - 地物の選択をチェックしたいレイヤ（IDまたはレイヤ名）</p></li>
<li><p><strong>feature</strong> - 選択されているかどうかを確認したい地物</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_selected(</span> <span class="pre">'streets',</span> <span class="pre">get_feature('streets',</span> <span class="pre">'name',</span> <span class="pre">&quot;street_name&quot;))</span></code> → 現在の建物のstreetが選択されていればTRUE（建物レイヤに'street_name'というフィールドがあり、'streets'レイヤにユニークな値を持つ'name'というフィールドがあると仮定している）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_selected(</span> <span class="pre">'streets',</span> <span class="pre">get_feature_by_id('streets',</span> <span class="pre">1))</span></code> → &quot;streets&quot;レイヤの id 1 の地物が選択されている場合に TRUE。</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="maptip">
<span id="expression-function-record-and-attributes-maptip"></span><h3><a class="toc-backref" href="#id525" role="doc-backlink"><span class="section-number">13.2.22.12. </span>maptip</a><a class="headerlink" href="#maptip" title="Link to this heading"></a></h3>
<p>指定された地物のTipを返します。式はデフォルトで評価されます。0個、1個、または2個以上の引数をとることができ、詳しくは以下の通りです。</p>
<p><strong>引数なしバージョン</strong></p>
<p>引数なしで関数を呼んだ場合、関数は現在のレイヤの現在の地物のTipを評価します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>maptip()</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">maptip()</span></code> → 現在のレイヤの現在の地物のTip</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>引数が地物1つのバージョン</strong></p>
<p>地物だけを引数として関数を呼んだ場合、関数は現在のレイヤの指定された地物の表示式を評価します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>maptip(feature)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>feature</strong> - 表示式を評価したい地物</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">maptip(&#64;atlas_feature)</span></code> → 現在の地図帳地物のTip</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>レイヤと地物の引数バージョン</strong></p>
<p>レイヤと地物の両方を引数にとって関数を呼んだ場合、関数は指定されたレイヤの指定された地物の表示式を評価します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>maptip(layer, feature, [evaluate=true])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - レイヤ（IDまたは名前）</p></li>
<li><p><strong>feature</strong> - 表示式を評価したい地物</p></li>
<li><p><strong>evaluate</strong> - 地物のTipが評価される必要があるかどうかを指定します。falseとすると、表示式は文字列リテラルで返されるだけです（後で 'eval_template' 関数を使用して評価する必要があります）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">maptip('streets',</span> <span class="pre">get_feature_by_id('streets',</span> <span class="pre">1))</span></code> →  'streets' レイヤの、IDが1の地物のTip</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maptip('a_layer_id',</span> <span class="pre">&#64;feature,</span> <span class="pre">'False')</span></code> → The maptip of the given feature not evaluated.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="num-selected">
<span id="expression-function-record-and-attributes-num-selected"></span><h3><a class="toc-backref" href="#id526" role="doc-backlink"><span class="section-number">13.2.22.13. </span>num_selected</a><a class="headerlink" href="#num-selected" title="Link to this heading"></a></h3>
<p>指定されたレイヤで選択されている地物の数を返します。デフォルトでは、式が評価されるレイヤ上で動作します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>num_selected([layer=current layer])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - 地物の選択をチェックしたいレイヤ（IDまたはレイヤ名）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">num_selected()</span></code> → 現在のレイヤで選択されている地物の数</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_selected('streets')</span></code> → 'streets' レイヤ上で選択されている地物の数</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="represent-attributes">
<span id="expression-function-record-and-attributes-represent-attributes"></span><h3><a class="toc-backref" href="#id527" role="doc-backlink"><span class="section-number">13.2.22.14. </span>represent_attributes</a><a class="headerlink" href="#represent-attributes" title="Link to this heading"></a></h3>
<p>属性名をキーとし、設定された表現値を値とするマップを返します。属性の表現値は、各属性に設定されているウィジェットタイプに依存します。 0個、1個、またはそれ以上の引数とともに使用することができます。詳細は以下をご覧ください。</p>
<p><strong>引数なしバージョン</strong></p>
<p>パラメータなしで呼び出された場合、この関数は、現在のレイヤの地物の属性の表現を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>represent_attributes()</p></td>
</tr>
<tr class="row-even"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">represent_attributes()</span></code> → 現在の地物の属性の表現。</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>引数が地物1つのバージョン</strong></p>
<p>'feature' パラメータだけで呼び出した場合、関数は現在のレイヤから指定された地物の属性の表現を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>represent_attributes(feature)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>feature</strong> - 表示式を評価したい地物</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">represent_attributes(&#64;atlas_feature)</span></code> → 現在のレイヤから指定された地物の属性の表現。</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>レイヤと地物の引数バージョン</strong></p>
<p>'layer' と 'feature' パラメータで呼び出した場合、関数は指定されたレイヤから指定された地物の属性の表現を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>represent_attributes(layer, feature)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>layer</strong> - レイヤ（IDまたはレイヤ名）。</p></li>
<li><p><strong>feature</strong> - 表示式を評価したい地物</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">represent_attributes('atlas_layer',</span> <span class="pre">&#64;atlas_feature)</span></code> → 指定されたレイヤから指定された地物の属性の表現。</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-record-and-attributes-represent-value"><span class="std std-ref">represent_value</span></a></p>
</section>
<section id="represent-value">
<span id="expression-function-record-and-attributes-represent-value"></span><h3><a class="toc-backref" href="#id528" role="doc-backlink"><span class="section-number">13.2.22.15. </span>represent_value</a><a class="headerlink" href="#represent-value" title="Link to this heading"></a></h3>
<p>フィールド値に設定された表現値を返します。結果はウィジェットのタイプによって異なります。多くの場合、この関数は「バリューマップ」ウィジェットで便利です。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>represent_value(value, [fieldName])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>value</strong> - 評価する値。ほとんどの場合はフィールドを指定。</p></li>
<li><p><strong>fieldName</strong> - ウィジェットの設置が読み込まれるフィールド名。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">represent_value(&quot;field_with_value_map&quot;)</span></code> → バリューマップの値の説明</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">represent_value('static</span> <span class="pre">value',</span> <span class="pre">'field_name')</span></code> → 'field_name' がstatic value であることの説明</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../working_with_vector/vector_properties.html#edit-widgets"><span class="std std-ref">widget types</span></a>, <a class="reference internal" href="#expression-function-record-and-attributes-represent-attributes"><span class="std std-ref">represent_attributes</span></a></p>
</section>
<section id="sqlite-fetch-and-increment">
<span id="expression-function-record-and-attributes-sqlite-fetch-and-increment"></span><h3><a class="toc-backref" href="#id529" role="doc-backlink"><span class="section-number">13.2.22.16. </span>sqlite_fetch_and_increment</a><a class="headerlink" href="#sqlite-fetch-and-increment" title="Link to this heading"></a></h3>
<p>SQLite データベースの自動インクリメントを管理します。</p>
<p>SQLite のデフォルト値はinsert 時にしか適用されず、先読みすることはできません。</p>
<p>このため、データベースに行を作成する前にAUTO_INCREMENTでインクリメントされた主キーを取得することはできません。補足：postgresでは、 <em>デフォルト値を評価する</em> オプションでこれが可能です。</p>
<p>リレーションを持つ新たな地物を追加する際、親地物のフォームがまだ開いていてコミットされていない状態でも、親に子を追加することができると便利です。</p>
<p>この制限を回避するため、gpkg のようなsqliteベースの形式で、この関数を使用してシーケンス値を別のテーブルで管理できます。</p>
<p>シーケンステーブルはシーケンスIDに対してフィルタリングされ（filter_attribute と filter_value）、 id_field の現在の値に1増やした値が返されます。</p>
<p>別のカラムで値を指定する必要がある場合には、default_values マップを使用できます。</p>
<p><strong>注意</strong></p>
<p>この関数はターゲットのSQLiteテーブルを更新します。これは、各属性のデフォルト値設定を使用することが想定されているためです。</p>
<p>データベースのパラメータがレイヤで、レイヤがトランザクションモードの場合、値はトランザクション期間中に一度だけ取得され、キャッシュされて値がインクリメントされます。このため、同じデータベース上で複数のプロセスから並列に作業することは安全ではありません。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>sqlite_fetch_and_increment(database, table, id_field, filter_attribute, filter_value, [default_values])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>database</strong> - SQLiteファイルまたはGeoPackageレイヤへのパス</p></li>
<li><p><strong>table</strong> - シーケンスを管理するテーブルの名前</p></li>
<li><p><strong>id_field</strong> - 現在のid値を含んでいるフィールドの名前</p></li>
<li><p><strong>filter_attribute</strong> - このシーケンスの一意の識別子を含むフィールドの名前。UNIQUEインデックスが必要です。</p></li>
<li><p><strong>filter_value</strong> - シーケンスに使用する名前</p></li>
<li><p><strong>default_values</strong> - テーブルの別カラムのデフォルト値のためのマップオブジェクト。値は全体をクォート記号で括る必要があります。関数も可能です。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sqlite_fetch_and_increment(&#64;layer,</span> <span class="pre">'sequence_table',</span> <span class="pre">'last_unique_id',</span> <span class="pre">'sequence_id',</span> <span class="pre">'global',</span> <span class="pre">map('last_change',</span> <span class="pre">'date(''now'')',</span> <span class="pre">'user',</span> <span class="pre">''''</span> <span class="pre">||</span> <span class="pre">&#64;user_account_name</span> <span class="pre">||</span> <span class="pre">''''))</span></code> → 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqlite_fetch_and_increment(layer_property(&#64;layer,</span> <span class="pre">'path'),</span> <span class="pre">'sequence_table',</span> <span class="pre">'last_unique_id',</span> <span class="pre">'sequence_id',</span> <span class="pre">'global',</span> <span class="pre">map('last_change',</span> <span class="pre">'date(''now'')',</span> <span class="pre">'user',</span> <span class="pre">''''</span> <span class="pre">||</span> <span class="pre">&#64;user_account_name</span> <span class="pre">||</span> <span class="pre">''''))</span></code> → 0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="../introduction/qgis_configuration.html#project-data-source-properties"><span class="std std-ref">データソースプロパティ</span></a> 、 <a class="reference internal" href="../working_with_vector/joins_relations.html#vector-relations"><span class="std std-ref">Setting relations between multiple layers</span></a></p>
</section>
<section id="uuid">
<span id="expression-function-record-and-attributes-uuid"></span><h3><a class="toc-backref" href="#id530" role="doc-backlink"><span class="section-number">13.2.22.17. </span>uuid</a><a class="headerlink" href="#uuid" title="Link to this heading"></a></h3>
<p>Qtの <a class="reference external" href="https://doc.qt.io/qt-5/quuid.html#createUuid">QUuid::createUuid</a> メソッドを使用して、テーブルの各行のUUID（Universally Unique Identifier）を生成します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>uuid([format='WithBraces'])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>format</strong> - UUIDのフォーマット。 'WithBraces' 、 'WithoutBraces' 、または 'Id128'</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uuid()</span></code> → '{0bd2f60f-f157-4a6d-96af-d4ba4cb366a1}'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uuid('WithoutBraces')</span></code> → '0bd2f60f-f157-4a6d-96af-d4ba4cb366a1'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uuid('Id128')</span></code> → '0bd2f60ff1574a6d96afd4ba4cb366a1'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="relations">
<span id="relations-list"></span><span id="index-4"></span><h2><a class="toc-backref" href="#id131" role="doc-backlink"><span class="section-number">13.2.23. </span>リレーション</a><a class="headerlink" href="#relations" title="Link to this heading"></a></h2>
<p>このグループには、このプロジェクトで利用可能な <a class="reference internal" href="../introduction/qgis_configuration.html#project-relations"><span class="std std-ref">リレーション</span></a> のリストとその説明が含まれています。このグループは（例えば <a class="reference internal" href="#expression-function-aggregates-relation-aggregate"><span class="std std-ref">relation_aggregate</span></a> 関数を使って）式を書く際やフォームをカスタマイズする際に、リレーションIDに素早くアクセスすることができます。</p>
</section>
<section id="sensors-functions">
<span id="id71"></span><h2><a class="toc-backref" href="#id132" role="doc-backlink"><span class="section-number">13.2.24. </span>Sensors Functions</a><a class="headerlink" href="#sensors-functions" title="Link to this heading"></a></h2>
<p>This group contains functions to interact with sensors.</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id72">
<ul class="simple">
<li><p><a class="reference internal" href="#sensor-data" id="id531">sensor_data</a></p></li>
</ul>
</nav>
</div>
<section id="sensor-data">
<span id="expression-function-sensors-sensor-data"></span><h3><a class="toc-backref" href="#id531" role="doc-backlink"><span class="section-number">13.2.24.1. </span>sensor_data</a><a class="headerlink" href="#sensor-data" title="Link to this heading"></a></h3>
<p>Returns the last captured value (or values as a map for sensors which report multiple values) from a registered sensor.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>sensor_data(name, [expiration])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>name</strong> - the sensor name</p></li>
<li><p><strong>expiration</strong> - maximum millisecond since last captured value allowed</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sensor_data('geiger_1')</span></code> → '2000'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="string-functions">
<span id="id73"></span><h2><a class="toc-backref" href="#id133" role="doc-backlink"><span class="section-number">13.2.25. </span>文字列関数</a><a class="headerlink" href="#string-functions" title="Link to this heading"></a></h2>
<p>このグループには、文字列を操作する関数が含まれます（置換、大文字に変換など）。</p>
<div class="dropdown admonition">
<p class="admonition-title">関数のリストを表示する／隠す</p>
<nav class="contents toc-columns local" id="id74">
<ul class="simple">
<li><p><a class="reference internal" href="#ascii" id="id532">ascii</a></p></li>
<li><p><a class="reference internal" href="#char" id="id533">char</a></p></li>
<li><p><a class="reference internal" href="#concat" id="id534">concat</a></p></li>
<li><p><a class="reference internal" href="#format" id="id535">format</a></p></li>
<li><p><a class="reference internal" href="#expression-function-string-format-date" id="id536">format_date</a></p></li>
<li><p><a class="reference internal" href="#format-number" id="id537">format_number</a></p></li>
<li><p><a class="reference internal" href="#left" id="id538">left</a></p></li>
<li><p><a class="reference internal" href="#expression-function-string-length" id="id539">length</a></p></li>
<li><p><a class="reference internal" href="#lower" id="id540">lower</a></p></li>
<li><p><a class="reference internal" href="#lpad" id="id541">lpad</a></p></li>
<li><p><a class="reference internal" href="#ltrim" id="id542">ltrim</a></p></li>
<li><p><a class="reference internal" href="#expression-function-string-regexp-match" id="id543">regexp_match</a></p></li>
<li><p><a class="reference internal" href="#regexp-replace" id="id544">regexp_replace</a></p></li>
<li><p><a class="reference internal" href="#regexp-substr" id="id545">regexp_substr</a></p></li>
<li><p><a class="reference internal" href="#replace" id="id546">replace</a></p></li>
<li><p><a class="reference internal" href="#right" id="id547">right</a></p></li>
<li><p><a class="reference internal" href="#rpad" id="id548">rpad</a></p></li>
<li><p><a class="reference internal" href="#rtrim" id="id549">rtrim</a></p></li>
<li><p><a class="reference internal" href="#strpos" id="id550">strpos</a></p></li>
<li><p><a class="reference internal" href="#substr" id="id551">substr</a></p></li>
<li><p><a class="reference internal" href="#title" id="id552">title</a></p></li>
<li><p><a class="reference internal" href="#expression-function-string-to-string" id="id553">to_string</a></p></li>
<li><p><a class="reference internal" href="#trim" id="id554">trim</a></p></li>
<li><p><a class="reference internal" href="#upper" id="id555">upper</a></p></li>
<li><p><a class="reference internal" href="#wordwrap" id="id556">wordwrap</a></p></li>
</ul>
</nav>
</div>
<section id="ascii">
<span id="expression-function-string-ascii"></span><h3><a class="toc-backref" href="#id532" role="doc-backlink"><span class="section-number">13.2.25.1. </span>ascii</a><a class="headerlink" href="#ascii" title="Link to this heading"></a></h3>
<p>文字列の最初の文字のunicode番号を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>ascii(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - unicode番号に変換する文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ascii('Q')</span></code> → 81</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="char">
<span id="expression-function-string-char"></span><h3><a class="toc-backref" href="#id533" role="doc-backlink"><span class="section-number">13.2.25.2. </span>char</a><a class="headerlink" href="#char" title="Link to this heading"></a></h3>
<p>unicode番号に対応した文字を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>char(code)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>code</strong> - unicode番号</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">char(81)</span></code> → 'Q'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="concat">
<span id="expression-function-string-concat"></span><h3><a class="toc-backref" href="#id534" role="doc-backlink"><span class="section-number">13.2.25.3. </span>concat</a><a class="headerlink" href="#concat" title="Link to this heading"></a></h3>
<p>複数の文字列を1つに結合したものを返します。NULL値は空文字列に変換されます。その他の値（数値など）は文字列に変換されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>concat(string1, string2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">concat('sun',</span> <span class="pre">'set')</span></code> → 'sunset'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">concat('a','b','c','d','e')</span></code> → 'abcde'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">concat('Anno</span> <span class="pre">',</span> <span class="pre">1984)</span></code> → 'Anno 1984'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">concat('The</span> <span class="pre">Wall',</span> <span class="pre">NULL)</span></code> → 'The Wall'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>フィールド連結について</strong></p>
<p>文字列やフィールド値の連結には <code class="docutils literal notranslate"><span class="pre">||</span></code> や <code class="docutils literal notranslate"><span class="pre">+</span></code> 演算子を使用することもできますが、これらにはいくつか特性があります。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">+</span></code> 演算子は式の合計も意味するので、整数（フィールドや数値）オペランドがある場合にはエラーを起こしやすく、他の演算子を使用する方が良いでしょう:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;My feature id is: &#39;</span> <span class="o">+</span> <span class="s2">&quot;gid&quot;</span> <span class="o">=&gt;</span> <span class="n">triggers</span> <span class="n">an</span> <span class="n">error</span> <span class="k">as</span> <span class="n">gid</span> <span class="n">returns</span> <span class="n">an</span> <span class="n">integer</span>
</pre></div>
</div>
</li>
<li><p>引数のどれかがNULL値の場合、 <code class="docutils literal notranslate"><span class="pre">||</span></code> や <code class="docutils literal notranslate"><span class="pre">+</span></code> はNULLを返します。NULL値の有無に関わらず、その他の引数の結合を返したい場合には、 <code class="docutils literal notranslate"><span class="pre">concat</span></code> 関数を使用するのが良いでしょう:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;My feature id is: &#39;</span> <span class="o">+</span> <span class="n">NULL</span> <span class="o">==&gt;</span> <span class="n">NULL</span>
<span class="s1">&#39;My feature id is: &#39;</span> <span class="o">||</span> <span class="n">NULL</span> <span class="o">=&gt;</span> <span class="n">NULL</span>
<span class="n">concat</span><span class="p">(</span><span class="s1">&#39;My feature id is: &#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">&#39;My feature id is: &#39;</span>
</pre></div>
</div>
</li>
</ul>
<p>関係する項目: <a class="reference internal" href="#expression-function-operators-concat"><span class="std std-ref">||</span></a> 、 <a class="reference internal" href="#expression-function-operators-plus"><span class="std std-ref">+</span></a></p>
</section>
<section id="format">
<span id="expression-function-string-format"></span><h3><a class="toc-backref" href="#id535" role="doc-backlink"><span class="section-number">13.2.25.4. </span>format</a><a class="headerlink" href="#format" title="Link to this heading"></a></h3>
<p>指定された引数を用いて文字列をフォーマットします。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>format(string, arg1, arg2, ...)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 引数のプレースホルダを含む文字列。プレースホルダには、 %1 、 %2 などを使います。プレースホルダは繰り返し使用できます。最小番号のプレースホルダは arg1 で置き換えられ、次に小さい番号は arg2 で、以下同様です。</p></li>
<li><p><strong>arg</strong> - 任意の型で任意の数の引数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">format('This</span> <span class="pre">%1</span> <span class="pre">a</span> <span class="pre">%2','is',</span> <span class="pre">'test')</span></code> → 'This is a test'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format('This</span> <span class="pre">is</span> <span class="pre">%2','a</span> <span class="pre">bit</span> <span class="pre">unexpected</span> <span class="pre">but</span> <span class="pre">2</span> <span class="pre">is</span> <span class="pre">lowest</span> <span class="pre">number</span> <span class="pre">in</span> <span class="pre">string','normal')</span></code> → 'This is a bit unexpected but 2 is lowest number in string'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-string-format-date">
<span id="id75"></span><h3><a class="toc-backref" href="#id536" role="doc-backlink"><span class="section-number">13.2.25.5. </span>format_date</a><a class="headerlink" href="#expression-function-string-format-date" title="Link to this heading"></a></h3>
<p>日付型または文字列をカスタム書式文字列でフォーマットします。Qtの date/time フォーマット文字列を使用します。詳細は <a class="reference external" href="https://doc.qt.io/qt-5/qdatetime.html#toString">QDateTime::toString</a> を参照してください。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>format_date(datetime, format, [language])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul>
<li><p><strong>datetime</strong> - 日付型、時間型または日付時刻型の値</p></li>
<li><p><strong>format</strong> - 文字列の書式設定に使用する文字列テンプレート</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Expression</p></th>
<th class="head"><p>出力</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>d</p></td>
<td><p>十の位のゼロがない日付（1から31）</p></td>
</tr>
<tr class="row-odd"><td><p>dd</p></td>
<td><p>十の位にゼロのある日付（01から31）</p></td>
</tr>
<tr class="row-even"><td><p>ddd</p></td>
<td><p>短縮形のローカル曜日名（例：'月' から '日'）</p></td>
</tr>
<tr class="row-odd"><td><p>dddd</p></td>
<td><p>長いローカル曜日名（例：'月曜日' から '日曜日'）</p></td>
</tr>
<tr class="row-even"><td><p>M</p></td>
<td><p>十の位のゼロがない月（1から12）</p></td>
</tr>
<tr class="row-odd"><td><p>MM</p></td>
<td><p>十の位にゼロのある月（01から12）</p></td>
</tr>
<tr class="row-even"><td><p>MMM</p></td>
<td><p>短縮形のローカル月名（例：'1月' から '12月'）</p></td>
</tr>
<tr class="row-odd"><td><p>MMMM</p></td>
<td><p>長いローカル月名（例：'1月' から '12月'）</p></td>
</tr>
<tr class="row-even"><td><p>yy</p></td>
<td><p>2桁の年（00から99）</p></td>
</tr>
<tr class="row-odd"><td><p>yyyy</p></td>
<td><p>4桁の年</p></td>
</tr>
</tbody>
</table>
<p>以下の式は、書式文字列の時間部分に使用します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Expression</p></th>
<th class="head"><p>出力</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>h</p></td>
<td><p>十の位のゼロなしの時（0から23、AM/PM表示の場合は1から12）</p></td>
</tr>
<tr class="row-odd"><td><p>hh</p></td>
<td><p>十の位のゼロありの時（00から23、AM/PM表示の場合は01から12）</p></td>
</tr>
<tr class="row-even"><td><p>H</p></td>
<td><p>十の位のゼロなしの時（0から23、AM/PM表示の場合も同様）</p></td>
</tr>
<tr class="row-odd"><td><p>HH</p></td>
<td><p>十の位のゼロありの時（00から23、AM/PM表示の場合も同様）</p></td>
</tr>
<tr class="row-even"><td><p>m</p></td>
<td><p>十の位のゼロなしの分（0から59）</p></td>
</tr>
<tr class="row-odd"><td><p>mm</p></td>
<td><p>十の位のゼロありの分（00から59）</p></td>
</tr>
<tr class="row-even"><td><p>s</p></td>
<td><p>十の位のゼロなしの秒（0から59）</p></td>
</tr>
<tr class="row-odd"><td><p>ss</p></td>
<td><p>十の位のゼロありの秒（00から59）</p></td>
</tr>
<tr class="row-even"><td><p>z</p></td>
<td><p>数字の後に付くゼロなしのミリ秒（0 から 999）</p></td>
</tr>
<tr class="row-odd"><td><p>zzz</p></td>
<td><p>数字の後に付くゼロありのミリ秒（000 から 999）</p></td>
</tr>
<tr class="row-even"><td><p>AP または A</p></td>
<td><p>AM/PM 時間として解釈します。 <em>AP</em> は 'AM' または 'PM' のいずれかです。</p></td>
</tr>
<tr class="row-odd"><td><p>ap または a</p></td>
<td><p>AM/PM 時間として解釈します。 <em>ap</em> は 'am' または 'pm' のいずれかです。</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><strong>language</strong> - 日付をカスタム文字列にフォーマットする際に使用する言語（2文字または3文字の小文字、 <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">ISO 639 言語名コード</a> ）。デフォルトでは現在のQGISユーザーのロケールを使用します</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('2012-05-15','dd.MM.yyyy')</span></code> → '15.05.2012'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('2012-05-15','d</span> <span class="pre">MMMM</span> <span class="pre">yyyy','fr')</span></code> → '15 mai 2012'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('2012-05-15','dddd')</span></code> → 'Tuesday' （現在のロケールが English 版の場合の結果）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('2012-05-15</span> <span class="pre">13:54:20','dd.MM.yy')</span></code> → '15.05.12'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_date('13:54:20','hh:mm</span> <span class="pre">AP')</span></code> → '01:54 午後'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="format-number">
<span id="expression-function-string-format-number"></span><h3><a class="toc-backref" href="#id537" role="doc-backlink"><span class="section-number">13.2.25.6. </span>format_number</a><a class="headerlink" href="#format-number" title="Link to this heading"></a></h3>
<p>3桁毎にロケールの桁区切り文字で区切られた数字を返します。デフォルトでは、現在のQGISユーザーのロケールが使用されます。また、指定された桁数で小数点以下の桁数をそろえます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>format_number(number, [places=0], [language], [omit_group_separators=false], [trim_trailing_zeroes=false])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>number</strong> - フォーマットする数値</p></li>
<li><p><strong>places</strong> - 小数点以下の桁数を表す整数</p></li>
<li><p><strong>language</strong> - 数値を文字列にフォーマットする際に使用する言語（2文字または3文字の小文字、 <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">ISO 639 言語名コード</a> ）。デフォルトでは現在のQGISユーザーのロケールを使用します</p></li>
<li><p><strong>omit_group_separators</strong> - trueに設定すると、グループセパレータは文字列に含まれません</p></li>
<li><p><strong>trim_trailing_zeroes</strong> - trueを指定すると、小数点以下のゼロが文字列から取り除かれます</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">format_number(10000000.332,2)</span></code> → '10,000,000.33' （例えば現在のロケールが English 版の場合の結果）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_number(10000000.332,2,'fr')</span></code> → '10 000 000,33'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="left">
<span id="expression-function-string-left"></span><h3><a class="toc-backref" href="#id538" role="doc-backlink"><span class="section-number">13.2.25.7. </span>left</a><a class="headerlink" href="#left" title="Link to this heading"></a></h3>
<p>文字列の左から <em>n</em> 文字分の部分文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>left(string, length)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 文字列</p></li>
<li><p><strong>length</strong> - 整数値。文字列の左から数えた文字数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">left('Hello</span> <span class="pre">World',5)</span></code> → 'Hello'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-string-length">
<span id="id79"></span><h3><a class="toc-backref" href="#id539" role="doc-backlink"><span class="section-number">13.2.25.8. </span>length</a><a class="headerlink" href="#expression-function-string-length" title="Link to this heading"></a></h3>
<p>文字列の文字数、またはラインストリングジオメトリの長さを返します。</p>
<p><strong>文字列バージョン</strong></p>
<p>文字列の文字数を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>length(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 文字数を数える文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">length('hello')</span></code> → 5</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>ジオメトリバージョン</strong></p>
<p>ラインジオメトリオブジェクトの長さを返します。計算は常にこのジオメトリの空間参照系（SRS）で平面的に計算され、長さの単位はSRSの単位と一致します。これは、プロジェクトの楕円体と距離単位設定にもとづいた楕円体計算が行われる $length 関数とは異なります。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>length(geometry)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>geometry</strong> - ラインジオメトリオブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">length(geom_from_wkt('LINESTRING(0</span> <span class="pre">0,</span> <span class="pre">4</span> <span class="pre">0)'))</span></code> → 4.0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="lower">
<span id="expression-function-string-lower"></span><h3><a class="toc-backref" href="#id540" role="doc-backlink"><span class="section-number">13.2.25.9. </span>lower</a><a class="headerlink" href="#lower" title="Link to this heading"></a></h3>
<p>文字列を小文字に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>lower(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 小文字に変換したい文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lower('HELLO</span> <span class="pre">World')</span></code> → 'hello world'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="lpad">
<span id="expression-function-string-lpad"></span><h3><a class="toc-backref" href="#id541" role="doc-backlink"><span class="section-number">13.2.25.10. </span>lpad</a><a class="headerlink" href="#lpad" title="Link to this heading"></a></h3>
<p>文字列の左側を指定文字で詰め、指定した幅にした文字列を返します。指定した幅が文字列の長さよりも小さい場合、文字列は切り詰められます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>lpad(string, width, fill)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 幅を揃えたい文字列</p></li>
<li><p><strong>width</strong> - 新しい文字列の長さ</p></li>
<li><p><strong>fill</strong> - 余白を詰める文字</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lpad('Hello',</span> <span class="pre">10,</span> <span class="pre">'x')</span></code> → 'xxxxxHello'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lpad('Hello',</span> <span class="pre">3,</span> <span class="pre">'x')</span></code> → 'Hel'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="ltrim">
<span id="expression-function-string-ltrim"></span><h3><a class="toc-backref" href="#id542" role="doc-backlink"><span class="section-number">13.2.25.11. </span>ltrim</a><a class="headerlink" href="#ltrim" title="Link to this heading"></a></h3>
<p>Removes the longest string containing only the specified characters (a space by default) from the start of string.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>ltrim(string, [characters=' '])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 空白を削除したい文字列</p></li>
<li><p><strong>characters</strong> - characters to trim</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ltrim('</span>&#160;&#160; <span class="pre">hello</span> <span class="pre">world</span>&#160; <span class="pre">')</span></code> → 'hello world  '</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ltrim('zzzytest',</span> <span class="pre">'xyz')</span></code> → 'test'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-string-rtrim"><span class="std std-ref">rtrim</span></a>, <a class="reference internal" href="#expression-function-string-trim"><span class="std std-ref">trim</span></a></p>
</section>
<section id="expression-function-string-regexp-match">
<span id="id80"></span><h3><a class="toc-backref" href="#id543" role="doc-backlink"><span class="section-number">13.2.25.12. </span>regexp_match</a><a class="headerlink" href="#expression-function-string-regexp-match" title="Link to this heading"></a></h3>
<p>unicode文字列内で正規表現にマッチする最初の位置を返します。部分文字列が見つからない場合、0を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>regexp_match(input_string, regex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>input_string</strong> - 正規表現に対してテストする文字列</p></li>
<li><p><strong>regex</strong> - テストする正規表現。バックスラッシュは二重にエスケープする必要があります（たとえば、空白文字に一致させる場合は &quot;\\s&quot; 、単語の境界に一致させる場合は &quot;\\b&quot; ）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_match('QGIS</span> <span class="pre">ROCKS','\\sROCKS')</span></code> → 5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_match('Budač','udač\\b')</span></code> → 2</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="regexp-replace">
<span id="expression-function-string-regexp-replace"></span><h3><a class="toc-backref" href="#id544" role="doc-backlink"><span class="section-number">13.2.25.13. </span>regexp_replace</a><a class="headerlink" href="#regexp-replace" title="Link to this heading"></a></h3>
<p>正規表現を用いて置き換えた文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>regexp_replace(input_string, regex, replacement)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>input_string</strong> - 置換対象文字列</p></li>
<li><p><strong>regex</strong> - 置換する正規表現。バックスラッシュ文字は二重にエスケープする必要があります（例：空白文字に一致させるには &quot;\\s&quot; ）</p></li>
<li><p><strong>replacement</strong> - 指定された正規表現のマッチ箇所を置き換える文字列。キャプチャされたグループは、 \\1 や \\2 などを使用して置換文字列内に挿入できます。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_replace('QGIS</span> <span class="pre">SHOULD</span> <span class="pre">ROCK','\\sSHOULD\\s','</span> <span class="pre">DOES</span> <span class="pre">')</span></code> → 'QGIS DOES ROCK'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_replace('ABC123','\\d+','')</span></code> → 'ABC'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_replace('my</span> <span class="pre">name</span> <span class="pre">is</span> <span class="pre">John','(.*)</span> <span class="pre">is</span> <span class="pre">(.*)','\\2</span> <span class="pre">is</span> <span class="pre">\\1')</span></code> → 'John is my name'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="regexp-substr">
<span id="expression-function-string-regexp-substr"></span><h3><a class="toc-backref" href="#id545" role="doc-backlink"><span class="section-number">13.2.25.14. </span>regexp_substr</a><a class="headerlink" href="#regexp-substr" title="Link to this heading"></a></h3>
<p>正規表現にマッチする文字列の一部を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>regexp_substr(input_string, regex)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>input_string</strong> - 検索対象文字列</p></li>
<li><p><strong>regex</strong> - マッチさせる正規表現。バックスラッシュ文字は二重にエスケープする必要があります（例：空白文字に一致させるには &quot;\\s&quot; ）</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">regexp_substr('abc123','(\\d+)')</span></code> → '123'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="replace">
<span id="expression-function-string-replace"></span><h3><a class="toc-backref" href="#id546" role="doc-backlink"><span class="section-number">13.2.25.15. </span>replace</a><a class="headerlink" href="#replace" title="Link to this heading"></a></h3>
<p>文字列を指定した別の文字列、配列またはマップ型オブジェクトで置換した文字列を返します。</p>
<p><strong>文字列・配列バージョン</strong></p>
<p>指定された文字列または文字列の配列を、別の文字列または文字列の配列で置換した文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>replace(string, before, after)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 入力文字列</p></li>
<li><p><strong>before</strong> - 置換対象の文字列または文字列の配列</p></li>
<li><p><strong>after</strong> - 代わりに使用する文字列または文字列の配列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">replace('QGIS</span> <span class="pre">SHOULD</span> <span class="pre">ROCK','SHOULD','DOES')</span></code> → 'QGIS DOES ROCK'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replace('QGIS</span> <span class="pre">ABC',array('A','B','C'),array('X','Y','Z'))</span></code> → 'QGIS XYZ'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replace('QGIS',array('Q','S'),'')</span></code> → 'GI'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>マップ型バージョン</strong></p>
<p>与えられたマップ型を使用して、キーを対となる値で置き換えた文字列を返します。より長いキー文字列が最初に評価されます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>replace(string, map)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 入力文字列</p></li>
<li><p><strong>map</strong> - キーと値のペアを含むマップ型オブジェクト</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">replace('APP</span> <span class="pre">SHOULD</span> <span class="pre">ROCK',map('APP','QGIS','SHOULD','DOES'))</span></code> → 'QGIS DOES ROCK'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replace('forty</span> <span class="pre">two',map('for','4','two','2','forty</span> <span class="pre">two','42'))</span></code> → '42'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="right">
<span id="expression-function-string-right"></span><h3><a class="toc-backref" href="#id547" role="doc-backlink"><span class="section-number">13.2.25.16. </span>right</a><a class="headerlink" href="#right" title="Link to this heading"></a></h3>
<p>文字列の右から <em>n</em> 文字分の部分文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>right(string, length)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 文字列</p></li>
<li><p><strong>length</strong> - 整数値。文字列の右から数えた文字数</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">right('Hello</span> <span class="pre">World',5)</span></code> → 'World'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="rpad">
<span id="expression-function-string-rpad"></span><h3><a class="toc-backref" href="#id548" role="doc-backlink"><span class="section-number">13.2.25.17. </span>rpad</a><a class="headerlink" href="#rpad" title="Link to this heading"></a></h3>
<p>文字列の右側を指定文字で詰め、指定した幅にした文字列を返します。指定した幅が文字列の長さよりも小さい場合、文字列は切り詰められます。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>rpad(string, width, fill)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 幅を揃えたい文字列</p></li>
<li><p><strong>width</strong> - 新しい文字列の長さ</p></li>
<li><p><strong>fill</strong> - 余白を詰める文字</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rpad('Hello',</span> <span class="pre">10,</span> <span class="pre">'x')</span></code> → 'Helloxxxxx'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rpad('Hello',</span> <span class="pre">3,</span> <span class="pre">'x')</span></code> → 'Hel'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="rtrim">
<span id="expression-function-string-rtrim"></span><h3><a class="toc-backref" href="#id549" role="doc-backlink"><span class="section-number">13.2.25.18. </span>rtrim</a><a class="headerlink" href="#rtrim" title="Link to this heading"></a></h3>
<p>Removes the longest string containing only the specified characters (a space by default) from the end of string.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>rtrim(string, [characters=' '])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 空白を削除したい文字列</p></li>
<li><p><strong>characters</strong> - characters to trim</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rtrim('</span>&#160;&#160; <span class="pre">hello</span> <span class="pre">world</span>&#160; <span class="pre">')</span></code> → '   hello world'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rtrim('testxxzx',</span> <span class="pre">'xyz')</span></code> → 'test'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-string-ltrim"><span class="std std-ref">ltrim</span></a>, <a class="reference internal" href="#expression-function-string-trim"><span class="std std-ref">trim</span></a></p>
</section>
<section id="strpos">
<span id="expression-function-string-strpos"></span><h3><a class="toc-backref" href="#id550" role="doc-backlink"><span class="section-number">13.2.25.19. </span>strpos</a><a class="headerlink" href="#strpos" title="Link to this heading"></a></h3>
<p>文字列中で部分文字列が最初にマッチする位置を返します。部分文字列が見つからなければ、0を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>strpos(haystack, needle)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>haystack</strong> - 対象文字列</p></li>
<li><p><strong>needle</strong> - 検索する文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">strpos('HELLO</span> <span class="pre">WORLD','WORLD')</span></code> → 7</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">strpos('HELLO</span> <span class="pre">WORLD','GOODBYE')</span></code> → 0</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="substr">
<span id="expression-function-string-substr"></span><h3><a class="toc-backref" href="#id551" role="doc-backlink"><span class="section-number">13.2.25.20. </span>substr</a><a class="headerlink" href="#substr" title="Link to this heading"></a></h3>
<p>文字列の一部分を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>substr(string, start, [length])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 入力文字列</p></li>
<li><p><strong>start</strong> - 抽出開始位置を表す整数。1から数える。負の値を指定した場合、文字列の最後から数えた位置から開始します</p></li>
<li><p><strong>length</strong> - 抽出する文字列の長さを表す整数。負の値を指定した場合、文字列の末尾から指定された長さ分だけ文字が除かれた文字列を返します。</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">substr('HELLO</span> <span class="pre">WORLD',3,5)</span></code> → 'LLO W'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">substr('HELLO</span> <span class="pre">WORLD',6)</span></code> → ' WORLD'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">substr('HELLO</span> <span class="pre">WORLD',-5)</span></code> → 'WORLD'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">substr('HELLO',3,-1)</span></code> → 'LL'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">substr('HELLO</span> <span class="pre">WORLD',-5,2)</span></code> → 'WO'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">substr('HELLO</span> <span class="pre">WORLD',-5,-1)</span></code> → 'WORL'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="title">
<span id="expression-function-string-title"></span><h3><a class="toc-backref" href="#id552" role="doc-backlink"><span class="section-number">13.2.25.21. </span>title</a><a class="headerlink" href="#title" title="Link to this heading"></a></h3>
<p>文字列の全ての単語をタイトルケース（先頭が大文字で後に小文字が続く）に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>title(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - タイトルケースに変換したい文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">title('hello</span> <span class="pre">WOrld')</span></code> → 'Hello World'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="expression-function-string-to-string">
<span id="id81"></span><h3><a class="toc-backref" href="#id553" role="doc-backlink"><span class="section-number">13.2.25.22. </span>to_string</a><a class="headerlink" href="#expression-function-string-to-string" title="Link to this heading"></a></h3>
<p>数値を文字列に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>to_string(number)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>number</strong> - 整数または実数値。文字列に変換する数値</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_string(123)</span></code> → '123'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="trim">
<span id="expression-function-string-trim"></span><h3><a class="toc-backref" href="#id554" role="doc-backlink"><span class="section-number">13.2.25.23. </span>trim</a><a class="headerlink" href="#trim" title="Link to this heading"></a></h3>
<p>文字列の先頭と末尾から全てのホワイトスペース（空白文字、タブ等）を削除します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>trim(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 空白を削除したい文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trim('</span>&#160;&#160; <span class="pre">hello</span> <span class="pre">world</span>&#160; <span class="pre">')</span></code> → 'hello world'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>関係する項目: <a class="reference internal" href="#expression-function-string-ltrim"><span class="std std-ref">ltrim</span></a>, <a class="reference internal" href="#expression-function-string-rtrim"><span class="std std-ref">rtrim</span></a></p>
</section>
<section id="upper">
<span id="expression-function-string-upper"></span><h3><a class="toc-backref" href="#id555" role="doc-backlink"><span class="section-number">13.2.25.24. </span>upper</a><a class="headerlink" href="#upper" title="Link to this heading"></a></h3>
<p>文字列を大文字に変換します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>upper(string)</p></td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - 大文字に変換したい文字列</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">upper('hello</span> <span class="pre">WOrld')</span></code> → 'HELLO WORLD'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="wordwrap">
<span id="expression-function-string-wordwrap"></span><h3><a class="toc-backref" href="#id556" role="doc-backlink"><span class="section-number">13.2.25.25. </span>wordwrap</a><a class="headerlink" href="#wordwrap" title="Link to this heading"></a></h3>
<p>指定した最大・最小文字数に合わせて改行した文字列を返します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>構文</p></td>
<td><p>wordwrap(string, wrap_length, [delimiter_string])</p>
<p>記号[]は、オプションの引数を意味します。</p>
</td>
</tr>
<tr class="row-even"><td><p>引数</p></td>
<td><ul class="simple">
<li><p><strong>string</strong> - ワードラップしたい文字列</p></li>
<li><p><strong>wrap_length</strong> - 整数。 wrap_length が正の数値の場合、理想的な一行あたりの最大文字数を意味します。負の値の場合、この数字は改行する最小文字数を意味します。</p></li>
<li><p><strong>delimiter_string</strong> - （オプション）改行を行う区切り文字</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>例</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wordwrap('UNIVERSITY</span> <span class="pre">OF</span> <span class="pre">QGIS',13)</span></code> → 'UNIVERSITY OF&lt;br&gt;QGIS'</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wordwrap('UNIVERSITY</span> <span class="pre">OF</span> <span class="pre">QGIS',-3)</span></code> → 'UNIVERSITY&lt;br&gt;OF QGIS'</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="user-expressions">
<h2><a class="toc-backref" href="#id134" role="doc-backlink"><span class="section-number">13.2.26. </span>ユーザー式</a><a class="headerlink" href="#user-expressions" title="Link to this heading"></a></h2>
<p>このグループには、 <a class="reference internal" href="expression.html#user-expressions-functions"><span class="std std-ref">ユーザー保存式</span></a> として保存された式が含まれます。</p>
</section>
<section id="variables">
<span id="expression-variables"></span><h2><a class="toc-backref" href="#id135" role="doc-backlink"><span class="section-number">13.2.27. </span>変数</a><a class="headerlink" href="#variables" title="Link to this heading"></a></h2>
<p>このグループには、アプリケーションやプロジェクトファイル、その他の設定に関連した動的な変数が含まれます。変数が使用できるかどうかは、利用される状況によって異なります。</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/mIconExpressionSelect.png"><img alt="expressionSelect" src="../../../_images/mIconExpressionSelect.png" style="width: 1.5em;" /></a> <sup>式による地物選択</sup> ダイアログから使用</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionCalculateField.png"><img alt="calculateField" src="../../../_images/mActionCalculateField.png" style="width: 1.5em;" /></a> <sup>フィールド計算機</sup> ダイアログから使用</p></li>
<li><p>レイヤプロパティダイアログから使用</p></li>
<li><p>印刷レイアウトから使用</p></li>
</ul>
<p>式の中でこれらの変数を使用するには、変数の先頭に <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> 文字を付ける必要があります（例： <code class="docutils literal notranslate"><span class="pre">&#64;row_number</span></code> ）</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26.3%" />
<col style="width: 73.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>algorithm_id</p></td>
<td><p>アルゴリズムのユニークID</p></td>
</tr>
<tr class="row-odd"><td><p>animation_end_time</p></td>
<td><p>アニメーションの時間範囲全体の終了日時（datetime値）</p></td>
</tr>
<tr class="row-even"><td><p>animation_interval</p></td>
<td><p>アニメーションの時間範囲全体の長さ（interval値）</p></td>
</tr>
<tr class="row-odd"><td><p>animation_start_time</p></td>
<td><p>アニメーションの時間範囲全体の開始日時（datetime値）</p></td>
</tr>
<tr class="row-even"><td><p>atlas_feature</p></td>
<td><p>現在の地図帳地物（地物オブジェクト）</p></td>
</tr>
<tr class="row-odd"><td><p>atlas_featureid</p></td>
<td><p>現在の地図帳地物ID</p></td>
</tr>
<tr class="row-even"><td><p>atlas_featurenumber</p></td>
<td><p>レイアウト内の現在の地図帳地物の番号</p></td>
</tr>
<tr class="row-odd"><td><p>atlas_filename</p></td>
<td><p>現在の地図帳のファイル名</p></td>
</tr>
<tr class="row-even"><td><p>atlas_geometry</p></td>
<td><p>現在の地図帳地物のジオメトリ</p></td>
</tr>
<tr class="row-odd"><td><p>atlas_layerid</p></td>
<td><p>現在の地図帳カバレッジレイヤのID</p></td>
</tr>
<tr class="row-even"><td><p>atlas_layername</p></td>
<td><p>現在の地図帳カバレッジレイヤのレイヤ名</p></td>
</tr>
<tr class="row-odd"><td><p>atlas_pagename</p></td>
<td><p>現在の地図帳のページ名</p></td>
</tr>
<tr class="row-even"><td><p>atlas_totalfeatures</p></td>
<td><p>地図帳地物の総数</p></td>
</tr>
<tr class="row-odd"><td><p>canvas_cursor_point</p></td>
<td><p>キャンバス上の最後のカーソル位置（プロジェクトの地理座標）</p></td>
</tr>
<tr class="row-even"><td><p>cluster_color</p></td>
<td><p>クラスタ内のシンボルの色。シンボルに色が混在している場合はNULL</p></td>
</tr>
<tr class="row-odd"><td><p>cluster_size</p></td>
<td><p>クラスタ内に含まれるシンボル数</p></td>
</tr>
<tr class="row-even"><td><p>current_feature</p></td>
<td><p>属性フォームまたはテーブル行で現在編集中の地物</p></td>
</tr>
<tr class="row-odd"><td><p>current_geometry</p></td>
<td><p>属性フォームまたはテーブル行で現在編集中の地物のジオメトリ</p></td>
</tr>
<tr class="row-even"><td><p>current_parent_feature</p></td>
<td><p>親フォームで現在編集中の地物を表す変数。埋め込みフォームでのみ使用可能。</p></td>
</tr>
<tr class="row-odd"><td><p>current_parent_geometry</p></td>
<td><p>親フォームで現在編集中の地物のジオメトリを表す変数。埋め込みフォームでのみ使用可能。</p></td>
</tr>
<tr class="row-even"><td><p>form_mode</p></td>
<td><p>フォームを使う対象。文字列で AddFeatureMode, SingleEditMode, MultiEditMode, SearchMode, AggregateSearchMode または IdentifyMode のいずれか。</p></td>
</tr>
<tr class="row-odd"><td><p>feature</p></td>
<td><p>評価されている現在の地物。この関数を 'attribute' 関数と共に使用すると、現在の地物の属性値を評価できます。</p></td>
</tr>
<tr class="row-even"><td><p>frame_duration</p></td>
<td><p>各アニメーションフレームの時間の長さ（interval値）</p></td>
</tr>
<tr class="row-odd"><td><p>frame_number</p></td>
<td><p>アニメーション再生時の現在のフレーム番号</p></td>
</tr>
<tr class="row-even"><td><p>frame_rate</p></td>
<td><p>アニメーション再生時の1秒あたりフレーム数</p></td>
</tr>
<tr class="row-odd"><td><p>fullextent_maxx</p></td>
<td><p>全キャンバス領域でのx最大値（全レイヤ）</p></td>
</tr>
<tr class="row-even"><td><p>fullextent_maxy</p></td>
<td><p>全キャンバス領域でのy最大値（全レイヤ）</p></td>
</tr>
<tr class="row-odd"><td><p>fullextent_minx</p></td>
<td><p>全キャンバス領域でのx最小値（全レイヤ）</p></td>
</tr>
<tr class="row-even"><td><p>fullextent_miny</p></td>
<td><p>全キャンバス領域でのy最小値（全レイヤ）</p></td>
</tr>
<tr class="row-odd"><td><p>geometry</p></td>
<td><p>評価されている地物のジオメトリ</p></td>
</tr>
<tr class="row-even"><td><p>geometry_part_count</p></td>
<td><p>レンダリングされる地物のジオメトリパートの数</p></td>
</tr>
<tr class="row-odd"><td><p>geometry_part_num</p></td>
<td><p>レンダリングされる地物の現在のジオメトリパートの番号</p></td>
</tr>
<tr class="row-even"><td><p>geometry_point_count</p></td>
<td><p>レンダリングされるジオメトリ部分のポイントの数</p></td>
</tr>
<tr class="row-odd"><td><p>geometry_point_num</p></td>
<td><p>レンダリングされるジオメトリ部分の現在のポイントの番号</p></td>
</tr>
<tr class="row-even"><td><p>geometry_ring_num</p></td>
<td><p>レンダリングされる地物の現在のジオメトリのリング番号（ポリゴン地物のみ）。外側リングの番号は0です。</p></td>
</tr>
<tr class="row-odd"><td><p>grid_axis</p></td>
<td><p>現在のグリッド注記の軸（経度は'x' 、緯度は'y' ）</p></td>
</tr>
<tr class="row-even"><td><p>grid_number</p></td>
<td><p>現在のグリッド注記の値</p></td>
</tr>
<tr class="row-odd"><td><p>id</p></td>
<td><p>評価されている現在の地物のID</p></td>
</tr>
<tr class="row-even"><td><p>item_id</p></td>
<td><p>レイアウトアイテムのユーザID（ユニークとは限らない）</p></td>
</tr>
<tr class="row-odd"><td><p>item_uuid</p></td>
<td><p>レイアウトアイテムのユニークID</p></td>
</tr>
<tr class="row-even"><td><p>layer</p></td>
<td><p>現在のレイヤ</p></td>
</tr>
<tr class="row-odd"><td><p>layer_crs</p></td>
<td><p>現在のレイヤのCRSのAuthority ID</p></td>
</tr>
<tr class="row-even"><td><p>layer_crs_ellipsoid</p></td>
<td><p>The ellipsoid Authority ID of the current layer CRS</p></td>
</tr>
<tr class="row-odd"><td><p>layer_cursor_point</p></td>
<td><p>Point geometry under the mouse position in map canvas, in active layer's CRS</p></td>
</tr>
<tr class="row-even"><td><p>layer_id</p></td>
<td><p>現在のレイヤID</p></td>
</tr>
<tr class="row-odd"><td><p>layer_ids</p></td>
<td><p>現在のプロジェクト内の全てのレイヤIDのリスト</p></td>
</tr>
<tr class="row-even"><td><p>layer_name</p></td>
<td><p>現在のレイヤ名</p></td>
</tr>
<tr class="row-odd"><td><p>layers</p></td>
<td><p>現在のプロジェクト内の全てのレイヤのリスト</p></td>
</tr>
<tr class="row-even"><td><p>layout_dpi</p></td>
<td><p>印刷レイアウトの解像度（DPI）</p></td>
</tr>
<tr class="row-odd"><td><p>layout_name</p></td>
<td><p>印刷レイアウトの名前</p></td>
</tr>
<tr class="row-even"><td><p>layout_numpages</p></td>
<td><p>印刷レイアウトのページ数</p></td>
</tr>
<tr class="row-odd"><td><p>layout_page</p></td>
<td><p>印刷レイアウト内の現在のアイテムのページ番号</p></td>
</tr>
<tr class="row-even"><td><p>layout_pageheight</p></td>
<td><p>レイアウトのアクティブなページの高さ（標準のページサイズの場合はmm単位、カスタムのページサイズの場合は使用されている単位）</p></td>
</tr>
<tr class="row-odd"><td><p>layout_pageoffsets</p></td>
<td><p>各ページの上端のY座標を要素とする配列。ページのサイズが変化することがある場合に、この変数を使用することでページ上にアイテムを動的に配置できます。</p></td>
</tr>
<tr class="row-even"><td><p>layout_pagewidth</p></td>
<td><p>レイアウトのアクティブなページの幅（標準のページサイズの場合はmm単位、カスタムのページサイズの場合は使用されている単位）</p></td>
</tr>
<tr class="row-odd"><td><p>legend_column_count</p></td>
<td><p>凡例のカラム数</p></td>
</tr>
<tr class="row-even"><td><p>legend_filter_by_map</p></td>
<td><p>凡例の内容が地図の範囲と連動するかどうか</p></td>
</tr>
<tr class="row-odd"><td><p>legend_filter_out_atlas</p></td>
<td><p>凡例の内容が地図帳の範囲と連動するかどうか</p></td>
</tr>
<tr class="row-even"><td><p>legend_split_layers</p></td>
<td><p>凡例のレイヤアイテムが複数列に分割される可能性があるかどうか</p></td>
</tr>
<tr class="row-odd"><td><p>legend_title</p></td>
<td><p>凡例のタイトル</p></td>
</tr>
<tr class="row-even"><td><p>legend_wrap_string</p></td>
<td><p>凡例のテキストを改行する文字（文字列）</p></td>
</tr>
<tr class="row-odd"><td><p>map_crs</p></td>
<td><p>現在の地図の座標参照系</p></td>
</tr>
<tr class="row-even"><td><p>map_crs_acronym</p></td>
<td><p>現在の地図の座標参照系の頭字語</p></td>
</tr>
<tr class="row-odd"><td><p>map_crs_definition</p></td>
<td><p>現在の地図の座標参照系の完全な定義</p></td>
</tr>
<tr class="row-even"><td><p>map_crs_description</p></td>
<td><p>現在の地図の座標参照系の名前</p></td>
</tr>
<tr class="row-odd"><td><p>map_crs_ellipsoid</p></td>
<td><p>現在の地図の座標参照系の回転楕円体</p></td>
</tr>
<tr class="row-even"><td><p>map_crs_proj4</p></td>
<td><p>現在の地図の座標参照系のproj4定義</p></td>
</tr>
<tr class="row-odd"><td><p>map_crs_projection</p></td>
<td><p>地図のCRSで使用される投影法の記述名（例： 'Albers Equal Area' ）</p></td>
</tr>
<tr class="row-even"><td><p>map_crs_wkt</p></td>
<td><p>現在の地図の座標参照系のWKT定義</p></td>
</tr>
<tr class="row-odd"><td><p>map_end_time</p></td>
<td><p>地図の時系列範囲の終了値（datetime値）</p></td>
</tr>
<tr class="row-even"><td><p>map_extent</p></td>
<td><p>現在の地図の範囲を表すジオメトリ</p></td>
</tr>
<tr class="row-odd"><td><p>map_extent_center</p></td>
<td><p>地図範囲の中心を表すポイント地物</p></td>
</tr>
<tr class="row-even"><td><p>map_extent_height</p></td>
<td><p>地図の現在の高さ</p></td>
</tr>
<tr class="row-odd"><td><p>map_extent_width</p></td>
<td><p>地図の現在の幅</p></td>
</tr>
<tr class="row-even"><td><p>map_id</p></td>
<td><p>現在の地図の出力対象のID。スクリーンの場合はcanvas、印刷レイアウトの場合はアイテムID</p></td>
</tr>
<tr class="row-odd"><td><p>map_interval</p></td>
<td><p>地図の時系列範囲の長さ（interval値）</p></td>
</tr>
<tr class="row-even"><td><p>map_layer_ids</p></td>
<td><p>地図で表示中のレイヤIDのリスト</p></td>
</tr>
<tr class="row-odd"><td><p>map_layers</p></td>
<td><p>地図で表示中のレイヤのリスト</p></td>
</tr>
<tr class="row-even"><td><p>map_rotation</p></td>
<td><p>地図の現在の回転</p></td>
</tr>
<tr class="row-odd"><td><p>map_scale</p></td>
<td><p>地図の現在の縮尺</p></td>
</tr>
<tr class="row-even"><td><p>map_start_time</p></td>
<td><p>地図の時系列範囲の開始値（datetime値）</p></td>
</tr>
<tr class="row-odd"><td><p>map_units</p></td>
<td><p>地図の距離単位</p></td>
</tr>
<tr class="row-even"><td><p>model_path</p></td>
<td><p>現在のモデルの（ファイル名を含んだ）フルパス（または、モデルがプロジェクトに埋め込まれている場合にはプロジェクトのパス）</p></td>
</tr>
<tr class="row-odd"><td><p>model_folder</p></td>
<td><p>現在のモデルがあるフォルダ（または、モデルがプロジェクトに埋め込まれている場合にはプロジェクトのフォルダ）</p></td>
</tr>
<tr class="row-even"><td><p>model_name</p></td>
<td><p>現在のモデルの名前</p></td>
</tr>
<tr class="row-odd"><td><p>model_group</p></td>
<td><p>現在のモデルのグループ</p></td>
</tr>
<tr class="row-even"><td><p>notification_message</p></td>
<td><p>データプロバイダから送信された通知メッセージの内容（プロバイダからの通知によってトリガされるアクションでのみ利用可）</p></td>
</tr>
<tr class="row-odd"><td><p>parent</p></td>
<td><p><a class="reference internal" href="#aggregates-function"><span class="std std-ref">集約</span></a> 関数でフィルタリングする際に、親レイヤの現在の地物を参照しその属性とジオメトリにアクセスできる変数</p></td>
</tr>
<tr class="row-even"><td><p>project_abstract</p></td>
<td><p>プロジェクトのメタデータより取得した、プロジェクトの要約</p></td>
</tr>
<tr class="row-odd"><td><p>project_area_units</p></td>
<td><p>ジオメトリの面積計算で使用する、現在のプロジェクトの面積単位</p></td>
</tr>
<tr class="row-even"><td><p>project_author</p></td>
<td><p>プロジェクトのメタデータより取得した、プロジェクトの制作者</p></td>
</tr>
<tr class="row-odd"><td><p>project_basename</p></td>
<td><p>現在のプロジェクトのファイル名のベース名（パスと拡張子なしの名前）</p></td>
</tr>
<tr class="row-even"><td><p>project_creation_date</p></td>
<td><p>プロジェクトのメタデータより取得した、プロジェクトの作成日</p></td>
</tr>
<tr class="row-odd"><td><p>project_crs</p></td>
<td><p>プロジェクトの座標参照系</p></td>
</tr>
<tr class="row-even"><td><p>project_crs_arconym</p></td>
<td><p>プロジェクトの座標参照系の頭字語</p></td>
</tr>
<tr class="row-odd"><td><p>project_crs_definition</p></td>
<td><p>プロジェクトの座標参照系の完全な定義</p></td>
</tr>
<tr class="row-even"><td><p>project_crs_description</p></td>
<td><p>プロジェクトの座標参照系の名前</p></td>
</tr>
<tr class="row-odd"><td><p>project_crs_ellipsoid</p></td>
<td><p>プロジェクトの座標参照系の回転楕円体</p></td>
</tr>
<tr class="row-even"><td><p>project_crs_proj4</p></td>
<td><p>プロジェクトの座標参照系のproj4定義</p></td>
</tr>
<tr class="row-odd"><td><p>project_crs_wkt</p></td>
<td><p>プロジェクトの座標参照系のWKT（well known text）定義</p></td>
</tr>
<tr class="row-even"><td><p>project_distance_units</p></td>
<td><p>ジオメトリの長さや距離計算で使用する、現在のプロジェクトの距離単位</p></td>
</tr>
<tr class="row-odd"><td><p>project_ellipsoid</p></td>
<td><p>ジオメトリの測地面積や測地距離の計算で使用する、現在のプロジェクトの回転楕円体の名前</p></td>
</tr>
<tr class="row-even"><td><p>project_filename</p></td>
<td><p>現在のプロジェクトのファイル名</p></td>
</tr>
<tr class="row-odd"><td><p>project_folder</p></td>
<td><p>現在のプロジェクトのフォルダ</p></td>
</tr>
<tr class="row-even"><td><p>project_home</p></td>
<td><p>現在のプロジェクトのホームパス</p></td>
</tr>
<tr class="row-odd"><td><p>project_identifier</p></td>
<td><p>プロジェクトのメタデータより取得した、プロジェクトの識別子</p></td>
</tr>
<tr class="row-even"><td><p>project_keywords</p></td>
<td><p>プロジェクトのメタデータより取得した、プロジェクトのキーワード</p></td>
</tr>
<tr class="row-odd"><td><p>project_last_saved</p></td>
<td><p>プロジェクトが最後に保存された日時</p></td>
</tr>
<tr class="row-even"><td><p>project_path</p></td>
<td><p>現在のプロジェクトのフルパス（ファイル名を含む）</p></td>
</tr>
<tr class="row-odd"><td><p>project_title</p></td>
<td><p>現在のプロジェクトのタイトル</p></td>
</tr>
<tr class="row-even"><td><p>project_units</p></td>
<td><p>プロジェクトCRSの長さ単位</p></td>
</tr>
<tr class="row-odd"><td><p>qgis_locale</p></td>
<td><p>現在のQGISの言語ロケール</p></td>
</tr>
<tr class="row-even"><td><p>qgis_os_name</p></td>
<td><p>現在のOS名（例： 'windows' 、 'linux' 、 'osx' ）</p></td>
</tr>
<tr class="row-odd"><td><p>qgis_platform</p></td>
<td><p>QGISプラットフォーム： 'desktop' または 'server'</p></td>
</tr>
<tr class="row-even"><td><p>qgis_release_name</p></td>
<td><p>現在のQGISリリース名</p></td>
</tr>
<tr class="row-odd"><td><p>qgis_short_version</p></td>
<td><p>現在のQGISバージョンの短縮文字列</p></td>
</tr>
<tr class="row-even"><td><p>qgis_version</p></td>
<td><p>現在のQGISバージョンの文字列</p></td>
</tr>
<tr class="row-odd"><td><p>qgis_version_no</p></td>
<td><p>現在のQGISバージョンの番号</p></td>
</tr>
<tr class="row-even"><td><p>row_number</p></td>
<td><p>現在の行の番号を格納します</p></td>
</tr>
<tr class="row-odd"><td><p>snapping_results</p></td>
<td><p>地物のデジタイジング中にスナップした結果へのアクセスを提供します（地物の追加時のみ利用可）</p></td>
</tr>
<tr class="row-even"><td><p>scale_value</p></td>
<td><p>現在のスケールバーの距離の値</p></td>
</tr>
<tr class="row-odd"><td><p>selected_file_path</p></td>
<td><p>外部ストレージシステムにファイルをアップロードする際に、ファイルセレクタウィジェットによって選択されたファイルのパス</p></td>
</tr>
<tr class="row-even"><td><p>symbol_angle</p></td>
<td><p>地物の描画に使用されるシンボルの角度（マーカーシンボルのみで有効）</p></td>
</tr>
<tr class="row-odd"><td><p>symbol_color</p></td>
<td><p>地物の描画に使用されるシンボルの色</p></td>
</tr>
<tr class="row-even"><td><p>symbol_count</p></td>
<td><p>このシンボルで表現されている地物の数（印刷レイアウトの凡例でのみ有効）</p></td>
</tr>
<tr class="row-odd"><td><p>symbol_frame</p></td>
<td><p>The frame number (for animated symbols only)</p></td>
</tr>
<tr class="row-even"><td><p>symbol_id</p></td>
<td><p>シンボルの内部ID（印刷レイアウトの凡例でのみ有効）</p></td>
</tr>
<tr class="row-odd"><td><p>symbol_label</p></td>
<td><p>シンボルのラベル（ユーザー定義ラベルもしくはデフォルトの自動生成ラベル。印刷レイアウトの凡例でのみ有効）</p></td>
</tr>
<tr class="row-even"><td><p>symbol_layer_count</p></td>
<td><p>シンボル内のシンボルレイヤの総数</p></td>
</tr>
<tr class="row-odd"><td><p>symbol_layer_index</p></td>
<td><p>現在のシンボルレイヤのインデックス</p></td>
</tr>
<tr class="row-even"><td><p>symbol_marker_column</p></td>
<td><p>マーカーの列数（ポイントパターン塗りつぶしでのみ有効）</p></td>
</tr>
<tr class="row-odd"><td><p>symbol_marker_row</p></td>
<td><p>マーカーの行数（ポイントパターン塗りつぶしでのみ有効）</p></td>
</tr>
<tr class="row-even"><td><p>user_account_name</p></td>
<td><p>現在のユーザーのOSアカウント名</p></td>
</tr>
<tr class="row-odd"><td><p>user_full_name</p></td>
<td><p>現在のユーザーのOSユーザー名</p></td>
</tr>
<tr class="row-even"><td><p>value</p></td>
<td><p>現在の値</p></td>
</tr>
<tr class="row-odd"><td><p>vector_tile_zoom</p></td>
<td><p>レンダリングされている地図のベクトルタイルの正確なズームレベル（現在の地図の縮尺から導出される）。通常は [0, 20] の間の値。&#64;zoom_level とは異なり、この変数は浮動小数点値であり、2つの整数のズームレベルの間の値を補間するために使用できます。</p></td>
</tr>
<tr class="row-even"><td><p>with_variable</p></td>
<td><p>式の中で使用するための変数を設定することで、同じ値を繰り返し計算することを避けられます。</p></td>
</tr>
<tr class="row-odd"><td><p>zoom_level</p></td>
<td><p>レンダリングされている地図のベクトルタイルのズームレベル（現在の地図の縮尺から導出される）。通常は [0, 20] の間の値。</p></td>
</tr>
</tbody>
</table>
<p><strong>例</strong></p>
<ul>
<li><p>印刷レイアウトにおいて、地図アイテムの中心のX座標を返します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">(</span> <span class="n">map_get</span><span class="p">(</span> <span class="n">item_variables</span><span class="p">(</span> <span class="s1">&#39;map1&#39;</span><span class="p">),</span> <span class="s1">&#39;map_extent_center&#39;</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>現在のレイヤの各地物について、自身と交差する airport 地物の数を返します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>aggregate( layer:=&#39;airport&#39;, aggregate:=&#39;count&#39;, expression:=&quot;code&quot;,
               filter:=intersects( $geometry, geometry( @parent ) ) )
</pre></div>
</div>
</li>
<li><p>ラインの最初にスナップしたポイントの object_id を取得します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">with_variable</span><span class="p">(</span>
  <span class="s1">&#39;first_snapped_point&#39;</span><span class="p">,</span>
  <span class="n">array_first</span><span class="p">(</span> <span class="nd">@snapping_results</span> <span class="p">),</span>
  <span class="n">attribute</span><span class="p">(</span>
    <span class="n">get_feature_by_id</span><span class="p">(</span>
      <span class="n">map_get</span><span class="p">(</span> <span class="nd">@first_snapped_point</span><span class="p">,</span> <span class="s1">&#39;layer&#39;</span> <span class="p">),</span>
      <span class="n">map_get</span><span class="p">(</span> <span class="nd">@first_snapped_point</span><span class="p">,</span> <span class="s1">&#39;feature_id&#39;</span> <span class="p">)</span>
    <span class="p">),</span>
    <span class="s1">&#39;object_id&#39;</span>
  <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="recent-functions">
<h2><a class="toc-backref" href="#id136" role="doc-backlink"><span class="section-number">13.2.28. </span>最近の関数</a><a class="headerlink" href="#recent-functions" title="Link to this heading"></a></h2>
<p>このグループには、最近使った関数が含まれます。関数の利用のコンテクスト（地物選択、フィールド計算、一般など）に応じて、最近適用した式は対応するリスト（上限10個）に追加され、最近使ったものから順にリストに並びます。これにより、以前に使用した関数を素早く探し出して再適用することが簡単にできます。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="expression.html" class="btn btn-neutral float-left" title="13.1. 式" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../style_library/index.html" class="btn btn-neutral float-right" title="14. スタイルライブラリ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">最終更新: 2024 6月 25, 05:29 +0900
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages:
Expected French translation link for https://docs.qgis.org/3.28/en/docs/user_manual/print_composer/overview_composer.html
would return https://app.transifex.com/qgis/qgis-documentation/translate/#fr/aa6d8bc653526d38b295ca94bf8eee5e
with the md5 value of "github#qgis/QGIS-Documentation#release_3.28#locale/en/LC_MESSAGES/docs/user_manual/print_composer/overview_composer.po"-->
<!--Make sure that mismatching language codes between Transifex and Sphinx are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: 3.34
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/user_manual/expressions/functions_list.html">en</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/cs/docs/user_manual/expressions/functions_list.html">cs</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/de/docs/user_manual/expressions/functions_list.html">de</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/es/docs/user_manual/expressions/functions_list.html">es</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/fr/docs/user_manual/expressions/functions_list.html">fr</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/hu/docs/user_manual/expressions/functions_list.html">hu</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/it/docs/user_manual/expressions/functions_list.html">it</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/expressions/functions_list.html">ja</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ko/docs/user_manual/expressions/functions_list.html">ko</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/lt/docs/user_manual/expressions/functions_list.html">lt</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/nl/docs/user_manual/expressions/functions_list.html">nl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_BR/docs/user_manual/expressions/functions_list.html">pt_BR</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_PT/docs/user_manual/expressions/functions_list.html">pt_PT</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ro/docs/user_manual/expressions/functions_list.html">ro</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ru/docs/user_manual/expressions/functions_list.html">ru</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zh-Hans/docs/user_manual/expressions/functions_list.html">zh-Hans</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/ja/docs/user_manual/expressions/functions_list.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/ja/docs/user_manual/expressions/functions_list.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/expressions/functions_list.html">3.34</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.28/ja/docs/user_manual/expressions/functions_list.html">3.28</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.22/ja/docs/user_manual/expressions/functions_list.html">3.22</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/ja/docs/user_manual/expressions/functions_list.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/ja/docs/user_manual/expressions/functions_list.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/ja/docs/user_manual/expressions/functions_list.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/ja/docs/user_manual/expressions/functions_list.html">2.18</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/user_manual/expressions/functions_list.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://app.transifex.com/qgis/qgis-documentation/translate/#ja/03ab421d95ab25ed4ee826554136e80b" target="_blank" rel="noopener noreferrer">Translate Page</a>
          </dd>
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/ja" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/3.34" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/3.34" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/release-3_34" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>