<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>25.2. ユーザー認証ワークフロー &mdash; QGIS Documentation  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/qgis_docs.css?v=5415a924" />
      <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/user_manual/auth_system/auth_workflows.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../../_static/translations.js?v=4dbe4bdc"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" />
    <link rel="next" title="26. GRASS GIS の統合" href="../grass_integration/grass_integration.html" />
    <link rel="prev" title="25.1. 認証システムの概要" href="auth_overview.html" />
  <meta name="description" content="QGIS 3.34 documentation: 25.2. ユーザー認証ワークフロー">
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   

          
          
          <a href="../../index.html" class="icon icon-home">
            QGIS Documentation
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.34
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">ユーザ向け</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">QGIS Desktopユーザーガイド／マニュアル (QGIS 3.34)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../preamble/preamble.html">1. はじめに</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/foreword.html">2. 序文</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/conventions.html">3. 記述ルール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/features.html">4. 機能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/getting_started.html">5. 最初のステップ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/project_files.html">6. プロジェクトファイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_gui.html">7. QGISのユーザインタフェース</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/browser.html">8. ブラウザパネル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_configuration.html">9. QGISの設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_projections/working_with_projections.html">10. 投影法の操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../map_views/index.html">11. 地図の可視化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/general_tools.html">12. 一般ツール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expressions/index.html">13. 式でレベルアップ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style_library/index.html">14. スタイルライブラリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../managing_data_source/index.html">15. データソースの管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector/index.html">16. ベクタデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_raster/index.html">17. ラスタデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_mesh/mesh.html">18. メッシュデータの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector_tiles/vector_tiles.html">19. ベクタタイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_point_clouds/point_clouds.html">20. 点群の操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_3d_tiles/3d_tiles.html">21. 3Dタイルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../print_composer/index.html">22. 地図のレイアウト</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_ogc/ogc_client_support.html">23. OGC / ISOプロトコルの操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_gps/index.html">24. GPSデータの操作</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">25. 認証システム</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="auth_overview.html">25.1. 認証システムの概要</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">25.2. ユーザー認証ワークフロー</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#http-s-authentication">25.2.1. HTTP（S）認証</a></li>
<li class="toctree-l4"><a class="reference internal" href="#database-authentication">25.2.2. データベース認証</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pki-authentication">25.2.3. PKI認証</a></li>
<li class="toctree-l4"><a class="reference internal" href="#handling-bad-layers">25.2.4. 不正レイヤの取り扱い</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changing-authentication-config-id">25.2.5. 認証の設定のIDを変更する</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qgis-server-support">25.2.6. QGISサーバーのサポート</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ssl-server-exceptions">25.2.7. SSLサーバーの例外</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../grass_integration/grass_integration.html">26. GRASS GIS の統合</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing/index.html">27. QGIS プロセシングフレームワーク</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing_algs/index.html">28. プロセシングプロバイダとアルゴリズム</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">29. プラグイン</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/help_and_support.html">30. ヘルプとサポート</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/contributors.html">31. 協力者</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/index.html">32. 付録</a></li>
<li class="toctree-l2"><a class="reference internal" href="../literature_web/literature_and_web_references.html">33. 文献とWeb参照</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Serverガイド／マニュアル (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_manual/index.html">トレーニングマニュアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">やさしい GIS 入門</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ドキュメント執筆者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">ドキュメント作成のガイドライン</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">開発者向け</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyqgis_developer_cookbook/index.html">PyQGISクックブック (QGIS 3.34)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">開発者ガイド</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">QGISユーザガイド</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">25. </span>認証システム</a></li>
      <li class="breadcrumb-item active"><span class="section-number">25.2. </span>ユーザー認証ワークフロー</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/user_manual/auth_system/auth_workflows.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="auth_overview.html" class="btn btn-neutral float-left" title="25.1. 認証システムの概要" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../grass_integration/grass_integration.html" class="btn btn-neutral float-right" title="26. GRASS GIS の統合" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div><div class="admonition important">
<p class="admonition-title">重要</p>
<p>翻訳は <a class="reference external" href="https://qgis.org/en/site/getinvolved/translate.html#becoming-a-translator">あなたが参加できる</a> コミュニティの取り組みです。このページは現在 100.00% 翻訳されています。</p>
</div>
</div></blockquote>
<section id="user-authentication-workflows">
<span id="authentication-workflow"></span><h1><span class="section-number">25.2. </span>ユーザー認証ワークフロー<a class="headerlink" href="#user-authentication-workflows" title="Link to this heading"></a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#http-s-authentication" id="id23">HTTP（S）認証</a></p></li>
<li><p><a class="reference internal" href="#database-authentication" id="id24">データベース認証</a></p></li>
<li><p><a class="reference internal" href="#pki-authentication" id="id25">PKI認証</a></p>
<ul>
<li><p><a class="reference internal" href="#authorities" id="id26">認証局</a></p></li>
<li><p><a class="reference internal" href="#identities" id="id27">アイデンティティ</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#handling-bad-layers" id="id28">不正レイヤの取り扱い</a></p></li>
<li><p><a class="reference internal" href="#changing-authentication-config-id" id="id29">認証の設定のIDを変更する</a></p></li>
<li><p><a class="reference internal" href="#qgis-server-support" id="id30">QGISサーバーのサポート</a></p></li>
<li><p><a class="reference internal" href="#ssl-server-exceptions" id="id31">SSLサーバーの例外</a></p></li>
</ul>
</nav>
<figure class="align-center" id="id2">
<span id="figure-authusage"></span><img alt="../../../_images/auth-user-usage.png" src="../../../_images/auth-user-usage.png" />
<figcaption>
<p><span class="caption-number">図 25.19 </span><span class="caption-text">一般的なユーザーのワークフロー</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="http-s-authentication">
<h2><a class="toc-backref" href="#id23" role="doc-backlink"><span class="section-number">25.2.1. </span>HTTP（S）認証</a><a class="headerlink" href="#http-s-authentication" title="Link to this heading"></a></h2>
<p>最も一般的なリソース接続の1つは、HTTP(S)を介して例えばWebマッピングサーバーで、認証方式のプラグインは多くの場合に接続のこれらのタイプのために機能します。方法プラグインは、HTTPリクエスト・オブジェクトにアクセスし、要求、ならびにそのヘッダの両方を操作できます。これにより、インターネットベースの認証の多くの形態が可能になります。標準のユーザー名/パスワードを使用してHTTP(S)経由で接続するときは、認証方法は接続時にHTTP BASIC認証を試みます。</p>
<figure class="align-center" id="id3">
<span id="figure-auth-https"></span><img alt="../../../_images/auth-http-basic-wms.png" src="../../../_images/auth-http-basic-wms.png" />
<figcaption>
<p><span class="caption-number">図 25.20 </span><span class="caption-text">HTTP BASICのためのWMS接続の設定</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="database-authentication">
<h2><a class="toc-backref" href="#id24" role="doc-backlink"><span class="section-number">25.2.2. </span>データベース認証</a><a class="headerlink" href="#database-authentication" title="Link to this heading"></a></h2>
<p>データベースリソースへの接続は一般的に <code class="docutils literal notranslate"><span class="pre">key=value</span></code> のペアとして保存され、認証設定を使用 <em>しない</em> 場合は、ユーザー名と（オプションで）パスワードが暴露されます。認証システムを使うよう設定した場合、<code class="docutils literal notranslate"><span class="pre">key=value</span></code> は認証情報の抽象化された表現になります（例 <code class="docutils literal notranslate"><span class="pre">authfg=81t21b9</span></code>。</p>
<figure class="align-center" id="id4">
<span id="figure-auth-database"></span><img alt="../../../_images/auth-db-ssl-pki.png" src="../../../_images/auth-db-ssl-pki.png" />
<figcaption>
<p><span class="caption-number">図 25.21 </span><span class="caption-text">PostgresのPKI付SSLの接続を設定します</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="pki-authentication">
<h2><a class="toc-backref" href="#id25" role="doc-backlink"><span class="section-number">25.2.3. </span>PKI認証</a><a class="headerlink" href="#pki-authentication" title="Link to this heading"></a></h2>
<p>認証システム内のPKIコンポーネントを設定するときは、データベースにコンポーネントをインポートしたり、ファイルシステムに保存されているコンポーネントファイルを参照するオプションがあります。このような成分が頻繁に変更、又はここでコンポーネントは、システム管理者によって置換される場合、後者は有用であり得ます。いずれの場合では、データベース内の秘密鍵にアクセスするために必要なすべてのパスフレーズを保存する必要があります。</p>
<figure class="align-center" id="id5">
<span id="figure-auth-pki-config"></span><img alt="../../../_images/auth-pki-config.png" src="../../../_images/auth-pki-config.png" />
<figcaption>
<p><span class="caption-number">図 25.22 </span><span class="caption-text">PKI設定ワークフロー</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>すべてのPKIコンポーネントは、<strong>証明書マネージャ</strong> 内の個別のエディタで管理することができます。このエディタは、QGISの <cite>オプション</cite> ダイアログ（<span class="menuselection">設定 ► オプション</span>）の <span class="guilabel">認証</span> タブで <span class="guilabel">証明書を管理</span> ボタンをクリックしてアクセスすることができます。</p>
<figure class="align-center" id="id6">
<span id="figure-auth-pki-certif"></span><img alt="../../../_images/auth-open-Certificate-manager.png" src="../../../_images/auth-open-Certificate-manager.png" />
<figcaption>
<p><span class="caption-number">図 25.23 </span><span class="caption-text">証明書マネージャを開く</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<p><span class="guilabel">証明書マネージャ</span> には、<strong>Identities</strong>、<strong>サーバ</strong>、<strong>認証局</strong> のエディタがあります。これらはそれぞれ独自のタブに含まれており、上記のワークフロー・チャートの中で遭遇する順番で以下に説明します。タブの順番は、ワークフローに慣れてきたら、頻繁にアクセスするエディタに相対するものです。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>認証システムの編集はすべて認証データベースに即座に書き込まれるため、変更を保存するために <span class="guilabel">オプション</span> ダイアログの <span class="guilabel">OK</span> ボタンをクリックする必要がありません。これは、オプションダイアログの他の設定とは異なります。</p>
</div>
<section id="authorities">
<h3><a class="toc-backref" href="#id26" role="doc-backlink"><span class="section-number">25.2.3.1. </span>認証局</a><a class="headerlink" href="#authorities" title="Link to this heading"></a></h3>
<p>QGISの <strong>オプション</strong> ダイアログの <strong>認証</strong> タブから、 <strong>証明書マネージャ</strong> 中の <strong>認証局</strong> タブから入手できる証明機関（CA）を管理できます。</p>
<p>上記ワークフローチャートで参照されるように、最初のステップは、インポートまたはCASのファイルを参照することです。このステップはオプションで、商用証明書ベンダーからの証明書のように、PKIの信頼チェーンがオペレーティングシステム（OS）にインストールされているルートCAから発している場合は不要です。認証ルートCAがOSの信頼されたルートCAでない場合は、インポートするか、そのファイルシステムパスが参照されている必要があります。（不明な場合はシステム管理者に問い合わせてください。）</p>
<figure class="align-center" id="id7">
<span id="figure-auth-pki-editor"></span><img alt="../../../_images/auth-editor-authorities.png" src="../../../_images/auth-editor-authorities.png" />
<figcaption>
<p><span class="caption-number">図 25.24 </span><span class="caption-text">認証局エディタ</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>デフォルトでは、OSのルートCAが利用可能ですが、その信頼設定は継承されません。特にOSのルートCAのポリシーが調整された場合は、証明書の信頼ポリシー設定を確認する必要があります。有効期限が切れた証明書は、特に信頼ポリシーを上書きしない限り、信頼されない設定になり、安全なサーバー接続に使用されません。証明書用のQGISが検出可能な信頼チェーンを見るには、その証明書を選択し、 <a class="reference internal" href="../../../_images/metadata.png"><img alt="metadata" src="../../../_images/metadata.png" style="width: 1.5em;" /></a> :sup:<a href="#id1"><span class="problematic" id="id2">`</span></a>証明書の情報を表示`をクリックします。</p>
<figure class="align-center" id="id8">
<span id="figure-auth-pki-info"></span><img alt="../../../_images/auth-authority-imported_cert-info-chain.png" src="../../../_images/auth-authority-imported_cert-info-chain.png" />
<figcaption>
<p><span class="caption-number">図 25.25 </span><span class="caption-text">証明書情報ダイアログ</span><a class="headerlink" href="#id8" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>チェーン内で選択した証明書の <span class="guilabel">信頼ポリシー</span> <a class="reference internal" href="../../../_images/selectstring.png"><img alt="selectString" src="../../../_images/selectstring.png" style="width: 2.5em;" /></a> を編集することができます。選択した証明書に対する信頼ポリシーの変更は、選択した証明書 <em>ごと</em> に <a class="reference internal" href="../../../_images/mActionFileSave.png"><img alt="fileSave" src="../../../_images/mActionFileSave.png" style="width: 1.5em;" /></a> <sup>データベースに証明書信頼ポリシーの変更を保存します</sup> ボタンがクリックされない限り、データベースに保存されません。ダイアログを閉じても、ポリシーの変更は適用 <strong>されません</strong>。</p>
<figure class="align-center" id="id9">
<span id="figure-auth-pki-policy"></span><img alt="../../../_images/auth-authority-edit-trust_save-not-close.png" src="../../../_images/auth-authority-edit-trust_save-not-close.png" />
<figcaption>
<p><span class="caption-number">図 25.26 </span><span class="caption-text">信頼ポリシーの変更を保存する</span><a class="headerlink" href="#id9" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>セキュアな接続のために信頼されるフィルタのCA、両方の中間証明書とルート証明書を、確認またはクリックすることで、デフォルトの信頼ポリシーを変更できます <a class="reference internal" href="../../../_images/mActionTransformSettings.png"><img alt="transformSettings" src="../../../_images/mActionTransformSettings.png" style="width: 1.5em;" /></a> を <strong>オプション</strong> ボタンを押します。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>デフォルトの信頼ポリシーを変更すると、安全な接続で問題が発生する可能性があります。</p>
</div>
<figure class="align-center" id="id10">
<span id="figure-auth-pki-options"></span><img alt="../../../_images/auth-editor-authorities_utilities-menu.png" src="../../../_images/auth-editor-authorities_utilities-menu.png" />
<figcaption>
<p><span class="caption-number">図 25.27 </span><span class="caption-text">当局のオプションメニュー</span><a class="headerlink" href="#id10" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>CAをインポートしたり、複数のCAが含まれているファイルからファイルシステムパスを保存したり、個々のCAをインポートすることができます。複数のCAチェーンの証明が含まれているファイルの標準PEM形式は、ファイルの一番下にルート証明書を持っており、すべてはその後、ファイルの先頭の方に、上記の子証明書に署名しました。</p>
<p>CA証明書のインポート]ダイアログボックスが順序に関係なく、ファイル内のすべてのCA証明書を見つけ、また、（彼らの信頼ポリシーを上書きしたい場合には）無効とみなされた証明書をインポートするオプションを提供していますでしょう。インポート時に信頼ポリシーを上書きするか、後でそれを  <strong>当局</strong> エディタ内で行うことができます。</p>
<figure class="align-center" id="id11">
<span id="figure-auth-pki-import"></span><img alt="../../../_images/auth-authority-import.png" src="../../../_images/auth-authority-import.png" />
<figcaption>
<p><span class="caption-number">図 25.28 </span><span class="caption-text">証明書のインポート]ダイアログ</span><a class="headerlink" href="#id11" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><span class="guilabel">PEMのtext</span> フィールドに証明書情報を貼り付ける場合、暗号化された証明書がサポートされていないことに注意してください。</p>
</div>
</section>
<section id="identities">
<h3><a class="toc-backref" href="#id27" role="doc-backlink"><span class="section-number">25.2.3.2. </span>アイデンティティ</a><a class="headerlink" href="#identities" title="Link to this heading"></a></h3>
<p><span class="guilabel">証明書マネージャ</span> <strong>認証</strong> QGIS <strong>オプション</strong> ダイアログのタブ <span class="guilabel">アイデンティティ</span> タブでから入手できるクライアントIDのバンドルを管理できます。アイデンティティは、別々のファイルとして、または単一「バンドル」のファイルに結合のいずれか、PKI対応サービスに対して、あなたを認証し、通常のクライアント証明書と秘密鍵で構成するものです。バンドルまたは秘密鍵は、多くの場合、パスフレーズで保護されています。</p>
<p>一度何らかの証明機関（CA）をインポートされると、必要に応じて認証データベースに任意のアイデンティティバンドルをインポートできます。アイデンティティを保存したくない場合は、個別の認証設定の中でそのコンポーネントファイルシステムパスを参照できます。</p>
<figure class="align-center" id="id12">
<span id="figure-auth-pki-identities"></span><img alt="../../../_images/auth-editor-identities.png" src="../../../_images/auth-editor-identities.png" />
<figcaption>
<p><span class="caption-number">図 25.29 </span><span class="caption-text">アイデンティティエディタ</span><a class="headerlink" href="#id12" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>アイデンティティ・バンドルをインポートする場合、パスフレーズで保護または非保護することができ、かつ信頼チェーンを形成するCA証明書を含めることができます。トラストチェーンの認定は、ここではインポートされません。 <span class="guilabel">機関</span> タブ下でそれらは別途追加できます。</p>
<p>インポート時には、バンドルの証明書と秘密鍵は、鍵の保管は、QGISのマスターパスワードを使用して暗号化し、データベースに保存されます。データベースから記憶された束のその後の使用は、マスターパスワードの入力を必要とします。</p>
<p>個人のアイデンティティは、PEM / DER（.PEM / .DER）とPKCS＃12からなるバンドル（.P12 / .PFX）コンポーネントがサポートされています。キーまたはバンドルがパスフレーズで保護されている場合は、パスワードをインポートする前にコンポーネントを検証する必要があります。バンドル内のクライアント証明書が無効である場合同様に、バンドルをインポートすることはできません（例えば、その効果的な日付はまだ開始されていないか、経過しています）。</p>
<figure class="align-center" id="id13">
<span id="figure-auth-pki-identities-import"></span><img alt="../../../_images/auth-identity-import_paths.png" src="../../../_images/auth-identity-import_paths.png" />
<figcaption>
<p><span class="caption-number">図 25.30 </span><span class="caption-text">PEM / DERのアイデンティティのインポート</span><a class="headerlink" href="#id13" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id14">
<span id="figure-auth-pki-identities-import-2"></span><img alt="../../../_images/auth-identity-import_bundle-valid.png" src="../../../_images/auth-identity-import_bundle-valid.png" />
<figcaption>
<p><span class="caption-number">図 25.31 </span><span class="caption-text">PKCS#12 identity import</span><a class="headerlink" href="#id14" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="handling-bad-layers">
<h2><a class="toc-backref" href="#id28" role="doc-backlink"><span class="section-number">25.2.4. </span>不正レイヤの取り扱い</a><a class="headerlink" href="#handling-bad-layers" title="Link to this heading"></a></h2>
<p>時折、プロジェクトファイルと一緒に保存された認証設定IDが、おそらく現在の認証データベースがプロジェクトが最後に保存されたときと異なったり資格情報の不一致のせいで、もはや有効ではありません。このような場合には <span class="guilabel">不正レイヤ処理</span> ダイアログがQGISの起動時に表示されます。</p>
<figure class="align-center" id="id15">
<span id="figure-auth-pki-badlayers"></span><img alt="../../../_images/auth-handle-bad-layers.png" src="../../../_images/auth-handle-bad-layers.png" />
<figcaption>
<p><span class="caption-number">図 25.32 </span><span class="caption-text">認証で不正レイヤを処理する</span><a class="headerlink" href="#id15" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>データソースは、それに関連付けられた認証設定のIDを持つことが判明した場合、それを編集できます。そうすることで、自動的にテキストエディタでプロジェクトファイルを開くと、文字列の編集と同じように多くのデータソース文字列を編集します。</p>
<figure class="align-center" id="id16">
<span id="figure-auth-pki-badlayers-edit"></span><img alt="../../../_images/auth-handle-bad-layers-edit.png" src="../../../_images/auth-handle-bad-layers-edit.png" />
<figcaption>
<p><span class="caption-number">図 25.33 </span><span class="caption-text">不正レイヤの認証設定IDを編集します</span><a class="headerlink" href="#id16" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="changing-authentication-config-id">
<h2><a class="toc-backref" href="#id29" role="doc-backlink"><span class="section-number">25.2.5. </span>認証の設定のIDを変更する</a><a class="headerlink" href="#changing-authentication-config-id" title="Link to this heading"></a></h2>
<p>リソースへのアクセスに関連する認証設定IDの変更が必要な場合があります。これが便利な場合があります:</p>
<ul class="simple">
<li><p><strong>リソースの認証設定IDが無効になっている</strong>: これは、認証データベースを切り替えたときに、新しい設定をリソースに関連付けられたIDに合わせる必要がある場合に発生することがあります。</p></li>
<li><p><strong>共有プロジェクトファイル</strong>: 共有ファイルサーバーなどを介してユーザー間でプロジェクトを共有することを意図している場合、リソースに関連付けられた7文字（<strong>a-z</strong> や <strong>0-9</strong> を含む）を <em>predefine</em> が可能です。そして、個々のユーザーは、リソースの認証情報に特化した認証設定のIDを変更します。プロジェクトが開かれたとき、IDは認証データベースで見つかりますが、認証情報はユーザーごとに異なります。</p></li>
</ul>
<figure class="align-center" id="id17">
<span id="figure-auth-id"></span><img alt="../../../_images/auth-change-config-id.png" src="../../../_images/auth-change-config-id.png" />
<figcaption>
<p><span class="caption-number">図 25.34 </span><span class="caption-text">レイヤーの認証設定ID（ロック解除された黄色のテキストフィールド）を変更します</span><a class="headerlink" href="#id17" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>認証設定IDを変更することは高度な操作と考えられ、なぜそれが必要であるかの完全な知識を持ってのみ行われるべきです。IDを編集するのに先立ってIDのテキストフィールドのロックを解除するためにクリックされる必要のあるロックボタンがあるのはこのためです。</p>
</div>
</section>
<section id="qgis-server-support">
<h2><a class="toc-backref" href="#id30" role="doc-backlink"><span class="section-number">25.2.6. </span>QGISサーバーのサポート</a><a class="headerlink" href="#qgis-server-support" title="Link to this heading"></a></h2>
<p>認証設定を持っているレイヤーがあるプロジェクトファイルをQGISサーバー中の地図の基礎として使用する場合は、QGISでそれらのリソースをロードするために必要な追加の設定手順がいくつかあります：</p>
<ul class="simple">
<li><p>認証データベースが利用できるようにする必要があります</p></li>
<li><p>認証データベースのマスターパスワードが利用できるようにする必要があります</p></li>
</ul>
<p>認証システムをインスタンス化する際、Serverはアクティブな <a class="reference internal" href="../introduction/qgis_configuration.html#user-profiles"><span class="std std-ref">user profile</span></a> に <code class="file docutils literal notranslate"><span class="pre">qgis-auth.db</span></code> ファイルを作成または使用するか、<code class="docutils literal notranslate"><span class="pre">QGIS_AUTH_DB_DIR_PATH</span></code> 環境変数で定義したディレクトリを使用します。その場合、環境変数を使用して、サーバーのユーザーが読み取り/書き込み権限を持ち、ウェブアクセス可能なディレクトリ内にないディレクトリを定義してください。</p>
<p>サーバーにマスターパスワードを渡すには、サーバー・プロセスのユーザーが読み込み可能なファイルシステム上のパスにファイルの最初の行にそれを書くと <code class="docutils literal notranslate"><span class="pre">QGIS_AUTH_PASSWORD_FILE</span></code> 環境変数を使用して定義されました。サーバーのプロセスのユーザーによってのみ読めるようファイルを制限し、ウェブアクセス可能なディレクトリ内のファイルを保存しないように確認してください。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">QGIS_AUTH_PASSWORD_FILE</span></code> 変数は、アクセス後すぐにサーバー環境から削除されます。</p>
</div>
</section>
<section id="ssl-server-exceptions">
<h2><a class="toc-backref" href="#id31" role="doc-backlink"><span class="section-number">25.2.7. </span>SSLサーバーの例外</a><a class="headerlink" href="#ssl-server-exceptions" title="Link to this heading"></a></h2>
<figure class="align-center" id="id18">
<span id="figure-auth-server"></span><img alt="../../../_images/auth-ssl-config.png" src="../../../_images/auth-ssl-config.png" />
<figcaption>
<p><span class="caption-number">図 25.35 </span><span class="caption-text">SSLサーバーの例外</span><a class="headerlink" href="#id18" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>QGISの <strong>オプション</strong> ダイアログの <strong>認証</strong> セクション中の <strong>サーバー</strong> タブから、SSLサーバーの設定および例外を管理できます。</p>
<p>SSLサーバーへの接続時に時々、SSL「握手」や、サーバーの証明書でエラーがあります。これらのエラーを無視するか、例外としてSSLサーバー構成を作成できます。これは、Webブラウザを使用してSSLエラーをどのように上書きできるかに似ていますが、より細かく制御しています。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>サーバーとクライアントの間で全体のSSLの設定の完全な知識を持っていない限り、SSLのサーバー構成を作成しないでください。代わりに、サーバー管理者に問題を報告してください。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>一部のPKIのセットアップは、SSLサーバー証明書を検証するために使用するチェーンよりも、クライアントのアイデンティティを検証するために完全に異なるCAの信頼チェーンを使用します。このような状況では、接続するサーバー用に作成された任意の構成は、必ずしもあなたのクライアントのアイデンティティの検証の問題を解決しないだろう、自分のクライアントIDの発行者またはサーバー管理者だけが問題を解決できます。</p>
</div>
<p><a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="symbologyAdd" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> ボタンをクリックすることにより、SSLサーバーの設定を事前に設定できます。SSLエラーが接続時に発生しますが <strong>SSLエラー</strong> ダイアログが表示されたときに代わりに、設定を追加できます（ここではエラーは一時的に無視されるか、またはデータベースに保存されて無視できます）：</p>
<figure class="align-center" id="id19">
<span id="figure-auth-server-config"></span><img alt="../../../_images/auth-server-exception.png" src="../../../_images/auth-server-exception.png" />
<figcaption>
<p><span class="caption-number">図 25.36 </span><span class="caption-text">手動で設定を追加</span><a class="headerlink" href="#id19" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id20">
<span id="figure-auth-server-error"></span><img alt="../../../_images/auth-server-error-add-exception.png" src="../../../_images/auth-server-error-add-exception.png" />
<figcaption>
<p><span class="caption-number">図 25.37 </span><span class="caption-text">SSLエラー時の設定を追加</span><a class="headerlink" href="#id20" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>SSLの設定がデータベースに保存されれば、編集したり削除できます。</p>
<figure class="align-center" id="id21">
<span id="figure-auth-server-ssl"></span><img alt="../../../_images/auth-editor-servers.png" src="../../../_images/auth-editor-servers.png" />
<figcaption>
<p><span class="caption-number">図 25.38 </span><span class="caption-text">既存のSSL設定</span><a class="headerlink" href="#id21" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id22">
<span id="figure-auth-server-ssledit"></span><img alt="../../../_images/auth-server-edit.png" src="../../../_images/auth-server-edit.png" />
<figcaption>
<p><span class="caption-number">図 25.39 </span><span class="caption-text">既存のSSL設定を編集します</span><a class="headerlink" href="#id22" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>SSL設定を事前に行いたい場合で、インポートダイアログがサーバーの接続に対応していない場合は、以下のコードを実行することで、<strong>Python Console</strong> 経由で手動で接続をトリガーできます（<cite>https://bugreports.qt-project.org</cite> をサーバーのURLに置き換えてください）:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qgis.PyQt.QtNetwork</span> <span class="kn">import</span> <span class="n">QNetworkRequest</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtCore</span> <span class="kn">import</span> <span class="n">QUrl</span>
<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsNetworkAccessManager</span>

<span class="n">req</span> <span class="o">=</span> <span class="n">QNetworkRequest</span><span class="p">(</span><span class="n">QUrl</span><span class="p">(</span><span class="s1">&#39;https://bugreports.qt-project.org&#39;</span><span class="p">))</span>
<span class="n">reply</span> <span class="o">=</span> <span class="n">QgsNetworkAccessManager</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
</pre></div>
</div>
<p>これにより、何かエラーが発生した場合はSSLエラーダイアログが開き、設定をデータベースに保存することを選択できます。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="auth_overview.html" class="btn btn-neutral float-left" title="25.1. 認証システムの概要" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../grass_integration/grass_integration.html" class="btn btn-neutral float-right" title="26. GRASS GIS の統合" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">最終更新: 2024 5月 30, 01:33 +0900
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages:
Expected French translation link for https://docs.qgis.org/3.28/en/docs/user_manual/print_composer/overview_composer.html
would return https://app.transifex.com/qgis/qgis-documentation/translate/#fr/aa6d8bc653526d38b295ca94bf8eee5e
with the md5 value of "github#qgis/QGIS-Documentation#release_3.28#locale/en/LC_MESSAGES/docs/user_manual/print_composer/overview_composer.po"-->
<!--Make sure that mismatching language codes between Transifex and Sphinx are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: 3.34
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/en/docs/user_manual/auth_system/auth_workflows.html">en</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/cs/docs/user_manual/auth_system/auth_workflows.html">cs</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/de/docs/user_manual/auth_system/auth_workflows.html">de</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/es/docs/user_manual/auth_system/auth_workflows.html">es</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/fr/docs/user_manual/auth_system/auth_workflows.html">fr</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/hu/docs/user_manual/auth_system/auth_workflows.html">hu</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/it/docs/user_manual/auth_system/auth_workflows.html">it</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/auth_system/auth_workflows.html">ja</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ko/docs/user_manual/auth_system/auth_workflows.html">ko</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/lt/docs/user_manual/auth_system/auth_workflows.html">lt</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/nl/docs/user_manual/auth_system/auth_workflows.html">nl</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_BR/docs/user_manual/auth_system/auth_workflows.html">pt_BR</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/pt_PT/docs/user_manual/auth_system/auth_workflows.html">pt_PT</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ro/docs/user_manual/auth_system/auth_workflows.html">ro</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ru/docs/user_manual/auth_system/auth_workflows.html">ru</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zh-Hans/docs/user_manual/auth_system/auth_workflows.html">zh-Hans</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/ja/docs/user_manual/auth_system/auth_workflows.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/ja/docs/user_manual/auth_system/auth_workflows.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/ja/docs/user_manual/auth_system/auth_workflows.html">3.34</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.28/ja/docs/user_manual/auth_system/auth_workflows.html">3.28</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.22/ja/docs/user_manual/auth_system/auth_workflows.html">3.22</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/ja/docs/user_manual/auth_system/auth_workflows.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/ja/docs/user_manual/auth_system/auth_workflows.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/ja/docs/user_manual/auth_system/auth_workflows.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/ja/docs/user_manual/auth_system/auth_workflows.html">2.18</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/3.34/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.34/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/user_manual/auth_system/auth_workflows.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://app.transifex.com/qgis/qgis-documentation/translate/#ja/587347fa4a0b5b1385421104ae714de0" target="_blank" rel="noopener noreferrer">Translate Page</a>
          </dd>
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/ja" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/3.34" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/3.34" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/release-3_34" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>